!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=43)}([function(t,e,i){const{EntityRef:n,EntitySet:r,EntityObject:o}=i(31);t.exports={World:i(32),System:i(16),Component:i(14),Entity:i(9),EntityRef:n,EntitySet:r,EntityObject:o}},function(t,e,i){(function(t,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",s="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",u="[object Array]",h="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Object]",v="[object RegExp]",_="[object Set]",b="[object String]",x="[object Symbol]",w="[object WeakMap]",T="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",M="[object Uint16Array]",k="[object Uint32Array]",R=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,B=RegExp(F.source),j=RegExp(N.source),G=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,V=RegExp(Y.source),K=/^\s+/,q=/\s/,$=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/[()=,{}\[\]\/\s]/,et=/\\(\\)?/g,it=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,rt=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ht=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,dt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ft="[\\ud800-\\udfff]",mt="["+pt+"]",gt="["+dt+"]",yt="\\d+",vt="[\\u2700-\\u27bf]",_t="[a-z\\xdf-\\xf6\\xf8-\\xff]",bt="[^\\ud800-\\udfff"+pt+yt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",xt="\\ud83c[\\udffb-\\udfff]",wt="[^\\ud800-\\udfff]",Tt="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ct="(?:"+_t+"|"+bt+")",Pt="(?:"+Et+"|"+bt+")",It="(?:"+gt+"|"+xt+")"+"?",At="[\\ufe0e\\ufe0f]?"+It+("(?:\\u200d(?:"+[wt,Tt,St].join("|")+")[\\ufe0e\\ufe0f]?"+It+")*"),Ot="(?:"+[vt,Tt,St].join("|")+")"+At,Mt="(?:"+[wt+gt+"?",gt,Tt,St,ft].join("|")+")",kt=RegExp("['’]","g"),Rt=RegExp(gt,"g"),Dt=RegExp(xt+"(?="+xt+")|"+Mt+At,"g"),Lt=RegExp([Et+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[mt,Et,"$"].join("|")+")",Pt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[mt,Et+Ct,"$"].join("|")+")",Et+"?"+Ct+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Et+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt,Ot].join("|"),"g"),Ft=RegExp("[\\u200d\\ud800-\\udfff"+dt+"\\ufe0e\\ufe0f]"),Nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jt=-1,Gt={};Gt[E]=Gt[C]=Gt[P]=Gt[I]=Gt[A]=Gt[O]=Gt["[object Uint8ClampedArray]"]=Gt[M]=Gt[k]=!0,Gt[l]=Gt[u]=Gt[T]=Gt[h]=Gt[S]=Gt[c]=Gt[d]=Gt[p]=Gt[m]=Gt[g]=Gt[y]=Gt[v]=Gt[_]=Gt[b]=Gt[w]=!1;var Ut={};Ut[l]=Ut[u]=Ut[T]=Ut[S]=Ut[h]=Ut[c]=Ut[E]=Ut[C]=Ut[P]=Ut[I]=Ut[A]=Ut[m]=Ut[g]=Ut[y]=Ut[v]=Ut[_]=Ut[b]=Ut[x]=Ut[O]=Ut["[object Uint8ClampedArray]"]=Ut[M]=Ut[k]=!0,Ut[d]=Ut[p]=Ut[w]=!1;var zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,Xt=parseInt,Wt="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,Vt=Wt||Yt||Function("return this")(),Kt=e&&!e.nodeType&&e,qt=Kt&&"object"==typeof n&&n&&!n.nodeType&&n,$t=qt&&qt.exports===Kt,Qt=$t&&Wt.process,Zt=function(){try{var t=qt&&qt.require&&qt.require("util").types;return t||Qt&&Qt.binding&&Qt.binding("util")}catch(t){}}(),Jt=Zt&&Zt.isArrayBuffer,te=Zt&&Zt.isDate,ee=Zt&&Zt.isMap,ie=Zt&&Zt.isRegExp,ne=Zt&&Zt.isSet,re=Zt&&Zt.isTypedArray;function oe(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function se(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(n,s,i(s),t)}return n}function ae(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function le(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function ue(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function he(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}function ce(t,e){return!!(null==t?0:t.length)&&xe(t,e,0)>-1}function de(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function pe(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function fe(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function me(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function ge(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function ye(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var ve=Ee("length");function _e(t,e,i){var n;return i(t,(function(t,i,r){if(e(t,i,r))return n=i,!1})),n}function be(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function xe(t,e,i){return e==e?function(t,e,i){var n=i-1,r=t.length;for(;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):be(t,Te,i)}function we(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function Te(t){return t!=t}function Se(t,e){var i=null==t?0:t.length;return i?Ie(t,e)/i:NaN}function Ee(t){return function(e){return null==e?void 0:e[t]}}function Ce(t){return function(e){return null==t?void 0:t[e]}}function Pe(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function Ie(t,e){for(var i,n=-1,r=t.length;++n<r;){var o=e(t[n]);void 0!==o&&(i=void 0===i?o:i+o)}return i}function Ae(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function Oe(t){return t?t.slice(0,Ke(t)+1).replace(K,""):t}function Me(t){return function(e){return t(e)}}function ke(t,e){return pe(e,(function(e){return t[e]}))}function Re(t,e){return t.has(e)}function De(t,e){for(var i=-1,n=t.length;++i<n&&xe(e,t[i],0)>-1;);return i}function Le(t,e){for(var i=t.length;i--&&xe(e,t[i],0)>-1;);return i}function Fe(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}var Ne=Ce({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Be=Ce({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function je(t){return"\\"+zt[t]}function Ge(t){return Ft.test(t)}function Ue(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ze(t,e){return function(i){return t(e(i))}}function He(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i];a!==e&&a!==s||(t[i]=s,o[r++]=i)}return o}function Xe(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function We(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}function Ye(t){return Ge(t)?function(t){var e=Dt.lastIndex=0;for(;Dt.test(t);)++e;return e}(t):ve(t)}function Ve(t){return Ge(t)?function(t){return t.match(Dt)||[]}(t):function(t){return t.split("")}(t)}function Ke(t){for(var e=t.length;e--&&q.test(t.charAt(e)););return e}var qe=Ce({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var $e=function t(e){var i,n=(e=null==e?Vt:$e.defaults(Vt.Object(),e,$e.pick(Vt,Bt))).Array,r=e.Date,q=e.Error,dt=e.Function,pt=e.Math,ft=e.Object,mt=e.RegExp,gt=e.String,yt=e.TypeError,vt=n.prototype,_t=dt.prototype,bt=ft.prototype,xt=e["__core-js_shared__"],wt=_t.toString,Tt=bt.hasOwnProperty,St=0,Et=(i=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Ct=bt.toString,Pt=wt.call(ft),It=Vt._,At=mt("^"+wt.call(Tt).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=$t?e.Buffer:void 0,Mt=e.Symbol,Dt=e.Uint8Array,Ft=Ot?Ot.allocUnsafe:void 0,zt=ze(ft.getPrototypeOf,ft),Wt=ft.create,Yt=bt.propertyIsEnumerable,Kt=vt.splice,qt=Mt?Mt.isConcatSpreadable:void 0,Qt=Mt?Mt.iterator:void 0,Zt=Mt?Mt.toStringTag:void 0,ve=function(){try{var t=to(ft,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ce=e.clearTimeout!==Vt.clearTimeout&&e.clearTimeout,Qe=r&&r.now!==Vt.Date.now&&r.now,Ze=e.setTimeout!==Vt.setTimeout&&e.setTimeout,Je=pt.ceil,ti=pt.floor,ei=ft.getOwnPropertySymbols,ii=Ot?Ot.isBuffer:void 0,ni=e.isFinite,ri=vt.join,oi=ze(ft.keys,ft),si=pt.max,ai=pt.min,li=r.now,ui=e.parseInt,hi=pt.random,ci=vt.reverse,di=to(e,"DataView"),pi=to(e,"Map"),fi=to(e,"Promise"),mi=to(e,"Set"),gi=to(e,"WeakMap"),yi=to(ft,"create"),vi=gi&&new gi,_i={},bi=Io(di),xi=Io(pi),wi=Io(fi),Ti=Io(mi),Si=Io(gi),Ei=Mt?Mt.prototype:void 0,Ci=Ei?Ei.valueOf:void 0,Pi=Ei?Ei.toString:void 0;function Ii(t){if(Ws(t)&&!Ds(t)&&!(t instanceof ki)){if(t instanceof Mi)return t;if(Tt.call(t,"__wrapped__"))return Ao(t)}return new Mi(t)}var Ai=function(){function t(){}return function(e){if(!Xs(e))return{};if(Wt)return Wt(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Oi(){}function Mi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function ki(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ri(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Di(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Li(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Fi(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Li;++e<i;)this.add(t[e])}function Ni(t){var e=this.__data__=new Di(t);this.size=e.size}function Bi(t,e){var i=Ds(t),n=!i&&Rs(t),r=!i&&!n&&Bs(t),o=!i&&!n&&!r&&Js(t),s=i||n||r||o,a=s?Ae(t.length,gt):[],l=a.length;for(var u in t)!e&&!Tt.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ao(u,l))||a.push(u);return a}function ji(t){var e=t.length;return e?t[Nn(0,e-1)]:void 0}function Gi(t,e){return Eo(vr(t),qi(e,0,t.length))}function Ui(t){return Eo(vr(t))}function zi(t,e,i){(void 0!==i&&!Os(t[e],i)||void 0===i&&!(e in t))&&Vi(t,e,i)}function Hi(t,e,i){var n=t[e];Tt.call(t,e)&&Os(n,i)&&(void 0!==i||e in t)||Vi(t,e,i)}function Xi(t,e){for(var i=t.length;i--;)if(Os(t[i][0],e))return i;return-1}function Wi(t,e,i,n){return tn(t,(function(t,r,o){e(n,t,i(t),o)})),n}function Yi(t,e){return t&&_r(e,xa(e),t)}function Vi(t,e,i){"__proto__"==e&&ve?ve(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Ki(t,e){for(var i=-1,r=e.length,o=n(r),s=null==t;++i<r;)o[i]=s?void 0:ga(t,e[i]);return o}function qi(t,e,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==e&&(t=t>=e?t:e)),t}function $i(t,e,i,n,r,o){var s,a=1&e,u=2&e,d=4&e;if(i&&(s=r?i(t,n,r,o):i(t)),void 0!==s)return s;if(!Xs(t))return t;var w=Ds(t);if(w){if(s=function(t){var e=t.length,i=new t.constructor(e);e&&"string"==typeof t[0]&&Tt.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!a)return vr(t,s)}else{var R=no(t),D=R==p||R==f;if(Bs(t))return dr(t,a);if(R==y||R==l||D&&!r){if(s=u||D?{}:oo(t),!a)return u?function(t,e){return _r(t,io(t),e)}(t,function(t,e){return t&&_r(e,wa(e),t)}(s,t)):function(t,e){return _r(t,eo(t),e)}(t,Yi(s,t))}else{if(!Ut[R])return r?t:{};s=function(t,e,i){var n=t.constructor;switch(e){case T:return pr(t);case h:case c:return new n(+t);case S:return function(t,e){var i=e?pr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case E:case C:case P:case I:case A:case O:case"[object Uint8ClampedArray]":case M:case k:return fr(t,i);case m:return new n;case g:case b:return new n(t);case v:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new n;case x:return r=t,Ci?ft(Ci.call(r)):{}}var r}(t,R,a)}}o||(o=new Ni);var L=o.get(t);if(L)return L;o.set(t,s),$s(t)?t.forEach((function(n){s.add($i(n,e,i,n,t,o))})):Ys(t)&&t.forEach((function(n,r){s.set(r,$i(n,e,i,r,t,o))}));var F=w?void 0:(d?u?Vr:Yr:u?wa:xa)(t);return ae(F||t,(function(n,r){F&&(n=t[r=n]),Hi(s,r,$i(n,e,i,r,t,o))})),s}function Qi(t,e,i){var n=i.length;if(null==t)return!n;for(t=ft(t);n--;){var r=i[n],o=e[r],s=t[r];if(void 0===s&&!(r in t)||!o(s))return!1}return!0}function Zi(t,e,i){if("function"!=typeof t)throw new yt(o);return xo((function(){t.apply(void 0,i)}),e)}function Ji(t,e,i,n){var r=-1,o=ce,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;i&&(e=pe(e,Me(i))),n?(o=de,s=!1):e.length>=200&&(o=Re,s=!1,e=new Fi(e));t:for(;++r<a;){var h=t[r],c=null==i?h:i(h);if(h=n||0!==h?h:0,s&&c==c){for(var d=u;d--;)if(e[d]===c)continue t;l.push(h)}else o(e,c,n)||l.push(h)}return l}Ii.templateSettings={escape:G,evaluate:U,interpolate:z,variable:"",imports:{_:Ii}},Ii.prototype=Oi.prototype,Ii.prototype.constructor=Ii,Mi.prototype=Ai(Oi.prototype),Mi.prototype.constructor=Mi,ki.prototype=Ai(Oi.prototype),ki.prototype.constructor=ki,Ri.prototype.clear=function(){this.__data__=yi?yi(null):{},this.size=0},Ri.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ri.prototype.get=function(t){var e=this.__data__;if(yi){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return Tt.call(e,t)?e[t]:void 0},Ri.prototype.has=function(t){var e=this.__data__;return yi?void 0!==e[t]:Tt.call(e,t)},Ri.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=yi&&void 0===e?"__lodash_hash_undefined__":e,this},Di.prototype.clear=function(){this.__data__=[],this.size=0},Di.prototype.delete=function(t){var e=this.__data__,i=Xi(e,t);return!(i<0)&&(i==e.length-1?e.pop():Kt.call(e,i,1),--this.size,!0)},Di.prototype.get=function(t){var e=this.__data__,i=Xi(e,t);return i<0?void 0:e[i][1]},Di.prototype.has=function(t){return Xi(this.__data__,t)>-1},Di.prototype.set=function(t,e){var i=this.__data__,n=Xi(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},Li.prototype.clear=function(){this.size=0,this.__data__={hash:new Ri,map:new(pi||Di),string:new Ri}},Li.prototype.delete=function(t){var e=Zr(this,t).delete(t);return this.size-=e?1:0,e},Li.prototype.get=function(t){return Zr(this,t).get(t)},Li.prototype.has=function(t){return Zr(this,t).has(t)},Li.prototype.set=function(t,e){var i=Zr(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},Fi.prototype.add=Fi.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Fi.prototype.has=function(t){return this.__data__.has(t)},Ni.prototype.clear=function(){this.__data__=new Di,this.size=0},Ni.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Ni.prototype.get=function(t){return this.__data__.get(t)},Ni.prototype.has=function(t){return this.__data__.has(t)},Ni.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Di){var n=i.__data__;if(!pi||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Li(n)}return i.set(t,e),this.size=i.size,this};var tn=wr(un),en=wr(hn,!0);function nn(t,e){var i=!0;return tn(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function rn(t,e,i){for(var n=-1,r=t.length;++n<r;){var o=t[n],s=e(o);if(null!=s&&(void 0===a?s==s&&!Zs(s):i(s,a)))var a=s,l=o}return l}function on(t,e){var i=[];return tn(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function sn(t,e,i,n,r){var o=-1,s=t.length;for(i||(i=so),r||(r=[]);++o<s;){var a=t[o];e>0&&i(a)?e>1?sn(a,e-1,i,n,r):fe(r,a):n||(r[r.length]=a)}return r}var an=Tr(),ln=Tr(!0);function un(t,e){return t&&an(t,e,xa)}function hn(t,e){return t&&ln(t,e,xa)}function cn(t,e){return he(e,(function(e){return Us(t[e])}))}function dn(t,e){for(var i=0,n=(e=lr(e,t)).length;null!=t&&i<n;)t=t[Po(e[i++])];return i&&i==n?t:void 0}function pn(t,e,i){var n=e(t);return Ds(t)?n:fe(n,i(t))}function fn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Zt&&Zt in ft(t)?function(t){var e=Tt.call(t,Zt),i=t[Zt];try{t[Zt]=void 0;var n=!0}catch(t){}var r=Ct.call(t);n&&(e?t[Zt]=i:delete t[Zt]);return r}(t):function(t){return Ct.call(t)}(t)}function mn(t,e){return t>e}function gn(t,e){return null!=t&&Tt.call(t,e)}function yn(t,e){return null!=t&&e in ft(t)}function vn(t,e,i){for(var r=i?de:ce,o=t[0].length,s=t.length,a=s,l=n(s),u=1/0,h=[];a--;){var c=t[a];a&&e&&(c=pe(c,Me(e))),u=ai(c.length,u),l[a]=!i&&(e||o>=120&&c.length>=120)?new Fi(a&&c):void 0}c=t[0];var d=-1,p=l[0];t:for(;++d<o&&h.length<u;){var f=c[d],m=e?e(f):f;if(f=i||0!==f?f:0,!(p?Re(p,m):r(h,m,i))){for(a=s;--a;){var g=l[a];if(!(g?Re(g,m):r(t[a],m,i)))continue t}p&&p.push(m),h.push(f)}}return h}function _n(t,e,i){var n=null==(t=yo(t,e=lr(e,t)))?t:t[Po(Go(e))];return null==n?void 0:oe(n,t,i)}function bn(t){return Ws(t)&&fn(t)==l}function xn(t,e,i,n,r){return t===e||(null==t||null==e||!Ws(t)&&!Ws(e)?t!=t&&e!=e:function(t,e,i,n,r,o){var s=Ds(t),a=Ds(e),p=s?u:no(t),f=a?u:no(e),w=(p=p==l?y:p)==y,E=(f=f==l?y:f)==y,C=p==f;if(C&&Bs(t)){if(!Bs(e))return!1;s=!0,w=!1}if(C&&!w)return o||(o=new Ni),s||Js(t)?Xr(t,e,i,n,r,o):function(t,e,i,n,r,o,s){switch(i){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!o(new Dt(t),new Dt(e)));case h:case c:case g:return Os(+t,+e);case d:return t.name==e.name&&t.message==e.message;case v:case b:return t==e+"";case m:var a=Ue;case _:var l=1&n;if(a||(a=Xe),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=2,s.set(t,e);var p=Xr(a(t),a(e),n,r,o,s);return s.delete(t),p;case x:if(Ci)return Ci.call(t)==Ci.call(e)}return!1}(t,e,p,i,n,r,o);if(!(1&i)){var P=w&&Tt.call(t,"__wrapped__"),I=E&&Tt.call(e,"__wrapped__");if(P||I){var A=P?t.value():t,O=I?e.value():e;return o||(o=new Ni),r(A,O,i,n,o)}}if(!C)return!1;return o||(o=new Ni),function(t,e,i,n,r,o){var s=1&i,a=Yr(t),l=a.length,u=Yr(e).length;if(l!=u&&!s)return!1;var h=l;for(;h--;){var c=a[h];if(!(s?c in e:Tt.call(e,c)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var f=!0;o.set(t,e),o.set(e,t);var m=s;for(;++h<l;){c=a[h];var g=t[c],y=e[c];if(n)var v=s?n(y,g,c,e,t,o):n(g,y,c,t,e,o);if(!(void 0===v?g===y||r(g,y,i,n,o):v)){f=!1;break}m||(m="constructor"==c)}if(f&&!m){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,i,n,r,o)}(t,e,i,n,xn,r))}function wn(t,e,i,n){var r=i.length,o=r,s=!n;if(null==t)return!o;for(t=ft(t);r--;){var a=i[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var l=(a=i[r])[0],u=t[l],h=a[1];if(s&&a[2]){if(void 0===u&&!(l in t))return!1}else{var c=new Ni;if(n)var d=n(u,h,l,t,e,c);if(!(void 0===d?xn(h,u,3,n,c):d))return!1}}return!0}function Tn(t){return!(!Xs(t)||(e=t,Et&&Et in e))&&(Us(t)?At:st).test(Io(t));var e}function Sn(t){return"function"==typeof t?t:null==t?Va:"object"==typeof t?Ds(t)?On(t[0],t[1]):An(t):il(t)}function En(t){if(!po(t))return oi(t);var e=[];for(var i in ft(t))Tt.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Cn(t){if(!Xs(t))return function(t){var e=[];if(null!=t)for(var i in ft(t))e.push(i);return e}(t);var e=po(t),i=[];for(var n in t)("constructor"!=n||!e&&Tt.call(t,n))&&i.push(n);return i}function Pn(t,e){return t<e}function In(t,e){var i=-1,r=Fs(t)?n(t.length):[];return tn(t,(function(t,n,o){r[++i]=e(t,n,o)})),r}function An(t){var e=Jr(t);return 1==e.length&&e[0][2]?mo(e[0][0],e[0][1]):function(i){return i===t||wn(i,t,e)}}function On(t,e){return uo(t)&&fo(e)?mo(Po(t),e):function(i){var n=ga(i,t);return void 0===n&&n===e?ya(i,t):xn(e,n,3)}}function Mn(t,e,i,n,r){t!==e&&an(e,(function(o,s){if(r||(r=new Ni),Xs(o))!function(t,e,i,n,r,o,s){var a=_o(t,i),l=_o(e,i),u=s.get(l);if(u)return void zi(t,i,u);var h=o?o(a,l,i+"",t,e,s):void 0,c=void 0===h;if(c){var d=Ds(l),p=!d&&Bs(l),f=!d&&!p&&Js(l);h=l,d||p||f?Ds(a)?h=a:Ns(a)?h=vr(a):p?(c=!1,h=dr(l,!0)):f?(c=!1,h=fr(l,!0)):h=[]:Ks(l)||Rs(l)?(h=a,Rs(a)?h=aa(a):Xs(a)&&!Us(a)||(h=oo(l))):c=!1}c&&(s.set(l,h),r(h,l,n,o,s),s.delete(l));zi(t,i,h)}(t,e,s,i,Mn,n,r);else{var a=n?n(_o(t,s),o,s+"",t,e,r):void 0;void 0===a&&(a=o),zi(t,s,a)}}),wa)}function kn(t,e){var i=t.length;if(i)return ao(e+=e<0?i:0,i)?t[e]:void 0}function Rn(t,e,i){e=e.length?pe(e,(function(t){return Ds(t)?function(e){return dn(e,1===t.length?t[0]:t)}:t})):[Va];var n=-1;return e=pe(e,Me(Qr())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(In(t,(function(t,i,r){return{criteria:pe(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,i){var n=-1,r=t.criteria,o=e.criteria,s=r.length,a=i.length;for(;++n<s;){var l=mr(r[n],o[n]);if(l){if(n>=a)return l;var u=i[n];return l*("desc"==u?-1:1)}}return t.index-e.index}(t,e,i)}))}function Dn(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=dn(t,s);i(a,s)&&zn(o,lr(s,t),a)}return o}function Ln(t,e,i,n){var r=n?we:xe,o=-1,s=e.length,a=t;for(t===e&&(e=vr(e)),i&&(a=pe(t,Me(i)));++o<s;)for(var l=0,u=e[o],h=i?i(u):u;(l=r(a,h,l,n))>-1;)a!==t&&Kt.call(a,l,1),Kt.call(t,l,1);return t}function Fn(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;ao(r)?Kt.call(t,r,1):tr(t,r)}}return t}function Nn(t,e){return t+ti(hi()*(e-t+1))}function Bn(t,e){var i="";if(!t||e<1||e>9007199254740991)return i;do{e%2&&(i+=t),(e=ti(e/2))&&(t+=t)}while(e);return i}function jn(t,e){return wo(go(t,e,Va),t+"")}function Gn(t){return ji(Oa(t))}function Un(t,e){var i=Oa(t);return Eo(i,qi(e,0,i.length))}function zn(t,e,i,n){if(!Xs(t))return t;for(var r=-1,o=(e=lr(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var l=Po(e[r]),u=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=s){var h=a[l];void 0===(u=n?n(h,l,a):void 0)&&(u=Xs(h)?h:ao(e[r+1])?[]:{})}Hi(a,l,u),a=a[l]}return t}var Hn=vi?function(t,e){return vi.set(t,e),t}:Va,Xn=ve?function(t,e){return ve(t,"toString",{configurable:!0,enumerable:!1,value:Xa(e),writable:!0})}:Va;function Wn(t){return Eo(Oa(t))}function Yn(t,e,i){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var s=n(o);++r<o;)s[r]=t[r+e];return s}function Vn(t,e){var i;return tn(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}function Kn(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,s=t[o];null!==s&&!Zs(s)&&(i?s<=e:s<e)?n=o+1:r=o}return r}return qn(t,e,Va,i)}function qn(t,e,i,n){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=i(e))!=e,a=null===e,l=Zs(e),u=void 0===e;r<o;){var h=ti((r+o)/2),c=i(t[h]),d=void 0!==c,p=null===c,f=c==c,m=Zs(c);if(s)var g=n||f;else g=u?f&&(n||d):a?f&&d&&(n||!p):l?f&&d&&!p&&(n||!m):!p&&!m&&(n?c<=e:c<e);g?r=h+1:o=h}return ai(o,4294967294)}function $n(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i],a=e?e(s):s;if(!i||!Os(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function Qn(t){return"number"==typeof t?t:Zs(t)?NaN:+t}function Zn(t){if("string"==typeof t)return t;if(Ds(t))return pe(t,Zn)+"";if(Zs(t))return Pi?Pi.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Jn(t,e,i){var n=-1,r=ce,o=t.length,s=!0,a=[],l=a;if(i)s=!1,r=de;else if(o>=200){var u=e?null:Br(t);if(u)return Xe(u);s=!1,r=Re,l=new Fi}else l=e?[]:a;t:for(;++n<o;){var h=t[n],c=e?e(h):h;if(h=i||0!==h?h:0,s&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue t;e&&l.push(c),a.push(h)}else r(l,c,i)||(l!==a&&l.push(c),a.push(h))}return a}function tr(t,e){return null==(t=yo(t,e=lr(e,t)))||delete t[Po(Go(e))]}function er(t,e,i,n){return zn(t,e,i(dn(t,e)),n)}function ir(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?Yn(t,n?0:o,n?o+1:r):Yn(t,n?o+1:0,n?r:o)}function nr(t,e){var i=t;return i instanceof ki&&(i=i.value()),me(e,(function(t,e){return e.func.apply(e.thisArg,fe([t],e.args))}),i)}function rr(t,e,i){var r=t.length;if(r<2)return r?Jn(t[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=t[o],l=-1;++l<r;)l!=o&&(s[o]=Ji(s[o]||a,t[l],e,i));return Jn(sn(s,1),e,i)}function or(t,e,i){for(var n=-1,r=t.length,o=e.length,s={};++n<r;){var a=n<o?e[n]:void 0;i(s,t[n],a)}return s}function sr(t){return Ns(t)?t:[]}function ar(t){return"function"==typeof t?t:Va}function lr(t,e){return Ds(t)?t:uo(t,e)?[t]:Co(la(t))}var ur=jn;function hr(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&i>=n?t:Yn(t,e,i)}var cr=Ce||function(t){return Vt.clearTimeout(t)};function dr(t,e){if(e)return t.slice();var i=t.length,n=Ft?Ft(i):new t.constructor(i);return t.copy(n),n}function pr(t){var e=new t.constructor(t.byteLength);return new Dt(e).set(new Dt(t)),e}function fr(t,e){var i=e?pr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function mr(t,e){if(t!==e){var i=void 0!==t,n=null===t,r=t==t,o=Zs(t),s=void 0!==e,a=null===e,l=e==e,u=Zs(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||n&&s&&l||!i&&l||!r)return 1;if(!n&&!o&&!u&&t<e||u&&i&&r&&!n&&!o||a&&i&&r||!s&&r||!l)return-1}return 0}function gr(t,e,i,r){for(var o=-1,s=t.length,a=i.length,l=-1,u=e.length,h=si(s-a,0),c=n(u+h),d=!r;++l<u;)c[l]=e[l];for(;++o<a;)(d||o<s)&&(c[i[o]]=t[o]);for(;h--;)c[l++]=t[o++];return c}function yr(t,e,i,r){for(var o=-1,s=t.length,a=-1,l=i.length,u=-1,h=e.length,c=si(s-l,0),d=n(c+h),p=!r;++o<c;)d[o]=t[o];for(var f=o;++u<h;)d[f+u]=e[u];for(;++a<l;)(p||o<s)&&(d[f+i[a]]=t[o++]);return d}function vr(t,e){var i=-1,r=t.length;for(e||(e=n(r));++i<r;)e[i]=t[i];return e}function _r(t,e,i,n){var r=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),r?Vi(i,a,l):Hi(i,a,l)}return i}function br(t,e){return function(i,n){var r=Ds(i)?se:Wi,o=e?e():{};return r(i,t,Qr(n,2),o)}}function xr(t){return jn((function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&lo(i[0],i[1],s)&&(o=r<3?void 0:o,r=1),e=ft(e);++n<r;){var a=i[n];a&&t(e,a,n,o)}return e}))}function wr(t,e){return function(i,n){if(null==i)return i;if(!Fs(i))return t(i,n);for(var r=i.length,o=e?r:-1,s=ft(i);(e?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function Tr(t){return function(e,i,n){for(var r=-1,o=ft(e),s=n(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===i(o[l],l,o))break}return e}}function Sr(t){return function(e){var i=Ge(e=la(e))?Ve(e):void 0,n=i?i[0]:e.charAt(0),r=i?hr(i,1).join(""):e.slice(1);return n[t]()+r}}function Er(t){return function(e){return me(Ua(Ra(e).replace(kt,"")),t,"")}}function Cr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ai(t.prototype),n=t.apply(i,e);return Xs(n)?n:i}}function Pr(t){return function(e,i,n){var r=ft(e);if(!Fs(e)){var o=Qr(i,3);e=xa(e),i=function(t){return o(r[t],t,r)}}var s=t(e,i,n);return s>-1?r[o?e[s]:s]:void 0}}function Ir(t){return Wr((function(e){var i=e.length,n=i,r=Mi.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new yt(o);if(r&&!a&&"wrapper"==qr(s))var a=new Mi([],!0)}for(n=a?n:i;++n<i;){var l=qr(s=e[n]),u="wrapper"==l?Kr(s):void 0;a=u&&ho(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[qr(u[0])].apply(a,u[3]):1==s.length&&ho(s)?a[l]():a.thru(s)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&Ds(n))return a.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function Ar(t,e,i,r,o,s,a,l,u,h){var c=128&e,d=1&e,p=2&e,f=24&e,m=512&e,g=p?void 0:Cr(t);return function y(){for(var v=arguments.length,_=n(v),b=v;b--;)_[b]=arguments[b];if(f)var x=$r(y),w=Fe(_,x);if(r&&(_=gr(_,r,o,f)),s&&(_=yr(_,s,a,f)),v-=w,f&&v<h){var T=He(_,x);return Fr(t,e,Ar,y.placeholder,i,_,T,l,u,h-v)}var S=d?i:this,E=p?S[t]:t;return v=_.length,l?_=vo(_,l):m&&v>1&&_.reverse(),c&&u<v&&(_.length=u),this&&this!==Vt&&this instanceof y&&(E=g||Cr(E)),E.apply(S,_)}}function Or(t,e){return function(i,n){return function(t,e,i,n){return un(t,(function(t,r,o){e(n,i(t),r,o)})),n}(i,t,e(n),{})}}function Mr(t,e){return function(i,n){var r;if(void 0===i&&void 0===n)return e;if(void 0!==i&&(r=i),void 0!==n){if(void 0===r)return n;"string"==typeof i||"string"==typeof n?(i=Zn(i),n=Zn(n)):(i=Qn(i),n=Qn(n)),r=t(i,n)}return r}}function kr(t){return Wr((function(e){return e=pe(e,Me(Qr())),jn((function(i){var n=this;return t(e,(function(t){return oe(t,n,i)}))}))}))}function Rr(t,e){var i=(e=void 0===e?" ":Zn(e)).length;if(i<2)return i?Bn(e,t):e;var n=Bn(e,Je(t/Ye(e)));return Ge(e)?hr(Ve(n),0,t).join(""):n.slice(0,t)}function Dr(t){return function(e,i,r){return r&&"number"!=typeof r&&lo(e,i,r)&&(i=r=void 0),e=na(e),void 0===i?(i=e,e=0):i=na(i),function(t,e,i,r){for(var o=-1,s=si(Je((e-t)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=t,t+=i;return a}(e,i,r=void 0===r?e<i?1:-1:na(r),t)}}function Lr(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=sa(e),i=sa(i)),t(e,i)}}function Fr(t,e,i,n,r,o,s,a,l,u){var h=8&e;e|=h?32:64,4&(e&=~(h?64:32))||(e&=-4);var c=[t,e,r,h?o:void 0,h?s:void 0,h?void 0:o,h?void 0:s,a,l,u],d=i.apply(void 0,c);return ho(t)&&bo(d,c),d.placeholder=n,To(d,t,e)}function Nr(t){var e=pt[t];return function(t,i){if(t=sa(t),(i=null==i?0:ai(ra(i),292))&&ni(t)){var n=(la(t)+"e").split("e");return+((n=(la(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}var Br=mi&&1/Xe(new mi([,-0]))[1]==1/0?function(t){return new mi(t)}:Za;function jr(t){return function(e){var i=no(e);return i==m?Ue(e):i==_?We(e):function(t,e){return pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gr(t,e,i,r,a,l,u,h){var c=2&e;if(!c&&"function"!=typeof t)throw new yt(o);var d=r?r.length:0;if(d||(e&=-97,r=a=void 0),u=void 0===u?u:si(ra(u),0),h=void 0===h?h:ra(h),d-=a?a.length:0,64&e){var p=r,f=a;r=a=void 0}var m=c?void 0:Kr(t),g=[t,e,i,r,a,p,f,l,u,h];if(m&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<131,a=128==n&&8==i||128==n&&256==i&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!o&&!a)return t;1&n&&(t[2]=e[2],r|=1&i?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?gr(u,l,e[4]):l,t[4]=u?He(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?yr(u,l,e[6]):l,t[6]=u?He(t[5],s):e[6]);(l=e[7])&&(t[7]=l);128&n&&(t[8]=null==t[8]?e[8]:ai(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(g,m),t=g[0],e=g[1],i=g[2],r=g[3],a=g[4],!(h=g[9]=void 0===g[9]?c?0:t.length:si(g[9]-d,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,i){var r=Cr(t);return function o(){for(var s=arguments.length,a=n(s),l=s,u=$r(o);l--;)a[l]=arguments[l];var h=s<3&&a[0]!==u&&a[s-1]!==u?[]:He(a,u);if((s-=h.length)<i)return Fr(t,e,Ar,o.placeholder,void 0,a,h,void 0,void 0,i-s);var c=this&&this!==Vt&&this instanceof o?r:t;return oe(c,this,a)}}(t,e,h):32!=e&&33!=e||a.length?Ar.apply(void 0,g):function(t,e,i,r){var o=1&e,s=Cr(t);return function e(){for(var a=-1,l=arguments.length,u=-1,h=r.length,c=n(h+l),d=this&&this!==Vt&&this instanceof e?s:t;++u<h;)c[u]=r[u];for(;l--;)c[u++]=arguments[++a];return oe(d,o?i:this,c)}}(t,e,i,r);else var y=function(t,e,i){var n=1&e,r=Cr(t);return function e(){var o=this&&this!==Vt&&this instanceof e?r:t;return o.apply(n?i:this,arguments)}}(t,e,i);return To((m?Hn:bo)(y,g),t,e)}function Ur(t,e,i,n){return void 0===t||Os(t,bt[i])&&!Tt.call(n,i)?e:t}function zr(t,e,i,n,r,o){return Xs(t)&&Xs(e)&&(o.set(e,t),Mn(t,e,void 0,zr,o),o.delete(e)),t}function Hr(t){return Ks(t)?void 0:t}function Xr(t,e,i,n,r,o){var s=1&i,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var c=-1,d=!0,p=2&i?new Fi:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var f=t[c],m=e[c];if(n)var g=s?n(m,f,c,e,t,o):n(f,m,c,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!ye(e,(function(t,e){if(!Re(p,e)&&(f===t||r(f,t,i,n,o)))return p.push(e)}))){d=!1;break}}else if(f!==m&&!r(f,m,i,n,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Wr(t){return wo(go(t,void 0,Lo),t+"")}function Yr(t){return pn(t,xa,eo)}function Vr(t){return pn(t,wa,io)}var Kr=vi?function(t){return vi.get(t)}:Za;function qr(t){for(var e=t.name+"",i=_i[e],n=Tt.call(_i,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function $r(t){return(Tt.call(Ii,"placeholder")?Ii:t).placeholder}function Qr(){var t=Ii.iteratee||Ka;return t=t===Ka?Sn:t,arguments.length?t(arguments[0],arguments[1]):t}function Zr(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Jr(t){for(var e=xa(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,fo(r)]}return e}function to(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Tn(i)?i:void 0}var eo=ei?function(t){return null==t?[]:(t=ft(t),he(ei(t),(function(e){return Yt.call(t,e)})))}:ol,io=ei?function(t){for(var e=[];t;)fe(e,eo(t)),t=zt(t);return e}:ol,no=fn;function ro(t,e,i){for(var n=-1,r=(e=lr(e,t)).length,o=!1;++n<r;){var s=Po(e[n]);if(!(o=null!=t&&i(t,s)))break;t=t[s]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&Hs(r)&&ao(s,r)&&(Ds(t)||Rs(t))}function oo(t){return"function"!=typeof t.constructor||po(t)?{}:Ai(zt(t))}function so(t){return Ds(t)||Rs(t)||!!(qt&&t&&t[qt])}function ao(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&lt.test(t))&&t>-1&&t%1==0&&t<e}function lo(t,e,i){if(!Xs(i))return!1;var n=typeof e;return!!("number"==n?Fs(i)&&ao(e,i.length):"string"==n&&e in i)&&Os(i[e],t)}function uo(t,e){if(Ds(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Zs(t))||(X.test(t)||!H.test(t)||null!=e&&t in ft(e))}function ho(t){var e=qr(t),i=Ii[e];if("function"!=typeof i||!(e in ki.prototype))return!1;if(t===i)return!0;var n=Kr(i);return!!n&&t===n[0]}(di&&no(new di(new ArrayBuffer(1)))!=S||pi&&no(new pi)!=m||fi&&"[object Promise]"!=no(fi.resolve())||mi&&no(new mi)!=_||gi&&no(new gi)!=w)&&(no=function(t){var e=fn(t),i=e==y?t.constructor:void 0,n=i?Io(i):"";if(n)switch(n){case bi:return S;case xi:return m;case wi:return"[object Promise]";case Ti:return _;case Si:return w}return e});var co=xt?Us:sl;function po(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function fo(t){return t==t&&!Xs(t)}function mo(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in ft(i)))}}function go(t,e,i){return e=si(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=si(r.length-e,0),a=n(s);++o<s;)a[o]=r[e+o];o=-1;for(var l=n(e+1);++o<e;)l[o]=r[o];return l[e]=i(a),oe(t,this,l)}}function yo(t,e){return e.length<2?t:dn(t,Yn(e,0,-1))}function vo(t,e){for(var i=t.length,n=ai(e.length,i),r=vr(t);n--;){var o=e[n];t[n]=ao(o,i)?r[o]:void 0}return t}function _o(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var bo=So(Hn),xo=Ze||function(t,e){return Vt.setTimeout(t,e)},wo=So(Xn);function To(t,e,i){var n=e+"";return wo(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace($,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return ae(a,(function(i){var n="_."+i[0];e&i[1]&&!ce(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(Q);return e?e[1].split(Z):[]}(n),i)))}function So(t){var e=0,i=0;return function(){var n=li(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Eo(t,e){var i=-1,n=t.length,r=n-1;for(e=void 0===e?n:e;++i<e;){var o=Nn(i,r),s=t[o];t[o]=t[i],t[i]=s}return t.length=e,t}var Co=function(t){var e=Ss(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(W,(function(t,i,n,r){e.push(n?r.replace(et,"$1"):i||t)})),e}));function Po(t){if("string"==typeof t||Zs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Io(t){if(null!=t){try{return wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ao(t){if(t instanceof ki)return t.clone();var e=new Mi(t.__wrapped__,t.__chain__);return e.__actions__=vr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Oo=jn((function(t,e){return Ns(t)?Ji(t,sn(e,1,Ns,!0)):[]})),Mo=jn((function(t,e){var i=Go(e);return Ns(i)&&(i=void 0),Ns(t)?Ji(t,sn(e,1,Ns,!0),Qr(i,2)):[]})),ko=jn((function(t,e){var i=Go(e);return Ns(i)&&(i=void 0),Ns(t)?Ji(t,sn(e,1,Ns,!0),void 0,i):[]}));function Ro(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ra(i);return r<0&&(r=si(n+r,0)),be(t,Qr(e,3),r)}function Do(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return void 0!==i&&(r=ra(i),r=i<0?si(n+r,0):ai(r,n-1)),be(t,Qr(e,3),r,!0)}function Lo(t){return(null==t?0:t.length)?sn(t,1):[]}function Fo(t){return t&&t.length?t[0]:void 0}var No=jn((function(t){var e=pe(t,sr);return e.length&&e[0]===t[0]?vn(e):[]})),Bo=jn((function(t){var e=Go(t),i=pe(t,sr);return e===Go(i)?e=void 0:i.pop(),i.length&&i[0]===t[0]?vn(i,Qr(e,2)):[]})),jo=jn((function(t){var e=Go(t),i=pe(t,sr);return(e="function"==typeof e?e:void 0)&&i.pop(),i.length&&i[0]===t[0]?vn(i,void 0,e):[]}));function Go(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Uo=jn(zo);function zo(t,e){return t&&t.length&&e&&e.length?Ln(t,e):t}var Ho=Wr((function(t,e){var i=null==t?0:t.length,n=Ki(t,e);return Fn(t,pe(e,(function(t){return ao(t,i)?+t:t})).sort(mr)),n}));function Xo(t){return null==t?t:ci.call(t)}var Wo=jn((function(t){return Jn(sn(t,1,Ns,!0))})),Yo=jn((function(t){var e=Go(t);return Ns(e)&&(e=void 0),Jn(sn(t,1,Ns,!0),Qr(e,2))})),Vo=jn((function(t){var e=Go(t);return e="function"==typeof e?e:void 0,Jn(sn(t,1,Ns,!0),void 0,e)}));function Ko(t){if(!t||!t.length)return[];var e=0;return t=he(t,(function(t){if(Ns(t))return e=si(t.length,e),!0})),Ae(e,(function(e){return pe(t,Ee(e))}))}function qo(t,e){if(!t||!t.length)return[];var i=Ko(t);return null==e?i:pe(i,(function(t){return oe(e,void 0,t)}))}var $o=jn((function(t,e){return Ns(t)?Ji(t,e):[]})),Qo=jn((function(t){return rr(he(t,Ns))})),Zo=jn((function(t){var e=Go(t);return Ns(e)&&(e=void 0),rr(he(t,Ns),Qr(e,2))})),Jo=jn((function(t){var e=Go(t);return e="function"==typeof e?e:void 0,rr(he(t,Ns),void 0,e)})),ts=jn(Ko);var es=jn((function(t){var e=t.length,i=e>1?t[e-1]:void 0;return i="function"==typeof i?(t.pop(),i):void 0,qo(t,i)}));function is(t){var e=Ii(t);return e.__chain__=!0,e}function ns(t,e){return e(t)}var rs=Wr((function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,r=function(e){return Ki(e,t)};return!(e>1||this.__actions__.length)&&n instanceof ki&&ao(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:ns,args:[r],thisArg:void 0}),new Mi(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)}));var os=br((function(t,e,i){Tt.call(t,i)?++t[i]:Vi(t,i,1)}));var ss=Pr(Ro),as=Pr(Do);function ls(t,e){return(Ds(t)?ae:tn)(t,Qr(e,3))}function us(t,e){return(Ds(t)?le:en)(t,Qr(e,3))}var hs=br((function(t,e,i){Tt.call(t,i)?t[i].push(e):Vi(t,i,[e])}));var cs=jn((function(t,e,i){var r=-1,o="function"==typeof e,s=Fs(t)?n(t.length):[];return tn(t,(function(t){s[++r]=o?oe(e,t,i):_n(t,e,i)})),s})),ds=br((function(t,e,i){Vi(t,i,e)}));function ps(t,e){return(Ds(t)?pe:In)(t,Qr(e,3))}var fs=br((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]}));var ms=jn((function(t,e){if(null==t)return[];var i=e.length;return i>1&&lo(t,e[0],e[1])?e=[]:i>2&&lo(e[0],e[1],e[2])&&(e=[e[0]]),Rn(t,sn(e,1),[])})),gs=Qe||function(){return Vt.Date.now()};function ys(t,e,i){return e=i?void 0:e,Gr(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function vs(t,e){var i;if("function"!=typeof e)throw new yt(o);return t=ra(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=void 0),i}}var _s=jn((function(t,e,i){var n=1;if(i.length){var r=He(i,$r(_s));n|=32}return Gr(t,n,e,i,r)})),bs=jn((function(t,e,i){var n=3;if(i.length){var r=He(i,$r(bs));n|=32}return Gr(e,n,t,i,r)}));function xs(t,e,i){var n,r,s,a,l,u,h=0,c=!1,d=!1,p=!0;if("function"!=typeof t)throw new yt(o);function f(e){var i=n,o=r;return n=r=void 0,h=e,a=t.apply(o,i)}function m(t){return h=t,l=xo(y,e),c?f(t):a}function g(t){var i=t-u;return void 0===u||i>=e||i<0||d&&t-h>=s}function y(){var t=gs();if(g(t))return v(t);l=xo(y,function(t){var i=e-(t-u);return d?ai(i,s-(t-h)):i}(t))}function v(t){return l=void 0,p&&n?f(t):(n=r=void 0,a)}function _(){var t=gs(),i=g(t);if(n=arguments,r=this,u=t,i){if(void 0===l)return m(u);if(d)return cr(l),l=xo(y,e),f(u)}return void 0===l&&(l=xo(y,e)),a}return e=sa(e)||0,Xs(i)&&(c=!!i.leading,s=(d="maxWait"in i)?si(sa(i.maxWait)||0,e):s,p="trailing"in i?!!i.trailing:p),_.cancel=function(){void 0!==l&&cr(l),h=0,n=u=r=l=void 0},_.flush=function(){return void 0===l?a:v(gs())},_}var ws=jn((function(t,e){return Zi(t,1,e)})),Ts=jn((function(t,e,i){return Zi(t,sa(e)||0,i)}));function Ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(o);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(Ss.Cache||Li),i}function Es(t){if("function"!=typeof t)throw new yt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ss.Cache=Li;var Cs=ur((function(t,e){var i=(e=1==e.length&&Ds(e[0])?pe(e[0],Me(Qr())):pe(sn(e,1),Me(Qr()))).length;return jn((function(n){for(var r=-1,o=ai(n.length,i);++r<o;)n[r]=e[r].call(this,n[r]);return oe(t,this,n)}))})),Ps=jn((function(t,e){return Gr(t,32,void 0,e,He(e,$r(Ps)))})),Is=jn((function(t,e){return Gr(t,64,void 0,e,He(e,$r(Is)))})),As=Wr((function(t,e){return Gr(t,256,void 0,void 0,void 0,e)}));function Os(t,e){return t===e||t!=t&&e!=e}var Ms=Lr(mn),ks=Lr((function(t,e){return t>=e})),Rs=bn(function(){return arguments}())?bn:function(t){return Ws(t)&&Tt.call(t,"callee")&&!Yt.call(t,"callee")},Ds=n.isArray,Ls=Jt?Me(Jt):function(t){return Ws(t)&&fn(t)==T};function Fs(t){return null!=t&&Hs(t.length)&&!Us(t)}function Ns(t){return Ws(t)&&Fs(t)}var Bs=ii||sl,js=te?Me(te):function(t){return Ws(t)&&fn(t)==c};function Gs(t){if(!Ws(t))return!1;var e=fn(t);return e==d||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ks(t)}function Us(t){if(!Xs(t))return!1;var e=fn(t);return e==p||e==f||"[object AsyncFunction]"==e||"[object Proxy]"==e}function zs(t){return"number"==typeof t&&t==ra(t)}function Hs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Xs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ws(t){return null!=t&&"object"==typeof t}var Ys=ee?Me(ee):function(t){return Ws(t)&&no(t)==m};function Vs(t){return"number"==typeof t||Ws(t)&&fn(t)==g}function Ks(t){if(!Ws(t)||fn(t)!=y)return!1;var e=zt(t);if(null===e)return!0;var i=Tt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&wt.call(i)==Pt}var qs=ie?Me(ie):function(t){return Ws(t)&&fn(t)==v};var $s=ne?Me(ne):function(t){return Ws(t)&&no(t)==_};function Qs(t){return"string"==typeof t||!Ds(t)&&Ws(t)&&fn(t)==b}function Zs(t){return"symbol"==typeof t||Ws(t)&&fn(t)==x}var Js=re?Me(re):function(t){return Ws(t)&&Hs(t.length)&&!!Gt[fn(t)]};var ta=Lr(Pn),ea=Lr((function(t,e){return t<=e}));function ia(t){if(!t)return[];if(Fs(t))return Qs(t)?Ve(t):vr(t);if(Qt&&t[Qt])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[Qt]());var e=no(t);return(e==m?Ue:e==_?Xe:Oa)(t)}function na(t){return t?(t=sa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=na(t),i=e%1;return e==e?i?e-i:e:0}function oa(t){return t?qi(ra(t),0,4294967295):0}function sa(t){if("number"==typeof t)return t;if(Zs(t))return NaN;if(Xs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Xs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Oe(t);var i=ot.test(t);return i||at.test(t)?Xt(t.slice(2),i?2:8):rt.test(t)?NaN:+t}function aa(t){return _r(t,wa(t))}function la(t){return null==t?"":Zn(t)}var ua=xr((function(t,e){if(po(e)||Fs(e))_r(e,xa(e),t);else for(var i in e)Tt.call(e,i)&&Hi(t,i,e[i])})),ha=xr((function(t,e){_r(e,wa(e),t)})),ca=xr((function(t,e,i,n){_r(e,wa(e),t,n)})),da=xr((function(t,e,i,n){_r(e,xa(e),t,n)})),pa=Wr(Ki);var fa=jn((function(t,e){t=ft(t);var i=-1,n=e.length,r=n>2?e[2]:void 0;for(r&&lo(e[0],e[1],r)&&(n=1);++i<n;)for(var o=e[i],s=wa(o),a=-1,l=s.length;++a<l;){var u=s[a],h=t[u];(void 0===h||Os(h,bt[u])&&!Tt.call(t,u))&&(t[u]=o[u])}return t})),ma=jn((function(t){return t.push(void 0,zr),oe(Sa,void 0,t)}));function ga(t,e,i){var n=null==t?void 0:dn(t,e);return void 0===n?i:n}function ya(t,e){return null!=t&&ro(t,e,yn)}var va=Or((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ct.call(e)),t[e]=i}),Xa(Va)),_a=Or((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ct.call(e)),Tt.call(t,e)?t[e].push(i):t[e]=[i]}),Qr),ba=jn(_n);function xa(t){return Fs(t)?Bi(t):En(t)}function wa(t){return Fs(t)?Bi(t,!0):Cn(t)}var Ta=xr((function(t,e,i){Mn(t,e,i)})),Sa=xr((function(t,e,i,n){Mn(t,e,i,n)})),Ea=Wr((function(t,e){var i={};if(null==t)return i;var n=!1;e=pe(e,(function(e){return e=lr(e,t),n||(n=e.length>1),e})),_r(t,Vr(t),i),n&&(i=$i(i,7,Hr));for(var r=e.length;r--;)tr(i,e[r]);return i}));var Ca=Wr((function(t,e){return null==t?{}:function(t,e){return Dn(t,e,(function(e,i){return ya(t,i)}))}(t,e)}));function Pa(t,e){if(null==t)return{};var i=pe(Vr(t),(function(t){return[t]}));return e=Qr(e),Dn(t,i,(function(t,i){return e(t,i[0])}))}var Ia=jr(xa),Aa=jr(wa);function Oa(t){return null==t?[]:ke(t,xa(t))}var Ma=Er((function(t,e,i){return e=e.toLowerCase(),t+(i?ka(e):e)}));function ka(t){return Ga(la(t).toLowerCase())}function Ra(t){return(t=la(t))&&t.replace(ut,Ne).replace(Rt,"")}var Da=Er((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),La=Er((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),Fa=Sr("toLowerCase");var Na=Er((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}));var Ba=Er((function(t,e,i){return t+(i?" ":"")+Ga(e)}));var ja=Er((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),Ga=Sr("toUpperCase");function Ua(t,e,i){return t=la(t),void 0===(e=i?void 0:e)?function(t){return Nt.test(t)}(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.match(J)||[]}(t):t.match(e)||[]}var za=jn((function(t,e){try{return oe(t,void 0,e)}catch(t){return Gs(t)?t:new q(t)}})),Ha=Wr((function(t,e){return ae(e,(function(e){e=Po(e),Vi(t,e,_s(t[e],t))})),t}));function Xa(t){return function(){return t}}var Wa=Ir(),Ya=Ir(!0);function Va(t){return t}function Ka(t){return Sn("function"==typeof t?t:$i(t,1))}var qa=jn((function(t,e){return function(i){return _n(i,t,e)}})),$a=jn((function(t,e){return function(i){return _n(t,i,e)}}));function Qa(t,e,i){var n=xa(e),r=cn(e,n);null!=i||Xs(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=cn(e,xa(e)));var o=!(Xs(i)&&"chain"in i&&!i.chain),s=Us(t);return ae(r,(function(i){var n=e[i];t[i]=n,s&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__),r=i.__actions__=vr(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,fe([this.value()],arguments))})})),t}function Za(){}var Ja=kr(pe),tl=kr(ue),el=kr(ye);function il(t){return uo(t)?Ee(Po(t)):function(t){return function(e){return dn(e,t)}}(t)}var nl=Dr(),rl=Dr(!0);function ol(){return[]}function sl(){return!1}var al=Mr((function(t,e){return t+e}),0),ll=Nr("ceil"),ul=Mr((function(t,e){return t/e}),1),hl=Nr("floor");var cl,dl=Mr((function(t,e){return t*e}),1),pl=Nr("round"),fl=Mr((function(t,e){return t-e}),0);return Ii.after=function(t,e){if("function"!=typeof e)throw new yt(o);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},Ii.ary=ys,Ii.assign=ua,Ii.assignIn=ha,Ii.assignInWith=ca,Ii.assignWith=da,Ii.at=pa,Ii.before=vs,Ii.bind=_s,Ii.bindAll=Ha,Ii.bindKey=bs,Ii.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ds(t)?t:[t]},Ii.chain=is,Ii.chunk=function(t,e,i){e=(i?lo(t,e,i):void 0===e)?1:si(ra(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,a=n(Je(r/e));o<r;)a[s++]=Yn(t,o,o+=e);return a},Ii.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},Ii.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return fe(Ds(i)?vr(i):[i],sn(e,1))},Ii.cond=function(t){var e=null==t?0:t.length,i=Qr();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new yt(o);return[i(t[0]),t[1]]})):[],jn((function(i){for(var n=-1;++n<e;){var r=t[n];if(oe(r[0],this,i))return oe(r[1],this,i)}}))},Ii.conforms=function(t){return function(t){var e=xa(t);return function(i){return Qi(i,t,e)}}($i(t,1))},Ii.constant=Xa,Ii.countBy=os,Ii.create=function(t,e){var i=Ai(t);return null==e?i:Yi(i,e)},Ii.curry=function t(e,i,n){var r=Gr(e,8,void 0,void 0,void 0,void 0,void 0,i=n?void 0:i);return r.placeholder=t.placeholder,r},Ii.curryRight=function t(e,i,n){var r=Gr(e,16,void 0,void 0,void 0,void 0,void 0,i=n?void 0:i);return r.placeholder=t.placeholder,r},Ii.debounce=xs,Ii.defaults=fa,Ii.defaultsDeep=ma,Ii.defer=ws,Ii.delay=Ts,Ii.difference=Oo,Ii.differenceBy=Mo,Ii.differenceWith=ko,Ii.drop=function(t,e,i){var n=null==t?0:t.length;return n?Yn(t,(e=i||void 0===e?1:ra(e))<0?0:e,n):[]},Ii.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?Yn(t,0,(e=n-(e=i||void 0===e?1:ra(e)))<0?0:e):[]},Ii.dropRightWhile=function(t,e){return t&&t.length?ir(t,Qr(e,3),!0,!0):[]},Ii.dropWhile=function(t,e){return t&&t.length?ir(t,Qr(e,3),!0):[]},Ii.fill=function(t,e,i,n){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&lo(t,e,i)&&(i=0,n=r),function(t,e,i,n){var r=t.length;for((i=ra(i))<0&&(i=-i>r?0:r+i),(n=void 0===n||n>r?r:ra(n))<0&&(n+=r),n=i>n?0:oa(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},Ii.filter=function(t,e){return(Ds(t)?he:on)(t,Qr(e,3))},Ii.flatMap=function(t,e){return sn(ps(t,e),1)},Ii.flatMapDeep=function(t,e){return sn(ps(t,e),1/0)},Ii.flatMapDepth=function(t,e,i){return i=void 0===i?1:ra(i),sn(ps(t,e),i)},Ii.flatten=Lo,Ii.flattenDeep=function(t){return(null==t?0:t.length)?sn(t,1/0):[]},Ii.flattenDepth=function(t,e){return(null==t?0:t.length)?sn(t,e=void 0===e?1:ra(e)):[]},Ii.flip=function(t){return Gr(t,512)},Ii.flow=Wa,Ii.flowRight=Ya,Ii.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},Ii.functions=function(t){return null==t?[]:cn(t,xa(t))},Ii.functionsIn=function(t){return null==t?[]:cn(t,wa(t))},Ii.groupBy=hs,Ii.initial=function(t){return(null==t?0:t.length)?Yn(t,0,-1):[]},Ii.intersection=No,Ii.intersectionBy=Bo,Ii.intersectionWith=jo,Ii.invert=va,Ii.invertBy=_a,Ii.invokeMap=cs,Ii.iteratee=Ka,Ii.keyBy=ds,Ii.keys=xa,Ii.keysIn=wa,Ii.map=ps,Ii.mapKeys=function(t,e){var i={};return e=Qr(e,3),un(t,(function(t,n,r){Vi(i,e(t,n,r),t)})),i},Ii.mapValues=function(t,e){var i={};return e=Qr(e,3),un(t,(function(t,n,r){Vi(i,n,e(t,n,r))})),i},Ii.matches=function(t){return An($i(t,1))},Ii.matchesProperty=function(t,e){return On(t,$i(e,1))},Ii.memoize=Ss,Ii.merge=Ta,Ii.mergeWith=Sa,Ii.method=qa,Ii.methodOf=$a,Ii.mixin=Qa,Ii.negate=Es,Ii.nthArg=function(t){return t=ra(t),jn((function(e){return kn(e,t)}))},Ii.omit=Ea,Ii.omitBy=function(t,e){return Pa(t,Es(Qr(e)))},Ii.once=function(t){return vs(2,t)},Ii.orderBy=function(t,e,i,n){return null==t?[]:(Ds(e)||(e=null==e?[]:[e]),Ds(i=n?void 0:i)||(i=null==i?[]:[i]),Rn(t,e,i))},Ii.over=Ja,Ii.overArgs=Cs,Ii.overEvery=tl,Ii.overSome=el,Ii.partial=Ps,Ii.partialRight=Is,Ii.partition=fs,Ii.pick=Ca,Ii.pickBy=Pa,Ii.property=il,Ii.propertyOf=function(t){return function(e){return null==t?void 0:dn(t,e)}},Ii.pull=Uo,Ii.pullAll=zo,Ii.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Ln(t,e,Qr(i,2)):t},Ii.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Ln(t,e,void 0,i):t},Ii.pullAt=Ho,Ii.range=nl,Ii.rangeRight=rl,Ii.rearg=As,Ii.reject=function(t,e){return(Ds(t)?he:on)(t,Es(Qr(e,3)))},Ii.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=Qr(e,3);++n<o;){var s=t[n];e(s,n,t)&&(i.push(s),r.push(n))}return Fn(t,r),i},Ii.rest=function(t,e){if("function"!=typeof t)throw new yt(o);return jn(t,e=void 0===e?e:ra(e))},Ii.reverse=Xo,Ii.sampleSize=function(t,e,i){return e=(i?lo(t,e,i):void 0===e)?1:ra(e),(Ds(t)?Gi:Un)(t,e)},Ii.set=function(t,e,i){return null==t?t:zn(t,e,i)},Ii.setWith=function(t,e,i,n){return n="function"==typeof n?n:void 0,null==t?t:zn(t,e,i,n)},Ii.shuffle=function(t){return(Ds(t)?Ui:Wn)(t)},Ii.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&lo(t,e,i)?(e=0,i=n):(e=null==e?0:ra(e),i=void 0===i?n:ra(i)),Yn(t,e,i)):[]},Ii.sortBy=ms,Ii.sortedUniq=function(t){return t&&t.length?$n(t):[]},Ii.sortedUniqBy=function(t,e){return t&&t.length?$n(t,Qr(e,2)):[]},Ii.split=function(t,e,i){return i&&"number"!=typeof i&&lo(t,e,i)&&(e=i=void 0),(i=void 0===i?4294967295:i>>>0)?(t=la(t))&&("string"==typeof e||null!=e&&!qs(e))&&!(e=Zn(e))&&Ge(t)?hr(Ve(t),0,i):t.split(e,i):[]},Ii.spread=function(t,e){if("function"!=typeof t)throw new yt(o);return e=null==e?0:si(ra(e),0),jn((function(i){var n=i[e],r=hr(i,0,e);return n&&fe(r,n),oe(t,this,r)}))},Ii.tail=function(t){var e=null==t?0:t.length;return e?Yn(t,1,e):[]},Ii.take=function(t,e,i){return t&&t.length?Yn(t,0,(e=i||void 0===e?1:ra(e))<0?0:e):[]},Ii.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?Yn(t,(e=n-(e=i||void 0===e?1:ra(e)))<0?0:e,n):[]},Ii.takeRightWhile=function(t,e){return t&&t.length?ir(t,Qr(e,3),!1,!0):[]},Ii.takeWhile=function(t,e){return t&&t.length?ir(t,Qr(e,3)):[]},Ii.tap=function(t,e){return e(t),t},Ii.throttle=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new yt(o);return Xs(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),xs(t,e,{leading:n,maxWait:e,trailing:r})},Ii.thru=ns,Ii.toArray=ia,Ii.toPairs=Ia,Ii.toPairsIn=Aa,Ii.toPath=function(t){return Ds(t)?pe(t,Po):Zs(t)?[t]:vr(Co(la(t)))},Ii.toPlainObject=aa,Ii.transform=function(t,e,i){var n=Ds(t),r=n||Bs(t)||Js(t);if(e=Qr(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:Xs(t)&&Us(o)?Ai(zt(t)):{}}return(r?ae:un)(t,(function(t,n,r){return e(i,t,n,r)})),i},Ii.unary=function(t){return ys(t,1)},Ii.union=Wo,Ii.unionBy=Yo,Ii.unionWith=Vo,Ii.uniq=function(t){return t&&t.length?Jn(t):[]},Ii.uniqBy=function(t,e){return t&&t.length?Jn(t,Qr(e,2)):[]},Ii.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Jn(t,void 0,e):[]},Ii.unset=function(t,e){return null==t||tr(t,e)},Ii.unzip=Ko,Ii.unzipWith=qo,Ii.update=function(t,e,i){return null==t?t:er(t,e,ar(i))},Ii.updateWith=function(t,e,i,n){return n="function"==typeof n?n:void 0,null==t?t:er(t,e,ar(i),n)},Ii.values=Oa,Ii.valuesIn=function(t){return null==t?[]:ke(t,wa(t))},Ii.without=$o,Ii.words=Ua,Ii.wrap=function(t,e){return Ps(ar(e),t)},Ii.xor=Qo,Ii.xorBy=Zo,Ii.xorWith=Jo,Ii.zip=ts,Ii.zipObject=function(t,e){return or(t||[],e||[],Hi)},Ii.zipObjectDeep=function(t,e){return or(t||[],e||[],zn)},Ii.zipWith=es,Ii.entries=Ia,Ii.entriesIn=Aa,Ii.extend=ha,Ii.extendWith=ca,Qa(Ii,Ii),Ii.add=al,Ii.attempt=za,Ii.camelCase=Ma,Ii.capitalize=ka,Ii.ceil=ll,Ii.clamp=function(t,e,i){return void 0===i&&(i=e,e=void 0),void 0!==i&&(i=(i=sa(i))==i?i:0),void 0!==e&&(e=(e=sa(e))==e?e:0),qi(sa(t),e,i)},Ii.clone=function(t){return $i(t,4)},Ii.cloneDeep=function(t){return $i(t,5)},Ii.cloneDeepWith=function(t,e){return $i(t,5,e="function"==typeof e?e:void 0)},Ii.cloneWith=function(t,e){return $i(t,4,e="function"==typeof e?e:void 0)},Ii.conformsTo=function(t,e){return null==e||Qi(t,e,xa(e))},Ii.deburr=Ra,Ii.defaultTo=function(t,e){return null==t||t!=t?e:t},Ii.divide=ul,Ii.endsWith=function(t,e,i){t=la(t),e=Zn(e);var n=t.length,r=i=void 0===i?n:qi(ra(i),0,n);return(i-=e.length)>=0&&t.slice(i,r)==e},Ii.eq=Os,Ii.escape=function(t){return(t=la(t))&&j.test(t)?t.replace(N,Be):t},Ii.escapeRegExp=function(t){return(t=la(t))&&V.test(t)?t.replace(Y,"\\$&"):t},Ii.every=function(t,e,i){var n=Ds(t)?ue:nn;return i&&lo(t,e,i)&&(e=void 0),n(t,Qr(e,3))},Ii.find=ss,Ii.findIndex=Ro,Ii.findKey=function(t,e){return _e(t,Qr(e,3),un)},Ii.findLast=as,Ii.findLastIndex=Do,Ii.findLastKey=function(t,e){return _e(t,Qr(e,3),hn)},Ii.floor=hl,Ii.forEach=ls,Ii.forEachRight=us,Ii.forIn=function(t,e){return null==t?t:an(t,Qr(e,3),wa)},Ii.forInRight=function(t,e){return null==t?t:ln(t,Qr(e,3),wa)},Ii.forOwn=function(t,e){return t&&un(t,Qr(e,3))},Ii.forOwnRight=function(t,e){return t&&hn(t,Qr(e,3))},Ii.get=ga,Ii.gt=Ms,Ii.gte=ks,Ii.has=function(t,e){return null!=t&&ro(t,e,gn)},Ii.hasIn=ya,Ii.head=Fo,Ii.identity=Va,Ii.includes=function(t,e,i,n){t=Fs(t)?t:Oa(t),i=i&&!n?ra(i):0;var r=t.length;return i<0&&(i=si(r+i,0)),Qs(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&xe(t,e,i)>-1},Ii.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ra(i);return r<0&&(r=si(n+r,0)),xe(t,e,r)},Ii.inRange=function(t,e,i){return e=na(e),void 0===i?(i=e,e=0):i=na(i),function(t,e,i){return t>=ai(e,i)&&t<si(e,i)}(t=sa(t),e,i)},Ii.invoke=ba,Ii.isArguments=Rs,Ii.isArray=Ds,Ii.isArrayBuffer=Ls,Ii.isArrayLike=Fs,Ii.isArrayLikeObject=Ns,Ii.isBoolean=function(t){return!0===t||!1===t||Ws(t)&&fn(t)==h},Ii.isBuffer=Bs,Ii.isDate=js,Ii.isElement=function(t){return Ws(t)&&1===t.nodeType&&!Ks(t)},Ii.isEmpty=function(t){if(null==t)return!0;if(Fs(t)&&(Ds(t)||"string"==typeof t||"function"==typeof t.splice||Bs(t)||Js(t)||Rs(t)))return!t.length;var e=no(t);if(e==m||e==_)return!t.size;if(po(t))return!En(t).length;for(var i in t)if(Tt.call(t,i))return!1;return!0},Ii.isEqual=function(t,e){return xn(t,e)},Ii.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:void 0)?i(t,e):void 0;return void 0===n?xn(t,e,void 0,i):!!n},Ii.isError=Gs,Ii.isFinite=function(t){return"number"==typeof t&&ni(t)},Ii.isFunction=Us,Ii.isInteger=zs,Ii.isLength=Hs,Ii.isMap=Ys,Ii.isMatch=function(t,e){return t===e||wn(t,e,Jr(e))},Ii.isMatchWith=function(t,e,i){return i="function"==typeof i?i:void 0,wn(t,e,Jr(e),i)},Ii.isNaN=function(t){return Vs(t)&&t!=+t},Ii.isNative=function(t){if(co(t))throw new q("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Tn(t)},Ii.isNil=function(t){return null==t},Ii.isNull=function(t){return null===t},Ii.isNumber=Vs,Ii.isObject=Xs,Ii.isObjectLike=Ws,Ii.isPlainObject=Ks,Ii.isRegExp=qs,Ii.isSafeInteger=function(t){return zs(t)&&t>=-9007199254740991&&t<=9007199254740991},Ii.isSet=$s,Ii.isString=Qs,Ii.isSymbol=Zs,Ii.isTypedArray=Js,Ii.isUndefined=function(t){return void 0===t},Ii.isWeakMap=function(t){return Ws(t)&&no(t)==w},Ii.isWeakSet=function(t){return Ws(t)&&"[object WeakSet]"==fn(t)},Ii.join=function(t,e){return null==t?"":ri.call(t,e)},Ii.kebabCase=Da,Ii.last=Go,Ii.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n;return void 0!==i&&(r=(r=ra(i))<0?si(n+r,0):ai(r,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,r):be(t,Te,r,!0)},Ii.lowerCase=La,Ii.lowerFirst=Fa,Ii.lt=ta,Ii.lte=ea,Ii.max=function(t){return t&&t.length?rn(t,Va,mn):void 0},Ii.maxBy=function(t,e){return t&&t.length?rn(t,Qr(e,2),mn):void 0},Ii.mean=function(t){return Se(t,Va)},Ii.meanBy=function(t,e){return Se(t,Qr(e,2))},Ii.min=function(t){return t&&t.length?rn(t,Va,Pn):void 0},Ii.minBy=function(t,e){return t&&t.length?rn(t,Qr(e,2),Pn):void 0},Ii.stubArray=ol,Ii.stubFalse=sl,Ii.stubObject=function(){return{}},Ii.stubString=function(){return""},Ii.stubTrue=function(){return!0},Ii.multiply=dl,Ii.nth=function(t,e){return t&&t.length?kn(t,ra(e)):void 0},Ii.noConflict=function(){return Vt._===this&&(Vt._=It),this},Ii.noop=Za,Ii.now=gs,Ii.pad=function(t,e,i){t=la(t);var n=(e=ra(e))?Ye(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Rr(ti(r),i)+t+Rr(Je(r),i)},Ii.padEnd=function(t,e,i){t=la(t);var n=(e=ra(e))?Ye(t):0;return e&&n<e?t+Rr(e-n,i):t},Ii.padStart=function(t,e,i){t=la(t);var n=(e=ra(e))?Ye(t):0;return e&&n<e?Rr(e-n,i)+t:t},Ii.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),ui(la(t).replace(K,""),e||0)},Ii.random=function(t,e,i){if(i&&"boolean"!=typeof i&&lo(t,e,i)&&(e=i=void 0),void 0===i&&("boolean"==typeof e?(i=e,e=void 0):"boolean"==typeof t&&(i=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=na(t),void 0===e?(e=t,t=0):e=na(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var r=hi();return ai(t+r*(e-t+Ht("1e-"+((r+"").length-1))),e)}return Nn(t,e)},Ii.reduce=function(t,e,i){var n=Ds(t)?me:Pe,r=arguments.length<3;return n(t,Qr(e,4),i,r,tn)},Ii.reduceRight=function(t,e,i){var n=Ds(t)?ge:Pe,r=arguments.length<3;return n(t,Qr(e,4),i,r,en)},Ii.repeat=function(t,e,i){return e=(i?lo(t,e,i):void 0===e)?1:ra(e),Bn(la(t),e)},Ii.replace=function(){var t=arguments,e=la(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Ii.result=function(t,e,i){var n=-1,r=(e=lr(e,t)).length;for(r||(r=1,t=void 0);++n<r;){var o=null==t?void 0:t[Po(e[n])];void 0===o&&(n=r,o=i),t=Us(o)?o.call(t):o}return t},Ii.round=pl,Ii.runInContext=t,Ii.sample=function(t){return(Ds(t)?ji:Gn)(t)},Ii.size=function(t){if(null==t)return 0;if(Fs(t))return Qs(t)?Ye(t):t.length;var e=no(t);return e==m||e==_?t.size:En(t).length},Ii.snakeCase=Na,Ii.some=function(t,e,i){var n=Ds(t)?ye:Vn;return i&&lo(t,e,i)&&(e=void 0),n(t,Qr(e,3))},Ii.sortedIndex=function(t,e){return Kn(t,e)},Ii.sortedIndexBy=function(t,e,i){return qn(t,e,Qr(i,2))},Ii.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=Kn(t,e);if(n<i&&Os(t[n],e))return n}return-1},Ii.sortedLastIndex=function(t,e){return Kn(t,e,!0)},Ii.sortedLastIndexBy=function(t,e,i){return qn(t,e,Qr(i,2),!0)},Ii.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var i=Kn(t,e,!0)-1;if(Os(t[i],e))return i}return-1},Ii.startCase=Ba,Ii.startsWith=function(t,e,i){return t=la(t),i=null==i?0:qi(ra(i),0,t.length),e=Zn(e),t.slice(i,i+e.length)==e},Ii.subtract=fl,Ii.sum=function(t){return t&&t.length?Ie(t,Va):0},Ii.sumBy=function(t,e){return t&&t.length?Ie(t,Qr(e,2)):0},Ii.template=function(t,e,i){var n=Ii.templateSettings;i&&lo(t,e,i)&&(e=void 0),t=la(t),e=ca({},e,n,Ur);var r,o,s=ca({},e.imports,n.imports,Ur),a=xa(s),l=ke(s,a),u=0,h=e.interpolate||ht,c="__p += '",d=mt((e.escape||ht).source+"|"+h.source+"|"+(h===z?it:ht).source+"|"+(e.evaluate||ht).source+"|$","g"),p="//# sourceURL="+(Tt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(d,(function(e,i,n,s,a,l){return n||(n=s),c+=t.slice(u,l).replace(ct,je),i&&(r=!0,c+="' +\n__e("+i+") +\n'"),a&&(o=!0,c+="';\n"+a+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),c+="';\n";var f=Tt.call(e,"variable")&&e.variable;if(f){if(tt.test(f))throw new q("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(o?c.replace(R,""):c).replace(D,"$1").replace(L,"$1;"),c="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var m=za((function(){return dt(a,p+"return "+c).apply(void 0,l)}));if(m.source=c,Gs(m))throw m;return m},Ii.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var i=4294967295,n=ai(t,4294967295);t-=4294967295;for(var r=Ae(n,e=Qr(e));++i<t;)e(i);return r},Ii.toFinite=na,Ii.toInteger=ra,Ii.toLength=oa,Ii.toLower=function(t){return la(t).toLowerCase()},Ii.toNumber=sa,Ii.toSafeInteger=function(t){return t?qi(ra(t),-9007199254740991,9007199254740991):0===t?t:0},Ii.toString=la,Ii.toUpper=function(t){return la(t).toUpperCase()},Ii.trim=function(t,e,i){if((t=la(t))&&(i||void 0===e))return Oe(t);if(!t||!(e=Zn(e)))return t;var n=Ve(t),r=Ve(e);return hr(n,De(n,r),Le(n,r)+1).join("")},Ii.trimEnd=function(t,e,i){if((t=la(t))&&(i||void 0===e))return t.slice(0,Ke(t)+1);if(!t||!(e=Zn(e)))return t;var n=Ve(t);return hr(n,0,Le(n,Ve(e))+1).join("")},Ii.trimStart=function(t,e,i){if((t=la(t))&&(i||void 0===e))return t.replace(K,"");if(!t||!(e=Zn(e)))return t;var n=Ve(t);return hr(n,De(n,Ve(e))).join("")},Ii.truncate=function(t,e){var i=30,n="...";if(Xs(e)){var r="separator"in e?e.separator:r;i="length"in e?ra(e.length):i,n="omission"in e?Zn(e.omission):n}var o=(t=la(t)).length;if(Ge(t)){var s=Ve(t);o=s.length}if(i>=o)return t;var a=i-Ye(n);if(a<1)return n;var l=s?hr(s,0,a).join(""):t.slice(0,a);if(void 0===r)return l+n;if(s&&(a+=l.length-a),qs(r)){if(t.slice(a).search(r)){var u,h=l;for(r.global||(r=mt(r.source,la(nt.exec(r))+"g")),r.lastIndex=0;u=r.exec(h);)var c=u.index;l=l.slice(0,void 0===c?a:c)}}else if(t.indexOf(Zn(r),a)!=a){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+n},Ii.unescape=function(t){return(t=la(t))&&B.test(t)?t.replace(F,qe):t},Ii.uniqueId=function(t){var e=++St;return la(t)+e},Ii.upperCase=ja,Ii.upperFirst=Ga,Ii.each=ls,Ii.eachRight=us,Ii.first=Fo,Qa(Ii,(cl={},un(Ii,(function(t,e){Tt.call(Ii.prototype,e)||(cl[e]=t)})),cl),{chain:!1}),Ii.VERSION="4.17.21",ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Ii[t].placeholder=Ii})),ae(["drop","take"],(function(t,e){ki.prototype[t]=function(i){i=void 0===i?1:si(ra(i),0);var n=this.__filtered__&&!e?new ki(this):this.clone();return n.__filtered__?n.__takeCount__=ai(i,n.__takeCount__):n.__views__.push({size:ai(i,4294967295),type:t+(n.__dir__<0?"Right":"")}),n},ki.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ae(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;ki.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Qr(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),ae(["head","last"],(function(t,e){var i="take"+(e?"Right":"");ki.prototype[t]=function(){return this[i](1).value()[0]}})),ae(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");ki.prototype[t]=function(){return this.__filtered__?new ki(this):this[i](1)}})),ki.prototype.compact=function(){return this.filter(Va)},ki.prototype.find=function(t){return this.filter(t).head()},ki.prototype.findLast=function(t){return this.reverse().find(t)},ki.prototype.invokeMap=jn((function(t,e){return"function"==typeof t?new ki(this):this.map((function(i){return _n(i,t,e)}))})),ki.prototype.reject=function(t){return this.filter(Es(Qr(t)))},ki.prototype.slice=function(t,e){t=ra(t);var i=this;return i.__filtered__&&(t>0||e<0)?new ki(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),void 0!==e&&(i=(e=ra(e))<0?i.dropRight(-e):i.take(e-t)),i)},ki.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ki.prototype.toArray=function(){return this.take(4294967295)},un(ki.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),r=Ii[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);r&&(Ii.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,a=e instanceof ki,l=s[0],u=a||Ds(e),h=function(t){var e=r.apply(Ii,fe([t],s));return n&&c?e[0]:e};u&&i&&"function"==typeof l&&1!=l.length&&(a=u=!1);var c=this.__chain__,d=!!this.__actions__.length,p=o&&!c,f=a&&!d;if(!o&&u){e=f?e:new ki(this);var m=t.apply(e,s);return m.__actions__.push({func:ns,args:[h],thisArg:void 0}),new Mi(m,c)}return p&&f?t.apply(this,s):(m=this.thru(h),p?n?m.value()[0]:m.value():m)})})),ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=vt[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Ii.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Ds(r)?r:[],t)}return this[i]((function(i){return e.apply(Ds(i)?i:[],t)}))}})),un(ki.prototype,(function(t,e){var i=Ii[e];if(i){var n=i.name+"";Tt.call(_i,n)||(_i[n]=[]),_i[n].push({name:e,func:i})}})),_i[Ar(void 0,2).name]=[{name:"wrapper",func:void 0}],ki.prototype.clone=function(){var t=new ki(this.__wrapped__);return t.__actions__=vr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=vr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=vr(this.__views__),t},ki.prototype.reverse=function(){if(this.__filtered__){var t=new ki(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},ki.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ds(t),n=e<0,r=i?t.length:0,o=function(t,e,i){var n=-1,r=i.length;for(;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ai(e,t+s);break;case"takeRight":t=si(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=n?a:s-1,h=this.__iteratees__,c=h.length,d=0,p=ai(l,this.__takeCount__);if(!i||!n&&r==l&&p==l)return nr(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var m=-1,g=t[u+=e];++m<c;){var y=h[m],v=y.iteratee,_=y.type,b=v(g);if(2==_)g=b;else if(!b){if(1==_)continue t;break t}}f[d++]=g}return f},Ii.prototype.at=rs,Ii.prototype.chain=function(){return is(this)},Ii.prototype.commit=function(){return new Mi(this.value(),this.__chain__)},Ii.prototype.next=function(){void 0===this.__values__&&(this.__values__=ia(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Ii.prototype.plant=function(t){for(var e,i=this;i instanceof Oi;){var n=Ao(i);n.__index__=0,n.__values__=void 0,e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e},Ii.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof ki){var e=t;return this.__actions__.length&&(e=new ki(this)),(e=e.reverse()).__actions__.push({func:ns,args:[Xo],thisArg:void 0}),new Mi(e,this.__chain__)}return this.thru(Xo)},Ii.prototype.toJSON=Ii.prototype.valueOf=Ii.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},Ii.prototype.first=Ii.prototype.head,Qt&&(Ii.prototype[Qt]=function(){return this}),Ii}();Vt._=$e,void 0===(r=function(){return $e}.call(e,i,e,n))||(n.exports=r)}).call(this)}).call(this,i(7),i(20)(t))},function(t,e,i){"use strict";i.r(e),i.d(e,"fromString",(function(){return o})),i.d(e,"add",(function(){return s})),i.d(e,"add_",(function(){return a})),i.d(e,"multiply",(function(){return l})),i.d(e,"multiply_",(function(){return u})),i.d(e,"interpolate",(function(){return h})),i.d(e,"lerp",(function(){return c})),i.d(e,"interpolateHSL",(function(){return d})),i.d(e,"lerpHSL",(function(){return p})),i.d(e,"randomize",(function(){return f})),i.d(e,"rgb2hsl",(function(){return m})),i.d(e,"hsl2rgb",(function(){return y})),i.d(e,"toRGB",(function(){return v})),i.d(e,"toHex",(function(){return _}));var n=i(4),r=i(6);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function o(t){let e,i;if(t in b)e=b[t];else{if("#"===t.charAt(0)){const i=(t.match(/[0-9a-f]/gi)||[]).map(t=>parseInt(t,16));if(3===i.length)e=i.map(t=>17*t);else{for(let t=0;t<3;t++)i[t+1]+=16*i[t],i.splice(t,1);e=i}}else e=(i=t.match(/rgb\(([0-9, ]+)\)/i))?i[1].split(/\s*,\s*/).map(t=>parseInt(t)):[0,0,0];b[t]=e}return e.slice()}function s(t,...e){const i=t.slice();for(let t=0;t<3;t++)for(let n=0;n<e.length;n++)i[t]+=e[n][t];return i}function a(t,...e){for(let i=0;i<3;i++)for(let n=0;n<e.length;n++)t[i]+=e[n][i];return t}function l(t,...e){const i=t.slice();for(let t=0;t<3;t++){for(let n=0;n<e.length;n++)i[t]*=e[n][t]/255;i[t]=Math.round(i[t])}return i}function u(t,...e){for(let i=0;i<3;i++){for(let n=0;n<e.length;n++)t[i]*=e[n][i]/255;t[i]=Math.round(t[i])}return t}function h(t,e,i=.5){const n=t.slice();for(let r=0;r<3;r++)n[r]=Math.round(n[r]+i*(e[r]-t[r]));return n}const c=h;function d(t,e,i=.5){const n=m(t),r=m(e);for(let t=0;t<3;t++)n[t]+=i*(r[t]-n[t]);return y(n)}const p=d;function f(t,e){e instanceof Array||(e=Math.round(r.a.getNormal(0,e)));const i=t.slice();for(let t=0;t<3;t++)i[t]+=e instanceof Array?Math.round(r.a.getNormal(0,e[t])):e;return i}function m(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,r=Math.max(e,i,n),o=Math.min(e,i,n);let s,a=0,l=(r+o)/2;if(r===o)s=0;else{const t=r-o;switch(s=l>.5?t/(2-r-o):t/(r+o),r){case e:a=(i-n)/t+(i<n?6:0);break;case i:a=(n-e)/t+2;break;case n:a=(e-i)/t+4}a/=6}return[a,s,l]}function g(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function y(t){let e=t[2];if(0===t[1])return e=Math.round(255*e),[e,e,e];{const i=t[1],n=e<.5?e*(1+i):e+i-e*i,r=2*e-n,o=g(r,n,t[0]+1/3),s=g(r,n,t[0]),a=g(r,n,t[0]-1/3);return[Math.round(255*o),Math.round(255*s),Math.round(255*a)]}}function v(t){return`rgb(${t.map(t=>Object(n.clamp)(t,0,255)).join(",")})`}function _(t){return"#"+t.map(t=>Object(n.clamp)(t,0,255).toString(16).padStart(2,"0")).join("")}const b={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(t,e,i){(function(i){var n;
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),s=0;s<o.length;s++){var a=t._howls[r]._soundById(o[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new r,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return o.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,n;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(n=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&o.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,n=i._sounds[s]._id);1===r?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var l=a._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&o._autoResume();var u=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),h=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-u),c=1e3*h/Math.abs(a._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=u,a._start=d,a._stop=p,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(u>=p)){var m=a._node;if(i._webAudio){var g=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;m.gain.setValueAtTime(t,o.ctx.currentTime),a._playStart=o.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,h):a._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,h),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?g():(i._playLock=!0,i.once("resume",g),i._clearTimer(a._id))}else{var y=function(){m.currentTime=u,m.muted=a._muted||i._muted||o._muted||m.muted,m.volume=a._volume*o.volume(),m.playbackRate=a._rate;try{var n=m.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,m._unlocked=!0,e||(i._emit("play",a._id),i._loadQueue())})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id),i._loadQueue()),m.playbackRate=a._rate,m.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),m.removeEventListener("ended",i._endTimers[a._id],!1)},m.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=i._src,m.load());var v=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||v)y();else{i._playLock=!0;var _=function(){y(),m.removeEventListener(o._canPlayEvent,_,!1)};m.addEventListener(o._canPlayEvent,_,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var o=i._soundById(n[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,i._stopFade(n[r]),o._node&&(i._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),i._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&i._clearSound(o._node))),e||i._emit("stop",o._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]){var s=n._getSoundIds(),a=s.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var l=0;l<e.length;l++)(i=n._soundById(e[l]))&&(i._volume=t,r[2]||n._stopFade(e[l]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,o.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*o.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var s=r._getSoundIds(n),a=0;a<s.length;a++){var l=r._soundById(s[a]);if(l){if(n||r._stopFade(s[a]),r._webAudio&&!l._muted){var u=o.ctx.currentTime,h=u+i/1e3;l._volume=t,l._node.gain.setValueAtTime(t,u),l._node.gain.linearRampToValueAtTime(e,h)}r._startFadeInterval(l,t,e,i,s[a],void 0===n)}}return r},_startFadeInterval:function(t,e,i,n,r,o){var s=this,a=e,l=i-e,u=Math.abs(l/.01),h=Math.max(4,u>0?n/u:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var r=(Date.now()-c)/n;c=Date.now(),a+=l*r,a=Math.round(100*a)/100,a=l<0?Math.max(i,a):Math.min(i,a),s._webAudio?t._volume=a:s.volume(a,t._id,!0),o&&(s._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))}),h)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=n._getSoundIds(e),s=0;s<o.length;s++)(i=n._soundById(o[s]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var s=n._getSoundIds(),a=s.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var l=0;l<e.length;l++)if(i=n._soundById(e[l])){n.playing(e[l])&&(i._rateSeek=n.seek(e[l]),i._playStart=n._webAudio?o.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):i._node&&(i._node.playbackRate=t);var u=n.seek(e[l]),h=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-u,c=1e3*h/Math.abs(i._rate);!n._endTimers[e[l]]&&i._paused||(n._clearTimer(e[l]),n._endTimers[e[l]]=setTimeout(n._ended.bind(n,i),c)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return i;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var l=i.playing(e)?o.ctx.currentTime-a._playStart:0,u=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(u+l*Math.abs(a._rate))}return a._node.currentTime}var h=i.playing(e);h&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){i._emit("seek",e),h&&i.play(e,!0)};if(h&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(o._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),o._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=o._howls.indexOf(t);n>=0&&o._howls.splice(n,1);var r=!0;for(i=0;i<o._howls.length;i++)if(o._howls[i]._src===t._src||t._src.indexOf(o._howls[i]._src)>=0){r=!1;break}return l&&r&&delete l[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this["_on"+t];return"function"==typeof e&&r.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<n.length;r++){var o=i===n[r].id;if(e===n[r].fn&&o||!e&&o){n.splice(r,1);break}}else if(t)this["_on"+t]=[];else{var s=Object.keys(this);for(r=0;r<s.length;r++)0===s[r].indexOf("_on")&&Array.isArray(this[s[r]])&&(this[s[r]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],r=n.length-1;r>=0;r--)n[r].id&&n[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[r].fn),0),n[r].once&&this.off(t,n[r].fn,n[r].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),n)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),o._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new a(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=l[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=o._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(e,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*o.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var l={},u=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);c(n.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?c(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},h(o)}},h=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(l[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(n).catch(i):o.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!n&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(n=function(){return{Howler:o,Howl:s}}.apply(e,[]))||(t.exports=n),e.Howler=o,e.Howl=s,void 0!==i?(i.HowlerGlobal=r,i.Howler=o,i.Howl=s,i.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=o,window.Howl=s,window.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,o){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return e="number"!=typeof e?s[1]:e,i="number"!=typeof i?s[2]:i,n="number"!=typeof n?s[3]:n,r="number"!=typeof r?s[4]:r,o="number"!=typeof o?s[5]:o,"number"!=typeof t?s:(this._orientation=[t,e,i,n,r,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,n,r,o),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var o=n._getSoundIds(i),s=0;s<o.length;s++){var a=n._soundById(o[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,i,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,i,n,r)}}),o;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return o._pos;o._pos=[t,i,n]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,i,n],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(t,i,n)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,i,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,i,n,r)}}),o;if(i="number"!=typeof i?o._orientation[1]:i,n="number"!=typeof n?o._orientation[2]:n,void 0===r){if("number"!=typeof t)return o._orientation;o._orientation=[t,i,n]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,i,n],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(t,i,n)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,i,n,r=this,o=arguments;if(!r._webAudio)return r;if(0===o.length)return r._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(n=r._soundById(parseInt(o[0],10)))?n._pannerAttr:r._pannerAttr;t=o[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===o.length&&(t=o[0],i=parseInt(o[1],10));for(var s=r._getSoundIds(i),a=0;a<s.length;a++)if(n=r._soundById(s[a])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var u=n._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),e(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(7))},function(t,e,i){"use strict";
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function n(t,e){return(t%e+e)%e}function r(t,e=0,i=1){return t<e?e:t>i?i:t}function o(t){return t.charAt(0).toUpperCase()+t.substring(1)}function s(t,...e){const i=s.map;return t.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,(function(n,r,s,a){if("%"===t.charAt(a-1))return n.substring(1);if(!e.length)return n;let l=e[0];const u=(r||s).split(","),h=u.shift()||"",c=i[h.toLowerCase()];if(!c)return n;l=e.shift();let d=l[c].apply(l,u);const p=h.charAt(0);return p!==p.toLowerCase()&&(d=o(d)),d}))}i.r(e),i.d(e,"mod",(function(){return n})),i.d(e,"clamp",(function(){return r})),i.d(e,"capitalize",(function(){return o})),i.d(e,"format",(function(){return s})),s.map={s:"toString"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,i){"use strict";
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const n=2.3283064365386963e-10;class r{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*n,t=69069*t+1>>>0,this._s1=t*n,t=69069*t+1>>>0,this._s2=t*n,this._c=1,this}getUniform(){const t=2091639*this._s0+this._c*n;return this._s0=this._s1,this._s1=this._s2,this._c=0|t,this._s2=t-this._c,this._s2}getUniformInt(t,e){const i=Math.max(t,e),n=Math.min(t,e);return Math.floor(this.getUniform()*(i-n+1))+n}getNormal(t=0,e=1){let i,n,r;do{i=2*this.getUniform()-1,n=2*this.getUniform()-1,r=i*i+n*n}while(r>1||0===r);return t+i*Math.sqrt(-2*Math.log(r)/r)*e}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){const e=[],i=t.slice();for(;i.length;){const t=i.indexOf(this.getItem(i));e.push(i.splice(t,1)[0])}return e}getWeightedValue(t){let e=0;for(const i in t)e+=t[i];const i=this.getUniform()*e;let n,r=0;for(n in t)if(r+=t[n],i<r)return n;return n}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return(new r).setState(this.getState())}}e.a=(new r).setSeed(Date.now())},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class n{getContainer(){return null}setOptions(t){this._options=t}}},function(t,e,i){i(14);const n=new(0,i(11).IdGenerator);t.exports=class{constructor(){this.types={},this.c={},this.id="",this.tags=new Set,this.updatedComponents=0,this.updatedValues=0,this.destroyed=!1,this.ready=!1}_setup(t){if(this.destroyed=!1,t.id?this.id=t.id:this.id=n.genId(),this.world.entities.set(this.id,this),this.updatedComponents=this.world.currentTick,t.tags)for(const e of t.tags)this.addTag(e);if(t.components)for(const e of t.components)this.addComponent(e);if(t.c){const e=t.c;for(const t of Object.keys(e)){const i={...e[t],key:t};i.type||(i.type=t),this.addComponent(i)}}this.ready=!0,this.world._entityUpdated(this)}has(t){return"string"!=typeof t&&(t=t.name),this.tags.has(t)||this.types.hasOwnProperty(t)}getOne(t){let e;return"string"!=typeof t&&(t=t.name),this.types[t]&&(e=[...this.types[t]][0]),e}getComponents(t){return"string"!=typeof t&&(t=t.name),this.types[t]||new Set}addTag(t){if(!this.world.tags.has(t))throw new Error(`addTag "${t}" is not registered. Type-O?`);this.tags.add(t),this.updatedComponents=this.world.currentTick,this.world.entitiesByComponent[t].add(this.id),this.ready&&this.world._entityUpdated(this)}removeTag(t){this.tags.delete(t),this.updatedComponents=this.world.currentTick,this.world.entitiesByComponent[t].delete(this.id),this.world._entityUpdated(this)}addComponent(t){const e=t.type,i=this.world.componentPool.get(e);if(void 0===i)throw new Error(`Component "${e}" has not been registered.`);const n=i.get(this,t);return this.types[e]||(this.types[e]=new Set),this.types[e].add(n),this.world._addEntityComponent(e,this),this.updatedComponents=this.world.currentTick,this.ready&&this.world._entityUpdated(this),n}removeComponent(t){return"string"==typeof t&&(t=this.c[t]),void 0!==t&&(t.key&&delete this.c[t.key],this.types[t.type].delete(t),0===this.types[t.type].size&&delete this.types[t.type],this.world._deleteEntityComponent(t),this.world._entityUpdated(this),t.destroy(),!0)}getObject(t=!0){const e={id:this.id,tags:[...this.tags],components:[],c:{}};for(const i of Object.keys(this.types))for(const n of this.types[i])n.constructor.serialize&&(n.key?e.c[n.key]=n.getObject(t):e.components.push(n.getObject(t)));return e}destroy(){if(!this.destroyed){if(this.world.refs[this.id])for(const t of this.world.refs[this.id]){const[e,i,n,r]=t.split("..."),o=this.world.getEntity(e);if(!o)continue;const s=o.world.componentsById.get(i);if(!s)continue;const a=n.split(".");let l=s,u=l;for(const t of a)u=l,l=l[t];"__set__"===r?l.delete(this):"__obj__"===r?delete u[a[1]]:u[n]=null}for(const t of Object.keys(this.types))for(const e of this.types[t])this.removeComponent(e);this.tags.clear(),this.world.entities.delete(this.id),delete this.world.entityReverse[this.id],this.destroyed=!0,this.ready=!1,this.world.entityPool.destroy(this),this.world._clearIndexes(this)}}}},function(t,e,i){"use strict";var n=i(38),r=i(39);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(u),c=["%","/","?",";","#"].concat(h),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(40);function _(t,e,i){if(t&&r.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,i),n}o.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(a);if(_=_.trim(),!i&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,_=_.substr(x.length)}if(i||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||x&&g[x]||(_=_.substr(2),this.slashes=!0)}if(!g[x]&&(T||x&&!y[x])){for(var S,E,C=-1,P=0;P<d.length;P++){-1!==(I=_.indexOf(d[P]))&&(-1===C||I<C)&&(C=I)}-1!==(E=-1===C?_.lastIndexOf("@"):_.lastIndexOf("@",C))&&(S=_.slice(0,E),_=_.slice(E+1),this.auth=decodeURIComponent(S)),C=-1;for(P=0;P<c.length;P++){var I;-1!==(I=_.indexOf(c[P]))&&(-1===C||I<C)&&(C=I)}-1===C&&(C=_.length),this.host=_.slice(0,C),_=_.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var O=this.hostname.split(/\./),M=(P=0,O.length);P<M;P++){var k=O[P];if(k&&!k.match(p)){for(var R="",D=0,L=k.length;D<L;D++)k.charCodeAt(D)>127?R+="x":R+=k[D];if(!R.match(p)){var F=O.slice(0,P),N=O.slice(P+1),B=k.match(f);B&&(F.push(B[1]),N.unshift(B[2])),N.length&&(_="/"+N.join(".")+_),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+j,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[w])for(P=0,M=h.length;P<M;P++){var U=h[P];if(-1!==_.indexOf(U)){var z=encodeURIComponent(U);z===U&&(z=escape(U)),_=_.split(U).join(z)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var X=_.indexOf("?");if(-1!==X?(this.search=_.substr(X),this.query=_.substr(X+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,X)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var h=l[u];"protocol"!==h&&(i[h]=t[h])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",v=i.search||"";i.path=m+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||i.host&&t.pathname,w=x,T=i.pathname&&i.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===T[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(S)i.hostname=i.host=T.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var E=T.slice(-1)[0],C=(i.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,P=0,I=T.length;I>=0;I--)"."===(E=T[I])?T.splice(I,1):".."===E?(T.splice(I,1),P++):P&&(T.splice(I,1),P--);if(!x&&!w)for(;P--;P)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),C&&"/"!==T.join("/").substr(-1)&&T.push("");var A,O=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(i.hostname=i.host=O?"":T.length?T.shift():"",(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift()));return(x=x||i.host&&T.length)&&!O&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports={IdGenerator:class{constructor(){this.gen_num=0,this.prefix="",this.genPrefix()}genPrefix(){this.prefix=Date.now().toString(32)}genId(){return this.gen_num++,4294967295===this.gen_num&&(this.gen_num=0,this.genPrefix()),this.prefix+this.gen_num}},setIntersection:function(){let t=Array.from(arguments),e=t.map(t=>t.size),i=e.indexOf(Math.min.apply(Math,e)),n=t[i],r=new Set(n);return t.splice(i,1),n.forEach(e=>{for(let i=0;i<t.length;i+=1)if(!t[i].has(e)){r.delete(e);break}}),r},setUnion:function(){let t=new Set;return Array.from(arguments).forEach(e=>{e.forEach(e=>t.add(e))}),t}}},function(t,e,i){"use strict";t.exports=function(t,e){if(t){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[i.key[o]]=n[o]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}}},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return s}));var n=i(8),r=i(2);function o(t){const e=r.fromString(t);return 36*Math.floor(e[0]*(6/256))+6*Math.floor(e[1]*(6/256))+1*Math.floor(e[2]*(6/256))+16}class s extends n.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}setOptions(t){super.setOptions(t);const e=[t.width,t.height],i=this.computeSize();this._offset=i.map((t,i)=>Math.floor((t-e[i])/2))}clear(){t.stdout.write(`[0;48;5;${o(this._options.bg)}m[2J`)}draw(e,i){let[n,r,s,a,l]=e;const u=this._offset[0]+n,h=this._offset[1]+r,c=this.computeSize();if(u<0||u>=c[0])return;if(h<0||h>=c[1])return;if(u===this._cursor[0]&&h===this._cursor[1]||(t.stdout.write(function(t,e){return`[${e+1};${t+1}H`}(u,h)),this._cursor[0]=u,this._cursor[1]=h),i&&(s||(s=" ")),!s)return;const d=function(t,e){return`[0;38;5;${o(t)};48;5;${o(e)}m`}(a,l);if(d!==this._lastColor&&(t.stdout.write(d),this._lastColor=d),"\t"!==s){const e=[].concat(s);t.stdout.write(e[0])}this._cursor[0]++,this._cursor[0]>=c[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[t.stdout.columns,t.stdout.rows]}}}).call(this,i(17))},function(t,e,i){const n=new(i(11).IdGenerator);class r{constructor(t){this.world=t,this._meta={key:"",updated:0,entityId:"",refs:new Set,ready:!1,values:{}}}preInit(t){return t}init(t){}get type(){return this.constructor.name}get key(){return this._meta.key}set key(t){const e=this._meta.key;this._meta.key=t,e&&delete this.entity.c[e],t&&(this.entity.c[t]=this)}destroy(){this.preDestroy(),this._meta.values={};for(const t of this._meta.refs){const[e,i,n]=t.split("||");this.world._deleteRef(e,this._meta.entityId,this.id,i,n,this._meta.key,this.type)}this.world._sendChange({op:"destroy",component:this.id,entity:this._meta.entityId,type:this.type}),this.world.componentsById.delete(this.id),this.world.componentPool.get(this.type).release(this),this.postDestroy()}preDestroy(){}postDestroy(){}getObject(t=!0){const e={type:this.constructor.name};t&&(e.id=this.id,e.entity=this.entity.id);let i=this.constructor.serializeFields||this.constructor.fields;Array.isArray(this.constructor.skipSerializeFields)&&(i=i.filter((t,e,i)=>-1===this.constructor.skipSerializeFields.indexOf(t)));for(const t of i)void 0!==this[t]&&null!==this[t]&&"function"==typeof this[t].getValue?e[t]=this[t].getValue():this._meta.values.hasOwnProperty(t)?e[t]=this._meta.values[t]:e[t]=this[t];return this._meta.key&&(e.key=this._meta.key),e}_setup(t,e){this.entity=t,this.id=e.id||n.genId(),this._meta.updated=this.world.currentTick,this._meta.entityId=t.id,e.key&&(this.key=e.key),this._meta.values={},this.world.componentsById.set(this.id,this);const i=this.constructor.fields,r=this.constructor.primitives,o=this.constructor.factories;e=this.preInit(e);const s=Object.assign({},r,e);for(const t of i){const e=s[t];if(o.hasOwnProperty(t)){const i=o[t](this,e,t);void 0!==i&&(this[t]=i)}else this[t]=e}this._meta.ready=!0,Object.freeze(),this.init(e),this.world._sendChange({op:"add",component:this.id,entity:this._meta.entityId,type:this.type})}_reset(){this._meta.key="",this._meta.updated=0,this._meta.entityId=0,this._meta.ready=!1,this._meta.refs.clear(),this._meta.values={}}update(t){if(t&&(delete t.type,Object.assign(this,t),this.constructor.changeEvents)){const e={op:"change",props:[],component:this.id,entity:this._meta.entityId,type:this.type};for(const i in t)e.props.push(i);this.world._sendChange(e)}this._meta.updated=this.entity.updatedValues=this.world.currentTick}_addRef(t,e,i){this._meta.refs.add(`${t}||${e}||${i}`),this.world._addRef(t,this._meta.entityId,this.id,e,i,this._meta.key,this.type)}_deleteRef(t,e,i){this._meta.refs.delete(`${t}||${e}||${i}`),this.world._deleteRef(t,this._meta.entityId,this.id,e,i,this._meta.key,this.type)}}r.properties={},r.serialize=!0,r.serializeFields=null,r.skipSerializeFields=null,r.subbed=!1,r.registered=!1,t.exports=r},function(t,e,i){i(9);const n=i(11);t.exports=class{constructor(t,e,i){if(this.system=e,this.world=t,this.query={froms:[],filters:[]},this.hasStatic=!1,this.persisted=!1,this.results=new Set,this.executed=!1,this.added=new Set,this.removed=new Set,this.world.config.useApeDestroy&&!i&&this.not("ApeDestroy"),i){if(this.trackAdded=i.trackAdded||!1,this.trackRemoved=i.trackRemoved||!1,(this.trackAdded||this.trackRemoved)&&!this.system)throw new Error("Queries cannot track added or removed when initialized outside of a system");this.world.config.useApeDestroy&&!i.includeApeDestroy&&(i.not?i.not.push("ApeDestroy"):i.not=["ApeDestroy"]),i.from&&this.from(...i.from),i.reverse&&this.fromReverse(i.reverse.entity,i.reverse.type),i.all&&this.fromAll(...i.all),i.any&&this.fromAny(...i.any),i.not&&this.not(...i.not),i.only&&this.only(...i.only),i.persist&&this.persist()}}from(...t){return t=t.map(t=>"string"!=typeof t?t.id:t),this.query.froms.push({from:"from",entities:t}),this.hasStatic=!0,this}fromReverse(t,e){return"string"==typeof t&&(t=this.world.getEntity(t)),"function"==typeof e&&(e=e.name),this.query.froms.push({from:"reverse",entity:t,type:e}),this}fromAll(...t){const e=t.map(t=>"string"!=typeof t?t.name:t);return this.query.froms.push({from:"all",types:e}),this}fromAny(...t){const e=t.map(t=>"string"!=typeof t?t.name:t);return this.query.froms.push({from:"any",types:e}),this}not(...t){const e=t.map(t=>"string"!=typeof t?t.name:t);return this.query.filters.push({filter:"not",types:e}),this}only(...t){const e=t.map(t=>"string"!=typeof t?t.name:t);return this.query.filters.push({filter:"only",types:e}),this}update(t){let e=!1;for(const i of this.query.froms)if("all"===i.from){let n=!0;for(const e of i.types)if(!t.has(e)){n=!1;break}if(n){e=!0;break}}else if("any"===i.from){let n=!1;for(const e of i.types)if(t.has(e)){n=!0;break}if(n){e=!0;break}}else if("reverse"===i.from&&this.world.entityReverse.hasOwnProperty(i.entity.id)&&this.world.entityReverse[i.entity.id].hasOwnProperty(i.type)){new Set(this.world.entityReverse[i.entity.id][i.type].keys());if(new Set(this.world.entityReverse[i.entity.id][i.type].keys()).has(t.id)){e=!0;break}}e?(this.results.add(t),this._filter(t),this.trackAdded&&this.added.add(t)):this._removeEntity(t)}_removeEntity(t){this.results.has(t)&&this.trackRemoved&&this.removed.add(t),this.results.delete(t)}persist(t,e){if(this.hasStatic)throw new Error("Cannot persist query with static list of entities.");if(0===this.query.froms.length)throw new Error("Cannot persist query without entity source (fromAll, fromAny, fromReverse).");return this.world.queries.push(this),null!==this.system&&this.system.queries.push(this),"boolean"==typeof t&&(this.trackAdded=t),"boolean"==typeof e&&(this.trackRemoved=e),this.persisted=!0,this}clearChanges(){this.added.clear(),this.removed.clear()}refresh(){let t=new Set;for(const e of this.query.froms)if("from"===e.from)t=n.setUnion(t,e.entities);else if("all"===e.from)if(1===e.types.length){if(!this.world.entitiesByComponent.hasOwnProperty(e.types[0]))throw new Error(e.types[0]+" is not a registered Component/Tag");t=n.setUnion(t,this.world.entitiesByComponent[e.types[0]])}else{const i=[];for(const t of e.types){const e=this.world.entitiesByComponent[t];if(void 0===e)throw new Error(t+" is not a registered Component/Tag");i.push(e)}t=n.setUnion(t,n.setIntersection(...i))}else if("any"===e.from){const i=[];for(const t of e.types){const e=this.world.entitiesByComponent[t];if(void 0===e)throw new Error(t+" is not a registered Component/Tag");i.push(e)}t=n.setUnion(t,...i)}else"reverse"===e.from&&this.world.entityReverse[e.entity.id]&&this.world.entityReverse[e.entity.id].hasOwnProperty(e.type)&&(t=n.setUnion(t,new Set([...this.world.entityReverse[e.entity.id][e.type].keys()])));this.results=new Set([...t].map(t=>this.world.getEntity(t)).filter(t=>!!t));for(const t of this.results)this._filter(t);return this.trackAdded&&(this.added=new Set(this.results)),this}_filter(t){for(const e of this.query.filters)if("not"===e.filter){for(const i of e.types)if(t.has(i)){this.results.delete(t);break}}else if("only"===e.filter){let i=!1;for(const n of e.types)if(t.has(n)){i=!0;break}i||this.results.delete(t)}}execute(t){if(this.executed||this.refresh(),this.executed=!0,void 0===t||!t.hasOwnProperty("updatedComponents")&&!t.hasOwnProperty("updatedValues"))return this.results;const e=[];for(const i of this.results)t.updatedComponents&&i.updatedComponents<t.updatedComponents||t.updatedValues&&i.updatedValues<t.updatedValues||e.push(i);return new Set(e)}}},function(t,e,i){const n=i(15);t.exports=class{constructor(t,...e){if(this.world=t,this._stagedChanges=[],this.changes=[],this.queries=[],this.lastTick=this.world.currentTick,this.constructor.subscriptions)for(const t of this.constructor.subscriptions)this.subscribe(t);this.init(...e)}init(){}update(t){}createQuery(t){return new n(this.world,this,t)}subscribe(t){"string"!=typeof t&&(t=t.name),this.world.subscriptions.has(t)||(this.world.componentTypes[t].subbed=!0,this.world.subscriptions.set(t,new Set)),this.world.subscriptions.get(t).add(this)}_preUpdate(){this.changes=this._stagedChanges,this._stagedChanges=[],this.world.updateIndexes()}_postUpdate(){for(const t of this.queries)t.clearChanges()}_recvChange(t){this._stagedChanges.push(t)}}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],h=!1,c=-1;function d(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&p())}function p(){if(!h){var t=a(d);h=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||h||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,n,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new s(i,n||t,o),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},u.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},u.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},u.prototype.emit=function(t,e,i,n,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var l,u,h=this._events[a],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,o),!0;case 6:return h.fn.call(h.context,e,i,n,o,s),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var d,p=h.length;for(u=0;u<p;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];h[u].fn.apply(h[u].context,l)}}return!0},u.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},u.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},u.prototype.removeListener=function(t,e,i,n){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return l(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||i&&s.context!==i||l(this,o);else{for(var a=0,u=[],h=s.length;a<h;a++)(s[a].fn!==e||n&&!s[a].once||i&&s[a].context!==i)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&l(this,e)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,l,u,h,p,f,g=e&&e.length,y=g?e[0]*i:t.length,v=r(t,0,y,i,!0),_=[];if(!v||v.next===v.prev)return _;if(g&&(v=function(t,e,i,n){var s,a,l,u,h,p=[];for(s=0,a=e.length;s<a;s++)l=e[s]*n,u=s<a-1?e[s+1]*n:t.length,(h=r(t,l,u,n,!1))===h.next&&(h.steiner=!0),p.push(m(h));for(p.sort(c),s=0;s<p.length;s++)d(p[s],i),i=o(i,i.next);return i}(t,e,v,i)),t.length>80*i){n=l=t[0],a=u=t[1];for(var b=i;b<y;b+=i)(h=t[b])<n&&(n=h),(p=t[b+1])<a&&(a=p),h>l&&(l=h),p>u&&(u=p);f=0!==(f=Math.max(l-n,u-a))?1/f:0}return s(v,_,i,n,a,f),_}function r(t,e,i,n,r){var o,s;if(r===I(t,e,i,n)>0)for(o=e;o<i;o+=n)s=E(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=E(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(C(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{if(C(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,r,c,d){if(t){!d&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,l,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(s>1)}(r)}(t,n,r,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?l(t,n,r,c):a(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),C(t),t=m.next,g=m.next;else if((t=m)===g){d?1===d?s(t=u(o(t),e,i),e,i,n,r,c,2):2===d&&h(t,e,i,n,r,c):s(o(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(v(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&v(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,o=t,s=t.next;if(v(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=f(a,l,e,i,n),d=f(u,h,e,i,n),p=t.prevZ,m=t.nextZ;p&&p.z>=c&&m&&m.z<=d;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!_(r,s)&&b(r,n,n.next,s)&&T(r,s)&&T(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),C(n),C(n.next),n=t=s),n=n.next}while(n!==t);return o(n)}function h(t,e,i,n,r,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&y(l,u)){var h=S(l,u);return l=o(l,l.next),h=o(h,h.next),s(l,e,i,n,r,a),void s(h,e,i,n,r,a)}u=u.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i;var l,u=i,h=i.x,c=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=h&&r!==n.x&&g(o<c?r:s,o,h,c,o<c?s:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),T(n,t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,d=l)),n=n.next}while(n!==u);return i}(t,e)){var i=S(e,t);o(e,e.next),o(i,i.next)}}function p(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||_(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,n){var r=w(v(t,e,i)),o=w(v(t,e,n)),s=w(v(i,n,t)),a=w(v(i,n,e));return r!==o&&s!==a||(!(0!==r||!x(t,i,e))||(!(0!==o||!x(t,n,e))||(!(0!==s||!x(i,t,n))||!(0!==a||!x(i,e,n)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function w(t){return t>0?1:t<0?-1:0}function T(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function S(t,e){var i=new P(t.i,t.x,t.y),n=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function E(t,e,i,n){var r=new P(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(I(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*i,h=a<l-1?e[a+1]*i:t.length;s-=Math.abs(I(t,u,h,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,o),n(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&y(t,"error",e,i)}(t,r,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,i,n){var r,o,s,a;if(u(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),s=o[e]),void 0===s)s=o[e]=i,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(r=h(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function f(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):g(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function y(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){n.once&&t.removeEventListener(e,r),i(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,h=g(l,u);for(i=0;i<u;++i)o(h[i],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,n,r,o,s;if(u(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){s=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){(function(n,r){var o;!function(n){var s=n.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s((function(e){t=e})),"function"==typeof t}();e?(e.Promise=a?s:T,e.Polyfill=T):void 0===(o=function(){return a?s:T}.call(e,i,e,t))||(t.exports=o);var l=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var h,c=void 0!==r?r:setTimeout,d=[];function p(){for(var t=0;t<d.length;t++)d[t][0](d[t][1]);d=[],h=!1}function f(t,e){d.push([t,e]),h||(h=!0,c(p,0))}function m(t){var e=t.owner,i=e.state_,n=e.data_,r=t[i],o=t.then;if("function"==typeof r){i="fulfilled";try{n=r(n)}catch(t){_(o,t)}}g(o,n)||("fulfilled"===i&&y(o,n),"rejected"===i&&_(o,n))}function g(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,(function(n){i||(i=!0,e!==n?y(t,n):v(t,n))}),(function(e){i||(i=!0,_(t,e))})),!0}}catch(e){return i||_(t,e),!0}return!1}function y(t,e){t!==e&&g(t,e)||v(t,e)}function v(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(x,t))}function _(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(w,t))}function b(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)m(e[i])}function x(t){t.state_="fulfilled",b(t)}function w(t){t.state_="rejected",b(t)}function T(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof T==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){_(e,t)}try{t((function(t){y(e,t)}),i)}catch(t){i(t)}}(t,this)}T.prototype={constructor:T,state_:"pending",then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(l),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?f(m,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},T.all=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var n=[],r=0;function o(t){return r++,function(i){n[t]=i,--r||e(n)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),i):n[a]=s;r||e(n)}))},T.race=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var n,r=0;r<t.length;r++)(n=t[r])&&"function"==typeof n.then?n.then(e,i):e(n)}))},T.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},T.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this)}).call(this,i(7),i(36).setImmediate)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,l=s(t),u=1;u<arguments.length;u++){for(var h in i=Object(arguments[u]))r.call(i,h)&&(l[h]=i[h]);if(n){a=n(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(l[a[c]]=i[a[c]])}}return l}},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"target":"."}},"height":32,"infinite":false,"layers":[{"data":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,184,184,184,6,6,6,184,6,6,6,6,6,6,6,6,6,184,6,184,184,6,6,184,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,6,6,184,6,184,184,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,184,184,184,6,184,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,184,6,184,184,184,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,184,6,184,184,6,184,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,184,184,6,6,6,184,184,184,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,184,184,184,6,184,184,6,184,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,184,184,6,6,184,6,6,6,6,6,6,6,184,6,184,184,184,6,6,184,184,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,184,184,184,6,6,184,184,6,6,184,6,6,6,6,184,184,184,184,184,6,6,6,6,6,6,184,184,6,184,6,6,184,6,6,6,6,6,6,184,184,184,6,6,6,6,6,184,184,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,184,184,184,184,184,6,6,6,6,6,6,6,6,184,6,6,184,184,184,6,6,184,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,184,6,6,6,184,184,184,184,184,184,184,184,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,184,184,184,6,6,184,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,6,6,6,184,6,184,184,6,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,184,6,184,184,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,184,184,6,6,184,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,6,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,184,184,184,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,184,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,6,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,6,6,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6],"height":32,"id":1,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":90,"x":0,"y":0},{"data":[1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,1975,1797,1975,1797,1975,1797,1975,1799,1977,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,1975,0,1975,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1977,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,0,1975,0,0,0,0,1975,0,1975,0,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,2167,2165,2165,2165,2165,2165,2165,2168,1797,1975,0,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,1975,0,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,1797,1975,1797,2344,2703,2703,2703,2703,2703,2703,2344,1975,0,0,0,1975,1797,1975,1797,1975,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,1975,1797,1975,2344,2691,2691,2691,2691,2691,2691,2344,1797,0,0,0,1797,1975,1797,1975,1797,0,0,0,0,0,0,1975,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,1975,1797,2344,0,0,0,0,0,0,2344,1975,0,0,0,1975,1797,1975,1797,1975,0,0,0,0,0,0,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,1975,2344,0,0,0,0,0,0,2344,1797,0,0,0,1797,1975,1797,1975,1797,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,1797,2344,0,0,0,0,0,0,2344,1975,0,0,0,1975,1797,1975,1797,1975,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,1975,2345,2165,2166,0,0,2164,2165,2346,0,0,0,0,1797,1975,1797,1975,1797,0,0,0,0,0,0,1975,1797,1975,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,0,1975,0,1975,1797,1975,0,0,0,0,0,2702,2703,2704,0,0,2702,2703,2704,0,0,0,0,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,1975,0,0,0,1975,0,1975,0,1975,0,1975,0,1975,0,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,0,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,0,0,0,0,0,1975,0,0,0,0,0,0,2699,2698,2701,0,0,2699,2698,2701,0,0,0,0,1797,1975,1797,1975,1799,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1977,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,0,1797,0,1797,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,0,1797,0,1799,0,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,1797,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,1797,1975,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,1797,0,1797,0,1797,0,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975],"height":32,"id":6,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":90,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":7,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":90,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1805,1805,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1805,1805,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":2,"name":"Entity Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"entity"}],"type":"tilelayer","visible":true,"width":90,"x":0,"y":0},{"draworder":"topdown","id":3,"name":"Object Layer","objects":[{"height":0,"id":1,"name":"Player","point":true,"properties":[{"name":"objectType","type":"string","value":"player"}],"rotation":0,"type":"object","visible":true,"width":0,"x":71.5727129590534,"y":155.657287313373},{"height":0,"id":20,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"tutorial_002"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1400.15703016915,"y":250.958541970424},{"height":0,"id":43,"name":"Rat","point":true,"properties":[{"name":"inventory","type":"string","value":"health_potion_weak"},{"name":"objectType","type":"string","value":"rat"}],"rotation":0,"type":"object","visible":true,"width":0,"x":521.11346167727,"y":219.050848662698},{"height":0,"id":45,"name":"Attacking Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.attacking"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":407.006110849061,"y":220.996543432677},{"height":0,"id":46,"name":"Attacking Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.attacking"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":407.757143518982,"y":236.768229501021},{"height":0,"id":47,"name":"Attacking Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.attacking"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":407.757143518982,"y":253.290948239287},{"height":0,"id":48,"name":"Attacking Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.attacking"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":407.006110849061,"y":270.564699647472},{"height":0,"id":50,"name":"Magic Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellMenu"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":679.070176102992,"y":237.208976930558},{"height":0,"id":53,"name":"Magic Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellMenu"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":679.461424046946,"y":218.080822194037},{"height":0,"id":54,"name":"Magic Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellMenu"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":679.080674732295,"y":252.348260512648},{"height":0,"id":55,"name":"Goblin","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"goblin"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":869.610178720959,"y":270.2078268265},{"height":0,"id":56,"name":"Goblin","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"goblin"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":908.975266092907,"y":225.610301068905},{"height":0,"id":57,"name":"Shrine","point":true,"properties":[{"name":"objectType","type":"string","value":"magic_shrine"},{"name":"spellId","type":"string","value":"lesser_heal"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1258.24299456527,"y":140.862570156069},{"height":0,"id":59,"name":"Shrine Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellShrine"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1080.54378073702,"y":222.524207654544},{"height":0,"id":61,"name":"Shrine Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellShrine"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1082.24828647216,"y":239.064408905848},{"height":0,"id":62,"name":"Shrine Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellShrine"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1081.72691003837,"y":255.227078353189},{"height":0,"id":63,"name":"Shrine Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellShrine"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1080.6841571708,"y":270.34699493296},{"height":0,"id":96,"name":"Shrine Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.spellShrine"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1080.8571294331,"y":201.588555699004}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":8,"name":"Shadow Boxes","objects":[{"height":37.6463307720076,"id":90,"name":"","rotation":0,"type":"","visible":true,"width":91.5113581103437,"x":1217.45591897776,"y":69.349519021472},{"height":37.6463,"id":93,"name":"","rotation":0,"type":"","visible":true,"width":40.7279544036651,"x":1203.17838892166,"y":166.066683719571},{"height":37.6463,"id":94,"name":"","rotation":0,"type":"","visible":true,"width":37.5653499617847,"x":1284.92872614281,"y":166.066683719571},{"height":28.7273014785336,"id":95,"name":"","rotation":0,"type":"","visible":true,"width":13.1776612286849,"x":1249.00408671112,"y":115.406651263402}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Node Layer","objects":[],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":11,"nextobjectid":104,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.3","tileheight":16,"tilesets":[{"firstgid":1,"source":"packed_rougelike_sheet.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":90}')},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"target":"."}},"height":32,"infinite":false,"layers":[{"data":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6],"height":32,"id":1,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":80,"x":0,"y":0},{"data":[1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,1975,0,1975,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,0,1975,0,1975,0,0,0,0,0,0,0,0,0,1975,0,1975,0,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,1975,1797,1975,0,1975,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,0,0,0,0,0,0,0,0,1975,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,1975,0,0,0,0,0,0,1975,0,1975,0,1975,1797,1975,1797,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1975,1831,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,0,1975,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,0,0,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,0,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,1797,0,1797,0,1797,1975,1797,1975,1797,1975,1797,0,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,0,0,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,0,0,0,0,1797,0,1797,0,1797,0,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975],"height":32,"id":6,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":80,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":7,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":80,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1350,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,1981,1981,1981,0,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1350,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":2,"name":"Entity Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"entity"}],"type":"tilelayer","visible":true,"width":80,"x":0,"y":0},{"draworder":"topdown","id":3,"name":"Object Layer","objects":[{"height":0,"id":1,"name":"Player","point":true,"properties":[{"name":"objectType","type":"string","value":"player"}],"rotation":0,"type":"object","visible":true,"width":0,"x":8.08745373871903,"y":234.660918628341},{"height":0,"id":20,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"forrest_001"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1240.20521648959,"y":248.950778618798},{"height":0,"id":43,"name":"Eel","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"eel"}],"rotation":0,"type":"object","visible":true,"width":0,"x":320.517457560922,"y":133.103462821661},{"height":0,"id":55,"name":"Goblin","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"goblin"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":770.756432714628,"y":210.645333777912},{"height":0,"id":56,"name":"Goblin","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"goblin"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":741.580554166668,"y":246.01226826021},{"height":0,"id":97,"name":"Eel","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"eel"}],"rotation":0,"type":"object","visible":true,"width":0,"x":337.627721012883,"y":262.74036935965},{"height":0,"id":98,"name":"Eel","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"eel"}],"rotation":0,"type":"object","visible":true,"width":0,"x":330.646696706226,"y":180.871993399759},{"height":0,"id":99,"name":"Environment Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.environmentInteractivity"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":88.8494002665482,"y":220.854223519706},{"height":0,"id":100,"name":"Environment Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.environmentInteractivity"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":88.2147616932157,"y":236.085549279685},{"height":0,"id":102,"name":"Environment Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.environmentInteractivity"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":86.3108459732183,"y":267.81747794631},{"height":0,"id":103,"name":"Environment Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.environmentInteractivity"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":87.5801231198832,"y":252.58615218633},{"height":0,"id":104,"name":"Shrine","point":true,"properties":[{"name":"objectType","type":"string","value":"magic_shrine"},{"name":"spellId","type":"string","value":"combust"}],"rotation":0,"type":"object","visible":true,"width":0,"x":519.146266493196,"y":205.45272751524},{"height":0,"id":107,"name":"Goblin","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"goblin"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":1111.11111111111,"y":233.075906213038},{"height":0,"id":108,"name":"Rat","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"rat"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":1079.10665831768,"y":201.071453419606},{"height":0,"id":109,"name":"Rat","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"rat"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":1078.41090934391,"y":271.342099770403},{"height":0,"id":110,"name":"Surrounding Penalty Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.enemySurrounding"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":934.390871773464,"y":267.167605927781},{"height":0,"id":111,"name":"Surrounding Penalty Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.enemySurrounding"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":935.695452257296,"y":282.719181389943},{"height":0,"id":112,"name":"Surrounding Penalty Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.enemySurrounding"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":934.730714452343,"y":248.374556460029},{"height":0,"id":113,"name":"Surrounding Penalty Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.enemySurrounding"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":934.06862745098,"y":232.598039215686},{"height":0,"id":114,"name":"Surrounding Penalty Tutorial","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.enemySurrounding"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":934.558823529412,"y":216.176470588235},{"height":0,"id":115,"name":"Rest Point","point":true,"properties":[{"name":"objectType","type":"string","value":"rest_point"}],"rotation":0,"type":"object","visible":true,"width":0,"x":1194.60067491564,"y":218.972628421447}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":8,"name":"Shadow Boxes","objects":[{"height":29.7580817812031,"id":106,"name":"","rotation":0,"type":"","visible":true,"width":12.8452151573539,"x":513.594519374866,"y":176.621708413616}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Node Layer","objects":[],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":11,"nextobjectid":116,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.3","tileheight":16,"tilesets":[{"firstgid":1,"source":"packed_rougelike_sheet.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":80}')},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"target":"."}},"height":120,"infinite":false,"layers":[{"data":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,184,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,184,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,184,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,184,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,184,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,184,184,184,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,184,184,184,184,184,184,184,184,6,6,6,6,184,6,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,6,184,184,184,184,184,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,184,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,184,6,6,6,6,6,184,184,184,184,184,184,184,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,184,184,184,184,184,184,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,184,184,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,184,184,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,184,184,184,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,6,6,6,6,6,184,184,6,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,6,6,6,6,6,6,184,6,6,6,6,6,6,184,184,6,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,6,6,6,6,6,6,184,6,184,6,6,6,6,6,184,184,6,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,184,184,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,184,184,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6],"height":120,"id":1,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"data":[1797,1975,1797,1975,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,0,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,0,1975,1975,1797,1975,1797,1975,0,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,1975,0,1975,0,1975,0,1975,0,0,0,0,1975,0,1975,0,0,0,0,1975,0,1975,0,0,0,0,1975,0,0,0,1975,0,1975,0,0,0,0,1975,0,1975,0,0,0,0,1975,0,1975,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1799,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1977,1799,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1799,1977,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1977,1799,1977,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1799,1977,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1977,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1977,1799,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1799,1977,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1977,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1977,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1977,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1799,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1977,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1610,1611,1611,1611,1611,1612,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1788,1789,1789,1789,1789,1790,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1788,1789,1789,1789,1789,1790,0,0,0,0,0,0,0,0,0,0,0,0,1975,1799,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1788,1789,1789,1789,1789,1790,0,0,0,0,0,0,0,0,0,0,0,0,1797,1977,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1966,1967,1967,1967,1967,1967,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1799,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1799,1977,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1977,1799,1977,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1977,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1975,1799,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4143,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4144,0,1797,1977,1799,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1975,1799,1977,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1797,1977,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,2688,2689,2689,2689,2689,2689,2689,2689,2689,2689,2690,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,2688,2689,2689,2689,2689,2689,2689,3402,2689,2689,2690,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4146,0,0,0,2688,3580,2689,2689,2689,2689,2689,2689,2689,2689,2690,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,2685,2684,3222,2684,2684,2684,3222,2684,2684,2684,2687,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1975,1797,1975,1799,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3934,3935,3936,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,1256,0,0,0,0,0,0,0,0,0,0,4145,0,1797,1975,1797,1977,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3934,3935,3936,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,1256,0,0,0,0,0,0,0,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4112,4113,4114,0,0,0,0,0,0,2857,2857,0,0,0,0,0,0,0,0,0,0,0,0,1256,0,0,0,0,0,0,0,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2857,2857,0,0,0,0,0,0,0,0,0,0,0,0,1256,0,0,3970,2702,2703,2704,0,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,1256,3792,0,3970,2702,2703,2704,0,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,1256,0,0,3970,2699,2698,2701,0,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2678,2857,2857,0,0,0,0,0,4146,0,0,0,0,0,0,1256,0,0,0,0,1256,0,0,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,4146,0,0,0,0,0,0,1432,1434,1434,1434,1434,1433,0,0,0,0,0,4145,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,4146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4145,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,4143,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4148,4147,4147,4144,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3436,0,0,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,0,0,0,0,0,3436,0,0,3436,0,0,0,0,0,3436,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,0,0,0,0,0,0,0,3436,0,3436,0,3436,0,0,3436,0,0,0,0,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2856,2857,2857,2858,0,0,0,0,0,1797,0,0,3436,0,1797,0,0,1797,0,0,0,0,0,0,0,0,0,0,1975,1797,1975,1797,1975,1797,1975,1797,1797,0,1797,0,0,1797,0,1797,0,1797,0,1797,0,1797,0,1797,0,1797,0,1797,0,1797,0,1797,2856,2857,2857,2858,1797,0,1797,0,1797,1975,1797,0,0,1797,1975,1797,0,1975,0,0,3436,1797,0,1797,0,0,1797,0,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,2856,2857,2857,2858,1975,1797,1975,1797,1975,1797,1975,1797,0,1975,1797,1975,1797,1797,3436,0,1797,1975,1797,1975,0,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,2856,2857,2857,2858,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1975,1797,3436,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1799,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,1975,1797,1975,1797,1975,1799,1975,1797,1975,2856,2857,2857,2858,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1797,1975,1797,1797,1975,1799,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1977,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1977,1797,1975,1797,2856,2857,2857,2858,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1975,1797,1975,1975,1797,1977,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,2856,2857,2857,2858,1975,1797,1975,1797,1975,1797,1975,1799,1975,1975,1797,1975,1797,1797,1975,1797,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1797,1975,1797,1975,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,1975,1797,2856,2857,2857,2858,1797,1975,1797,1975,1797,1975,1797,1977,1797,1797,1975,1797,1975,1975,1797,1975,1975,1797,1975,1797,1797,1975,1797,1975,1797,1975,1797,1975],"height":120,"id":6,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1827,1828,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2005,2006,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3759,3764,3764,3764,3764,3764,3764,3764,3764,3764,3760,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3937,3942,3942,3942,3942,3942,3942,3942,3942,3942,3938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3937,3942,3942,3942,3942,3942,3942,3942,3942,3942,3938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4115,3939,3939,3939,3939,3939,3939,3939,3939,3939,4116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,399,0,0,399,0,0,399,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3224,0,0,0,0,3580,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3759,3764,3760,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3937,3942,3938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1256,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4115,3939,4116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3759,3764,3760,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3937,3942,3938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4115,3939,4116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":120,"id":7,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,1981,0,0,0,0,0,0,0,0,1981,0,1981,1981,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,1981,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,1981,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,0,0,0,1981,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,0,0,1981,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1981,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":120,"id":2,"name":"Entity Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"entity"}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"draworder":"topdown","id":3,"name":"Object Layer","objects":[{"height":0,"id":1,"name":"Player","point":true,"properties":[{"name":"objectType","type":"string","value":"player"}],"rotation":0,"type":"object","visible":true,"width":0,"x":486.306874065492,"y":1866.62585606746},{"height":0,"id":2,"name":"Attacking Tutorial Trigger","point":true,"properties":[{"name":"event","type":"string","value":"tutorial.attacking"},{"name":"objectType","type":"string","value":"event_trigger"}],"rotation":0,"type":"object","visible":true,"width":0,"x":483.596194407723,"y":1686.94002529109},{"height":0,"id":3,"name":"Bandit White Mage","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"fallbackPosition","type":"object","value":14},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"bandit_white_mage"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":654.856789888234,"y":1188.98061537948},{"height":0,"id":4,"name":"Barrel","point":true,"properties":[{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"barrel"}],"rotation":0,"type":"object","visible":true,"width":0,"x":618.068749488443,"y":1146.55110101383},{"height":0,"id":7,"name":"Chest","point":true,"properties":[{"name":"inventory","type":"string","value":"confuse_scroll"},{"name":"objectType","type":"string","value":"chest"}],"rotation":0,"type":"object","visible":true,"width":0,"x":693.290866555657,"y":1161.19904600173},{"height":0,"id":12,"name":"Bandit Mage","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"fallbackPosition","type":"object","value":14},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"bandit_mage"},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":614.41783073093,"y":1192.40843907779},{"height":0,"id":20,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"forrest_001_interior_001"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":696.537725430309,"y":1561.41379823284},{"height":0,"id":33,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"forrest_001_interior_002"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":775.437580171308,"y":1672.52865477718},{"height":0,"id":43,"name":"Bandit","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"fallbackPosition","type":"object","value":14},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"bandit"},{"name":"patrolTarget","type":"object","value":15},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":758.021510130002,"y":1083.98536264137},{"height":0,"id":44,"name":"Bandit","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"bandit"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":662.48370273794,"y":669.817470664928},{"height":0,"id":45,"name":"Dog","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"dog"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":683.670143415906,"y":699.152542372881},{"height":0,"id":46,"name":"Dog","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"dog"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":615.221642764016,"y":692.633637548892},{"height":0,"id":47,"name":"Dog","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"dog"},{"name":"teamId","type":"int","value":2}],"rotation":0,"type":"object","visible":true,"width":0,"x":634.778357235984,"y":647.816166883964},{"height":0,"id":48,"name":"Bandit","point":true,"properties":[{"name":"commander","type":"bool","value":false},{"name":"fallbackPosition","type":"object","value":14},{"name":"inventory","type":"string","value":""},{"name":"objectType","type":"string","value":"bandit"},{"name":"patrolTarget","type":"object","value":17},{"name":"teamId","type":"int","value":1}],"rotation":0,"type":"object","visible":true,"width":0,"x":575.293350717079,"y":1190.51499348109}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":8,"name":"Shadow Boxes","objects":[{"height":105.70885419667,"id":28,"name":"","rotation":0,"type":"","visible":true,"width":168.627901776915,"x":642.627542273087,"y":1459.75994895075},{"height":74.8945811567753,"id":29,"name":"","rotation":0,"type":"","visible":true,"width":39.6500723771163,"x":323.494241299012,"y":1554.53458367424},{"height":73.9493777430409,"id":42,"name":"","rotation":0,"type":"","visible":true,"width":41.4837972704864,"x":754.524138760296,"y":1602.83773221908}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Node Layer","objects":[{"height":0,"id":14,"name":"Fallback Position","point":true,"rotation":0,"type":"fallback_node","visible":true,"width":0,"x":657.563320805284,"y":706.396372185834},{"height":0,"id":15,"name":"Patrol Path","point":true,"properties":[{"name":"next","type":"object","value":17},{"name":"pathName","type":"string","value":"forrest_path_01"}],"rotation":0,"type":"path_node","visible":true,"width":0,"x":773.643553350891,"y":1235.10844272378},{"height":0,"id":16,"name":"Patrol Path","point":true,"properties":[{"name":"next","type":"object","value":15},{"name":"pathName","type":"string","value":"forrest_path_01"}],"rotation":0,"type":"path_node","visible":true,"width":0,"x":779.691877954912,"y":1043.61506407933},{"height":0,"id":17,"name":"Patrol Path","point":true,"properties":[{"name":"next","type":"object","value":18},{"name":"pathName","type":"string","value":"forrest_path_01"}],"rotation":0,"type":"path_node","visible":true,"width":0,"x":531.326133250164,"y":1237.64451227488},{"height":0,"id":18,"name":"Patrol Path","point":true,"properties":[{"name":"next","type":"object","value":16},{"name":"pathName","type":"string","value":"forrest_path_01"}],"rotation":0,"type":"path_node","visible":true,"width":0,"x":538.911195236938,"y":1042.07832669658}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":10,"nextobjectid":49,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.3","tileheight":16,"tilesets":[{"firstgid":1,"source":"packed_rougelike_sheet.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":60}')},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"target":"."}},"height":36,"infinite":false,"layers":[{"data":[365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,2153,2151,2151,2151,2151,2334,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2334,2151,2151,2151,2151,2154,365,365,365,365,365,365,365,365,365,365,365,2330,2689,2689,2689,2689,2330,2689,2689,2689,2689,2689,2689,2689,2689,2689,2689,2689,2689,2689,2330,2689,2689,2689,2689,2330,365,365,365,365,365,365,365,365,365,365,365,2330,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2330,2684,2684,2684,2684,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,2686,365,365,365,365,365,365,365,365,365,365,365,365,365,2686,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,543,543,365,365,365,365,365,365,365,186,186,186,365,365,365,365,365,2686,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,543,543,365,365,365,365,365,365,186,186,186,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,365,543,365,365,365,365,543,365,365,365,365,365,365,365,2328,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2330,365,365,365,365,365,365,543,543,543,543,365,365,365,365,365,365,365,365,2330,365,365,365,365,2330,365,365,365,365,365,365,365,365,365,365,365,2331,2151,2151,2151,365,365,365,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2151,2156,2151,2151,2151,2151,2332,365,365,365,365,365,365,365,365,365,365,365,2685,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2684,2687,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365,365],"height":36,"id":1,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":36,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,399,0,0,0,0,399,0,0,0,0,399,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,563,0,0,563,2330,0,0,0,0,0,0,0,0,0,0,0,0,0,0,917,0,0,565,0,0,0,0,0,0,0,0,0,0,0,0,0,741,384,0,741,2506,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1095,0,0,743,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3299,3300,3300,3300,3300,3300,3300,3300,3301,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2686,0,0,0,0,0,1438,1438,1438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1438,1438,1438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,384,382,384,383,2328,0,0,3299,3300,3300,3300,3300,3300,3300,3300,3301,0,0,0,3668,3311,0,380,0,0,0,0,0,0,0,0,0,0,0,0,0,25,25,25,25,2330,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3846,3489,0,380,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2151,2156,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":36,"id":5,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":36,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":36,"id":4,"name":"Entity Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"entity"}],"type":"tilelayer","visible":true,"width":36,"x":0,"y":0},{"draworder":"topdown","id":2,"name":"Object Layer","objects":[{"height":0,"id":1,"name":"Player","point":true,"properties":[{"name":"objectType","type":"string","value":"player"}],"rotation":0,"type":"object","visible":true,"width":0,"x":199.243707779629,"y":361.318304387799},{"height":0,"id":2,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"forrest_001"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":200.66341107943,"y":377.886307892918},{"height":0,"id":3,"name":"Chest","point":true,"properties":[{"name":"inventory","type":"string","value":"health_potion_weak"},{"name":"objectType","type":"string","value":"chest"}],"rotation":0,"type":"object","visible":true,"width":0,"x":150.986475100883,"y":266.53398962352}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":6,"name":"Shadow Boxes","objects":[{"height":39.3373174975414,"id":4,"name":"","rotation":0,"type":"","visible":true,"width":230.155716966039,"x":179.970043119752,"y":211.025947499811},{"height":42.2034651266104,"id":5,"name":"","rotation":0,"type":"","visible":true,"width":86.6281652598844,"x":404.307418924922,"y":211.109729009329},{"height":39.9822301199467,"id":6,"name":"","rotation":0,"type":"","visible":true,"width":83.9626832518881,"x":100.442470013327,"y":212.88671701466}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":3,"name":"Node Layer","objects":[],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":7,"nextobjectid":7,"orientation":"orthogonal","properties":[{"name":"type","type":"string","value":"tile"}],"renderorder":"right-down","tiledversion":"1.4.3","tileheight":16,"tilesets":[{"firstgid":1,"source":"packed_rougelike_sheet.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":36}')},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"target":"."}},"height":32,"infinite":false,"layers":[{"data":[364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2167,2165,2165,2165,2165,2165,2165,2165,2168,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,2703,2703,2703,2703,2703,2703,2703,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,2698,2698,2698,2698,2698,2698,2698,2344,542,542,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,542,542,542,542,542,542,542,2344,542,542,542,542,542,542,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,542,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2344,542,364,364,364,364,364,364,2344,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2345,2165,2165,2165,364,2165,2165,2165,2346,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,2699,2698,2698,2698,2698,2698,2698,2698,2701,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364,364],"height":32,"id":1,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":32,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,388,388,0,0,387,566,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5977,5978,5978,5978,5979,5983,5983,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3304,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,364,0,3482,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,364,364,0,3660,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,364,364,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,364,364,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":5,"name":"Tile Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"tile"}],"type":"tilelayer","visible":true,"width":32,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":32,"id":6,"name":"Entity Layer","opacity":1,"properties":[{"name":"type","type":"string","value":"entity"}],"type":"tilelayer","visible":true,"width":32,"x":0,"y":0},{"draworder":"topdown","id":2,"name":"Object Layer","objects":[{"height":0,"id":1,"name":"Load Door","point":true,"properties":[{"name":"levelName","type":"string","value":"forrest_001"},{"name":"objectType","type":"string","value":"load_door"}],"rotation":0,"type":"object","visible":true,"width":0,"x":248.069577692101,"y":295.411100152425},{"height":0,"id":2,"name":"Player","point":true,"properties":[{"name":"objectType","type":"string","value":"player"}],"rotation":0,"type":"object","visible":true,"width":0,"x":250.91006903972,"y":267.006186676231},{"height":0,"id":3,"name":"Chest","point":true,"properties":[{"name":"inventory","type":"string","value":"health_potion_weak"},{"name":"objectType","type":"string","value":"chest"}],"rotation":0,"type":"object","visible":true,"width":0,"x":200.990349224137,"y":224.878134974153}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":3,"name":"Shadow Boxes","objects":[{"height":38.6441426520923,"id":4,"name":"","rotation":0,"type":"","visible":true,"width":136.910676824556,"x":179.971292922601,"y":115.932427956277},{"height":22.6344264105112,"id":5,"name":"","rotation":0,"type":"","visible":true,"width":129.181848294137,"x":183.835707187811,"y":275.477531191344}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Node Layer","objects":[],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}],"nextlayerid":7,"nextobjectid":6,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.3","tileheight":16,"tilesets":[{"firstgid":1,"source":"packed_rougelike_sheet.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":32}')},function(t){t.exports=JSON.parse('{"rules":[{"name":"bandit_sees_player","respondingTo":null,"rules":[["race","=","human"],["said_bandit_sees_player","=",false],["has_target_in_sight","=",true],["has_alive_allies","=",true],["team_state","=","passive"],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["Never should have come here!","Enemy spotted!"],"aiStateChange":{"currentOrder":"alert_allies"},"dialogMemoryChange":{"said_bandit_sees_player":true}},{"name":"bandit_loses_sight_of_player","respondingTo":null,"rules":[["said_bandit_loses_sight_of_player","=",false],["race","=","human"],["knows_target_position","=",true],["turns_with_target_out_of_sight",">",1],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["I\'ve lost him!","Where\'d he go!","Lost track of him!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_loses_sight_of_player":true}},{"name":"bandit_commander_killed","respondingTo":null,"rules":[["race","=","human"],["said_bandit_commander_killed","=",false],["team_commander_alive","=",false],["did_team_commander_exist","=",true],["has_alive_allies","=",true],["is_confused","=",false],["on_fire","=",false]],"dialog":["They killed the chieftain!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_commander_killed":true}},{"name":"bandit_has_been_silenced","respondingTo":null,"rules":[["race","=","human"],["said_bandit_has_been_silenced","=",false],["is_silenced","=",true],["on_fire","=",false],["has_alive_allies","=",true],["is_confused","=",false],["is_afraid","=",false]],"dialog":["I can\'t cast spells!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_has_been_silenced":true}},{"name":"bandit_on_fire","respondingTo":null,"rules":[["race","=","human"],["said_bandit_on_fire","=",false],["on_fire","=",true]],"dialog":["AAAAAAAAAAAHHHHHHHHHHHH!","PUT IT OUT! PUT IT OUT!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_on_fire":true}},{"name":"bandit_afraid","respondingTo":null,"rules":[["race","=","human"],["said_bandit_afraid","=",false],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",true]],"dialog":["Run for your lives!","I\'m getting out of here!","It\'s no use!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_afraid":true}},{"name":"bandit_needs_healing","respondingTo":null,"rules":[["race","=","human"],["said_bandit_needs_healing","=",false],["health_percentage","<",40],["has_healing_items","=",false],["has_heal_self_spell_casts","=",false],["ally_knows_heal_other_spell","=",true],["has_alive_allies","=",true],["on_fire","=",false],["is_confused","=",false]],"dialog":["I need healing!","Badly injured ... Need help."],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_needs_healing":true}},{"name":"bandit_has_heal_spells","respondingTo":"bandit_needs_healing","rules":[["race","=","human"],["knows_heal_other_spell","=",true],["has_heal_other_spell_casts","=",true],["is_silenced","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["Casting heal!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_has_heal_spells":true}},{"name":"bandit_has_no_heal_spells","respondingTo":"bandit_needs_healing","rules":[["race","=","human"],["knows_heal_other_spell","=",true],["has_heal_other_spell_casts","=",false],["is_silenced","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["Out of heals","I\'m out of healing spells"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_has_no_heal_spells":true}},{"name":"bandit_has_no_damage_spells","respondingTo":null,"rules":[["race","=","human"],["knows_damage_other_spell","=",true],["has_damage_other_spell_casts","=",false],["is_silenced","=",false],["said_bandit_has_no_damage_spells","=",false],["has_alive_allies","=",true],["is_confused","=",false],["is_afraid","=",false]],"dialog":["Out of spells!"],"aiStateChange":{},"dialogMemoryChange":{"said_bandit_has_no_damage_spells":true}}]}')},function(t){t.exports=JSON.parse('{"rules":[{"name":"goblin_sees_player","respondingTo":null,"rules":[["race","=","goblin"],["said_goblin_sees_player","=",false],["has_target_in_sight","=",true],["has_alive_allies","=",true],["team_state","=","passive"],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_sees_player]"],"aiStateChange":{"currentOrder":"alert_allies"},"dialogMemoryChange":{"said_goblin_sees_player":true}},{"name":"goblin_loses_sight_of_player","respondingTo":null,"rules":[["said_goblin_loses_sight_of_player","=",false],["race","=","goblin"],["knows_target_position","=",true],["turns_with_target_out_of_sight",">",1],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_loses_sight_of_player]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_loses_sight_of_player":true}},{"name":"goblin_commander_killed","respondingTo":null,"rules":[["race","=","goblin"],["said_goblin_commander_killed","=",false],["team_commander_alive","=",false],["did_team_commander_exist","=",true],["has_alive_allies","=",true],["is_confused","=",false],["on_fire","=",false]],"dialog":["[goblin_commander_killed]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_commander_killed":true}},{"name":"goblin_has_been_silenced","respondingTo":null,"rules":[["race","=","goblin"],["is_silenced","=",true],["on_fire","=",false],["said_goblin_has_been_silenced","=",false],["has_alive_allies","=",true],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_has_been_silenced]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_has_been_silenced":true}},{"name":"goblin_on_fire","respondingTo":null,"rules":[["race","=","goblin"],["on_fire","=",true],["said_goblin_on_fire","=",false]],"dialog":["[goblin_on_fire]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_on_fire":true}},{"name":"goblin_afraid","respondingTo":null,"rules":[["race","=","goblin"],["on_fire","=",false],["is_confused","=",false],["is_afraid","=",true],["said_goblin_afraid","=",false]],"dialog":["[goblin_afraid]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_afraid":true}},{"name":"goblin_needs_healing","respondingTo":null,"rules":[["race","=","goblin"],["said_goblin_needs_healing","=",false],["health_percentage","<",40],["has_healing_items","=",false],["has_heal_self_spell_casts","=",false],["ally_knows_heal_other_spell","=",true],["has_alive_allies","=",true],["on_fire","=",false],["is_confused","=",false]],"dialog":["[goblin_needs_healing]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_needs_healing":true}},{"name":"goblin_has_heal_spells","respondingTo":"goblin_needs_healing","rules":[["race","=","goblin"],["knows_heal_other_spell","=",true],["has_heal_other_spell_casts","=",true],["is_silenced","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_has_heal_spells]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_has_heal_spells":true}},{"name":"goblin_has_no_heal_spells","respondingTo":"goblin_needs_healing","rules":[["race","=","goblin"],["knows_heal_other_spell","=",true],["has_heal_other_spell_casts","=",false],["is_silenced","=",false],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_has_no_heal_spells]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_has_no_heal_spells":true}},{"name":"goblin_has_no_damage_spells","respondingTo":null,"rules":[["race","=","goblin"],["knows_damage_other_spell","=",true],["has_damage_other_spell_casts","=",false],["is_silenced","=",false],["said_goblin_has_no_damage_spells","=",false],["has_alive_allies","=",true],["is_confused","=",false],["is_afraid","=",false]],"dialog":["[goblin_has_no_damage_spells]"],"aiStateChange":{},"dialogMemoryChange":{"said_goblin_has_no_damage_spells":true}}]}')},function(t,e){class i extends Set{constructor(t,e,i){super(),this.component=t,this.field=i,this.sub="__set__",e=e.map(t=>"string"==typeof t?t:t.id),this.dvalue=e;for(const t of e)this.add(t)}_reset(){this.clear();for(const t of this.dvalue)this.add(t)}add(t){t.id&&(t=t.id),this.component._addRef(t,this.field,"__set__"),super.add(t)}delete(t){t.id&&(t=t.id),this.component._deleteRef(t,this.field,"__set__");return super.delete(t)}has(t){return t.id&&(t=t.id),super.has(t)}[Symbol.iterator](){const t=this,e=super[Symbol.iterator]();return{next(){const i=e.next();return"string"==typeof i.value&&(i.value=t.component.entity.world.getEntity(i.value)),i}}}getValue(){return[...this].map(t=>t.id)}}t.exports={EntityRef(t,e,i){e=e||null,t.hasOwnProperty(i)||Object.defineProperty(t,i,{get:()=>t.world.getEntity(t._meta.values[i]),set(e){const n=t._meta.values[i];e=e&&"string"!=typeof e?e.id:e,n&&n!==e&&t._deleteRef(n,i,void 0),e&&e!==n&&t._addRef(e,i,void 0),t._meta.values[i]=e}}),t[i]=e},EntityObject(t,e,i){t._meta.values[i]=e||{};const n=t._meta.values[i],r=Object.keys(n);for(const t of r)n[t]&&n[t].id&&(n[t]=n[t].id);return new Proxy(t._meta.values[i],{get:(e,i)=>t.world.getEntity(e[i]),set(e,n,r){const o=e[n];return r&&r.id&&(r=r.id),e[n]=r,o&&o!==r&&t._deleteRef(o,`${i}.${n}`,"__obj__"),r&&r!==o&&t._addRef(r,`${i}.${n}`,"__obj__"),!0},deleteProperty(e,n){if(!e.hasOwnProperty(n))return!1;const r=e[n];return delete e[n],t._deleteRef(r,`${i}.${n}`,"__obj__"),!0}})},EntitySet:(t,e=[],n)=>new i(t,e,n)}},function(t,e,i){const n=i(9),r=i(15),o=i(33),s=i(34),a=i(35),l=new Set(["constructor","init","type","key","destroy","preDestroy","postDestroy","getObject","_setup","_reset","update","clone","_meta","_addRef","_deleteRef","prototype"]);t.exports=class{constructor(t){this.config=Object.assign({trackChanges:!0,entityPool:10,cleanupPools:!0,useApeDestroy:!1},t),this.currentTick=0,this.entities=new Map,this.types={},this.tags=new Set,this.entitiesByComponent={},this.componentsById=new Map,this.entityReverse={},this.updatedEntities=new Set,this.componentTypes={},this.components=new Map,this.queries=[],this.subscriptions=new Map,this.systems=new Map,this.refs={},this.componentPool=new Map,this._statCallback=null,this._statTicks=0,this._nextStat=0,this.entityPool=new s(this,this.config.entityPool),this.config.useApeDestroy&&a(this)}tick(){if(this.config.useApeDestroy&&this.runSystems("ApeCleanup"),this.currentTick++,this.updateIndexes(),this.entityPool.release(),this.config.cleanupPools){this.entityPool.cleanup();for(const[t,e]of this.componentPool)e.cleanup()}return this._statCallback&&(this._nextStat+=1,this._nextStat>=this._statTicks&&this._outputStats()),this.currentTick}getStats(){const t={entity:{active:this.entities.size,pooled:this.entityPool.pool.length,target:this.entityPool.targetSize},components:{}};for(const[e,i]of this.componentPool)t.components[e]={active:i.active,pooled:i.pool.length,target:i.targetSize};return t}logStats(t,e){void 0===e&&(e=console.log),this._statCallback=e,this._statTicks=t,this._nextStat=0}_outputStats(){const t=this.getStats();this._nextStat=0;let e=`${this.currentTick}, Entities: ${t.entity.active} active, ${t.entity.pooled}/${t.entity.target} pooled`;for(const i of Object.keys(t.components)){const n=t.components[i];e+=`\n${this.currentTick}, ${i}: ${n.active} active, ${n.pooled}/${n.target} pooled`}this._statCallback(e)}_addRef(t,e,i,n,r,o,s){this.refs[t]||(this.refs[t]=new Set);this.getEntity(t);this.entityReverse.hasOwnProperty(t)||(this.entityReverse[t]={}),this.entityReverse[t].hasOwnProperty(o)||(this.entityReverse[t][o]=new Map);const a=this.entityReverse[t][o];let l=a.get(e);void 0===l&&(l=0),a.set(e,l+1),this.refs[t].add([e,i,n,r].join("...")),this._sendChange({op:"addRef",component:i,type:s,property:n,target:t,entity:e})}_deleteRef(t,e,i,n,r,o,s){const a=this.entityReverse[t][o];let l=a.get(e);l--,l<1?a.delete(e):a.set(e,l),0===a.size&&delete a[o],this.refs[t].delete([e,i,n,r].join("...")),0===this.refs[t].size&&delete this.refs[t],this._sendChange({op:"deleteRef",component:i,type:s,target:t,entity:e,property:n})}registerTags(...t){for(const e of t){if(this.entitiesByComponent.hasOwnProperty(e))throw new Error(`Cannot register tag "${e}", name is already taken.`);this.entitiesByComponent[e]=new Set,this.tags.add(e)}}registerComponent(t,e=1){t.typeName&&t.name!==t.typeName&&Object.defineProperty(t,"name",{value:t.typeName});const i=t.name;if(this.tags.has(i))throw new Error(`registerComponent: Tag already defined for "${i}"`);if(this.componentTypes.hasOwnProperty(i))throw new Error(`registerComponent: Component already defined for "${i}"`);if(this.componentTypes[i]=t,!t.registered){t.registered=!0,t.fields=Object.keys(t.properties),t.primitives={},t.factories={};for(const e of t.fields){if(l.has(e))throw new Error(`Error registering ${t.name}: Reserved property name "${e}"`);"function"==typeof t.properties[e]?t.factories[e]=t.properties[e]:t.primitives[e]=t.properties[e]}}this.entitiesByComponent[i]=new Set,this.componentPool.set(i,new o(this,i,e))}createEntity(t){return this.entityPool.get(t)}getObject(){const t=[];for(const e of this.entities)t.push(e[1].getObject());return t}createEntities(t){for(const e of t)this.createEntity(e)}copyTypes(t,e){for(const i of e)if(t.tags.has(i))this.registerTags(i);else{const e=t.componentTypes[i];this.componentTypes[i]=e,this.entitiesByComponent[i]=new Set,this.componentPool.set(i,new o(this,i,1))}}removeEntity(t){let e;t instanceof n?(e=t,t=e.id):e=this.getEntity(t),e.destroy()}getEntity(t){return this.entities.get(t)}getEntities(t){"string"!=typeof t&&(t=t.name);const e=[...this.entitiesByComponent[t]];return new Set(e.map(t=>this.getEntity(t)))}getComponent(t){return this.componentsById.get(t)}createQuery(t){return new r(this,null,t)}_sendChange(t){if(this.componentTypes[t.type].subbed){const e=this.subscriptions.get(t.type);if(!e)return;for(const i of e)i._recvChange(t)}}registerSystem(t,e,i){return i=i||[],"function"==typeof e&&(e=new e(this,...i)),this.systems.has(t)||this.systems.set(t,new Set),this.systems.get(t).add(e),e}runSystems(t){const e=this.systems.get(t);if(e)for(const t of e)t._preUpdate(),t.update(this.currentTick),t._postUpdate(),t.lastTick=this.currentTick,0!==t.changes.length&&(t.changes=[])}_entityUpdated(t){this.config.trackChanges&&this.updatedEntities.add(t)}_addEntityComponent(t,e){this.entitiesByComponent[t].add(e.id)}_deleteEntityComponent(t){this.entitiesByComponent[t.type].delete(t._meta.entityId)}_clearIndexes(t){for(const e of this.queries)e._removeEntity(t);this.updatedEntities.delete(t)}updateIndexes(){for(const t of this.updatedEntities)this._updateIndexesEntity(t);this.updatedEntities.clear()}_updateIndexesEntity(t){for(const e of this.queries)e.update(t)}}},function(t,e){t.exports=class{constructor(t,e,i){this.world=t,this.type=e,this.klass=this.world.componentTypes[this.type],this.pool=[],this.targetSize=i,this.active=0,this.spinUp(i)}get(t,e){let i;return i=0===this.pool.length?new this.klass(this.world):this.pool.pop(),i._setup(t,e),this.active++,i}release(t){t._reset(),this.pool.push(t),this.active--}cleanup(){if(this.pool.length>2*this.targetSize){const t=this.pool.length-this.targetSize,e=Math.max(Math.min(20,t),Math.floor(t/4));for(let t=0;t<e;t++)this.pool.pop()}}spinUp(t){for(let e=0;e<t;e++){const t=new this.klass(this.world);this.pool.push(t)}this.targetSize=Math.max(this.targetSize,this.pool.length)}}},function(t,e,i){const n=i(9);t.exports=class{constructor(t,e){this.world=t,this.pool=[],this.destroyed=[],this.worldEntity=class extends n{},this.worldEntity.prototype.world=this.world,this.spinUp(e),this.targetSize=e}destroy(t){this.destroyed.push(t)}get(t,e=!1){let i;return i=0===this.pool.length?new this.worldEntity:this.pool.pop(),i._setup(t,e),i}release(){for(;this.destroyed.length>0;){const t=this.destroyed.pop();this.pool.push(t)}}cleanup(){if(this.pool.length>2*this.targetSize){const t=this.pool.length-this.targetSize,e=Math.max(Math.min(20,t),Math.floor(t/4));for(let t=0;t<e;t++)this.pool.pop()}}spinUp(t){for(let e=0;e<t;e++){const t=new this.worldEntity;this.pool.push(t)}this.targetSize=Math.max(this.targetSize,this.pool.length)}}},function(t,e,i){const n=i(16);class r extends n{init(){this.destroyQuery=this.createQuery({includeApeDestroy:!0}).fromAll("ApeDestroy").persist()}update(){const t=this.destroyQuery.execute();for(const e of t)e.destroy()}}t.exports=function(t){t.registerTags("ApeDestroy"),t.registerSystem("ApeCleanup",r)}},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(37),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(7))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,o,s,a,l=1,u={},h=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return u[l]=r,n(l),l++},d.clearImmediate=p}function p(t){delete u[t]}function f(t){if(h)setTimeout(f,0,t);else{var e=u[t];if(e){h=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{p(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(7),i(17))},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,u=/^xn--/,h=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(d[t])}function g(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function y(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+g((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,i,n=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function _(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var n=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;n+=36)t=p(t/35);return p(n+36*t/(t+38))}function w(t){var e,i,n,r,o,s,a,u,h,c,d,f=[],g=t.length,y=0,v=128,b=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&m("not-basic"),f.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(o=y,s=1,a=36;r>=g&&m("invalid-input"),((u=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>p((l-y)/s))&&m("overflow"),y+=u*s,!(u<(h=a<=b?1:a>=b+26?26:a-b));a+=36)s>p(l/(c=36-h))&&m("overflow"),s*=c;b=x(y-o,e=f.length+1,0==o),p(y/e)>l-v&&m("overflow"),v+=p(y/e),y%=e,f.splice(y++,0,v)}return _(f)}function T(t){var e,i,n,r,o,s,a,u,h,c,d,g,y,_,w,T=[];for(g=(t=v(t)).length,e=128,i=0,o=72,s=0;s<g;++s)(d=t[s])<128&&T.push(f(d));for(n=r=T.length,r&&T.push("-");n<g;){for(a=l,s=0;s<g;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>p((l-i)/(y=n+1))&&m("overflow"),i+=(a-e)*y,e=a,s=0;s<g;++s)if((d=t[s])<e&&++i>l&&m("overflow"),d==e){for(u=i,h=36;!(u<(c=h<=o?1:h>=o+26?26:h-o));h+=36)w=u-c,_=36-c,T.push(f(b(c+w%_,0))),u=p(w/_);T.push(f(b(u,0))),o=x(i,y,n==r),i=0,++n}++i,++e}return T.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:_},decode:w,encode:T,toASCII:function(t){return y(t,(function(t){return h.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(20)(t),i(7))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(41),e.encode=e.stringify=i(42)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var h=0;h<u;++h){var c,d,p,f,m=t[h].replace(a,"%20"),g=m.indexOf(i);g>=0?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+i;return r(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"isMobile",(function(){return R})),i.d(n,"EventEmitter",(function(){return J.a})),i.d(n,"earcut",(function(){return et.a})),i.d(n,"url",(function(){return nt.a})),i.d(n,"BaseTextureCache",(function(){return Rt})),i.d(n,"CanvasRenderTarget",(function(){return Ft})),i.d(n,"DATA_URI",(function(){return jt})),i.d(n,"ProgramCache",(function(){return Mt})),i.d(n,"TextureCache",(function(){return kt})),i.d(n,"clearTextureCache",(function(){return Lt})),i.d(n,"correctBlendMode",(function(){return ft})),i.d(n,"createIndicesForQuads",(function(){return vt})),i.d(n,"decomposeDataUri",(function(){return Gt})),i.d(n,"deprecation",(function(){return Ot})),i.d(n,"destroyTextureCache",(function(){return Dt})),i.d(n,"determineCrossOrigin",(function(){return Ut})),i.d(n,"getBufferType",(function(){return _t})),i.d(n,"getResolutionOfUrl",(function(){return zt})),i.d(n,"hex2rgb",(function(){return ut})),i.d(n,"hex2string",(function(){return ht})),i.d(n,"interleaveTypedArrays",(function(){return xt})),i.d(n,"isPow2",(function(){return Tt})),i.d(n,"isWebGLSupported",(function(){return lt})),i.d(n,"log2",(function(){return St})),i.d(n,"nextPow2",(function(){return wt})),i.d(n,"premultiplyBlendMode",(function(){return pt})),i.d(n,"premultiplyRgba",(function(){return mt})),i.d(n,"premultiplyTint",(function(){return gt})),i.d(n,"premultiplyTintToRgba",(function(){return yt})),i.d(n,"removeItems",(function(){return Et})),i.d(n,"rgb2hex",(function(){return dt})),i.d(n,"sayHello",(function(){return at})),i.d(n,"sign",(function(){return Ct})),i.d(n,"skipHello",(function(){return st})),i.d(n,"string2hex",(function(){return ct})),i.d(n,"trimCanvas",(function(){return Nt})),i.d(n,"uid",(function(){return It}));var r={};i.r(r),i.d(r,"utils",(function(){return n})),i.d(r,"AccessibilityManager",(function(){return _e})),i.d(r,"accessibleTarget",(function(){return ye})),i.d(r,"InteractionData",(function(){return Te})),i.d(r,"InteractionEvent",(function(){return Ee})),i.d(r,"InteractionManager",(function(){return Oe})),i.d(r,"InteractionTrackingData",(function(){return Ce})),i.d(r,"interactiveTarget",(function(){return Ie})),i.d(r,"Application",(function(){return Xn})),i.d(r,"AbstractBatchRenderer",(function(){return Nn})),i.d(r,"AbstractRenderer",(function(){return An})),i.d(r,"Attribute",(function(){return si})),i.d(r,"BaseRenderTexture",(function(){return Je})),i.d(r,"BaseTexture",(function(){return je})),i.d(r,"BatchDrawCall",(function(){return Dn})),i.d(r,"BatchGeometry",(function(){return jn})),i.d(r,"BatchPluginFactory",(function(){return zn})),i.d(r,"BatchRenderer",(function(){return Hn})),i.d(r,"BatchShaderGenerator",(function(){return Bn})),i.d(r,"BatchTextureArray",(function(){return Ln})),i.d(r,"Buffer",(function(){return li})),i.d(r,"Filter",(function(){return on})),i.d(r,"FilterState",(function(){return _i})),i.d(r,"Framebuffer",(function(){return Ze})),i.d(r,"GLFramebuffer",(function(){return Ei})),i.d(r,"GLProgram",(function(){return _n})),i.d(r,"GLTexture",(function(){return En})),i.d(r,"Geometry",(function(){return fi})),i.d(r,"IGLUniformData",(function(){return vn})),i.d(r,"MaskData",(function(){return Mi})),i.d(r,"ObjectRenderer",(function(){return xi})),i.d(r,"Program",(function(){return en})),i.d(r,"Quad",(function(){return mi})),i.d(r,"QuadUv",(function(){return gi})),i.d(r,"RenderTexture",(function(){return ri})),i.d(r,"RenderTexturePool",(function(){return oi})),i.d(r,"Renderer",(function(){return On})),i.d(r,"Shader",(function(){return nn})),i.d(r,"SpriteMaskFilter",(function(){return ln})),i.d(r,"State",(function(){return rn})),i.d(r,"System",(function(){return $e})),i.d(r,"Texture",(function(){return ii})),i.d(r,"TextureMatrix",(function(){return an})),i.d(r,"TextureUvs",(function(){return ti})),i.d(r,"UniformGroup",(function(){return vi})),i.d(r,"ViewableBuffer",(function(){return Fn})),i.d(r,"autoDetectRenderer",(function(){return Mn})),i.d(r,"checkMaxIfStatementsInShader",(function(){return Zi})),i.d(r,"defaultFilterVertex",(function(){return Rn})),i.d(r,"defaultVertex",(function(){return kn})),i.d(r,"resources",(function(){return qe})),i.d(r,"systems",(function(){return Pn})),i.d(r,"uniformParsers",(function(){return Yi})),i.d(r,"Extract",(function(){return Vn})),i.d(r,"AppLoaderPlugin",(function(){return _r})),i.d(r,"Loader",(function(){return vr})),i.d(r,"LoaderResource",(function(){return mr})),i.d(r,"TextureLoader",(function(){return yr})),i.d(r,"ParticleContainer",(function(){return Sr})),i.d(r,"ParticleRenderer",(function(){return Cr})),i.d(r,"BasePrepare",(function(){return Oo})),i.d(r,"CountLimiter",(function(){return wo})),i.d(r,"Prepare",(function(){return Do})),i.d(r,"TimeLimiter",(function(){return Lo})),i.d(r,"Spritesheet",(function(){return Fo})),i.d(r,"SpritesheetLoader",(function(){return No})),i.d(r,"TilingSprite",(function(){return Uo})),i.d(r,"TilingSpriteRenderer",(function(){return Xo})),i.d(r,"BitmapFont",(function(){return ls})),i.d(r,"BitmapFontData",(function(){return ts})),i.d(r,"BitmapFontLoader",(function(){return ds})),i.d(r,"BitmapText",(function(){return cs})),i.d(r,"Ticker",(function(){return xe})),i.d(r,"TickerPlugin",(function(){return we})),i.d(r,"UPDATE_PRIORITY",(function(){return ve})),i.d(r,"ALPHA_MODES",(function(){return W})),i.d(r,"BLEND_MODES",(function(){return N})),i.d(r,"BUFFER_BITS",(function(){return F})),i.d(r,"CLEAR_MODES",(function(){return Y})),i.d(r,"DRAW_MODES",(function(){return B})),i.d(r,"ENV",(function(){return D})),i.d(r,"FORMATS",(function(){return j})),i.d(r,"GC_MODES",(function(){return V})),i.d(r,"MASK_TYPES",(function(){return q})),i.d(r,"MIPMAP_MODES",(function(){return X})),i.d(r,"MSAA_QUALITY",(function(){return $})),i.d(r,"PRECISION",(function(){return K})),i.d(r,"RENDERER_TYPE",(function(){return L})),i.d(r,"SCALE_MODES",(function(){return z})),i.d(r,"TARGETS",(function(){return G})),i.d(r,"TYPES",(function(){return U})),i.d(r,"WRAP_MODES",(function(){return H})),i.d(r,"Bounds",(function(){return he})),i.d(r,"Container",(function(){return ge})),i.d(r,"DisplayObject",(function(){return pe})),i.d(r,"TemporaryDisplayObject",(function(){return fe})),i.d(r,"FillStyle",(function(){return Ir})),i.d(r,"GRAPHICS_CURVES",(function(){return Pr})),i.d(r,"Graphics",(function(){return no})),i.d(r,"GraphicsData",(function(){return $r})),i.d(r,"GraphicsGeometry",(function(){return Jr})),i.d(r,"LINE_CAP",(function(){return Tr})),i.d(r,"LINE_JOIN",(function(){return wr})),i.d(r,"LineStyle",(function(){return to})),i.d(r,"graphicsUtils",(function(){return qr})),i.d(r,"Circle",(function(){return Kt})),i.d(r,"DEG_TO_RAD",(function(){return Yt})),i.d(r,"Ellipse",(function(){return qt})),i.d(r,"Matrix",(function(){return te})),i.d(r,"ObservablePoint",(function(){return Jt})),i.d(r,"PI_2",(function(){return Xt})),i.d(r,"Point",(function(){return Zt})),i.d(r,"Polygon",(function(){return $t})),i.d(r,"RAD_TO_DEG",(function(){return Wt})),i.d(r,"Rectangle",(function(){return Vt})),i.d(r,"RoundedRectangle",(function(){return Qt})),i.d(r,"SHAPES",(function(){return Ht})),i.d(r,"Transform",(function(){return ue})),i.d(r,"groupD8",(function(){return le})),i.d(r,"Mesh",(function(){return $o})),i.d(r,"MeshBatchUvs",(function(){return Vo})),i.d(r,"MeshGeometry",(function(){return Zo})),i.d(r,"MeshMaterial",(function(){return Qo})),i.d(r,"NineSlicePlane",(function(){return ea})),i.d(r,"PlaneGeometry",(function(){return $s})),i.d(r,"RopeGeometry",(function(){return Qs})),i.d(r,"SimpleMesh",(function(){return ta})),i.d(r,"SimplePlane",(function(){return Js})),i.d(r,"SimpleRope",(function(){return Zs})),i.d(r,"Runner",(function(){return Me})),i.d(r,"Sprite",(function(){return lo})),i.d(r,"AnimatedSprite",(function(){return na})),i.d(r,"TEXT_GRADIENT",(function(){return oo})),i.d(r,"Text",(function(){return bo})),i.d(r,"TextMetrics",(function(){return yo})),i.d(r,"TextStyle",(function(){return po})),i.d(r,"isMobile",(function(){return R})),i.d(r,"settings",(function(){return Q})),i.d(r,"VERSION",(function(){return la})),i.d(r,"filters",(function(){return ua})),i.d(r,"useDeprecated",(function(){return aa}));var o={};i.r(o),i.d(o,"TYPE_TEXT",(function(){return ja})),i.d(o,"TYPE_NEWLINE",(function(){return Ga})),i.d(o,"TYPE_FG",(function(){return Ua})),i.d(o,"TYPE_BG",(function(){return za})),i.d(o,"measure",(function(){return Ha})),i.d(o,"tokenize",(function(){return Xa}));var s={Game:null,gameEventEmitter:null,document:null,window:null},a=i(21),l=i(0),u=i(22),h=i(23),c=i.n(h);
/*!
 * @pixi/polyfill - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=u.Polyfill),Object.assign||(Object.assign=c.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var d=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-d}}for(var p=Date.now(),f=["ms","moz","webkit","o"],m=0;m<f.length&&!window.requestAnimationFrame;++m){var g=f[m];window.requestAnimationFrame=window[g+"RequestAnimationFrame"],window.cancelAnimationFrame=window[g+"CancelAnimationFrame"]||window[g+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+p-e;return i<0&&(i=0),p=e,window.setTimeout((function(){p=Date.now(),t(performance.now())}),i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var y=/iPhone/i,v=/iPod/i,_=/iPad/i,b=/\biOS-universal(?:.+)Mac\b/i,x=/\bAndroid(?:.+)Mobile\b/i,w=/Android/i,T=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,S=/Silk/i,E=/Windows Phone/i,C=/\bWindows(?:.+)ARM\b/i,P=/BlackBerry/i,I=/BB10/i,A=/Opera Mini/i,O=/\b(CriOS|Chrome)(?:.+)Mobile/i,M=/Mobile(?:.+)Firefox\b/i,k=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var R=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var r=function(t){return function(e){return e.test(t)}}(i),o={apple:{phone:r(y)&&!r(E),ipod:r(v),tablet:!r(y)&&(r(_)||k(e))&&!r(E),universal:r(b),device:(r(y)||r(v)||r(_)||r(b)||k(e))&&!r(E)},amazon:{phone:r(T),tablet:!r(T)&&r(S),device:r(T)||r(S)},android:{phone:!r(E)&&r(T)||!r(E)&&r(x),tablet:!r(E)&&!r(T)&&!r(x)&&(r(S)||r(w)),device:!r(E)&&(r(T)||r(S)||r(x)||r(w))||r(/\bokhttp\b/i)},windows:{phone:r(E),tablet:r(C),device:r(E)||r(C)},other:{blackberry:r(P),blackberry10:r(I),opera:r(A),firefox:r(M),chrome:r(O),device:r(P)||r(I)||r(A)||r(M)||r(O)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator);var D,L,F,N,B,j,G,U,z,H,X,W,Y,V,K,q,$,Q={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(R.tablet||R.phone){var i;if(R.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(e=!1);if(R.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:R.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!R.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Z=i(18),J=i.n(Z),tt=i(19),et=i.n(tt),it=i(10),nt=i.n(it);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(D||(D={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(L||(L={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(F||(F={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(N||(N={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(B||(B={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(j||(j={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(G||(G={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(U||(U={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(z||(z={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(H||(H={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(X||(X={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(W||(W={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Y||(Y={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(V||(V={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(K||(K={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(q||(q={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}($||($={})),
/*!
 * @pixi/utils - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Q.RETINA_PREFIX=/@([0-9\.]+)x/,Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var rt,ot=!1;function st(){ot=!0}function at(t){var e;if(!ot){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 5.3.9 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS 5.3.9 - "+t+" - http://www.pixijs.com/");ot=!0}}function lt(){return void 0===rt&&(rt=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}()),rt}function ut(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function ht(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function ct(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function dt(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var pt=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[N.NORMAL_NPM]=N.NORMAL,t[N.ADD_NPM]=N.ADD,t[N.SCREEN_NPM]=N.SCREEN,e[N.NORMAL]=N.NORMAL_NPM,e[N.ADD]=N.ADD_NPM,e[N.SCREEN]=N.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function ft(t,e){return pt[e?1:0][t]}function mt(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function gt(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function yt(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function vt(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function _t(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var bt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function xt(t,e){for(var i=0,n=0,r={},o=0;o<t.length;o++)n+=e[o],i+=t[o].length;var s=new ArrayBuffer(4*i),a=null,l=0;for(o=0;o<t.length;o++){var u=e[o],h=t[o],c=_t(h);r[c]||(r[c]=new bt[c](s)),a=r[c];for(var d=0;d<h.length;d++){a[(d/u|0)*n+l+d%u]=h[d]}l+=u}return new Float32Array(s)}function wt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Tt(t){return!(t&t-1||!t)}function St(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function Et(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var o=r-(i=e+i>r?r-e:i);for(n=e;n<o;++n)t[n]=t[n+i];t.length=o}}function Ct(t){return 0===t?0:t<0?-1:1}var Pt=0;function It(){return++Pt}var At={};function Ot(t,e,i){if(void 0===i&&(i=3),!At[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),At[e]=!0}}var Mt={},kt=Object.create(null),Rt=Object.create(null);function Dt(){var t;for(t in kt)kt[t].destroy();for(t in Rt)Rt[t].destroy()}function Lt(){var t;for(t in kt)delete kt[t];for(t in Rt)delete Rt[t]}var Ft=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||Q.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function Nt(t){var e,i,n,r=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,r,o).data,l=a.length,u={top:null,left:null,right:null,bottom:null},h=null;for(e=0;e<l;e+=4)0!==a[e+3]&&(i=e/4%r,n=~~(e/4/r),null===u.top&&(u.top=n),(null===u.left||i<u.left)&&(u.left=i),(null===u.right||u.right<i)&&(u.right=i+1),(null===u.bottom||u.bottom<n)&&(u.bottom=n));return null!==u.top&&(r=u.right-u.left,o=u.bottom-u.top+1,h=s.getImageData(u.left,u.top,r,o)),{height:o,width:r,data:h}}var Bt,jt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Gt(t){var e=jt.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Ut(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,Bt||(Bt=document.createElement("a")),Bt.href=t;var i=Object(it.parse)(Bt.href),n=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&n&&i.protocol===e.protocol?"":"anonymous"}function zt(t,e){var i=Q.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}
/*!
 * @pixi/math - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ht,Xt=2*Math.PI,Wt=180/Math.PI,Yt=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Ht||(Ht={}));var Vt=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Ht.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=r-n,this},t}(),Kt=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Ht.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new Vt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),qt=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=Ht.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new Vt(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),$t=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var r=[],o=0,s=n.length;o<s;o++)r.push(n[o].x,n[o].y);n=r}this.points=n,this.type=Ht.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,o=n-1;r<n;o=r++){var s=this.points[2*r],a=this.points[2*r+1],l=this.points[2*o],u=this.points[2*o+1];a>e!=u>e&&t<(e-a)/(u-a)*(l-s)+s&&(i=!i)}return i},t}(),Qt=function(){function t(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=r,this.type=Ht.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}(),Zt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),Jt=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t,e,i,n,r,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new Zt;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Zt;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,o,s,a,l){return this.a=Math.cos(s+l)*r,this.b=Math.sin(s+l)*r,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),s=Math.atan2(i,e),a=Math.abs(o+s);return a<1e-5||Math.abs(Xt-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),ee=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ie=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ne=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],re=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],oe=[],se=[],ae=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];oe.push(e);for(var i=0;i<16;i++)for(var n=ae(ee[t]*ee[i]+ne[t]*ie[i]),r=ae(ie[t]*ee[i]+re[t]*ie[i]),o=ae(ee[t]*ne[i]+ne[t]*re[i]),s=ae(ie[t]*ne[i]+re[t]*re[i]),a=0;a<16;a++)if(ee[a]===n&&ie[a]===r&&ne[a]===o&&re[a]===s){e.push(a);break}}for(t=0;t<16;t++){var l=new te;l.set(ee[t],ie[t],ne[t],re[t],0,0),se.push(l)}}();var le={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return ee[t]},uY:function(t){return ie[t]},vX:function(t){return ne[t]},vY:function(t){return re[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return oe[t][e]},sub:function(t,e){return oe[t][le.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?le.S:le.N:2*Math.abs(e)<=Math.abs(t)?t>0?le.E:le.W:e>0?t>0?le.SE:le.SW:t>0?le.NE:le.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=se[le.inv(e)];r.tx=i,r.ty=n,t.append(r)}},ue=function(){function t(){this.worldTransform=new te,this.localTransform=new te,this.position=new Jt(this.onChange,this,0,0),this.scale=new Jt(this.onChange,this,1,1),this.pivot=new Jt(this.onChange,this,0,0),this.skew=new Jt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();
/*!
 * @pixi/display - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Q.SORTABLE_CHILDREN=!1;var he=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Vt.EMPTY:((t=t||new Vt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,n=o>n?o:n,r=s>r?s:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},t.prototype.addFrameMatrix=function(t,e,i,n,r){var o=t.a,s=t.b,a=t.c,l=t.d,u=t.tx,h=t.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=o*e+a*i+u,g=s*e+l*i+h;c=m<c?m:c,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*n+a*i+u)<c?m:c,d=(g=s*n+l*i+h)<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*e+a*r+u)<c?m:c,d=(g=s*e+l*r+h)<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*n+a*r+u)<c?m:c,d=(g=s*n+l*r+h)<d?g:d,p=m>p?m:p,f=g>f?g:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,o=this.maxX,s=this.maxY,a=e;a<i;a+=2){var l=t[a],u=t[a+1];n=l<n?l:n,r=u<r?u:r,o=l>o?l:o,s=u>s?u:s}this.minX=n,this.minY=r,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},t.prototype.addVerticesMatrix=function(t,e,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=r);for(var s=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,g=i;g<n;g+=2){var y=e[g],v=e[g+1],_=s*y+l*v+h,b=u*v+a*y+c;d=Math.min(d,_-r),f=Math.max(f,_+r),p=Math.min(p,b-o),m=Math.max(m,b+o)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,n,r,o){t-=r,e-=o,i+=r,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}(),ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function de(t,e){function i(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var pe=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new ue,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new he,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return de(e,t),e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Vt),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Vt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new he);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-r,o},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,r,o,s,a,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new fe),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Wt},set:function(t){this.transform.rotation=t*Yt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(J.a),fe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return de(e,t),e}(pe);function me(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}pe.prototype.displayObjectUpdateTransform=pe.prototype.updateTransform;var ge=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=Q.SORTABLE_CHILDREN,e.sortDirty=!1,e}return de(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.addChild(e[n]);else{var r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Et(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.removeChild(e[n]);else{var r=e[0],o=this.children.indexOf(r);if(-1===o)return null;r.parent=null,r.transform._parentID=-1,Et(this.children,o,1),this._boundsID++,this.onChildrenChange(o),r.emit("removed",this),this.emit("childRemoved",r,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Et(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,n=t,r=e-n;if(r>0&&r<=e){i=this.children.splice(n,r);for(var o=0;o<i.length;++o)i[o].parent=null,i[o].transform&&(i[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<i.length;++o)i[o].emit("removed",this),this.emit("childRemoved",i[o],this,o);return i}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(me),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var n=t.prototype.getLocalBounds.call(this,e);if(!i)for(var r=0,o=this.children.length;r<o;++r){var s=this.children[r];s.visible&&s.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);n=0;for(var r=this.children.length;n<r;n++)this.children[n].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(pe);ge.prototype.containerUpdateTransform=ge.prototype.updateTransform;
/*!
 * @pixi/accessibility - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ye={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};pe.mixin(ye);var ve,_e=function(){function t(t){this._hookDiv=null,(R.tablet||R.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(R.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,n=e.width/this.renderer.width*i,r=e.height/this.renderer.height*i,o=this.div;o.style.left=e.left+"px",o.style.top=e.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,Et(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--;else{o=a._accessibleDiv;var l=a.hitArea,u=a.worldTransform;a.hitArea?(o.style.left=(u.tx+l.x*u.a)*n+"px",o.style.top=(u.ty+l.y*u.d)*r+"px",o.style.width=l.width*u.a*n+"px",o.style.height=l.height*u.d*r+"px"):(l=a.getBounds(),this.capHitArea(l),o.style.left=l.x*n+"px",o.style.top=l.y*r+"px",o.style.width=l.width*n+"px",o.style.height=l.height*r+"px",o.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(o.title=a.accessibleTitle),o.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&o.setAttribute("aria-label",a.accessibleHint)),a.accessibleTitle===o.title&&a.tabIndex===o.tabIndex||(o.title=a.accessibleTitle,o.tabIndex=a.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();
/*!
 * @pixi/ticker - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Q.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(ve||(ve={}));var be=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),xe=function(){function t(){var t=this;this._head=new be(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/Q.TARGET_FPMS,this.elapsedMS=1/Q.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=ve.NORMAL),this._addListener(new be(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=ve.NORMAL),this._addListener(new be(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Q.TARGET_FPMS;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Q.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),we=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,ve.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?xe.shared:new xe,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),Te=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Zt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Se=function(t,e){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Ee=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Ce=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Pe=function(){function t(){this._tempPoint=new Zt}return t.prototype.recursiveFindHit=function(t,e,i,n,r){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=r=e.interactive||r,l=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(n=!1)),l&&e.interactiveChildren&&e.children)for(var u=e.children,h=u.length-1;h>=0;h--){var c=u[h],d=this.recursiveFindHit(t,c,i,n,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(n=!1),s=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},t.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},t}(),Ie={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};pe.mixin(Ie);var Ae={target:null,data:{global:null}},Oe=function(t){function e(e,i){var n=t.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new Te,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new Ee,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new Pe,n._tempDisplayObject=new fe,n._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(t,e){function i(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Ae.target=null,Ae.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Ae,e,null,!0),Ae.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(xe.system.add(this.tickerUpdate,this,ve.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(xe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n){var r=this.search.findHit(t,e,i,n),o=this.delayedEvents;if(!o.length)return r;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var l=o[a],u=l.displayObject,h=l.eventString,c=l.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,h,c)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new Ce(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,o=e.trackedPointers[r],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(a){var u=2===n.button,h=Ce.FLAGS,c=u?h.RIGHT_DOWN:h.LEFT_DOWN,d=void 0!==o&&o.flags&c;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[r];i&&!s&&(s=e.trackedPointers[r]=new Ce(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new Te).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(J.a),Me=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,r,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,h=l.items;this._aliasCount++;for(var c=0,d=h.length;c<d;c++)h[c][u](t,e,i,n,r,o,s,a);return h===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Me.prototype,{dispatch:{value:Me.prototype.emit},run:{value:Me.prototype.emit}}),
/*!
 * @pixi/core - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Q.PREFER_ENV=R.any?D.WEBGL:D.WEBGL2,Q.STRICT_TEXTURE_CACHE=!1;var ke=[];function Re(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var r=ke.length-1;r>=0;--r){var o=ke[r];if(o.test&&o.test(t,i))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var De=function(t,e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Le(t,e){function i(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Fe=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Me("setRealSize"),this.onUpdate=new Me("update"),this.onError=new Me("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Ne=function(t){function e(e,i){var n=this,r=i||{},o=r.width,s=r.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(n=t.call(this,o,s)||this).data=e,n}return Le(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Fe),Be={scaleMode:z.NEAREST,format:j.RGBA,alphaMode:W.NPM},je=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this,r=(i=i||{}).alphaMode,o=i.mipmap,s=i.anisotropicLevel,a=i.scaleMode,l=i.width,u=i.height,h=i.wrapMode,c=i.format,d=i.type,p=i.target,f=i.resolution,m=i.resourceOptions;return!e||e instanceof Fe||((e=Re(e,m)).internal=!0),n.width=l||0,n.height=u||0,n.resolution=f||Q.RESOLUTION,n.mipmap=void 0!==o?o:Q.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==s?s:Q.ANISOTROPIC_LEVEL,n.wrapMode=h||Q.WRAP_MODE,n.scaleMode=void 0!==a?a:Q.SCALE_MODE,n.format=c||j.RGBA,n.type=d||U.UNSIGNED_BYTE,n.target=p||G.TEXTURE_2D,n.alphaMode=void 0!==r?r:W.UNPACK,void 0!==i.premultiplyAlpha&&(n.premultiplyAlpha=i.premultiplyAlpha),n.uid=It(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Le(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Tt(this.realWidth)&&Tt(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Rt[this.cacheId],delete kt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=Q.STRICT_TEXTURE_CACHE);var r="string"==typeof t,o=null;r?o=t:(t._pixiId||(t._pixiId="pixiid_"+It()),o=t._pixiId);var s=Rt[o];if(r&&n&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new e(t,i)).cacheId=o,e.addToCache(s,o)),s},e.fromBuffer=function(t,i,n,r){t=t||new Float32Array(i*n*4);var o=new Ne(t,{width:i,height:n}),s=t instanceof Float32Array?U.FLOAT:U.UNSIGNED_BYTE;return new e(o,Object.assign(Be,r||{width:i,height:n,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Rt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Rt[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Rt[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Rt[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete Rt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(J.a),Ge=function(t){function e(e,i){var n=this,r=i||{},o=r.width,s=r.height;(n=t.call(this,o,s)||this).items=[],n.itemDirtyIds=[];for(var a=0;a<e;a++){var l=new je;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return Le(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Fe?this.addResourceAt(t[i],i):this.addResourceAt(Re(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,n=e.realHeight;return t.resize(i,n),Promise.resolve(t)})),this._load},e}(Fe),Ue=function(t){function e(e,i){var n,r,o=this,s=i||{},a=s.width,l=s.height;return Array.isArray(e)?(n=e,r=e.length):r=e,o=t.call(this,r,{width:a,height:l})||this,n&&o.initFromArray(n,i),o}return Le(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=G.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var n=this.length,r=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var a=0;a<n;a++){var l=o[a];r[a]<l.dirtyId&&(r[a]=l.dirtyId,l.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,l.resource.width,l.resource.height,1,e.format,e.type,l.resource.source))}return!0},e}(Ge),ze=function(t){function e(e){var i=this,n=e,r=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return(i=t.call(this,r,o)||this).source=e,i.noSubImage=!1,i}return Le(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Ut(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var r=t.gl,o=e.realWidth,s=e.realHeight;return n=n||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==o||i.height!==s?(i.width=o,i.height=s,r.texImage2D(e.target,0,e.format,e.format,e.type,n)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Fe),He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Le(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(ze),Xe=function(t){function e(i,n){var r=this,o=n||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");r=t.call(this,6,{width:s,height:a})||this;for(var h=0;h<e.SIDES;h++)r.items[h].target=G.TEXTURE_CUBE_MAP_POSITIVE_X+h;return r.linkBaseTexture=!1!==u,i&&r.initFromArray(i,n),!1!==l&&r.load(),r}return Le(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=G.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=G.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,n){for(var r=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];r[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,n),r[o]=s.dirtyId):r[o]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),r[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ge),We=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var r=new Image;ze.crossOrigin(r,e,i.crossorigin),r.src=e,e=r}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:Q.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(n.premultiplyAlpha=i.premultiplyAlpha),n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return Le(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var n=e.source;e.url=n.src;var r=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?r():(n.onload=r,n.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===W.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var r=!0,o=i._glTextures;for(var s in o){var a=o[s];if(a!==n&&a.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(ze),Ye=function(t){function e(e,i){var n=this;return i=i||{},(n=t.call(this,document.createElement("canvas"))||this)._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,!1!==i.autoLoad&&n.load(),n}return Le(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;ze.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=i*t.scale,o=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/n*i,o=t._overrideHeight||t._overrideWidth/i*n),r=Math.round(r),o=Math.round(o);var s=t.source;s.width=r,s.height=o,s._pixiId="canvas_"+It(),s.getContext("2d").drawImage(e,0,0,i,n,0,0,r,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(ze),Ve=function(t){function e(i,n){var r=this;if(n=n||{},!(i instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var s=i[0].src||i[0];ze.crossOrigin(o,s,n.crossorigin);for(var a=0;a<i.length;++a){var l=document.createElement("source"),u=i[a],h=u.src,c=u.mime,d=(h=h||i[a]).split("?").shift().toLowerCase(),p=d.substr(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,l.src=h,l.type=c,o.appendChild(l)}i=o}return(r=t.call(this,i)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=n.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==n.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==n.autoLoad&&r.load(),r}return Le(e,t),e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=xe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(xe.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(xe.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&xe.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(xe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(xe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(ze),Ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Le(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(ze);ke.push(We,Ke,He,Ve,Ye,Ne,Xe,Ue);var qe={Resource:Fe,BaseImageResource:ze,INSTALLED:ke,autoDetectResource:Re,AbstractMultiResource:Ge,ArrayResource:Ue,BufferResource:Ne,CanvasResource:He,CubeResource:Xe,ImageResource:We,SVGResource:Ye,VideoResource:Ve,ImageBitmapResource:Ke},$e=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),Qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Le(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,1===t.context.webGLVersion?n.DEPTH_COMPONENT:n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(Ne),Ze=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Me("disposeFramebuffer"),this.multisample=$.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new je(null,{scaleMode:z.NEAREST,resolution:1,mipmap:X.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new je(new Qe(null,{width:this.width,height:this.height}),{scaleMode:z.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:X.OFF,format:j.DEPTH_COMPONENT,type:U.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Je=function(t){function e(e){var i=this;if("number"==typeof e){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:o,resolution:s}}i=t.call(this,null,e)||this;var a=e||{},l=a.width,u=a.height;return i.mipmap=0,i.width=Math.ceil(l)||100,i.height=Math.ceil(u)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ze(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return Le(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(je),ti=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var o=t.width/2/n,s=t.height/2/r,a=t.x/n+o,l=t.y/r+s;i=le.add(i,le.NW),this.x0=a+o*le.uX(i),this.y0=l+s*le.uY(i),i=le.add(i,2),this.x1=a+o*le.uX(i),this.y1=l+s*le.uY(i),i=le.add(i,2),this.x2=a+o*le.uX(i),this.y2=l+s*le.uY(i),i=le.add(i,2),this.x3=a+o*le.uX(i),this.y3=l+s*le.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),ei=new ti,ii=function(t){function e(i,n,r,o,s,a){var l=t.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new Vt(0,0,1,1)),i instanceof e&&(i=i.baseTexture),l.baseTexture=i,l._frame=n,l.trim=o,l.valid=!1,l._uvs=ei,l.uvMatrix=null,l.orig=r||n,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Zt(a.x,a.y):new Zt(0,0),l._updateID=0,l.textureCacheIds=[],i.valid?l.noFrame?i.valid&&l.onBaseTextureUpdated(i):l.frame=n:i.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&i.on("update",l.onBaseTextureUpdated,l),l}return Le(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture;i&&i.url&&kt[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===ei&&(this._uvs=new ti),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=Q.STRICT_TEXTURE_CACHE);var r="string"==typeof t,o=null;r?o=t:(t._pixiId||(t._pixiId="pixiid_"+It()),o=t._pixiId);var s=kt[o];if(r&&n&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||(i.resolution||(i.resolution=zt(t)),(s=new e(new je(t,i))).baseTexture.cacheId=o,je.addToCache(s.baseTexture,o),e.addToCache(s,o)),s},e.fromURL=function(t,i){var n=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),r=e.from(t,Object.assign({resourceOptions:n},i),!1),o=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):o.load().then((function(){return Promise.resolve(r)}))},e.fromBuffer=function(t,i,n,r){return new e(je.fromBuffer(t,i,n,r))},e.fromLoader=function(t,i,n){var r=new We(t);r.url=i;var o=new e(new je(r,{scaleMode:Q.SCALE_MODE,resolution:zt(i)}));return n||(n=i),je.addToCache(o.baseTexture,n),e.addToCache(o,n),n!==i&&(je.addToCache(o.baseTexture,i),e.addToCache(o,i)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),kt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),kt[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=kt[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete kt[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)kt[t.textureCacheIds[n]]===t&&delete kt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,o=e+n>this.baseTexture.width,s=i+r>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(J.a);function ni(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}ii.EMPTY=new ii(new je),ni(ii.EMPTY),ni(ii.EMPTY.baseTexture),ii.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new ii(new je(new He(t)))}(),ni(ii.WHITE),ni(ii.WHITE.baseTexture);var ri=function(t){function e(e,i){var n=this,r=null;if(!(e instanceof Je)){var o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly."),r=arguments[0],i=null,e=new Je({width:o,height:s,scaleMode:a,resolution:l})}return(n=t.call(this,e,i)||this).legacyRenderer=r,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Le(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new Je(t))},e}(ii),oi=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var i=new Je(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new ri(i)},t.prototype.getOptimalTexture=function(e,i,n){void 0===n&&(n=1);var r=t.SCREEN_KEY;e*=n,i*=n,this.enableFullScreen&&e===this._pixelsWidth&&i===this._pixelsHeight||(r=(65535&(e=wt(e)))<<16|65535&(i=wt(i))),this.texturePool[r]||(this.texturePool[r]=[]);var o=this.texturePool[r].pop();return o||(o=this.createTexture(e,i)),o.filterPoolKey=r,o.setResolution(n),o},t.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var i=t.SCREEN_KEY,n=this.texturePool[i];if(this.enableFullScreen=e.width>0&&e.height>0,n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[i]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),si=function(){function t(t,e,i,n,r,o,s){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=r,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,n,r,o){return new t(e,i,n,r,o)},t}(),ai=0,li=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=ai++,this.disposeRunner=new Me("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function ui(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var hi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var ci={5126:4,5123:2,5121:1},di=0,pi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},fi=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=di++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Me("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,n,r,o,s,a){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof li||(e instanceof Array&&(e=new Float32Array(e)),e=new li(e));var l=t.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],e,i,n,r);return this}var h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new si(h,i,n,r,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof li||(t instanceof Array&&(t=new Uint16Array(t)),t=new li(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new li;for(t in this.attributes){var r=this.attributes[t],o=this.buffers[r.buffer];e.push(o.data),i.push(r.size*ci[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},o=0;o<t.length;o++)n+=e[o],i+=t[o].length;var s=new ArrayBuffer(4*i),a=null,l=0;for(o=0;o<t.length;o++){var u=e[o],h=t[o],c=ui(h);r[c]||(r[c]=new hi[c](s)),a=r[c];for(var d=0;d<h.length;d++){a[(d/u|0)*n+l+d%u]=h[d]}l+=u}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new li(this.buffers[i].data.slice(0));for(var i in this.attributes){var n=this.attributes[i];e.attributes[i]=new si(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var i,n=new t,r=[],o=[],s=[],a=0;a<e.length;a++){i=e[a];for(var l=0;l<i.buffers.length;l++)o[l]=o[l]||0,o[l]+=i.buffers[l].data.length,s[l]=0}for(a=0;a<i.buffers.length;a++)r[a]=new(pi[ui(i.buffers[a].data)])(o[a]),n.buffers[a]=new li(r[a]);for(a=0;a<e.length;a++){i=e[a];for(l=0;l<i.buffers.length;l++)r[l].set(i.buffers[l].data,s[l]),s[l]+=i.buffers[l].data.length}if(n.attributes=i.attributes,i.indexBuffer){n.indexBuffer=n.buffers[i.buffers.indexOf(i.indexBuffer)],n.indexBuffer.index=!0;var u=0,h=0,c=0,d=0;for(a=0;a<i.buffers.length;a++)if(i.buffers[a]!==i.indexBuffer){d=a;break}for(var a in i.attributes){var p=i.attributes[a];(0|p.buffer)===d&&(h+=p.size*ci[p.type]/4)}for(a=0;a<e.length;a++){var f=e[a].indexBuffer.data;for(l=0;l<f.length;l++)n.indexBuffer.data[l+c]+=u;u+=i.buffers[d].data.length/h,c+=f.length}}return n},t}(),mi=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return Le(e,t),e}(fi),gi=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new li(e.vertices),e.uvBuffer=new li(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return Le(e,t),e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(fi),yi=0,vi=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=yi++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,i,n){this.uniforms[e]=new t(i,n)},t.from=function(e,i){return new t(e,i)},t}(),_i=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Vt,this.destinationFrame=new Vt,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),bi=function(t){function e(e){var i=t.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new oi,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new mi,i.quadUv=new gi,i.tempRect=new Vt,i.activeState={},i.globalUniforms=new vi({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return Le(e,t),e.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new _i,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,l=e[0].legacy,u=1;u<e.length;u++){var h=e[u];o=Math.min(o,h.resolution),s=this.useMaxPadding?Math.max(s,h.padding):s+h.padding,a=a&&h.autoFit,l=l||h.legacy}1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(r),r.resolution=o,r.legacy=l,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(s),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(o),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,o),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var c=this.tempRect;c.width=r.sourceFrame.width,c.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,i.renderTexture.bind(r.renderTexture,r.sourceFrame,c),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var r=n.inputSize,o=n.inputPixel,s=n.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=r[0]*e.resolution,o[1]=r[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*r[2]-.5*o[2],s[3]=e.sourceFrame.height*r[3]-.5*o[3],e.legacy){var a=n.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,Y.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,e.resolution);h.filterFrame=u.filterFrame;var c=0;for(c=0;c<i.length-1;++c){i[c].apply(this,u,h,Y.CLEAR,e);var d=u;u=h,h=d}i[c].apply(this,u,l.renderTexture,Y.BLEND,e),this.returnFilterTexture(u),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=Y.CLEAR),t&&t.filterFrame){var i=this.tempRect;i.width=t.filterFrame.width,i.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,i)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?Y.CLEAR:Y.BLEND,Ot("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===Y.CLEAR||e===Y.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer;this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.state.set(t.state),r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(B.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(B.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,o=e._texture.orig,s=t.set(r.width,0,0,r.height,n.x,n.y),a=e.worldTransform.copyTo(te.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}($e),xi=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),wi=function(t){function e(e){var i=t.call(this,e)||this;return i.emptyRenderer=new xi(e),i.currentRenderer=i.emptyRenderer,i}return Le(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,o=t.ids,s=t.count,a=0,l=0;l<s;l++){var u=r[l],h=u._batchLocation;if(h>=0&&h<n&&e[h]===u)o[l]=h;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){o[l]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}($e),Ti=0,Si=function(t){function e(e){var i=t.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return Le(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ti++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ti++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(Q.PREFER_ENV>=D.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}($e),Ei=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=$.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Ci=new Vt,Pi=function(t){function e(e){var i=t.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new Ze(10,10),i.msaaSamples=null,i}return Le(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Vt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Q.PREFER_ENV===D.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++){var o=t.colorTextures[r];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,n){var r=this.viewport;r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,i,n,r){void 0===r&&(r=F.COLOR|F.DEPTH);var o=this.gl;o.clearColor(t,e,i,n),o.clear(r)},e.prototype.initFramebuffer=function(t){var e=this.gl,i=new Ei(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,r=0;r<n.length;r++)this.renderer.texture.bind(n[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1)),i.multisample>1&&(i.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,i.msaaBuffer));for(var r=[],o=0;o<n;o++)if(!(0===o&&i.multisample>1)){var s=t.colorTextures[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,s.target,a._glTextures[this.CONTEXT_UID].texture,0),r.push(e.COLOR_ATTACHMENT0+o)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,i=$.NONE;if(t<=1||null===e)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return 1===i&&(i=$.NONE),i},e.prototype.blit=function(t,e,i){var n=this.current,r=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===r.context.webGLVersion&&n){var a=n.glFramebuffers[s];if(a){if(!t){if(a.multisample<=1)return;a.blitFramebuffer||(a.blitFramebuffer=new Ze(n.width,n.height),a.blitFramebuffer.addColorTexture(0,n.colorTextures[0])),(t=a.blitFramebuffer).width=n.width,t.height=n.height}e||((e=Ci).width=n.width,e.height=n.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,n=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,n),e.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Vt},e}($e),Ii=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Ai={5126:4,5123:2,5121:1},Oi=function(t){function e(e){var i=t.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return Le(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;Q.PREFER_ENV===D.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,o){return n.drawElementsInstancedANGLE(t,e,i,r,o)},t.drawArraysInstanced=function(t,e,i,r){return n.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);var o=n[e.program.id]||this.initGeometryVao(t,e.program,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n=t.buffers[i],r=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==r.updateID){r.updateID=n._updateID;var o=n.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,r.buffer),this._boundBuffer=r,r.byteLength>=n.data.byteLength)e.bufferSubData(o,0,n.data);else{var s=n.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=n.data.byteLength,e.bufferData(o,n.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var r in n)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,r=["g",t.id];for(var o in i)n[o]&&r.push(o);return r.join("-")},e.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var n=this.gl,r=this.CONTEXT_UID,o=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],a=s[o];if(a)return s[e.id]=a,a;var l=t.buffers,u=t.attributes,h={},c={};for(var d in l)h[d]=0,c[d]=0;for(var d in u)!u[d].size&&e.attributeData[d]?u[d].size=e.attributeData[d].size:u[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[u[d].buffer]+=u[d].size*Ai[u[d].type];for(var d in u){var p=u[d],f=p.size;void 0===p.stride&&(h[p.buffer]===f*Ai[p.type]?p.stride=0:p.stride=h[p.buffer]),void 0===p.start&&(p.start=c[p.buffer],c[p.buffer]+=f*Ai[p.type])}a=n.createVertexArray(),n.bindVertexArray(a);for(var m=0;m<l.length;m++){var g=l[m];g._glBuffers[r]||(g._glBuffers[r]=new Ii(n.createBuffer()),this.managedBuffers[g.id]=g,g.disposeRunner.add(this)),i&&g._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=a,s[e.id]=a,s[o]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var o=0;o<r.length;o++){var s=r[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(r[o],e)}if(!e)for(var a in i)if("g"===a[0]){var l=i[a];this._activeVao===l&&this.unbind(),n.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=t.buffers,o=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var s=null;for(var a in o){var l=o[a],u=r[l.buffer]._glBuffers[n];if(e.attributeData[a]){s!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),s=u);var h=e.attributeData[a].location;if(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(h,1)}}}},e.prototype.draw=function(t,e,i,n){var r=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,n||1):r.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,i,e||o.getSize(),n||1):r.drawArrays(t,i,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}($e),Mi=function(){function t(t){void 0===t&&(t=null),this.type=q.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=q.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ki(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function Ri(t,e,i,n){var r=ki(t,t.VERTEX_SHADER,e),o=ki(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,o),n)for(var a in n)t.bindAttribLocation(s,n[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(r),t.deleteShader(o),s}function Di(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function Li(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Di(2*e);case"bvec3":return Di(3*e);case"bvec4":return Di(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Fi,Ni={},Bi=Ni;function ji(){if(Bi===Ni||Bi&&Bi.isContextLost()){var t=document.createElement("canvas"),e=void 0;Q.PREFER_ENV>=D.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Bi=e}return Bi}function Gi(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===K.HIGH&&i!==K.HIGH&&(n=K.MEDIUM),"precision "+n+" float;\n"+t}return i!==K.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Ui={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function zi(t){return Ui[t]}var Hi=null,Xi={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Wi(t,e){if(!Hi){var i=Object.keys(Xi);Hi={};for(var n=0;n<i.length;++n){var r=i[n];Hi[t[r]]=Xi[r]}}return Hi[e]}var Yi=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Vi={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ki={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var qi,$i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Qi(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Zi(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=$i.replace(/%forloop%/gi,Qi(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Ji=0,tn={},en=function(){function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=Ji++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),tn[n]?(tn[n]++,n+="-"+tn[n]):tn[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=Gi(this.vertexSrc,Q.PRECISION_VERTEX,K.HIGH),this.fragmentSrc=Gi(this.fragmentSrc,Q.PRECISION_FRAGMENT,function(){if(!Fi){Fi=K.MEDIUM;var t=ji();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Fi=e.precision?K.HIGH:K.MEDIUM}}return Fi}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var i=ji();if(i){var n=Ri(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var i={},n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=e.getActiveAttrib(t,o),a=Wi(e,s.type),l={type:a,name:s.name,size:zi(a),location:0};i[s.name]=l,n.push(l)}n.sort((function(t,e){return t.name>e.name?1:-1}));for(o=0;o<n.length;o++)n[o].location=o;return i},t.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var o=e.getActiveUniform(t,r),s=o.name.replace(/\[.*?\]$/,""),a=o.name.match(/\[.*?\]$/),l=Wi(e,o.type);i[s]={type:l,size:o.size,isArray:a,value:Li(l,o.size)}}return i},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,n){var r=e+i,o=Mt[r];return o||(Mt[r]=o=new t(e,i,n)),o},t}(),nn=function(){function t(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof vi?e:new vi(e):new vi({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,n){return new t(en.from(e,i),n)},t}(),rn=function(){function t(){this.data=0,this.blendMode=N.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==N.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),on=function(t){function e(i,n,r){var o=this,s=en.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=t.call(this,s,r)||this).padding=0,o.resolution=Q.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new rn,o}return Le(e,t),e.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(nn),sn=new te,an=function(){function t(t,e){this._texture=t,this.mapCoord=new te,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[n]=r*i.a+o*i.c+i.tx,e[n+1]=r*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(sn.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(sn));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/o.width,s[1]=(e._frame.y+a+l)/o.height,s[2]=(e._frame.x+e._frame.width-a+l)/o.width,s[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),ln=function(t){function e(e){var i=this,n=new te;return i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return Le(e,t),e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new an(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))},e}(on),un=function(t){function e(e){var i=t.call(this,e)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return Le(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Mi;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case q.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case q.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case q.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case q.SCISSOR:this.renderer.scissor.pop();break;case q.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case q.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=q.SPRITE;else if(t.type=q.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),r=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0===(n=(n%9e3+9e3)%9e3)&&9e3===r&&(t.type=q.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new ln(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var r=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}($e),hn=function(t){function e(e){var i=t.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return Le(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}($e),cn=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return Le(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?n.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,r=i.sourceFrame,o=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-r.x)*s+o.x,l=(t.y-r.y)*s+o.y,u=t.width*s,h=t.height*s;n&&(a+=n.tx*s,l+=n.ty*s),e||(l=this.renderer.height-h-l),this.renderer.gl.scissor(a,l,u,h)},e}(hn),dn=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return Le(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(hn),pn=function(t){function e(e){var i=t.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new te,i.transform=null,i}return Le(e,t),e.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix,o=n?-1:1;r.identity(),r.a=1/e.width*2,r.d=o*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-o-e.y*r.d},e.prototype.setTransform=function(t){},e}($e),fn=new Vt,mn=new Vt,gn=new Vt,yn=function(t){function e(e){var i=t.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Vt,i.destinationFrame=new Vt,i}return Le(e,t),e.prototype.bind=function(t,e,i){void 0===t&&(t=null);var n,r,o,s=this.renderer;this.current=t,t?(o=(n=t.baseTexture).resolution,e||(fn.width=t.frame.width,fn.height=t.frame.height,e=fn),i||(mn.x=t.frame.x,mn.y=t.frame.y,mn.width=e.width,mn.height=e.height,i=mn),r=n.framebuffer):(o=s.resolution,e||(fn.width=s.screen.width,fn.height=s.screen.height,e=fn),i||((i=fn).width=e.width,i.height=e.height)),gn.x=i.x*o,gn.y=i.y*o,gn.width=i.width*o,gn.height=i.height*o,this.renderer.framebuffer.bind(r,gn),this.renderer.projection.update(i,e,o,!r),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}($e),vn=function(){},_n=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),bn=0,xn={textureCount:0},wn=function(t){function e(e){var i=t.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=bn++,i}return Le(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof qi)return qi;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");qi=!0===t({a:"b"},"a","b")}catch(t){qi=!1}return qi}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(xn.textureCount=0,this.syncUniformGroup(t.uniformGroup,xn)),n},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var n in t.uniforms){var r=e[n];if(r){for(var o=t.uniforms[n],s=!1,a=0;a<Yi.length;a++)if(Yi[a].test(r,o)){i.push(Yi[a].code(n,o)),s=!0;break}if(!s){var l=(1===r.size?Vi:Ki)[r.type].replace("location",'ud["'+n+'"].location');i.push('\n            cv = ud["'+n+'"].value;\n            v = uv["'+n+'"];\n            '+l+";")}}else t.uniforms[n].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+n+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,n=[];for(var r in i)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,n={};for(var r in i.attributeData)n[r]=i.attributeData[r].location;var o=Ri(e,i.vertexSrc,i.fragmentSrc,n),s={};for(var r in i.uniformData){var a=i.uniformData[r];s[r]={location:e.getUniformLocation(o,r),value:Li(a.type,a.size)}}var l=new _n(o,s);return i.glPrograms[this.renderer.CONTEXT_UID]=l,l},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}($e);var Tn=function(t){function e(e){var i=t.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=N.NONE,i._blendEq=!1,i.map=[],i.map[0]=i.setBlend,i.map[1]=i.setOffset,i.map[2]=i.setCullFace,i.map[3]=i.setDepthTest,i.map[4]=i.setFrontFace,i.checks=[],i.defaultState=new rn,i.defaultState.blend=!0,i}return Le(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[N.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.ADD]=[t.ONE,t.ONE],e[N.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.NONE]=[0,0],e[N.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[N.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[N.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[N.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[N.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[N.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[N.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[N.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[N.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[N.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[N.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}($e),Sn=function(t){function e(e){var i=t.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=Q.GC_MAX_IDLE,i.checkCountMax=Q.GC_MAX_CHECK_COUNT,i.mode=Q.GC_MODE,i}return Le(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==V.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){var o=0;for(n=0;n<e.length;n++)null!==e[n]&&(e[o++]=e[n]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e}($e),En=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Cn=function(t){function e(e){var i=t.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new je,i}return Le(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new En(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new En(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)},e.prototype.initTexture=function(t){var e=new En(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===U.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var n=t.realWidth,r=t.realHeight,o=i.gl;(e.width!==n||e.height!==r||e.dirtyId<0)&&(e.width=n,e.height=r,o.texImage2D(t.target,0,e.internalFormat,n,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&Et(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==X.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=H.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===z.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===z.LINEAR){var r=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===z.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===z.LINEAR?i.LINEAR:i.NEAREST)},e}($e),Pn={FilterSystem:bi,BatchSystem:wi,ContextSystem:Si,FramebufferSystem:Pi,GeometrySystem:Oi,MaskSystem:un,ScissorSystem:cn,StencilSystem:dn,ProjectionSystem:pn,RenderTextureSystem:yn,ShaderSystem:wn,StateSystem:Tn,TextureGCSystem:Sn,TextureSystem:Cn},In=new te,An=function(t){function e(e,i){void 0===e&&(e=L.UNKNOWN);var n=t.call(this)||this;return(i=Object.assign({},Q.RENDER_OPTIONS,i)).roundPixels&&(Q.ROUND_PIXELS=i.roundPixels,Ot("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=i,n.type=e,n.screen=new Vt(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||Q.RESOLUTION,n.transparent=i.transparent,n.autoDensity=i.autoDensity||i.autoResize||!1,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return Le(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var r=ri.create({width:0|n.width,height:0|n.height,scaleMode:e,resolution:i});return In.tx=-n.x,In.ty=-n.y,this.render(t,r,!1,In,!!t.parent),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=L.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=ht(t),ut(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(J.a),On=function(t){function e(i){var n=t.call(this,L.WEBGL,i)||this;return i=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Me("destroy"),contextChange:new Me("contextChange"),reset:new Me("reset"),update:new Me("update"),postrender:new Me("postrender"),prerender:new Me("prerender"),resize:new Me("resize")},n.globalUniforms=new vi({projectionMatrix:new te},!0),n.addSystem(un,"mask").addSystem(Si,"context").addSystem(Tn,"state").addSystem(wn,"shader").addSystem(Cn,"texture").addSystem(Oi,"geometry").addSystem(Pi,"framebuffer").addSystem(cn,"scissor").addSystem(dn,"stencil").addSystem(pn,"projection").addSystem(Sn,"textureGC").addSystem(bi,"filter").addSystem(yn,"renderTexture").addSystem(wi,"batch"),n.initPlugins(e.__plugins),i.context?n.context.initFromContext(i.context):n.context.initFromOptions({alpha:!!n.transparent,antialias:i.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,at(2===n.context.webGLVersion?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return Le(e,t),e.create=function(t){if(lt())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(e||(this._lastObjectRendered=t),!r){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(An);function Mn(t){return On.create(t)}var kn="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Rn="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Dn=function(){this.texArray=null,this.blend=0,this.type=B.TRIANGLES,this.start=0,this.size=0,this.data=null},Ln=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Fn=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Nn=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=rn.for2d(),i.size=4*Q.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return Le(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;Q.PREFER_ENV===D.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Q.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Zi(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,r=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Dn);for(;i.length<r;)i.push(new Ln);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,r=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++je._globalBatch,l=0,u=n[0],h=0;r.copyBoundTextures(o,i);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(u.count>=i&&(r.boundArray(u,o,a,i),this.buildDrawCalls(u,h,c),h=c,u=n[++l],++a),d._batchEnabled=a,d.touched=s,u.elements[u.count++]=d)}u.count>0&&(r.boundArray(u,o,a,i),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(c=0;c<o.length;c++)o[c]=null;je._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,n){var r=this._bufferedElements,o=this._attributeBuffer,s=this._indexBuffer,a=this.vertexSize,l=e._drawCallPool,u=this._dcIndex,h=this._aIndex,c=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=t;for(var p=i;p<n;++p){var f=r[p],m=f._texture.baseTexture,g=pt[m.alphaMode?1:0][f.blendMode];r[p]=null,i<p&&d.blend!==g&&(d.size=c-d.start,i=p,(d=l[++u]).texArray=t,d.start=c),this.packInterleavedGeometry(f,o,s,h,c),h+=f.vertexData.length/2*a,c+=f.indices.length,d.blend=g}i<n&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;Q.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,r=i.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var l=o[a],u=l.texArray,h=l.type,c=l.size,d=l.start,p=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,r.set(this.state),n.drawElements(h,c,n.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),Q.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=wt(Math.ceil(t/8)),i=St(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._aBuffers[n];return r||(this._aBuffers[n]=r=new Fn(n*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=wt(Math.ceil(t/12)),i=St(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._iBuffers[i];return r||(this._iBuffers[i]=r=new Uint16Array(n)),r},e.prototype.packInterleavedGeometry=function(t,e,i,n,r){for(var o=e.uint32View,s=e.float32View,a=n/this.vertexSize,l=t.uvs,u=t.indices,h=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?gt(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<h.length;f+=2)s[n++]=h[f],s[n++]=h[f+1],s[n++]=l[f],s[n++]=l[f+1],o[n++]=p,s[n++]=c;for(f=0;f<u.length;f++)i[r++]=a+u[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(xi),Bn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=vi.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new en(this.vertexSrc,n)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new te,default:this.defaultGroupCache[t]};return new nn(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),jn=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new li(null,e,!1),i._indexBuffer=new li(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,U.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,U.FLOAT).addAttribute("aColor",i._buffer,4,!0,U.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,U.FLOAT).addIndex(i._indexBuffer),i}return Le(e,t),e}(fi),Gn="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Un="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",zn=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Gn,fragment:Un,geometryClass:jn,vertexSize:6},t),i=e.vertex,n=e.fragment,r=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new Bn(i,n),s.geometryClass=o,s.vertexSize=r,s}return Le(e,t),e}(Nn)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Un},enumerable:!1,configurable:!0}),t}(),Hn=zn.create(),Xn=function(){function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Mn(e),this.stage=new ge,t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var n=this,r=t._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(n)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();Xn._plugins=[];var Wn=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,i=window.innerHeight;else{var n=e._resizeTo;t=n.clientWidth,i=n.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();Xn.registerPlugin(Wn);
/*!
 * @pixi/extract - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Yn=new Vt,Vn=function(){function t(t){this.renderer=t,t.extract=this}return t.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,n,r,o=this.renderer,s=!1,a=!1;e&&(e instanceof ri?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(i=r.baseTexture.resolution,n=r.frame,s=!1,o.renderTexture.bind(r)):(i=this.renderer.resolution,s=!0,(n=Yn).width=this.renderer.width,n.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(n.width*i+1e-4),u=Math.floor(n.height*i+1e-4),h=new Ft(l,u,1),c=new Uint8Array(4*l*u),d=o.gl;d.readPixels(n.x*i,n.y*i,l,u,d.RGBA,d.UNSIGNED_BYTE,c);var p=h.context.getImageData(0,0,l,u);if(t.arrayPostDivide(c,p.data),h.context.putImageData(p,0,0),s){var f=new Ft(h.width,h.height,1);f.context.scale(1,-1),f.context.drawImage(h.canvas,0,-u),h.destroy(),h=f}return a&&r.destroy(!0),h.canvas},t.prototype.pixels=function(e){var i,n,r,o=this.renderer,s=!1;e&&(e instanceof ri?r=e:(r=this.renderer.generateTexture(e),s=!0)),r?(i=r.baseTexture.resolution,n=r.frame,o.renderTexture.bind(r)):(i=o.resolution,(n=Yn).width=o.width,n.height=o.height,o.renderTexture.bind(null));var a=n.width*i,l=n.height*i,u=new Uint8Array(4*a*l),h=o.gl;return h.readPixels(n.x*i,n.y*i,a,l,h.RGBA,h.UNSIGNED_BYTE,u),s&&r.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}(),Kn=i(12),qn=i.n(Kn),$n=i(5),Qn=i.n($n);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function Zn(){}function Jn(t,e,i,n){var r=0,o=t.length;!function s(a){a||r===o?i&&i(a):n?setTimeout((function(){e(t[r++],s)}),1):e(t[r++],s)}()}function tr(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function er(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:Zn,unsaturated:Zn,buffer:e/4,empty:Zn,drain:Zn,error:Zn,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=Zn,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,tr(o(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:Zn};e?n._tasks.unshift(r):n._tasks.push(r),setTimeout((function(){return n.process()}),1)}}function o(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var ir={};function nr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rr(t,e,i){return e&&nr(t.prototype,e),i&&nr(t,i),t}var or=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),sr=null;function ar(){}var lr=function(){function t(e,i,n){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ar,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Qn.a,this.onProgress=new Qn.a,this.onComplete=new Qn.a,this.onAfterMiddleware=new Qn.a}t.setExtensionLoadType=function(e,i){ur(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){ur(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:or&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(hr(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(hr(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(hr(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,sr||(sr=document.createElement("a")),sr.href=t;var i=!(t=qn()(sr.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),o=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},rr(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function ur(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function hr(t){return t.toString().replace("object ","")}lr.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},lr.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},lr.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},lr.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},lr._loadTypeMap={gif:lr.LOAD_TYPE.IMAGE,png:lr.LOAD_TYPE.IMAGE,bmp:lr.LOAD_TYPE.IMAGE,jpg:lr.LOAD_TYPE.IMAGE,jpeg:lr.LOAD_TYPE.IMAGE,tif:lr.LOAD_TYPE.IMAGE,tiff:lr.LOAD_TYPE.IMAGE,webp:lr.LOAD_TYPE.IMAGE,tga:lr.LOAD_TYPE.IMAGE,svg:lr.LOAD_TYPE.IMAGE,"svg+xml":lr.LOAD_TYPE.IMAGE,mp3:lr.LOAD_TYPE.AUDIO,ogg:lr.LOAD_TYPE.AUDIO,wav:lr.LOAD_TYPE.AUDIO,mp4:lr.LOAD_TYPE.VIDEO,webm:lr.LOAD_TYPE.VIDEO},lr._xhrTypeMap={xhtml:lr.XHR_RESPONSE_TYPE.DOCUMENT,html:lr.XHR_RESPONSE_TYPE.DOCUMENT,htm:lr.XHR_RESPONSE_TYPE.DOCUMENT,xml:lr.XHR_RESPONSE_TYPE.DOCUMENT,tmx:lr.XHR_RESPONSE_TYPE.DOCUMENT,svg:lr.XHR_RESPONSE_TYPE.DOCUMENT,tsx:lr.XHR_RESPONSE_TYPE.DOCUMENT,gif:lr.XHR_RESPONSE_TYPE.BLOB,png:lr.XHR_RESPONSE_TYPE.BLOB,bmp:lr.XHR_RESPONSE_TYPE.BLOB,jpg:lr.XHR_RESPONSE_TYPE.BLOB,jpeg:lr.XHR_RESPONSE_TYPE.BLOB,tif:lr.XHR_RESPONSE_TYPE.BLOB,tiff:lr.XHR_RESPONSE_TYPE.BLOB,webp:lr.XHR_RESPONSE_TYPE.BLOB,tga:lr.XHR_RESPONSE_TYPE.BLOB,json:lr.XHR_RESPONSE_TYPE.JSON,text:lr.XHR_RESPONSE_TYPE.TEXT,txt:lr.XHR_RESPONSE_TYPE.TEXT,ttf:lr.XHR_RESPONSE_TYPE.BUFFER,otf:lr.XHR_RESPONSE_TYPE.BUFFER},lr.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var cr=window.URL||window.webkitURL;var dr={caching:function(t,e){var i=this;ir[t.url]?(t.data=ir[t.url],t.complete()):t.onComplete.once((function(){return ir[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===lr.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=cr.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=lr.TYPE.IMAGE,void(t.data.onload=function(){cr.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var s=0;s<r.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[s])}return e}(t.xhr.responseText),t.type=lr.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},pr=/(#[\w-]+)?$/,fr=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=er(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Qn.a,this.onError=new Qn.a,this.onLoad=new Qn.a,this.onStart=new Qn.a,this.onComplete=new Qn.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new lr(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var l=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var u=0;u<s.length;++u)s[u].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=qn()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=pr.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,Jn(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Jn(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},rr(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();fr._defaultBeforeMiddleware=[],fr._defaultAfterMiddleware=[],fr.pre=function(t){return fr._defaultBeforeMiddleware.push(t),fr},fr.use=function(t){return fr._defaultAfterMiddleware.push(t),fr};
/*!
 * @pixi/loaders - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var mr=lr,gr=function(t,e){return(gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yr=function(){function t(){}return t.use=function(t,e){t.data&&t.type===lr.TYPE.IMAGE&&(t.texture=ii.fromLoader(t.data,t.url,t.name)),e()},t}(),vr=function(t){function e(i,n){for(var r=t.call(this,i,n)||this,o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,l=s.use;a&&r.pre(a),l&&r.use(l)}return r._protected=!1,r}return function(t,e){function i(){this.constructor=t}gr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(fr);vr.registerPlugin({use:dr.parsing}),vr.registerPlugin(yr);var _r=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?vr.shared:new vr},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),br=function(t,e){return(br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*!
 * @pixi/particles - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function xr(t,e){function i(){this.constructor=t}br(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var wr,Tr,Sr=function(t){function e(e,i,n,r){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===r&&(r=!1);var o=t.call(this)||this;return n>16384&&(n=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=N.NORMAL,o.autoResize=r,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return xr(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,ut(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(ge),Er=function(){function t(t,e,i){this.geometry=new fi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||U.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new li(vt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(s=this.dynamicProperties[i]).offset=e,e+=s.size,this.dynamicStride+=s.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new li(this.dynamicData,!1,!1);var r=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(s=this.staticProperties[i]).offset=r,r+=s.size,this.staticStride+=s.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new li(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===U.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(i=0;i<this.staticProperties.length;++i){s=this.staticProperties[i];t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===U.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===U.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===U.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Cr=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new te,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:U.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=nn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=rn.for2d(),i}return xr(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=ft(t.blendMode,a.alphaMode),r.state.set(this.state);var l=r.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=mt(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var h=!1,c=0,d=0;c<o;c+=n,d+=1){var p=o-c;p>n&&(p=n),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var f=s[d];f.uploadDynamic(e,c,p);var m=t._bufferUpdateIDs[d]||0;(h=h||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,c,p)),r.geometry.bind(f.geometry),l.drawElements(l.TRIANGLES,6*p,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,o=0;o<i;o+=n)e.push(new Er(this.properties,r,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new Er(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,r,o){for(var s=0,a=0,l=0,u=0,h=0;h<i;++h){var c=t[e+h],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,g=d.orig;m?(s=(a=m.x-c.anchor.x*g.width)+m.width,l=(u=m.y-c.anchor.y*g.height)+m.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,l=g.height*(1-c.anchor.y),u=g.height*-c.anchor.y),n[o]=a*p,n[o+1]=u*f,n[o+r]=s*p,n[o+r+1]=u*f,n[o+2*r]=s*p,n[o+2*r+1]=l*f,n[o+3*r]=a*p,n[o+3*r+1]=l*f,o+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+r]=a.x,n[o+r+1]=a.y,n[o+2*r]=a.x,n[o+2*r+1]=a.y,n[o+3*r]=a.x,n[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+r]=a.x1,n[o+r+1]=a.y1,n[o+2*r]=a.x2,n[o+2*r+1]=a.y2,n[o+3*r]=a.x3,n[o+3*r+1]=a.y3,o+=4*r):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+2*r]=0,n[o+2*r+1]=0,n[o+3*r]=0,n[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s],l=a._texture.baseTexture.alphaMode>0,u=a.alpha,h=u<1&&l?gt(a._tintRGB,u):a._tintRGB+(255*u<<24);n[o]=h,n[o+r]=h,n[o+2*r]=h,n[o+3*r]=h,o+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(xi);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(wr||(wr={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Tr||(Tr={}));var Pr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},Ir=function(){function t(){this.color=16777215,this.alpha=1,this.texture=ii.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ii.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),Ar=function(t,e){return(Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Or(t,e){function i(){this.constructor=t}Ar(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Mr={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,r=e.points,o=e.indices;if(i.length>=6){for(var s=[],a=0;a<n.length;a++){var l=n[a];s.push(i.length/2),i=i.concat(l.points)}var u=et()(i,s,2);if(!u)return;var h=r.length/2;for(a=0;a<u.length;a+=3)o.push(u[a]+h),o.push(u[a+1]+h),o.push(u[a+2]+h);for(a=0;a<i.length;a++)r.push(i[a])}}},kr={build:function(t){var e,i,n=t.shape,r=t.points,o=n.x,s=n.y;if(r.length=0,t.type===Ht.CIRC)e=n.radius,i=n.radius;else{var a=t.shape;e=a.width,i=a.height}if(0!==e&&0!==i){var l=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(e+i));l/=2.3;for(var u=2*Math.PI/l,h=0;h<l-.5;h++)r.push(o+Math.sin(-u*h)*e,s+Math.cos(-u*h)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices,o=n.length/2,s=o,a=t.shape,l=t.matrix,u=a.x,h=a.y;n.push(t.matrix?l.a*u+l.c*h+l.tx:u,t.matrix?l.b*u+l.d*h+l.ty:h);for(var c=0;c<i.length;c+=2)n.push(i[c],i[c+1]),r.push(o++,s,o)}},Rr={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,o=e.height,s=t.points;s.length=0,s.push(i,n,i+r,n,i+r,n+o,i,n+o)},triangulate:function(t,e){var i=t.points,n=e.points,r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function Dr(t,e,i){return t+(e-t)*i}function Lr(t,e,i,n,r,o,s){void 0===s&&(s=[]);for(var a=s,l=0,u=0,h=0,c=0,d=0,p=0,f=0,m=0;f<=20;++f)l=Dr(t,i,m=f/20),u=Dr(e,n,m),h=Dr(i,r,m),c=Dr(n,o,m),d=Dr(l,h,m),p=Dr(u,c,m),a.push(d,p);return a}var Fr={build:function(t){var e=t.shape,i=t.points,n=e.x,r=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));i.length=0,a?(Lr(n,r+a,n,r,n+a,r,i),Lr(n+o-a,r,n+o,r,n+o,r+a,i),Lr(n+o,r+s-a,n+o,r+s,n+o-a,r+s,i),Lr(n+a,r+s,n,r+s,n,r+s-a,i)):i.push(n,r,n+o,r,n+o,r+s,n,r+s)},triangulate:function(t,e){for(var i=t.points,n=e.points,r=e.indices,o=n.length/2,s=et()(i,null,2),a=0,l=s.length;a<l;a+=3)r.push(s[a]+o),r.push(s[a+1]+o),r.push(s[a+2]+o);for(a=0,l=i.length;a<l;a++)n.push(i[a],i[++a])}};function Nr(t,e,i,n,r,o,s,a){var l,u;s?(l=n,u=-i):(l=-n,u=i);var h=t-i*r+l,c=e-n*r+u,d=t+i*o+l,p=e+n*o+u;return a.push(h,c),a.push(d,p),2}function Br(t,e,i,n,r,o,s,a){var l=i-t,u=n-e,h=Math.atan2(l,u),c=Math.atan2(r-t,o-e);a&&h<c?h+=2*Math.PI:!a&&h>c&&(c+=2*Math.PI);var d=h,p=c-h,f=Math.abs(p),m=Math.sqrt(l*l+u*u),g=1+(15*f*Math.sqrt(m)/Math.PI>>0),y=p/g;if(d+=y,a){s.push(t,e),s.push(i,n);for(var v=1,_=d;v<g;v++,_+=y)s.push(t,e),s.push(t+Math.sin(_)*m,e+Math.cos(_)*m);s.push(t,e),s.push(r,o)}else{s.push(i,n),s.push(t,e);for(v=1,_=d;v<g;v++,_+=y)s.push(t+Math.sin(_)*m,e+Math.cos(_)*m),s.push(t,e);s.push(r,o),s.push(t,e)}return 2*g}function jr(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,r=t.points||n.points,o=n.type!==Ht.POLY||n.closeStroke;if(0!==r.length){var s=e.points,a=e.indices,l=r.length/2,u=s.length/2,h=u;for(s.push(r[0],r[1]),i=1;i<l;i++)s.push(r[2*i],r[2*i+1]),a.push(h,h+1),h++;o&&a.push(h,u)}}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0!==n.length){var o=t.lineStyle,s=new Zt(n[0],n[1]),a=new Zt(n[n.length-2],n[n.length-1]),l=i.type!==Ht.POLY||i.closeStroke,u=Math.abs(s.x-a.x)<r&&Math.abs(s.y-a.y)<r;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var h=.5*(s.x+a.x),c=.5*(a.y+s.y);n.unshift(h,c),n.push(h,c)}var d=e.points,p=n.length/2,f=n.length,m=d.length/2,g=o.width/2,y=g*g,v=o.miterLimit*o.miterLimit,_=n[0],b=n[1],x=n[2],w=n[3],T=0,S=0,E=-(b-w),C=_-x,P=0,I=0,A=Math.sqrt(E*E+C*C);E/=A,C/=A,E*=g,C*=g;var O=o.alignment,M=2*(1-O),k=2*O;l||(o.cap===Tr.ROUND?f+=Br(_-E*(M-k)*.5,b-C*(M-k)*.5,_-E*M,b-C*M,_+E*k,b+C*k,d,!0)+2:o.cap===Tr.SQUARE&&(f+=Nr(_,b,E,C,M,k,!0,d))),d.push(_-E*M,b-C*M),d.push(_+E*k,b+C*k);for(var R=1;R<p-1;++R){_=n[2*(R-1)],b=n[2*(R-1)+1],x=n[2*R],w=n[2*R+1],T=n[2*(R+1)],S=n[2*(R+1)+1],E=-(b-w),C=_-x,E/=A=Math.sqrt(E*E+C*C),C/=A,E*=g,C*=g,P=-(w-S),I=x-T,P/=A=Math.sqrt(P*P+I*I),I/=A,P*=g,I*=g;var D=x-_,L=b-w,F=x-T,N=S-w,B=L*F-N*D,j=B<0;if(Math.abs(B)<.1)d.push(x-E*M,w-C*M),d.push(x+E*k,w+C*k);else{var G=(-E+_)*(-C+w)-(-E+x)*(-C+b),U=(-P+T)*(-I+w)-(-P+x)*(-I+S),z=(D*U-F*G)/B,H=(N*G-L*U)/B,X=(z-x)*(z-x)+(H-w)*(H-w),W=x+(z-x)*M,Y=w+(H-w)*M,V=x-(z-x)*k,K=w-(H-w)*k,q=j?M:k;X<=Math.min(D*D+L*L,F*F+N*N)+q*q*y?o.join===wr.BEVEL||X/y>v?(j?(d.push(W,Y),d.push(x+E*k,w+C*k),d.push(W,Y),d.push(x+P*k,w+I*k)):(d.push(x-E*M,w-C*M),d.push(V,K),d.push(x-P*M,w-I*M),d.push(V,K)),f+=2):o.join===wr.ROUND?j?(d.push(W,Y),d.push(x+E*k,w+C*k),f+=Br(x,w,x+E*k,w+C*k,x+P*k,w+I*k,d,!0)+4,d.push(W,Y),d.push(x+P*k,w+I*k)):(d.push(x-E*M,w-C*M),d.push(V,K),f+=Br(x,w,x-E*M,w-C*M,x-P*M,w-I*M,d,!1)+4,d.push(x-P*M,w-I*M),d.push(V,K)):(d.push(W,Y),d.push(V,K)):(d.push(x-E*M,w-C*M),d.push(x+E*k,w+C*k),o.join===wr.BEVEL||X/y>v||(o.join===wr.ROUND?f+=j?Br(x,w,x+E*k,w+C*k,x+P*k,w+I*k,d,!0)+2:Br(x,w,x-E*M,w-C*M,x-P*M,w-I*M,d,!1)+2:(j?(d.push(V,K),d.push(V,K)):(d.push(W,Y),d.push(W,Y)),f+=2)),d.push(x-P*M,w-I*M),d.push(x+P*k,w+I*k),f+=2)}}_=n[2*(p-2)],b=n[2*(p-2)+1],x=n[2*(p-1)],E=-(b-(w=n[2*(p-1)+1])),C=_-x,E/=A=Math.sqrt(E*E+C*C),C/=A,E*=g,C*=g,d.push(x-E*M,w-C*M),d.push(x+E*k,w+C*k),l||(o.cap===Tr.ROUND?f+=Br(x-E*(M-k)*.5,w-C*(M-k)*.5,x-E*M,w-C*M,x+E*k,w+C*k,d,!1)+2:o.cap===Tr.SQUARE&&(f+=Nr(x,w,E,C,M,k,!1,d)));var $=e.indices,Q=Pr.epsilon*Pr.epsilon;for(R=m;R<f+m-2;++R)_=d[2*R],b=d[2*R+1],x=d[2*(R+1)],w=d[2*(R+1)+1],T=d[2*(R+2)],S=d[2*(R+2)+1],Math.abs(_*(w-S)+x*(S-b)+T*(b-w))<Q||$.push(R,R+1,R+2)}}(t,e)}var Gr,Ur=function(t){function e(e,i,n,r,o,s){void 0===s&&(s=0);o=o||r/2;for(var a=-1*Math.PI/2+s,l=2*n,u=Xt/l,h=[],c=0;c<l;c++){var d=c%2?o:r,p=c*u+a;h.push(e+d*Math.cos(p),i+d*Math.sin(p))}return t.call(this,h)||this}return Or(e,t),e}($t),zr=function(){function t(){}return t.curveTo=function(t,e,i,n,r,o){var s=o[o.length-2],a=o[o.length-1]-e,l=s-t,u=n-e,h=i-t,c=Math.abs(a*h-l*u);if(c<1e-8||0===r)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=a*a+l*l,p=u*u+h*h,f=a*u+l*h,m=r*Math.sqrt(d)/c,g=r*Math.sqrt(p)/c,y=m*f/d,v=g*f/p,_=m*h+g*l,b=m*u+g*a,x=l*(g+y),w=a*(g+y),T=h*(m+v),S=u*(m+v);return{cx:_+t,cy:b+e,radius:r,startAngle:Math.atan2(w-b,x-_),endAngle:Math.atan2(S-b,T-_),anticlockwise:l*u>h*a}},t.arc=function(t,e,i,n,r,o,s,a,l){for(var u=s-o,h=Pr._segmentsCount(Math.abs(u)*r,40*Math.ceil(Math.abs(u)/Xt)),c=u/(2*h),d=2*c,p=Math.cos(c),f=Math.sin(c),m=h-1,g=m%1/m,y=0;y<=m;++y){var v=c+o+d*(y+g*y),_=Math.cos(v),b=-Math.sin(v);l.push((p*_+f*b)*r+i,(p*-b+f*_)*r+n)}},t}(),Hr=function(){function t(){}return t.curveLength=function(t,e,i,n,r,o,s,a){for(var l=0,u=0,h=0,c=0,d=0,p=0,f=0,m=0,g=0,y=0,v=0,_=t,b=e,x=1;x<=10;++x)y=_-(m=(f=(p=(d=1-(u=x/10))*d)*d)*t+3*p*u*i+3*d*(h=u*u)*r+(c=h*u)*s),v=b-(g=f*e+3*p*u*n+3*d*h*o+c*a),_=m,b=g,l+=Math.sqrt(y*y+v*v);return l},t.curveTo=function(e,i,n,r,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var h=Pr._segmentsCount(t.curveLength(l,u,e,i,n,r,o,s)),c=0,d=0,p=0,f=0,m=0;a.push(l,u);for(var g=1,y=0;g<=h;++g)p=(d=(c=1-(y=g/h))*c)*c,m=(f=y*y)*y,a.push(p*l+3*d*y*e+3*c*f*n+m*o,p*u+3*d*y*i+3*c*f*r+m*s)},t}(),Xr=function(){function t(){}return t.curveLength=function(t,e,i,n,r,o){var s=t-2*i+r,a=e-2*n+o,l=2*i-2*t,u=2*n-2*e,h=4*(s*s+a*a),c=4*(s*l+a*u),d=l*l+u*u,p=2*Math.sqrt(h+c+d),f=Math.sqrt(h),m=2*h*f,g=2*Math.sqrt(d),y=c/f;return(m*p+f*c*(p-g)+(4*d*h-c*c)*Math.log((2*f+y+p)/(y+g)))/(4*m)},t.curveTo=function(e,i,n,r,o){for(var s=o[o.length-2],a=o[o.length-1],l=Pr._segmentsCount(t.curveLength(s,a,e,i,n,r)),u=0,h=0,c=1;c<=l;++c){var d=c/l;u=s+(e-s)*d,h=a+(i-a)*d,o.push(u+(e+(n-e)*d-u)*d,h+(i+(r-i)*d-h)*d)}},t}(),Wr=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Yr=((Gr={})[Ht.POLY]=Mr,Gr[Ht.CIRC]=kr,Gr[Ht.ELIP]=kr,Gr[Ht.RECT]=Rr,Gr[Ht.RREC]=Fr,Gr),Vr=[],Kr=[],qr={buildPoly:Mr,buildCircle:kr,buildRectangle:Rr,buildRoundedRectangle:Fr,FILL_COMMANDS:Yr,BATCH_POOL:Vr,DRAW_CALL_POOL:Kr,buildLine:jr,Star:Ur,ArcUtils:zr,BezierUtils:Hr,QuadraticUtils:Xr,BatchPart:Wr},$r=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Qr=new Zt,Zr=new he,Jr=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new he,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return Or(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Kr.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),Vr.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=new $r(t,e,i,n);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new $r(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,Qr):Qr.copyFrom(t),n.shape.contains(Qr.x,Qr.y)))){var r=!1;if(n.holes)for(var o=0;o<n.holes.length;o++){if(n.holes[o].shape.contains(Qr.x,Qr.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,n=null,r=null;this.batches.length>0&&(r=(n=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<i.length;o++){this.shapeIndex++;var s=i[o],a=s.fillStyle,l=s.lineStyle;Yr[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix);for(var u=0;u<2;u++){var h=0===u?a:l;if(h.visible){var c=h.texture.baseTexture,d=this.indices.length,p=this.points.length/2;c.wrapMode=H.REPEAT,0===u?this.processFill(s):this.processLine(s);var f=this.points.length/2-p;0!==f&&(n&&!this._compareStyles(r,h)&&(n.end(d,p),n=null),n||((n=Vr.pop()||new Wr).begin(h,d,p),this.batches.push(n),r=h),this.addUvs(this.points,e,h.texture,p,f,h.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(n&&n.end(m,g),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var y=g>65535&&t;this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var o=n.start+r;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++je._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Kr.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=Kr.pop();r||((r=new Dn).texArray=new Ln),r.texArray.count=0,r.start=0,r.size=0,r.type=B.TRIANGLES;var o=0,s=null,a=0,l=!1,u=B.TRIANGLES,h=0;this.drawCalls.push(r);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,p=d.texture.baseTexture;l!==!!d.native&&(u=(l=!!d.native)?B.LINES:B.TRIANGLES,s=null,o=8,t++),s!==p&&(s=p,p._batchEnabled!==t&&(8===o&&(t++,o=0,r.size>0&&((r=Kr.pop())||((r=new Dn).texArray=new Ln),this.drawCalls.push(r)),r.start=h,r.size=0,r.texArray.count=0,r.type=u),p.touched=1,p._batchEnabled=t,p._batchLocation=o,p.wrapMode=10497,r.texArray.elements[r.texArray.count++]=p,o++)),r.size+=c.size,h+=c.size,a=p._batchLocation,this.addColors(i,d.color,d.alpha,c.attribSize),this.addTextureIds(n,a,c.attribSize)}je._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),o=new Float32Array(r),s=new Uint32Array(r),a=0,l=0;l<t.length/2;l++)o[a++]=t[2*l],o[a++]=t[2*l+1],o[a++]=e[2*l],o[a++]=e[2*l+1],s[a++]=i[l],o[a++]=n[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),Mr.triangulate(t,this)):Yr[t.type].triangulate(t,this)},e.prototype.processLine=function(t){jr(t,this);for(var e=0;e<t.holes.length;e++)jr(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];Yr[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Zr,i=te.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var r=this.graphicsData[n],o=r.shape,s=r.type,a=r.lineStyle,l=r.matrix||te.IDENTITY,u=0;if(a&&a.visible){var h=a.alignment;u=a.width,s===Ht.POLY?u*=.5+Math.abs(.5-h):u*=Math.max(0,h)}if(i!==l&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=l),s===Ht.RECT||s===Ht.RREC){var c=o;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,u,u)}else if(s===Ht.CIRC){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+u,d.radius+u)}else if(s===Ht.ELIP){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.width+u,p.height+u)}else{var f=o;t.addVerticesMatrix(i,f.points,0,f.points.length,u,u)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,n){for(var r=gt((e>>16)+(65280&e)+((255&e)<<16),i);n-- >0;)t.push(r)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,n,r,o){void 0===o&&(o=null);for(var s=0,a=e.length,l=i.frame;s<r;){var u=t[2*(n+s)],h=t[2*(n+s)+1];if(o){var c=o.a*u+o.c*h+o.tx;h=o.b*u+o.d*h+o.ty,u=c}s++,e.push(u/l.width,h/l.height)}var d=i.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(e,i,a,r)},e.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,o=1e-6,s=i+2*n,a=e.frame,l=a.width/r.width,u=a.height/r.height,h=a.x/a.width,c=a.y/a.height,d=Math.floor(t[i]+o),p=Math.floor(t[i+1]+o),f=i+2;f<s;f+=2)d=Math.min(d,Math.floor(t[f]+o)),p=Math.min(p,Math.floor(t[f+1]+o));h-=d,c-=p;for(f=i;f<s;f+=2)t[f]=(t[f]+h)*l,t[f+1]=(t[f+1]+c)*u},e.BATCHABLE_SIZE=100,e}(jn),to=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Tr.BUTT,e.join=wr.MITER,e.miterLimit=10,e}return Or(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Ir),eo=new Float32Array(3),io={},no=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._geometry=e||new Jr,i._geometry.refCount++,i.shader=null,i.state=rn.for2d(),i._fillStyle=new Ir,i._lineStyle=new to,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=N.NORMAL,i}return Or(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Ot("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6];t={width:i,texture:n,color:r,alpha:o,matrix:s,alignment:a,native:l},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:ii.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Tr.BUTT,join:wr.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var u=t.width>0&&t.alpha>0;return u?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:u},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new $t,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new $t,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),Xr.curveTo(t,e,i,n,r),this},e.prototype.bezierCurveTo=function(t,e,i,n,r,o){return this._initCurve(),Hr.curveTo(t,e,i,n,r,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var o=this.currentPath.points,s=zr.curveTo(t,e,i,n,r,o);if(s){var a=s.cx,l=s.cy,u=s.radius,h=s.startAngle,c=s.endAngle,d=s.anticlockwise;this.arc(a,l,u,h,c,d)}return this},e.prototype.arc=function(t,e,i,n,r,o){if(void 0===o&&(o=!1),n===r)return this;if(!o&&r<=n?r+=Xt:o&&n<=r&&(n+=Xt),0===r-n)return this;var s=t+Math.cos(n)*i,a=e+Math.sin(n)*i,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var h=Math.abs(u[u.length-2]-s),c=Math.abs(u[u.length-1]-a);h<l&&c<l||u.push(s,a)}else this.moveTo(s,a),u=this.currentPath.points;return zr.arc(s,a,t,e,i,n,r,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ii.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof ii){Ot("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,i=e[0],n=e[1],r=e[2],o=e[3];t={texture:i,color:n,alpha:r,matrix:o},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:ii.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new Vt(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new Qt(t,e,i,n,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new Kt(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new qt(t,e,i,n))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var r=!0,o=i[0];o.points?(r=o.closeStroke,t=o.points):t=Array.isArray(i[0])?i[0]:i;var s=new $t(t);return s.closeStroke=r,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,n,r,o){return void 0===o&&(o=0),this.drawPolygon(new Ur(t,e,i,n,r,o))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===Ht.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var n=0;n<i;n++){var r=t.batches[n],o=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),l={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:ut(o),_tintRGB:o,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,n=this.tint,r=this.worldAlpha,o=e.uniforms,s=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*r,o.tint[1]=(n>>8&255)/255*r,o.tint[2]=(255&n)/255*r,o.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,l=s.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,n=e.type,r=e.size,o=e.start,s=i.count,a=0;a<s;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(n,r,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!io[i]){for(var n=t.plugins.batch.MAX_TEXTURES,r=new Int32Array(n),o=0;o<n;o++)r[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new te,default:vi.from({uSamplers:r},!0)},a=t.plugins[i]._shader.program;io[i]=new nn(a,s)}e=io[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,r=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,i,n,r,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=ut(this.tint,eo),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,r=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData,h=0,c=0;c<l.length;c+=2){var d=l[c],p=l[c+1];u[h++]=i*d+r*p+s,u[h++]=o*p+n*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new Zt,e}(ge),ro=function(t,e){return(ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var oo,so=new Zt,ao=new Uint16Array([0,1,2,0,2,3]),lo=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new Jt(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=N.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||ii.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=ao,i.pluginName="batch",i.isSprite=!0,i._roundPixels=Q.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}ro(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ct(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ct(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,h=t.orig,c=this._anchor,d=0,p=0,f=0,m=0;if(u?(d=(p=u.x-c._x*h.width)+u.width,f=(m=u.y-c._y*h.height)+u.height):(d=(p=-c._x*h.width)+h.width,f=(m=-c._y*h.height)+h.height),l[0]=i*p+r*m+s,l[1]=o*m+n*p+a,l[2]=i*d+r*m+s,l[3]=o*m+n*d+a,l[4]=i*d+r*f+s,l[5]=o*f+n*d+a,l[6]=i*p+r*f+s,l[7]=o*f+n*p+a,this._roundPixels)for(var g=Q.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,u=r.tx,h=r.ty,c=-n._x*i.width,d=c+i.width,p=-n._y*i.height,f=p+i.height;e[0]=o*c+a*p+u,e[1]=l*p+s*c+h,e[2]=o*d+a*p+u,e[3]=l*p+s*d+h,e[4]=o*d+a*f+u,e[5]=l*f+s*d+h,e[6]=o*c+a*f+u,e[7]=l*f+s*c+h},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Vt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,so);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return so.x>=n&&so.x<n+e&&(r=-i*this.anchor.y,so.y>=r&&so.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof ii?t:ii.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Ct(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Ct(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ii.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(ge),uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(oo||(oo={}));var ho={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:oo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},co=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],po=function(){function t(t){this.styleID=0,this.reset(),go(this,t,t)}return t.prototype.clone=function(){var e={};return go(e,this,ho),new t(e)},t.prototype.reset=function(){go(this,ho,ho)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=mo(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=mo(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=mo(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&co.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function fo(t){return"number"==typeof t?ht(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function mo(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=fo(t[e]);return t}return fo(t)}function go(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var yo=function(){function t(t,e,i,n,r,o,s,a,l){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l}return t.measureText=function(e,i,n,r){void 0===r&&(r=t._canvas),n=null==n?i.wordWrap:n;var o=i.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=i.fontSize,s.ascent=i.fontSize);var a=r.getContext("2d");a.font=o;for(var l=(n?t.wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),h=0,c=0;c<l.length;c++){var d=a.measureText(l[c]).width+(l[c].length-1)*i.letterSpacing;u[c]=d,h=Math.max(h,d)}var p=h+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||s.fontSize+i.strokeThickness,m=Math.max(f,s.fontSize+i.strokeThickness)+(l.length-1)*(f+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,p,m,l,u,f+i.leading,h,s)},t.wordWrap=function(e,i,n){void 0===n&&(n=t._canvas);for(var r=n.getContext("2d"),o=0,s="",a="",l=Object.create(null),u=i.letterSpacing,h=i.whiteSpace,c=t.collapseSpaces(h),d=t.collapseNewlines(h),p=!c,f=i.wordWrapWidth+u,m=t.tokenize(e),g=0;g<m.length;g++){var y=m[g];if(t.isNewline(y)){if(!d){a+=t.addLine(s),p=!c,s="",o=0;continue}y=" "}if(c){var v=t.isBreakingSpace(y),_=t.isBreakingSpace(s[s.length-1]);if(v&&_)continue}var b=t.getFromCache(y,u,l,r);if(b>f)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(y,i.breakWords))for(var x=t.wordWrapSplit(y),w=0;w<x.length;w++){for(var T=x[w],S=1;x[w+S];){var E=x[w+S],C=T[T.length-1];if(t.canBreakChars(C,E,y,w,i.breakWords))break;T+=E,S++}w+=T.length-1;var P=t.getFromCache(T,u,l,r);P+o>f&&(a+=t.addLine(s),p=!1,s="",o=0),s+=T,o+=P}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var I=g===m.length-1;a+=t.addLine(y,!I),p=!1,s="",o=0}else b+o>f&&(p=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(y)||p)&&(s+=y,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if("number"!=typeof r){var o=t.length*e;r=n.measureText(t).width+o,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var o=e[r];t.isBreakingSpace(o)||t.isNewline(o)?(""!==n&&(i.push(n),n=""),i.push(o)):n+=o}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},n=t._canvas,r=t._context;r.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(r.measureText(o).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),l=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,r.fillStyle="#f00",r.fillRect(0,0,s,l),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o,0,a);var u=r.getImageData(0,0,s,l).data,h=u.length,c=4*s,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=h-c,f=!1,d=l;d>a;--d){for(m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),vo=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();vo.width=vo.height=10,yo._canvas=vo,yo._context=vo.getContext("2d"),yo._fonts={},yo.METRICS_STRING="|ÉqÅ",yo.BASELINE_SYMBOL="M",yo.BASELINE_MULTIPLIER=1.4,yo._newlines=[10,13],yo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var _o={texture:!0,children:!1,baseTexture:!0},bo=function(t){function e(e,i,n){var r=this,o=!1;n||(n=document.createElement("canvas"),o=!0),n.width=3,n.height=3;var s=ii.from(n);return s.orig=new Vt,s.trim=new Vt,(r=t.call(this,s)||this)._ownCanvas=o,r.canvas=n,r.context=r.canvas.getContext("2d"),r._resolution=Q.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=i,r.localStyleID=-1,r}return function(t,e){function i(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,n,r=this.context,o=yo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,u=o.lineHeight,h=o.lineWidths,c=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,f=0;f<p;++f){var m=e.dropShadow&&0===f,g=m?Math.ceil(Math.max(1,a)+2*e.padding):0,y=g*this._resolution;if(m){r.fillStyle="black",r.strokeStyle="black";var v=e.dropShadowColor,_=ut("number"==typeof v?v:ct(v));r.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+y}else r.fillStyle=this._generateFillStyle(e,l,o),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var b=0;b<l.length;b++)i=e.strokeThickness/2,n=e.strokeThickness/2+b*u+d.ascent,"right"===e.align?i+=c-h[b]:"center"===e.align&&(i+=(c-h[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(l[b],i+e.padding,n+e.padding-g,!0),e.fill&&this.drawLetterSpacing(l[b],i+e.padding,n+e.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var r=this._style.letterSpacing;if(0!==r)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,l=0,u=0;u<s.length;++u){var h=s[u];n?this.context.strokeText(h,o,i):this.context.fillText(h,o,i),o+=a-(l=this.context.measureText(t.substring(u+1)).width)+r,a=l}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Nt(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,o=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var n,r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-o-2*s,l=Math.ceil(this.canvas.height/this._resolution)-o-2*s,u=r.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var c=u.length+1,d=1;d<c;++d)h.push(d/c);if(u.unshift(r[0]),h.unshift(0),u.push(r[r.length-1]),h.push(1),t.fillGradientType===oo.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,s,a/2,l+s);var p=0,f=(i.fontProperties.fontSize+t.strokeThickness)/l;for(d=0;d<e.length;d++)for(var m=i.lineHeight*d,g=0;g<u.length;g++){var y=m/l+("number"==typeof h[g]?h[g]:g/u.length)*f,v=Math.max(p,y);v=Math.min(v,1),n.addColorStop(v,u[g]),p=v}}else{n=this.context.createLinearGradient(s,l/2,a+s,l/2);var _=u.length+1,b=1;for(d=0;d<u.length;d++){var x=void 0;x="number"==typeof h[d]?h[d]:b/_,n.addColorStop(x,u[d]),b++}}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},_o,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Ct(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Ct(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof po?t:new po(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(lo);
/*!
 * @pixi/prepare - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Q.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var xo=function(t,e){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var wo=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function To(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof ii){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function So(t,e){if(t.baseTexture instanceof je){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Eo(t,e){if(t._texture&&t._texture instanceof ii){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Co(t,e){return e instanceof bo&&(e.updateText(!0),!0)}function Po(t,e){if(e instanceof po){var i=e.toFontString();return yo.measureFont(i),!0}return!1}function Io(t,e){if(t instanceof bo){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Ao(t,e){return t instanceof po&&(-1===e.indexOf(t)&&e.push(t),!0)}var Oo=function(){function t(t){var e=this;this.limiter=new wo(Q.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Io),this.registerFindHook(Ao),this.registerFindHook(To),this.registerFindHook(So),this.registerFindHook(Eo),this.registerUploadHook(Co),this.registerUploadHook(Po)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,xe.system.addOnce(this.tick,this,ve.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)xe.system.addOnce(this.tick,this,ve.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(i=0,n=r.length;i<n;i++)r[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ge)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&xe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Mo(t,e){return e instanceof je&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function ko(t,e){if(!(e instanceof no))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var o=n[r].style.texture;o&&Mo(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function Ro(t,e){return t instanceof no&&(e.push(t),!0)}var Do=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(Ro),i.registerUploadHook(Mo),i.registerUploadHook(ko),i}return function(t,e){function i(){this.constructor=t}xo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Oo),Lo=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),Fo=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof ii?t:null,this.baseTexture=t instanceof je?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=zt(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],o=this._frames[r],s=o.frame;if(s){var a=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,h=new Vt(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=o.rotated?new Vt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Vt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new Vt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new ii(this.baseTexture,a,h,l,o.rotated?2:0,o.anchor),ii.addToCache(this.textures[r],r)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),No=function(){function t(){}return t.use=function(e,i){var n=e.name+"_image";if(e.data&&e.type===mr.TYPE.JSON&&e.data.frames&&!this.resources[n]){var r={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},o=t.getResourcePath(e,this.baseUrl);this.add(n,o,r,(function(t){if(t.error)i(t.error);else{var n=new Fo(t.texture,e.data,e.url);n.parse((function(){e.spritesheet=n,e.textures=n.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:nt.a.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),Bo=function(t,e){return(Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function jo(t,e){function i(){this.constructor=t}Bo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Go=new Zt,Uo=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100);var r=t.call(this,e)||this;return r.tileTransform=new ue,r._width=i,r._height=n,r.uvMatrix=r.texture.uvMatrix||new an(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return jo(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Vt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Go);var e=this._width,i=this._height,n=-e*this.anchor._x;if(Go.x>=n&&Go.x<n+e){var r=-i*this.anchor._y;if(Go.y>=r&&Go.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return"number"==typeof i&&(Ot("5.3.0","TilingSprite.from use options instead of width and height args"),i={width:i,height:arguments[2]}),new e(ii.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(lo),zo="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ho=new te,Xo=function(t){function e(e){var i=t.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=nn.from(zo,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",n),i.simpleShader=nn.from(zo,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",n),i.quad=new gi,i.state=rn.for2d(),i}return jo(e,t),e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=i.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.invalidate();var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,l=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;l&&(o._glTextures[e.CONTEXT_UID]?l=o.wrapMode!==H.CLAMP:o.wrapMode===H.CLAMP&&(o.wrapMode=H.REPEAT));var u=l?this.simpleShader:this.shader,h=r.width,c=r.height,d=t._width,p=t._height;Ho.set(s.a*h/d,s.b*h/p,s.c*c/d,s.d*c/p,s.tx/d,s.ty/p),Ho.invert(),l?Ho.prepend(a.mapCoord):(u.uniforms.uMapCoord=a.mapCoord.toArray(!0),u.uniforms.uClampFrame=a.uClampFrame,u.uniforms.uClampOffset=a.uClampOffset),u.uniforms.uTransform=Ho.toArray(!0),u.uniforms.uColor=yt(t.tint,t.worldAlpha,u.uniforms.uColor,o.alphaMode),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.uSampler=r,e.shader.bind(u),e.geometry.bind(i),this.state.blendMode=ft(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(xi),Wo=function(t,e){return(Wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Yo(t,e){function i(){this.constructor=t}Wo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Vo=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),Ko=new Zt,qo=new $t,$o=function(t){function e(e,i,n,r){void 0===r&&(r=B.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,e.refCount++,o.shader=i,o.state=n||rn.for2d(),o.drawMode=r,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o._roundPixels=Q.ROUND_PIXELS,o.batchUvs=null,o}return Yo(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===B.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,n=i.a,r=i.b,o=i.c,s=i.d,a=i.tx,l=i.ty,u=this.vertexData,h=0;h<u.length/2;h++){var c=e[2*h],d=e[2*h+1];u[2*h]=n*c+o*d+a,u[2*h+1]=r*c+s*d+l}if(this._roundPixels){var p=Q.RESOLUTION;for(h=0;h<u.length;++h)u[h]=Math.round((u[h]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Vo(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ko);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=qo.points,n=this.geometry.getIndex().data,r=n.length,o=4===this.drawMode?3:1,s=0;s+2<r;s+=o){var a=2*n[s],l=2*n[s+1],u=2*n[s+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[l],i[3]=e[l+1],i[4]=e[u],i[5]=e[u+1],qo.contains(Ko.x,Ko.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(ge),Qo=function(t){function e(e,i){var n=this,r={uSampler:e,alpha:1,uTextureMatrix:te.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(r,i.uniforms),(n=t.call(this,i.program||en.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,n.uvMatrix=new an(e),n.batchable=void 0===i.program,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Yo(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;yt(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(nn),Zo=function(t){function e(e,i,n){var r=t.call(this)||this,o=new li(e),s=new li(i,!0),a=new li(n,!0,!0);return r.addAttribute("aVertexPosition",o,2,!1,U.FLOAT).addAttribute("aTextureCoord",s,2,!1,U.FLOAT).addIndex(a),r._updateId=-1,r}return Yo(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(fi),Jo=function(t,e){return(Jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var ts=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},es=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in e){var r=e[n].match(/^[a-z]+/gm)[0],o=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var l=o[a].split("="),u=l[0],h=l[1].replace(/"/gm,""),c=parseFloat(h),d=isNaN(c)?h:c;s[u]=d}i[r].push(s)}var p=new ts;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),is=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new ts,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=0;a<i.length;a++)e.info.push({face:i[a].getAttribute("face"),size:parseInt(i[a].getAttribute("size"),10)});for(a=0;a<n.length;a++)e.common.push({lineHeight:parseInt(n[a].getAttribute("lineHeight"),10)});for(a=0;a<r.length;a++)e.page.push({id:parseInt(r[a].getAttribute("id"),10)||0,file:r[a].getAttribute("file")});for(a=0;a<o.length;a++){var l=o[a];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(a=0;a<s.length;a++)e.kerning.push({first:parseInt(s[a].getAttribute("first"),10),second:parseInt(s[a].getAttribute("second"),10),amount:parseInt(s[a].getAttribute("amount"),10)});return e},t}(),ns=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return is.test(e)}return!1},t.parse=function(t){var e=(new window.DOMParser).parseFromString(t,"text/xml");return is.parse(e)},t}(),rs=[es,is,ns];function os(t){for(var e=0;e<rs.length;e++)if(rs[e].test(t))return rs[e];return null}function ss(t,e,i,n,r,o){var s,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var l=i.dropShadow?i.dropShadowDistance:0,u=i.padding||0,h=Math.ceil(t.width/n)-l-2*u,c=Math.ceil(t.height/n)-l-2*u,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===oo.LINEAR_VERTICAL){s=e.createLinearGradient(h/2,u,h/2,c+u);var g=0,y=(o.fontProperties.fontSize+i.strokeThickness)/c;for(m=0;m<r.length;m++)for(var v=o.lineHeight*m,_=0;_<d.length;_++){var b=v/c+("number"==typeof p[_]?p[_]:_/d.length)*y,x=Math.max(g,b);x=Math.min(x,1),s.addColorStop(x,d[_]),g=x}}else{s=e.createLinearGradient(u,c/2,h+u,c/2);var w=d.length+1,T=1;for(m=0;m<d.length;m++){var S=void 0;S="number"==typeof p[m]?p[m]:T/w,s.addColorStop(S,d[m]),T++}}return s}function as(t,e,i,n,r,o,s){var a=i.text,l=i.fontProperties;e.translate(n,r),e.scale(o,o);var u=s.strokeThickness/2,h=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=ss(t,e,s,o,[a],i),e.strokeStyle=s.stroke,e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=ss(t,e,s,o,[a],i),e.strokeStyle=s.stroke;var c=s.dropShadowColor,d=ut("number"==typeof c?c:ct(c));s.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(a,u,h+i.lineHeight-l.descent),s.fill&&e.fillText(a,u,h+i.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var ls=function(){function t(t,e,i){var n=t.info[0],r=t.common[0],o=zt(t.page[0].file),s={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=r.lineHeight/o,this.chars={},this.pageTextures=s;for(var a=0;a<t.page.length;a++){var l=t.page[a],u=l.id,h=l.file;s[u]=e instanceof Array?e[a]:e[h]}for(a=0;a<t.char.length;a++){var c=t.char[a],d=(u=c.id,c.page),p=t.char[a],f=p.x,m=p.y,g=p.width,y=p.height,v=p.xoffset,_=p.yoffset,b=p.xadvance;m/=o,g/=o,y/=o,v/=o,_/=o,b/=o;var x=new Vt((f/=o)+s[d].frame.x/o,m+s[d].frame.y/o,g,y);this.chars[u]={xOffset:v,yOffset:_,xAdvance:b,kerning:{},texture:new ii(s[d].baseTexture,x),page:d}}for(a=0;a<t.kerning.length;a++){var w=t.kerning[a],T=w.first,S=w.second,E=w.amount;T/=o,S/=o,E/=o,this.chars[S]&&(this.chars[S].kerning[T]=E)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,n){var r;if(e instanceof ts)r=e;else{var o=os(e);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(e)}i instanceof ii&&(i=[i]);var s=new t(r,i,n);return t.available[s.font]=s,s},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,n),o=r.chars,s=r.padding,a=r.resolution,l=r.textureWidth,u=r.textureHeight,h=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var o=r[0].charCodeAt(0),s=r[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,r.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),c=i instanceof po?i:new po(i),d=l,p=new ts;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var f,m,g,y=0,v=0,_=0,b=[],x=0;x<h.length;x++){f||((f=document.createElement("canvas")).width=l,f.height=u,m=f.getContext("2d"),g=new je(f,{resolution:a}),b.push(new ii(g)),p.page.push({id:b.length-1,file:""}));var w=yo.measureText(h[x],c,!1,f),T=w.width,S=Math.ceil(w.height),E=Math.ceil(("italic"===c.fontStyle?2:1)*T);if(v>=u-S*a){if(0===v)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+c.fontSize+"px fonts");--x,f=null,m=null,g=null,v=0,y=0,_=0}else if(_=Math.max(S+w.fontProperties.descent,_),E*a+y>=d)--x,v+=_*a,v=Math.ceil(v),y=0,_=0;else{as(f,m,w,y,v,a,c);var C=w.text.charCodeAt(0);p.char.push({id:C,page:b.length-1,x:y/a,y:v/a,width:E,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(T-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),y+=(E+2*s)*a,y=Math.ceil(y)}}var P=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=P,P},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),us=[],hs=[],cs=function(t){function e(i,n){void 0===n&&(n={});var r=t.call(this)||this;r._tint=16777215,n.font&&(Ot("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),r._upgradeStyle(n));var o=Object.assign({},e.styleDefaults,n),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,h=o.fontName,c=o.fontSize;if(!ls.available[h])throw new Error('Missing BitmapFont "'+h+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=s,r._tint=a,r._fontName=h,r._fontSize=c||ls.available[h].size,r._text=i,r._maxWidth=l,r._maxLineHeight=0,r._letterSpacing=u,r._anchor=new Jt((function(){r.dirty=!0}),r,0,0),r._roundPixels=Q.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}return function(t,e){function i(){this.constructor=t}Jo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=ls.available[this._fontName],i=this._fontSize/e.size,n=new Zt,r=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,l=this._maxWidth*e.size/this._fontSize,u=null,h=0,c=0,d=0,p=-1,f=0,m=0,g=0,y=0;y<a;y++){var v=s.charCodeAt(y),_=s.charAt(y);if(/(?:\s)/.test(_)&&(p=y,f=h),"\r"!==_&&"\n"!==_){var b=e.chars[v];if(b){u&&b.kerning[u]&&(n.x+=b.kerning[u]);var x=hs.pop()||{texture:ii.EMPTY,line:0,charCode:0,position:new Zt};x.texture=b.texture,x.line=d,x.charCode=v,x.position.x=n.x+b.xOffset+this._letterSpacing/2,x.position.y=n.y+b.yOffset,r.push(x),n.x+=b.xAdvance+this._letterSpacing,h=n.x,g=Math.max(g,b.yOffset+b.texture.height),u=v,-1!==p&&l>0&&n.x>l&&(Et(r,1+p-++m,1+y-p),y=p,p=-1,o.push(f),c=Math.max(c,f),d++,n.x=0,n.y+=e.lineHeight,u=null)}}else o.push(h),c=Math.max(c,h),++d,++m,n.x=0,n.y+=e.lineHeight,u=null}var w=s.charAt(s.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(h=f),o.push(h),c=Math.max(c,h));var T=[];for(y=0;y<=d;y++){var S=0;"right"===this._align?S=c-o[y]:"center"===this._align&&(S=(c-o[y])/2),T.push(S)}var E=r.length,C={},P=[],I=this._activePagesMeshData;for(y=0;y<I.length;y++)us.push(I[y]);for(y=0;y<E;y++){var A=(B=r[y].texture).baseTexture.uid;if(!C[A]){if(!(W=us.pop())){var O=new Zo,M=new Qo(ii.EMPTY);W={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new $o(O,M),vertices:null,uvs:null,indices:null}}W.index=0,W.indexCount=0,W.vertexCount=0,W.uvsCount=0,W.total=0;var k=this._textureCache;k[A]=k[A]||new ii(B.baseTexture),W.mesh.texture=k[A],W.mesh.tint=this._tint,P.push(W),C[A]=W}C[A].total++}for(y=0;y<I.length;y++)-1===P.indexOf(I[y])&&this.removeChild(I[y].mesh);for(y=0;y<P.length;y++)P[y].mesh.parent!==this&&this.addChild(P[y].mesh);for(var y in this._activePagesMeshData=P,C){var R=(W=C[y]).total;if(!((null===(t=W.indices)||void 0===t?void 0:t.length)>6*R)||W.vertices.length<2*$o.BATCHABLE_SIZE)W.vertices=new Float32Array(8*R),W.uvs=new Float32Array(8*R),W.indices=new Uint16Array(6*R);else for(var D=W.total,L=W.vertices,F=4*D*2;F<L.length;F++)L[F]=0;W.mesh.size=6*R}for(y=0;y<E;y++){var N=(_=r[y]).position.x+T[_.line];this._roundPixels&&(N=Math.round(N));var B,j=N*i,G=_.position.y*i,U=C[(B=_.texture).baseTexture.uid],z=B.frame,H=B._uvs,X=U.index++;U.indices[6*X+0]=0+4*X,U.indices[6*X+1]=1+4*X,U.indices[6*X+2]=2+4*X,U.indices[6*X+3]=0+4*X,U.indices[6*X+4]=2+4*X,U.indices[6*X+5]=3+4*X,U.vertices[8*X+0]=j,U.vertices[8*X+1]=G,U.vertices[8*X+2]=j+z.width*i,U.vertices[8*X+3]=G,U.vertices[8*X+4]=j+z.width*i,U.vertices[8*X+5]=G+z.height*i,U.vertices[8*X+6]=j,U.vertices[8*X+7]=G+z.height*i,U.uvs[8*X+0]=H.x0,U.uvs[8*X+1]=H.y0,U.uvs[8*X+2]=H.x1,U.uvs[8*X+3]=H.y1,U.uvs[8*X+4]=H.x2,U.uvs[8*X+5]=H.y2,U.uvs[8*X+6]=H.x3,U.uvs[8*X+7]=H.y3}for(var y in this._textWidth=c*i,this._textHeight=(n.y+e.lineHeight)*i,C){var W=C[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var Y=0,V=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y,q=0;q<W.total;q++)W.vertices[Y++]-=V,W.vertices[Y++]-=K,W.vertices[Y++]-=V,W.vertices[Y++]-=K,W.vertices[Y++]-=V,W.vertices[Y++]-=K,W.vertices[Y++]-=V,W.vertices[Y++]-=K;this._maxLineHeight=g*i;var $=W.mesh.geometry.getBuffer("aVertexPosition"),Q=W.mesh.geometry.getBuffer("aTextureCoord"),Z=W.mesh.geometry.getIndex();$.data=W.vertices,Q.data=W.uvs,Z.data=W.indices,$.update(),Q.update(),Z.update()}for(y=0;y<r.length;y++)hs.push(r[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!ls.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(e){var i=this._textureCache;for(var n in i){i[n].destroy(),delete i[n]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.registerFont=function(t,e){return Ot("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),ls.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return Ot("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),ls.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(ge),ds=function(){function t(){}return t.add=function(){mr.setExtensionXhrType("fnt",mr.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var n=os(e.data);if(n)for(var r=t.getBaseUrl(this,e),o=n.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=ls.install(o,s,!0),i())},l=0;l<o.page.length;++l){var u=o.page[l].file,h=r+u,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===h){p.metadata.pageFile=u,p.texture?a(p):p.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:mr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(h,f,a)}}else i()},t.getBaseUrl=function(e,i){var n=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===n&&(n=""),e.baseUrl&&n&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(n+="/")),(n=n.replace(e.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),ps=function(t,e){return(ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var fs=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,kn,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}ps(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(on),ms=function(t,e){return(ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function gs(t,e){function i(){this.constructor=t}ms(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ys,vs,_s,bs,xs,ws,Ts,Ss,Es,Cs,Ps,Is,As,Os,Ms,ks,Rs,Ds={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ls=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(ys||(ys={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(vs||(vs={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(_s||(_s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(bs||(bs={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(xs||(xs={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ws||(ws={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ts||(Ts={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Ss||(Ss={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Es||(Es={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Cs||(Cs={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(Ps||(Ps={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Is||(Is={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(As||(As={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Os||(Os={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Ms||(Ms={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(ks||(ks={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Rs||(Rs={}));var Fs=function(t){function e(e,i,n,r,o){void 0===i&&(i=8),void 0===n&&(n=4),void 0===r&&(r=Q.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var i,n=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=i.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(n-1)+".0"),o+="\n"}return r=(r=r.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),l=function(t){for(var e,i=Ds[t],n=i.length,r=Ls,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=n&&(e=t-s-1),o+=a=a.replace("%value%",i[e].toString()),o+="\n"}return r=(r=r.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,l)||this).horizontal=e,s.resolution=r,s._quality=0,s.quality=n,s.blur=i,s}return gs(e,t),e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),o=t.renderer,s=e,a=r;this.state.blend=!1,t.applyFilter(this,s,a,As.CLEAR);for(var l=1;l<this.passes-1;l++){t.bindAndClear(s,As.BLIT),this.uniforms.uSampler=a;var u=a;a=s,s=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,n),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(on),Ns=function(t){function e(e,i,n,r){void 0===e&&(e=8),void 0===i&&(i=4),void 0===n&&(n=Q.FILTER_RESOLUTION),void 0===r&&(r=5);var o=t.call(this)||this;return o.blurXFilter=new Fs(!0,e,i,n,r),o.blurYFilter=new Fs(!1,e,i,n,r),o.resolution=n,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}return gs(e,t),e.prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,As.CLEAR),this.blurYFilter.apply(t,s,i,n),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(on),Bs=function(t,e){return(Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var js=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,Rn,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}Bs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,o=(0,Math.sqrt)(r),s=[i+(1-i)*r,r*(1-i)-o*n,r*(1-i)+o*n,0,0,r*(1-i)+o*n,i+r*(1-i),r*(1-i)-o*n,0,0,r*(1-i)-o*n,r*(1-i)+o*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,u,h,e=e||.15,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(on);js.prototype.grayscale=js.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Gs=function(t,e){return(Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Us=function(t){function e(e,i){var n=this,r=new te;return e.renderable=!1,(n=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,n.maskMatrix=r,null==i&&(i=20),n.scale=new Zt(i,i),n}return function(t,e){function i(){this.constructor=t}Gs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),s=Math.sqrt(r.c*r.c+r.d*r.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/s,this.uniforms.rotation[3]=r.d/s),t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(on),zs=function(t,e){return(zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Hs=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}zs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(on),Xs=function(t,e){return(Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Ws=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var n=t.call(this,Rn,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return function(t,e){function i(){this.constructor=t}Xs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(on),Ys=new te;pe.prototype._cacheAsBitmap=!1,pe.prototype._cacheData=null;var Vs=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(pe.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Vs),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),pe.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},pe.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(Q.RESOLUTION);var r=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ri.create({width:i.width,height:i.height}),u="cacheAsBitmap_"+It();this._cacheData.textureCacheId=u,je.addToCache(l.baseTexture,u),ii.addToCache(l,u);var h=this.transform.localTransform.copyTo(Ys).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,l,!0,h,!1),t.projection.transform=a,t.renderTexture.bind(r,o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new lo(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-i.x/i.width,c.anchor.y=-i.y/i.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},pe.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},pe.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,r=t._projTransform;e.ceil(Q.RESOLUTION);var o=ri.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+It();this._cacheData.textureCacheId=s,je.addToCache(o.baseTexture,s),ii.addToCache(o,s);var a=Ys;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,o,!0,a,!1),t.context=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new lo(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},pe.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},pe.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},pe.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,je.removeFromCache(this._cacheData.textureCacheId),ii.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},pe.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
pe.prototype.name=null,ge.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,n=this.children.length;i<n;i++){if(this.children[i].getChildByName){var r=this.children[i].getChildByName(t,!0);if(r)return r}}return null},
/*!
 * @pixi/mixin-get-global-position - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
pe.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Zt),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh-extras - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Ks=function(t,e){return(Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function qs(t,e){function i(){this.constructor=t}Ks(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var $s=function(t){function e(e,i,n,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===r&&(r=10);var o=t.call(this)||this;return o.segWidth=n,o.segHeight=r,o.width=e,o.height=i,o.build(),o}return qs(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],r=this.segWidth-1,o=this.segHeight-1,s=this.width/r,a=this.height/o,l=0;l<t;l++){var u=l%this.segWidth,h=l/this.segWidth|0;e.push(u*s,h*a),i.push(u/r,h/o)}var c=r*o;for(l=0;l<c;l++){var d=l%r,p=l/r|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,g=(p+1)*this.segWidth+d,y=(p+1)*this.segWidth+d+1;n.push(f,m,g,m,y,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Zo),Qs=function(t){function e(e,i,n){void 0===e&&(e=200),void 0===n&&(n=0);var r=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return r.points=i,r._width=e,r.textureScale=n,r.build(),r}return qs(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var r=i.data,o=n.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var s=0,a=t[0],l=this._width*this.textureScale,u=t.length,h=0;h<u;h++){var c=4*h;if(this.textureScale>0){var d=a.x-t[h].x,p=a.y-t[h].y,f=Math.sqrt(d*d+p*p);a=t[h],s+=f/l}else s=h/(u-1);r[c]=s,r[c+1]=0,r[c+2]=s,r[c+3]=1}var m=0;for(h=0;h<u-1;h++){c=2*h;o[m++]=c,o[m++]=c+1,o[m++]=c+2,o[m++]=c+2,o[m++]=c+1,o[m++]=c+3}i.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],n=0,r=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;r=-((e=a<t.length-1?t[a+1]:l).x-i.x),n=e.y-i.y;var h=Math.sqrt(n*n+r*r),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=h,r/=h,n*=c,r*=c,o[u]=l.x+n,o[u+1]=l.y+r,o[u+2]=l.x-n,o[u+3]=l.y-r,i=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Zo),Zs=function(t){function e(e,i,n){void 0===n&&(n=0);var r=this,o=new Qs(e.height,i,n),s=new Qo(e);return n>0&&(e.baseTexture.wrapMode=H.REPEAT),(r=t.call(this,o,s)||this).autoUpdate=!0,r}return qs(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}($o),Js=function(t){function e(e,i,n){var r=this,o=new $s(e.width,e.height,i,n),s=new Qo(ii.WHITE);return(r=t.call(this,o,s)||this).texture=e,r}return qs(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}($o),ta=function(t){function e(e,i,n,r,o){void 0===e&&(e=ii.EMPTY);var s=this,a=new Zo(i,n,r);a.getBuffer("aVertexPosition").static=!1;var l=new Qo(e);return(s=t.call(this,a,l,null,o)||this).autoUpdate=!0,s}return qs(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}($o),ea=function(t){function e(e,i,n,r,o){void 0===i&&(i=10),void 0===n&&(n=10),void 0===r&&(r=10),void 0===o&&(o=10);var s=t.call(this,ii.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=i,s._rightWidth=r,s._topHeight=n,s._bottomHeight=o,s.texture=e,s}return qs(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(Js),ia=function(t,e){return(ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var na=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e[0]instanceof ii?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return function(t,e){function i(){this.constructor=t}ia(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(xe.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(xe.shared.add(this.update,this,ve.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ii.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ii.from(t[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ii)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(xe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(xe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(lo),ra=function(t,e){return(ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*!
 * pixi.js - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function oa(t,e){function i(){this.constructor=t}ra(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var sa="5.0.0";function aa(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return Ot(sa,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Ot(sa,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return Ot(sa,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return Ot(sa,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Ot(sa,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return Ot(sa,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return Ot(sa,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return Ot(sa,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return Ot("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return Ot("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.accessibility={},Object.defineProperties(t.accessibility,{AccessibilityManager:{get:function(){return Ot("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),t.AccessibilityManager}}}),t.interaction={},Object.defineProperties(t.interaction,{InteractionManager:{get:function(){return Ot("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),t.InteractionManager}},InteractionData:{get:function(){return Ot("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),t.InteractionData}},InteractionEvent:{get:function(){return Ot("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),t.InteractionEvent}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return Ot("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return Ot("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return Ot("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return Ot("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return Ot("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return Ot(sa,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return Ot(sa,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Ot(sa,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return Ot(sa,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),t.TilingSprite.fromFrame=function(e,i,n){return Ot("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),t.TilingSprite.from(e,{width:i,height:n})},t.TilingSprite.fromImage=function(e,i,n,r){return void 0===r&&(r={}),Ot("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),r&&"object"!=typeof r&&(r={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),r.width=i,r.height=n,t.TilingSprite.from(e,r)},Object.defineProperties(t.utils,{getSvgSize:{get:function(){return Ot(sa,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.resources.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return Ot(sa,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return Ot(sa,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return Ot(sa,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return Ot(sa,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return Ot(sa,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return Ot(sa,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Ot(sa,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return Ot(sa,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return Ot(sa,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return Ot(sa,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return Ot(sa,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return Ot(sa,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return Ot(sa,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return Ot(sa,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){Ot(sa,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return Ot(sa,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return Ot(sa,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return Ot(sa,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})};var e=function(t){return"on"+t.charAt(0).toUpperCase()+t.slice(1)};Object.assign(t.Loader.prototype,{on:function(t){var i=e(t);Ot(sa,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+i+".add")},once:function(t){var i=e(t);Ot(sa,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+i+".once")},off:function(t){var i=e(t);Ot(sa,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+i+".detach")}}),Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return Ot(sa,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return Ot(sa,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){Ot(sa,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){Ot(sa,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){Ot(sa,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){Ot(sa,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return Ot(sa,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Ot(sa,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var i=t.BaseTexture;i.prototype.loadSource=function(e){Ot(sa,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var n=!1;Object.defineProperties(i.prototype,{hasLoaded:{get:function(){return Ot(sa,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var t;return Ot(sa,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(t=this.resource)||void 0===t?void 0:t.url},set:function(t){Ot(sa,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return Ot(sa,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(t){Ot(sa,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return Ot("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Ot("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return n||(Ot("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),n=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),i.fromImage=function(t,e,n,r){Ot(sa,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:e};return i.from(t,{scaleMode:n,resourceOptions:o})},i.fromCanvas=function(t,e){return Ot(sa,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),i.from(t,{scaleMode:e})},i.fromSVG=function(t,e,n,r){Ot(sa,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:r,crossorigin:e};return i.from(t,{scaleMode:n,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Ot("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){Ot("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return Ot(sa,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return Ot(sa,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return Ot(sa,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return Ot(sa,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return Ot("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return Ot(sa,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,e)},returnRenderTarget:function(t){Ot(sa,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){Ot(sa,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,n=i.sourceFrame,r=i.destinationFrame;return e.translate(n.x/r.width,n.y/r.height),e.scale(r.width,r.height),e},calculateNormalizedScreenSpaceMatrix:function(t){Ot(sa,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,n=e.destinationFrame,r=t.identity();r.translate(i.x/n.width,i.y/n.height);var o=n.width/i.width,s=n.height/i.height;return r.scale(o,s),r}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return Ot(sa,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Ot(sa,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var r=function(t){function e(e,i,n,r){return Ot(sa,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,n,r)||this}return oa(e,t),e}(t.filters.BlurFilterPass),o=function(t){function e(e,i,n,r){return Ot(sa,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,n,r)||this}return oa(e,t),e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:r,BlurYFilter:o});var s=t.Sprite,a=t.Texture,l=t.Graphics;function u(t,e,i,n){return Ot(sa,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),s.from(e,{resourceOptions:{scale:n,crossorigin:i}})}function h(t,e,i,n){return Ot(sa,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),a.from(e,{resourceOptions:{scale:n,crossorigin:i}})}l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){Ot(sa,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return Ot(sa,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),s.fromImage=u.bind(null,"fromImage"),s.fromSVG=u.bind(null,"fromSVG"),s.fromCanvas=u.bind(null,"fromCanvas"),s.fromVideo=u.bind(null,"fromVideo"),s.fromFrame=u.bind(null,"fromFrame"),a.fromImage=h.bind(null,"fromImage"),a.fromSVG=h.bind(null,"fromSVG"),a.fromCanvas=h.bind(null,"fromCanvas"),a.fromVideo=h.bind(null,"fromVideo"),a.fromFrame=h.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return Ot(sa,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){Ot(sa,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return Ot(sa,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){Ot(sa,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Ot(sa,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Ot(sa,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(t.BitmapText.prototype,"font",{get:function(){return Ot("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){if(Ot("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),e){var i={font:e};this._upgradeStyle(i),i.fontSize=i.fontSize||t.BitmapFont.available[i.fontName].size,this._fontName=i.fontName,this._fontSize=i.fontSize,this.dirty=!0}}})}On.registerPlugin("accessibility",_e),On.registerPlugin("extract",Vn),On.registerPlugin("interaction",Oe),On.registerPlugin("particle",Cr),On.registerPlugin("prepare",Do),On.registerPlugin("batch",Hn),On.registerPlugin("tilingSprite",Xo),vr.registerPlugin(ds),vr.registerPlugin(No),Xn.registerPlugin(we),Xn.registerPlugin(_r);var la="5.3.9",ua={AlphaFilter:fs,BlurFilter:Ns,BlurFilterPass:Fs,ColorMatrixFilter:js,DisplacementFilter:Us,FXAAFilter:Hs,NoiseFilter:Ws};
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class ha{constructor(){this.heap=[],this.timestamp=0}lessThan(t,e){return t.key===e.key?t.timestamp<e.timestamp:t.key<e.key}shift(t){this.heap=this.heap.map(({key:e,value:i,timestamp:n})=>({key:e+t,value:i,timestamp:n}))}len(){return this.heap.length}push(t,e){this.timestamp+=1;const i=this.len();this.heap.push({value:t,timestamp:this.timestamp,key:e}),this.updateUp(i)}pop(){if(0===this.len())throw new Error("no element to pop");const t=this.heap[0];return this.len()>1?(this.heap[0]=this.heap.pop(),this.updateDown(0)):this.heap.pop(),t}find(t){for(let e=0;e<this.len();e++)if(t===this.heap[e].value)return this.heap[e];return null}remove(t){let e=null;for(let i=0;i<this.len();i++)t===this.heap[i].value&&(e=i);if(null===e)return!1;if(this.len()>1){const i=this.heap.pop();return i.value!==t&&(this.heap[e]=i,this.updateDown(e)),!0}return this.heap.pop(),!0}parentNode(t){return Math.floor((t-1)/2)}leftChildNode(t){return 2*t+1}rightChildNode(t){return 2*t+2}existNode(t){return t>=0&&t<this.heap.length}swap(t,e){const i=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=i}minNode(t){const e=t.filter(this.existNode.bind(this));let i=e[0];for(const t of e)this.lessThan(this.heap[t],this.heap[i])&&(i=t);return i}updateUp(t){if(0===t)return;const e=this.parentNode(t);this.existNode(e)&&this.lessThan(this.heap[t],this.heap[e])&&(this.swap(t,e),this.updateUp(e))}updateDown(t){const e=this.leftChildNode(t),i=this.rightChildNode(t);if(!this.existNode(e))return;const n=this.minNode([t,e,i]);n!==t&&(this.swap(t,n),this.updateDown(n))}debugPrint(){console.log(this.heap)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class ca{constructor(){this._time=0,this._events=new ha}getTime(){return this._time}clear(){return this._events=new ha,this}add(t,e){this._events.push(t,e)}get(){if(!this._events.len())return null;const{key:t,value:e}=this._events.pop();return t>0&&(this._time+=t,this._events.shift(-t)),e}getEventTime(t){const e=this._events.find(t);if(e){const{key:t}=e;return t}}remove(t){return this._events.remove(t)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class da{constructor(){this._queue=new ca,this._repeat=[],this._current=null}getTime(){return this._queue.getTime()}add(t,e){return e&&this._repeat.push(t),this}getTimeOf(t){return this._queue.getEventTime(t)}clear(){return this._queue.clear(),this._repeat=[],this._current=null,this}remove(t){const e=this._queue.remove(t),i=this._repeat.indexOf(t);return-1!==i&&this._repeat.splice(i,1),this._current===t&&(this._current=null),e}next(){return this._current=this._queue.get(),this._current}}var pa,fa,ma,ga,ya,va,_a,ba,xa;!function(t){t[t.Physical=0]="Physical",t[t.Fire=1]="Fire",t[t.Electric=2]="Electric",t[t.Water=3]="Water",t[t.Ice=4]="Ice",t[t.Nature=5]="Nature"}(pa||(pa={})),function(t){t[t.weak=2]="weak",t[t.normal=1]="normal",t[t.strong=.5]="strong",t[t.nullified=0]="nullified"}(fa||(fa={})),function(t){t[t.Default=0]="Default",t[t.RemoveFromWorld=1]="RemoveFromWorld"}(ma||(ma={})),function(t){t[t.Player=0]="Player",t[t.OnePass=1]="OnePass",t[t.TwoPass=2]="TwoPass"}(ga||(ga={})),function(t){t[t.HealSelf=0]="HealSelf",t[t.DamageScroll=1]="DamageScroll",t[t.WildDamageScroll=2]="WildDamageScroll",t[t.ClairvoyanceScroll=3]="ClairvoyanceScroll",t[t.ConfuseScroll=4]="ConfuseScroll",t[t.HasteSelf=5]="HasteSelf",t[t.SlowOther=6]="SlowOther"}(ya||(ya={})),function(t){t[t.DamageOther=0]="DamageOther",t[t.WildDamage=1]="WildDamage",t[t.Effect=2]="Effect",t[t.Passive=3]="Passive",t[t.HealSelf=4]="HealSelf",t[t.HealOther=5]="HealOther",t[t.Push=6]="Push"}(va||(va={})),function(t){t[t.OnFire=0]="OnFire",t[t.Frozen=1]="Frozen",t[t.Stunned=2]="Stunned"}(_a||(_a={})),function(t){t[t.LoadLevel=0]="LoadLevel",t[t.Door=1]="Door",t[t.GiveItems=2]="GiveItems",t[t.GiveSpells=3]="GiveSpells",t[t.Rest=4]="Rest"}(ba||(ba={})),function(t){t[t.Event=0]="Event",t[t.Fire=1]="Fire",t[t.ShallowWater=2]="ShallowWater",t[t.DeepWater=3]="DeepWater",t[t.Mud=4]="Mud",t[t.Steam=5]="Steam",t[t.Ice=6]="Ice"}(xa||(xa={}));var wa=i(1),Ta=i(6),Sa=i(8);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class Ea extends Sa.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const e=`${t.fontStyle?t.fontStyle+" ":""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=e,this._updateSize(),this._ctx.font=e,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(t,e){const i=this._ctx.canvas,n=i.getBoundingClientRect();return t-=n.left,e-=n.top,t*=i.width/n.width,e*=i.height/n.height,t<0||e<0||t>=i.width||e>=i.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}var Ca=i(4);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class Pa extends Ea{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){const[i,n,r,o,s]=t,a=[(i+1)*this._spacingX,n*this._spacingY+this._hexSize];if(this._options.transpose&&a.reverse(),e&&(this._ctx.fillStyle=s,this._fill(a[0],a[1])),!r)return;this._ctx.fillStyle=o;const l=[].concat(r);for(let t=0;t<l.length;t++)this._ctx.fillText(l[t],a[0],Math.ceil(a[1]))}computeSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);return[Math.floor(t/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]}computeFontSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);const i=2*t/((this._options.width+1)*Math.sqrt(3))-1,n=e/(2+1.5*(this._options.height-1));let r=Math.min(i,n);const o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;const s=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;const a=s/100;r=Math.floor(r)+1;const l=2*r/(this._options.spacing*(1+a/Math.sqrt(3)));return Math.ceil(l)-1}_normalizedEventToPosition(t,e){let i;this._options.transpose?(t+=e,t-=e=t-e,i=this._ctx.canvas.width):i=this._ctx.canvas.height;const n=i/this._options.height;return e=Math.floor(e/n),Object(Ca.mod)(e,2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){const i=this._hexSize,n=this._options.border,r=this._ctx;r.beginPath(),this._options.transpose?(r.moveTo(t-i+n,e),r.lineTo(t-i/2+n,e+this._spacingX-n),r.lineTo(t+i/2-n,e+this._spacingX-n),r.lineTo(t+i-n,e),r.lineTo(t+i/2-n,e-this._spacingX+n),r.lineTo(t-i/2+n,e-this._spacingX+n),r.lineTo(t-i+n,e)):(r.moveTo(t,e-i+n),r.lineTo(t+this._spacingX-n,e-i/2+n),r.lineTo(t+this._spacingX-n,e+i/2-n),r.lineTo(t,e+i-n),r.lineTo(t-this._spacingX+n,e+i/2-n),r.lineTo(t-this._spacingX+n,e-i/2+n),r.lineTo(t,e-i+n)),r.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);let i,n;this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,t.transpose?(i="height",n="width"):(i="width",n="height"),this._ctx.canvas[i]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[n]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class Ia extends Ea{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(t){super.setOptions(t),this._canvasCache={}}draw(t,e){Ia.cache?this._drawWithCache(t):this._drawNoCache(t,e)}_drawWithCache(t){const[e,i,n,r,o]=t,s=""+n+r+o;let a;if(s in this._canvasCache)a=this._canvasCache[s];else{const t=this._options.border;a=document.createElement("canvas");const e=a.getContext("2d");if(a.width=this._spacingX,a.height=this._spacingY,e.fillStyle=o,e.fillRect(t,t,a.width-t,a.height-t),n){e.fillStyle=r,e.font=this._ctx.font,e.textAlign="center",e.textBaseline="middle";const t=[].concat(n);for(let i=0;i<t.length;i++)e.fillText(t[i],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[s]=a}this._ctx.drawImage(a,e*this._spacingX,i*this._spacingY)}_drawNoCache(t,e){const[i,n,r,o,s]=t;if(e){const t=this._options.border;this._ctx.fillStyle=s,this._ctx.fillRect(i*this._spacingX+t,n*this._spacingY+t,this._spacingX-t,this._spacingY-t)}if(!r)return;this._ctx.fillStyle=o;const a=[].concat(r);for(let t=0;t<a.length;t++)this._ctx.fillText(a[t],(i+.5)*this._spacingX,Math.ceil((n+.5)*this._spacingY))}computeSize(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}computeFontSize(t,e){const i=Math.floor(t/this._options.width);let n=Math.floor(e/this._options.height);const r=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;const o=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=r;const s=o/100*n/i;return s>1&&(n=Math.floor(n/s)),Math.floor(n/this._options.spacing)}_normalizedEventToPosition(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(t.spacing*e),this._spacingY=Math.ceil(t.spacing*t.fontSize),t.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=t.width*this._spacingX,this._ctx.canvas.height=t.height*this._spacingY}}Ia.cache=!0;
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class Aa extends Ea{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){const[i,n,r,o,s]=t,a=this._options.tileWidth,l=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(i*a,n*l,a,l):(this._ctx.fillStyle=s,this._ctx.fillRect(i*a,n*l,a,l))),!r)return;const u=[].concat(r),h=[].concat(o),c=[].concat(s);for(let t=0;t<u.length;t++){const e=this._options.tileMap[u[t]];if(!e)throw new Error(`Char "${u[t]}" not found in tileMap`);if(this._options.tileColorize){const r=this._colorCanvas,o=r.getContext("2d");o.globalCompositeOperation="source-over",o.clearRect(0,0,a,l);const s=h[t],u=c[t];o.drawImage(this._options.tileSet,e[0],e[1],a,l,0,0,a,l),"transparent"!==s&&(o.fillStyle=s,o.globalCompositeOperation="source-atop",o.fillRect(0,0,a,l)),"transparent"!==u&&(o.fillStyle=u,o.globalCompositeOperation="destination-over",o.fillRect(0,0,a,l)),this._ctx.drawImage(r,i*a,n*l,a,l)}else this._ctx.drawImage(this._options.tileSet,e[0],e[1],a,l,i*a,n*l,a,l)}}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}var Oa=i(2);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class Ma extends Sa.a{constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){alert(t.message)}}static isSupported(){return null!==document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();const e=this._options.tileSet;null!==e&&"complete"in e&&!e.complete?e.addEventListener("load",()=>this._updateTexture(e)):this._updateTexture(e)}draw(t,e){const i=this._gl,n=this._options,[r,o,s,a,l]=t,u=i.canvas.height-(o+1)*n.tileHeight;if(i.scissor(r*n.tileWidth,u,n.tileWidth,n.tileHeight),e&&(!0===n.tileColorize?i.clearColor(0,0,0,0):i.clearColor(...Fa(l)),i.clear(i.COLOR_BUFFER_BIT)),!s)return;const h=[].concat(s),c=[].concat(l),d=[].concat(a);i.uniform2fv(this._uniforms.targetPosRel,[r,o]);for(let t=0;t<h.length;t++){const e=this._options.tileMap[h[t]];if(void 0===e)throw new Error(`Char "${h[t]}" not found in tileMap`);i.uniform1f(this._uniforms.colorize,!0===n.tileColorize?1:0),i.uniform2fv(this._uniforms.tilesetPosAbs,e),!0===n.tileColorize&&(i.uniform4fv(this._uniforms.tint,Fa(d[t])),i.uniform4fv(this._uniforms.bg,Fa(c[t]))),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...Fa(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){const i=this._gl.canvas,n=i.getBoundingClientRect();return t-=n.left,e-=n.top,t*=i.width/n.width,e*=i.height/n.height,t<0||e<0||t>=i.width||e>=i.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){const t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;const e=function(t,e,i){const n=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n)||"");const r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r)||"");const o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(o)||"");return o}(t,Ra,Da);return t.useProgram(e),function(t){const e=new Float32Array([0,0,1,0,0,1,1,1]),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}(t),ka.forEach(i=>{this._uniforms[i]=t.getUniformLocation(e,i)}),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,i=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=i[0],t.canvas.height=i[1],t.viewport(0,0,i[0],i[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,i)}_updateTexture(t){!function(t,e){const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}(this._gl,t)}}const ka=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],Ra="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n    vec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n    vec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n    targetPosNdc.y *= -1.0;\n\n    gl_Position = vec4(targetPosNdc, 0.0, 1.0);\n    tilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),Da="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n    fragColor = vec4(0, 0, 0, 1);\n\n    vec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n    if (colorize) {\n        texel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n        fragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n        fragColor.a = texel.a + (1.0-texel.a)*bg.a;\n    } else {\n        fragColor = texel;\n    }\n}".trim();const La={};function Fa(t){var e;if(!(t in La)){let i;if("transparent"===t)i=[0,0,0,0];else if(t.indexOf("rgba")>-1){i=(null!==(e=t.match(/[\d.]+/g))&&void 0!==e?e:[]).map(Number);for(let t=0;t<3;t++)i[t]=i[t]/255}else i=Oa.fromString(t).map(t=>t/255),i.push(1);La[t]=i}return La[t]}var Na=i(13);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const Ba=/%([bc]){([^}]*)}/g,ja=0,Ga=1,Ua=2,za=3;function Ha(t,e){const i={width:0,height:1},n=Xa(t,e);let r=0;for(let t=0;t<n.length;t++){const e=n[t];switch(e.type){case ja:r+=e.value.length;break;case Ga:i.height++,i.width=Math.max(i.width,r),r=0;break;case Ua:case za:break;default:throw new Error("unknown token type")}}return i.width=Math.max(i.width,r),i}function Xa(t,e){const i=[];let n=0;t.replace(Ba,(function(e,r,o,s){const a=t.substring(n,s);return a.length&&i.push({type:ja,value:a}),i.push({type:"c"===r?Ua:za,value:o.trim()}),n=s+e.length,""}));const r=t.substring(n);return r.length&&i.push({type:ja,value:r}),function(t,e){e||(e=1/0);let i=0,n=0,r=-1;for(;i<t.length;){const o=t[i];if(o.type===Ga&&(n=0,r=-1),o.type!==ja){i++;continue}for(;0===n&&" "===o.value.charAt(0);)o.value=o.value.substring(1);const s=o.value.indexOf("\n");if(-1!==s){o.value=Wa(t,i,s,!0);const e=o.value.split("");for(;e.length&&" "===e[e.length-1];)e.pop();o.value=e.join("")}if(o.value.length){if(n+o.value.length>e){let s=-1;for(;;){const t=o.value.indexOf(" ",s+1);if(-1===t)break;if(n+t>e)break;s=t}if(-1!==s)o.value=Wa(t,i,s,!0);else if(-1!==r){const e=t[r],n=e.value.lastIndexOf(" ");e.value=Wa(t,r,n,!0),i=r}else o.value=Wa(t,i,e-n,!1)}else n+=o.value.length,-1!==o.value.indexOf(" ")&&(r=i);i++}else t.splice(i,1)}t.push({type:Ga});let o=null;for(let e=0;e<t.length;e++){const i=t[e];switch(i.type){case ja:o=i;break;case Ga:if(o){const t=o.value.split("");for(;t.length&&" "===t[t.length-1];)t.pop();o.value=t.join("")}o=null;break;case Ua:case za:break;default:throw new Error("Unknown token type")}}return t.pop(),t}(i,e)}function Wa(t,e,i,n){const r={type:Ga},o={type:ja,value:t[e].value.substring(i+(n?1:0))};return t.splice(e+1,0,r,o),t[e].value.substring(0,i)}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const Ya={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},Va={hex:Pa,rect:Ia,tile:Aa,"tile-gl":Ma,term:Na.a},Ka={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class qa{constructor(t={}){this._data={},this._dirty=!1,this._options={},t=Object.assign({},Ka,t),this.setOptions(t),this.DEBUG=this.DEBUG.bind(this)}DEBUG(t,e,i){const n=[this._options.bg,this._options.fg];this.draw(t,e,null,null,n[i%n.length])}clear(){this._data={},this._dirty=!0}setOptions(t){if(Object.assign(this._options,t),void 0!==t.width||void 0!==t.height||void 0!==t.fontSize||void 0!==t.fontFamily||void 0!==t.spacing||void 0!==t.layout){if(void 0!==t.layout){const e=Va[t.layout];this._backend=new e}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(t,e){return this._backend.computeSize(t,e)}computeFontSize(t,e){return this._backend.computeFontSize(t,e)}computeTileSize(t,e){return[Math.floor(t/this._options.width),Math.floor(e/this._options.height)]}eventToPosition(t){let e,i;return"touches"in t?(e=t.touches[0].clientX,i=t.touches[0].clientY):(e=t.clientX,i=t.clientY),this._backend.eventToPosition(e,i)}draw(t,e,i,n,r){n||(n=this._options.fg),r||(r=this._options.bg);const o=`${t},${e}`;this._data[o]=[t,e,i,n,r],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[o]=!0)}drawText(t,e,i,n){let r=null,o=null,s=t,a=e,l=1;n||(n=this._options.width-t);const u=Xa(i,n);for(;u.length>0;){const e=u.shift();let i=!1,n=!1,h=!1,c=!1;switch(e.type){case ja:for(let t=0;t<e.value.length;t++){const l=e.value.charCodeAt(t),u=e.value.charAt(t);if("term"===this._options.layout){const t=l>>8;if(17===t||t>=46&&t<=159||t>=172&&t<=215||l>=43360&&l<=43391){this.draw(s+0,a,u,r,o),this.draw(s+1,a,"\t",r,o),s+=2;continue}}h=l>65280&&l<65377||l>65500&&l<65512||l>65518,i=32===u.charCodeAt(0)||12288===u.charCodeAt(0),!c||h||i||s++,h&&!n&&s++,this.draw(s++,a,u,r,o),n=i,c=h}break;case Ua:r=e.value||null;break;case za:o=e.value||null;break;case Ga:s=t,a++,l++;break;default:throw new Error("Unknown text type")}}return l}drawWithCache(){if(this._dirty){if(!0===this._dirty){this._backend.clear();for(const t in this._data)this._draw(t,!1)}else for(const t in this._dirty)this._draw(t,!0);this._dirty=!1}}_draw(t,e){const i=this._data[t];i[4]!==this._options.bg&&(e=!0),this._backend.draw(i,e)}}qa.Rect=Ia,qa.Hex=Pa,qa.Tile=Aa,qa.TileGL=Ma,qa.Term=Na.a;
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class $a{constructor(t,e={}){this._lightPasses=t,this._options=Object.assign({topology:8},e)}_getCircle(t,e,i){const n=[];let r,o,s;switch(this._options.topology){case 4:o=1,s=[0,1],r=[Ya[8][7],Ya[8][1],Ya[8][3],Ya[8][5]];break;case 6:r=Ya[6],o=1,s=[-1,1];break;case 8:r=Ya[4],o=2,s=[-1,1];break;default:throw new Error("Incorrect topology for FOV computation")}let a=t+s[0]*i,l=e+s[1]*i;for(let t=0;t<r.length;t++)for(let e=0;e<i*o;e++)n.push([a,l]),a+=r[t][0],l+=r[t][1];return n}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const Qa=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var Za={DiscreteShadowcasting:class extends $a{compute(t,e,i,n){if(n(t,e,0,1),!this._lightPasses(t,e))return;const r=[];let o,s,a,l,u;for(let h=1;h<=i;h++){const i=this._getCircle(t,e,h),c=360/i.length;for(let t=0;t<i.length;t++)if(a=i[t][0],l=i[t][1],o=c*(t-.5),s=o+c,u=!this._lightPasses(a,l),this._visibleCoords(Math.floor(o),Math.ceil(s),u,r)&&n(a,l,h,1),2===r.length&&0===r[0]&&360===r[1])return}}_visibleCoords(t,e,i,n){if(t<0){const r=this._visibleCoords(0,e,i,n),o=this._visibleCoords(360+t,360,i,n);return r||o}let r=0;for(;r<n.length&&n[r]<t;)r++;if(r===n.length)return i&&n.push(t,e),!0;let o=0;if(r%2){for(;r<n.length&&n[r]<e;)r++,o++;return 0!==o&&(i&&(o%2?n.splice(r-o,o,e):n.splice(r-o,o)),!0)}for(;r<n.length&&n[r]<e;)r++,o++;return(t!==n[r-o]||1!==o)&&(i&&(o%2?n.splice(r-o,o,t):n.splice(r-o,o,t,e)),!0)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */,PreciseShadowcasting:class extends $a{compute(t,e,i,n){if(n(t,e,0,1),!this._lightPasses(t,e))return;const r=[];let o,s,a,l,u,h;for(let c=1;c<=i;c++){const i=this._getCircle(t,e,c),d=i.length;for(let t=0;t<d;t++)if(o=i[t][0],s=i[t][1],l=[t>0?2*t-1:2*d-1,2*d],u=[2*t+1,2*d],a=!this._lightPasses(o,s),h=this._checkVisibility(l,u,a,r),h>0&&n(o,s,c,h),2===r.length&&0===r[0][0]&&r[1][0]===r[1][1])return}}_checkVisibility(t,e,i,n){if(t[0]>e[0]){return(this._checkVisibility(t,[t[1],t[1]],i,n)+this._checkVisibility([0,1],e,i,n))/2}let r=0,o=!1;for(;r<n.length;){const e=n[r],i=e[0]*t[1]-t[0]*e[1];if(i>=0){0!==i||r%2>0||(o=!0);break}r++}let s=n.length,a=!1;for(;s-- >0;){const t=n[s],i=e[0]*t[1]-t[0]*e[1];if(i>=0){0===i&&s%2>0&&(a=!0);break}}let l,u=!0;if((r===s&&(o||a)||o&&a&&r+1===s&&s%2>0||r>s&&r%2>0)&&(u=!1),!u)return 0;const h=s-r+1;if(h%2>0)if(r%2>0){const t=n[r];l=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),i&&n.splice(r,h,e)}else{const e=n[s];l=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),i&&n.splice(r,h,t)}else{if(!(r%2>0))return i&&n.splice(r,h,t,e),1;{const t=n[r],e=n[s];l=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),i&&n.splice(r,h)}}return l/((e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]))}},RecursiveShadowcasting:class extends $a{compute(t,e,i,n){n(t,e,0,1);for(let r=0;r<Qa.length;r++)this._renderOctant(t,e,Qa[r],i,n)}compute180(t,e,i,n,r){r(t,e,0,1);const o=(n-1+8)%8,s=(n-2+8)%8,a=(n+1+8)%8;this._renderOctant(t,e,Qa[s],i,r),this._renderOctant(t,e,Qa[o],i,r),this._renderOctant(t,e,Qa[n],i,r),this._renderOctant(t,e,Qa[a],i,r)}compute90(t,e,i,n,r){r(t,e,0,1);const o=(n-1+8)%8;this._renderOctant(t,e,Qa[n],i,r),this._renderOctant(t,e,Qa[o],i,r)}_renderOctant(t,e,i,n,r){this._castVisibility(t,e,1,1,0,n+1,i[0],i[1],i[2],i[3],r)}_castVisibility(t,e,i,n,r,o,s,a,l,u,h){if(!(n<r))for(let c=i;c<=o;c++){let i=-c-1;const d=-c;let p=!1,f=0;for(;i<=0;){i+=1;const m=t+i*s+d*a,g=e+i*l+d*u,y=(i-.5)/(d+.5),v=(i+.5)/(d-.5);if(!(v>n)){if(y<r)break;if(i*i+d*d<o*o&&h(m,g,c,1),p){if(!this._lightPasses(m,g)){f=v;continue}p=!1,n=f}else!this._lightPasses(m,g)&&c<o&&(p=!0,this._castVisibility(t,e,c+1,n,y,o,s,a,l,u,h),f=v)}}if(p)break}}}};
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
Math.sqrt(3),Math.sqrt(3);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class Ja{constructor(t,e,i,n={}){this._toX=t,this._toY=e,this._passableCallback=i,this._options=Object.assign({topology:8},n),this._dirs=Ya[this._options.topology],8===this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(t,e){const i=[];for(let n=0;n<this._dirs.length;n++){const r=this._dirs[n],o=t+r[0],s=e+r[1];this._passableCallback(o,s)&&i.push([o,s])}return i}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var tl={Dijkstra:class extends Ja{constructor(t,e,i,n){super(t,e,i,n),this._computed={},this._todo=[],this._add(t,e,null)}compute(t,e,i){const n=t+","+e;if(n in this._computed||this._compute(t,e),!(n in this._computed))return;let r=this._computed[n];for(;null!==r;)i(r.x,r.y),r=r.prev}_compute(t,e){for(;this._todo.length>0;){const i=this._todo.shift();if(i.x===t&&i.y===e)return;const n=this._getNeighbors(i.x,i.y);for(let t=0;t<n.length;t++){const e=n[t],r=e[0],o=e[1];r+","+o in this._computed||this._add(r,o,i)}}}_add(t,e,i){const n={x:t,y:e,prev:i};this._computed[t+","+e]=n,this._todo.push(n)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */,AStar:class extends Ja{constructor(t,e,i,n,r={}){super(t,e,i,r),this.todo=[],this.done={},this.weightCallback=n}compute(t,e,i){for(this.todo=[],this.done={},this.fromX=t,this.fromY=e,this._add(this._toX,this._toY,null);this.todo.length>0;){const i=this.todo.shift(),n=i.x+","+i.y;if(n in this.done)continue;if(this.done[n]=i,i.x===t&&i.y===e)break;const r=this._getNeighbors(i.x,i.y);for(let t=0;t<r.length;t++){const e=r[t],n=e[0],o=e[1];n+","+o in this.done||this._add(n,o,i)}}let n=this.done[t+","+e];if(null!=n)for(;null!=n;)i(n.x,n.y),n=n.prev}_add(t,e,i){const n=this.weightCallback(t,e),r={x:t,y:e,prev:i,g:null!==i?i.g+1:0,h:n},o=r.g+r.h;for(let t=0;t<this.todo.length;t++){const e=this.todo[t],i=e.g+e.h;if(o<i||o===i&&n<e.h)return void this.todo.splice(t,0,r)}this.todo.push(r)}_distance(t,e){const i=Math.abs(t-this.fromX),n=Math.abs(e-this.fromY);switch(this._options.topology){case 4:return Math.abs(t-this.fromX)+Math.abs(e-this.fromY);case 6:return n+Math.max(0,(i-n)/2);case 8:return Math.max(Math.abs(t-this.fromX),Math.abs(e-this.fromY));default:return 0}}},ReverseAStar:class{constructor(t,e,i){this._goalCallback=t,this._passableCallback=e,this._weightCallback=i,this._dirs=Ya[8],this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]]}compute(t,e,i){let n,r;for(this.todo=[],this.done={},this.fromX=t,this.fromY=e,this.add(this.fromX,this.fromY,null);this.todo.length>0;){const t=this.todo.shift(),e=t.x+","+t.y;if(e in this.done)continue;if(this.done[e]=t,this._goalCallback(t.x,t.y)){n=t.x,r=t.y;break}const i=this.getNeighbors(t.x,t.y);for(let e=0;e<i.length;e++){const n=i[e],r=n[0],o=n[1];r+","+o in this.done||this.add(r,o,t)}}let o=this.done[n+","+r];if(null!=o)for(;null!=o;)i(o.x,o.y),o=o.prev}add(t,e,i){const n=this._weightCallback(t,e),r={x:t,y:e,prev:i,g:null!==i?i.g+1:0,h:n},o=r.g+r.h;for(let t=0;t<this.todo.length;t++){const e=this.todo[t],i=e.g+e.h;if(o<i||o===i&&n<e.h)return void this.todo.splice(t,0,r)}this.todo.push(r)}getNeighbors(t,e){const i=[];for(let n=0;n<this._dirs.length;n++){const r=this._dirs[n],o=t+r[0],s=e+r[1];this._passableCallback(o,s)&&i.push([o,s])}return i}distance(t,e){return Math.max(Math.abs(t-this.fromX),Math.abs(e-this.fromY))}}};
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class el{constructor(t,e={}){this._reflectivityCallback=t,this._options={},e=Object.assign({passes:1,emissionThreshold:100,range:10},e),this._lights={},this._reflectivityCache={},this._fovCache={},this.setOptions(e)}setOptions(t){return Object.assign(this._options,t),(null==t?void 0:t.range)&&this.reset(),this}setFOV(t){return this._fov=t,this._fovCache={},this}setLight(t,e,i){const n=t+","+e;return i?this._lights[n]="string"==typeof i?Oa.fromString(i):i:delete this._lights[n],this}clearLights(){this._lights={}}reset(){return this._reflectivityCache={},this._fovCache={},this}compute(t){const e={};let i={};const n={};for(const t in this._lights){const e=this._lights[t];i[t]=[0,0,0],Oa.add_(i[t],e)}for(let t=0;t<this._options.passes;t++)this._emitLight(i,n,e),t+1!==this._options.passes&&(i=this._computeEmitters(n,e));for(const e in n){const i=e.split(",");t(parseInt(i[0]),parseInt(i[1]),n[e])}return this}_emitLight(t,e,i){for(const n in t){const r=n.split(","),o=parseInt(r[0]),s=parseInt(r[1]);this._emitLightFromCell(o,s,t[n],e),i[n]=1}return this}_computeEmitters(t,e){const i={};for(const n in t){if(n in e)continue;const r=t[n];let o;if(n in this._reflectivityCache)o=this._reflectivityCache[n];else{const t=n.split(","),e=parseInt(t[0]),i=parseInt(t[1]);o=this._reflectivityCallback(e,i),this._reflectivityCache[n]=o}if(0===o)continue;const s=[0,0,0];let a=0;for(let t=0;t<3;t++){const e=Math.round(r[t]*o);s[t]=e,a+=e}a>this._options.emissionThreshold&&(i[n]=s)}return i}_emitLightFromCell(t,e,i,n){const r=t+","+e;let o;o=r in this._fovCache?this._fovCache[r]:this._updateFOV(t,e);for(const t in o){const e=o[t];let r;t in n?r=n[t]:(r=[0,0,0],n[t]=r);for(let t=0;t<3;t++)r[t]+=Math.round(i[t]*e)}return this}_updateFOV(t,e){const i=t+","+e,n={};this._fovCache[i]=n;const r=this._options.range;return this._fov.compute(t,e,r,function(t,e,i,o){const s=o*(1-i/r);0!==s&&(n[t+","+e]=s)}.bind(this)),n}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */function il(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function nl(t,e){return Math.random()*(e-t+1)+t}function rl(t){throw new Error("Should be unreachable")}const ol=new Set;let sl=null,al=null;var ll,ul,hl,cl={init:function(){if(null===s.window||void 0===s.window||null===s.Game||void 0===s.Game||null===s.Game.canvas)throw new Error("Cannot init input without the globals initialized");s.window.addEventListener("keydown",(function(t){t.preventDefault(),ol.add(t.key)})),s.Game.canvas.addEventListener("mousedown",(function(t){t.preventDefault(),sl=t})),s.Game.canvas.addEventListener("mousemove",(function(t){t.preventDefault(),al=t}))},isDown:function(t){return ol.has(t)},pressKey:function(t){ol.add(t)},pressMouse:function(){sl=new MouseEvent("mousedown")},getFirstKeyPressed:function(){return Object(wa.get)([...ol.values()],"[0]",null)},getLeftMouseDown:function(){if(null===s.Game||void 0===s.Game||null===sl)return null;const t=sl.target.getBoundingClientRect(),e=sl.clientX-t.left,i=sl.clientY-t.top;if(e<0||i<0)return null;const n=s.Game.gameCamera.mouseToTilePosition(e,i);return n.y>=s.Game.map.height||n.x>=s.Game.map.width?null:n},getMousePosition:function(){if(null===s.Game||void 0===s.Game||null===al)return null;const t=al.target.getBoundingClientRect(),e=al.clientX-t.left,i=al.clientY-t.top;if(e<0||i<0)return null;const n=s.Game.gameCamera.mouseToTilePosition(e,i);return n.y>=s.Game.map.height||n.x>=s.Game.map.width?null:n},clearInputs:function(){sl=null,ol.clear()}},dl=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:ul.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,n=void 0,r=i[0],o=r.value,s=r.time,a=n=new t("string"==typeof o?ul.hexToRGB(o):o,s,e.ease);if(i.length>2||2===i.length&&i[1].value!==o)for(var l=1;l<i.length;++l){var u=i[l],h=u.value,c=u.time;n.next=new t("string"==typeof h?ul.hexToRGB(h):h,c),n=n.next}return a.isStepped=!!e.isStepped,a}var d=new t("string"==typeof e.start?ul.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(d.next=new t("string"==typeof e.end?ul.hexToRGB(e.end):e.end,1)),d},t}(),pl=r;
/*!
 * pixi-particles - v4.3.0
 * Compiled Fri, 18 Sep 2020 13:47:54 UTC
 *
 * pixi-particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function fl(t){return ll(t)}ll=parseInt(/^(\d+)\./.exec(la)[1],10)<5?pl.Texture.fromImage:pl.Texture.from,(hl=ul||(ul={})).verbose=!1,hl.DEG_TO_RADS=Math.PI/180,hl.rotatePoint=function(t,e){if(t){t*=hl.DEG_TO_RADS;var i=Math.sin(t),n=Math.cos(t),r=e.x*n-e.y*i,o=e.x*i+e.y*n;e.x=r,e.y=o}},hl.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},hl.normalize=function(t){var e=1/hl.length(t);t.x*=e,t.y*=e},hl.scaleBy=function(t,e){t.x*=e,t.y*=e},hl.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},hl.hexToRGB=function(t,e){var i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},hl.generateEase=function(t){var e=t.length,i=1/e;return function(n){var r=e*n|0,o=(n-r*i)*e,s=t[r]||t[e-1];return s.s+o*(2*(1-o)*(s.cp-s.s)+o*(s.e-s.s))}},hl.getBlendMode=function(t){if(!t)return N.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return N[t]||N.NORMAL},hl.createSteppedGradient=function(t,e){void 0===e&&(e=10),("number"!=typeof e||e<=0)&&(e=10);var i=new dl(hl.hexToRGB(t[0].value),t[0].time);i.isStepped=!0;for(var n=i,r=t[0],o=1,s=t[o],a=1;a<e;++a){for(var l=a/e;l>s.time;)r=s,s=t[++o];l=(l-r.time)/(s.time-r.time);var u=hl.hexToRGB(r.value),h=hl.hexToRGB(s.value),c={r:(h.r-u.r)*l+u.r,g:(h.g-u.g)*l+u.g,b:(h.b-u.b)*l+u.b};n.next=new dl(c,a/e),n=n.next}return i};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ml=function(t,e){return(ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function gl(t,e){function i(){this.constructor=t}ml(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function yl(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function vl(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return ul.combineRGBComponents(n,r,o)}function _l(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function bl(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return ul.combineRGBComponents(n,r,o)}function xl(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function wl(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return ul.combineRGBComponents(e.r,e.g,e.b)}var Tl,Sl=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?vl:yl:t.isStepped?this.interpolate=this.isColor?wl:xl:this.interpolate=this.isColor?bl:_l,this.ease=this.current.ease},t}(),El=function(t){function e(i){var n=t.call(this)||this;return n.prevChild=n.nextChild=null,n.emitter=i,n.anchor.x=n.anchor.y=.5,n.velocity=new Zt,n.rotationSpeed=0,n.rotationAcceleration=0,n.maxLife=0,n.age=0,n.ease=null,n.extraData=null,n.alphaList=new Sl,n.speedList=new Sl,n.speedMultiplier=1,n.acceleration=new Zt,n.maxSpeed=NaN,n.scaleList=new Sl,n.scaleMultiplier=1,n.colorList=new Sl(!0),n._doAlpha=!1,n._doScale=!1,n._doSpeed=!1,n._doAcceleration=!1,n._doColor=!1,n._doNormalMovement=!1,n._oneOverLife=0,n.next=null,n.prev=null,n.init=n.init,n.Particle_init=e.prototype.init,n.update=n.update,n.Particle_update=e.prototype.update,n.Sprite_destroy=t.prototype.destroy,n.Particle_destroy=e.prototype.destroy,n.applyArt=n.applyArt,n.kill=n.kill,n}return gl(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,ul.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=ul.DEG_TO_RADS,this.rotationSpeed*=ul.DEG_TO_RADS,this.rotationAcceleration*=ul.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=ul.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||ii.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4===this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var n=void 0,r=void 0;if(this._doSpeed){var o=this.speedList.interpolate(e)*this.speedMultiplier;ul.normalize(this.velocity),ul.scaleBy(this.velocity,o),n=this.velocity.x*t,r=this.velocity.y*t}else if(this._doAcceleration){var s=this.velocity.x,a=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var l=ul.length(this.velocity);l>this.maxSpeed&&ul.scaleBy(this.velocity,this.maxSpeed/l)}n=(s+this.velocity.x)/2*t,r=(a+this.velocity.y)/2*t}else n=this.velocity.x*t,r=this.velocity.y*t;this.position.x+=n,this.position.y+=r}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var u=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+u)/2*t,this.rotationSpeed=u}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=fl(t[e]));if(ul.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!==t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(lo),Cl=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],n=i[0],r=1;r<i.length;++r){var o=i[r];this.segments.push({p1:n,p2:o,l:0}),n=o}else for(n=t[0],e=1;e<t.length;++e){o=t[e];this.segments.push({p1:n,p2:o,l:0}),n=o}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var s=this.segments[e],a=s.p1,l=s.p2,u=Math.sqrt((l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y));this.segments[e].l=u,this.totalLength+=u,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,n=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=n;else for(var r=0;r<this.countingLengths.length;++r)if(n<this.countingLengths[r]){e=this.segments[r],i=0===r?n:n-this.countingLengths[r-1];break}i/=e.l||1;var o=e.p1,s=e.p2;t.x=o.x+i*(s.x-o.x),t.y=o.y+i*(s.y-o.y)},t}(),Pl=r;Tl=parseInt(/^(\d+)\./.exec(la)[1],10)<5?Pl.ticker.shared:Pl.Ticker.shared;var Il=new Zt,Al=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=El,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!==this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=dl.createList(e.alpha):this.startAlpha=new dl(1,0),e.speed?(this.startSpeed=dl.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new dl(0,0));var n=e.acceleration;n&&(n.x||n.y)?(this.startSpeed.next=null,this.acceleration=new Zt(n.x,n.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new Zt,e.scale?(this.startScale=dl.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new dl(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=dl.createList(e.color):this.startColor=new dl({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=ul.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:ul.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new Zt,this.spawnPos=new Zt(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new Vt(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new Kt(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new Kt(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new Cl(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!==t){var e=t-this.rotation;this.rotation=t,ul.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?Tl.remove(this.update,this):!this._autoUpdate&&t&&Tl.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/Q.TARGET_FPMS/1e3),this._parent){var e,i,n,r,o;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(r=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var s=this.ownerPos.x+this.spawnPos.x,a=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l=void 0;if(l=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var u=void 0,h=void 0;if(this._prevPosIsValid&&this._posChanged){var c=1+this._spawnTimer/t;u=(s-r)*c+r,h=(a-o)*c+o}else u=s,h=a;e=0;for(var d=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<d;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var p=void 0;this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(p.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):p.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):p.applyArt(this.particleImages[0]),p.alphaList.reset(this.startAlpha),1!==this.minimumSpeedMultiplier&&(p.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),p.speedList.reset(this.startSpeed),p.acceleration.x=this.acceleration.x,p.acceleration.y=this.acceleration.y,p.maxSpeed=this.maxSpeed,1!==this.minimumScaleMultiplier&&(p.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),p.scaleList.reset(this.startScale),p.colorList.reset(this.startColor),this.minRotationSpeed===this.maxRotationSpeed?p.rotationSpeed=this.minRotationSpeed:p.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,p.rotationAcceleration=this.rotationAcceleration,p.noRotation=this.noRotation,p.maxLife=l,p.blendMode=this.particleBlendMode,p.ease=this.customEase,p.extraData=this.extraData,this.applyAdditionalProperties(p),this._spawnFunc(p,u,h,e),p.init(),this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),this._activeParticlesLast?(this._activeParticlesLast.next=p,p.prev=this._activeParticlesLast,this._activeParticlesLast=p):this._activeParticlesLast=this._activeParticlesFirst=p,++this.particleCount,p.update(-this._spawnTimer)}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=a,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var f=this._completeCallback;this._completeCallback=null,f()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Il.x=Math.random()*this.spawnRect.width+this.spawnRect.x,Il.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&ul.rotatePoint(this.rotation,Il),t.position.x=e+Il.x,t.position.y=i+Il.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Il.x=Math.random()*this.spawnCircle.radius,Il.y=0,ul.rotatePoint(360*Math.random(),Il),Il.x+=this.spawnCircle.x,Il.y+=this.spawnCircle.y,0!==this.rotation&&ul.rotatePoint(this.rotation,Il),t.position.x=e+Il.x,t.position.y=i+Il.y},t.prototype._spawnRing=function(t,e,i){var n=this.spawnCircle;this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,n.minRadius!==n.radius?Il.x=Math.random()*(n.radius-n.minRadius)+n.minRadius:Il.x=n.radius,Il.y=0;var r=360*Math.random();t.rotation+=r,ul.rotatePoint(r,Il),Il.x+=this.spawnCircle.x,Il.y+=this.spawnCircle.y,0!==this.rotation&&ul.rotatePoint(this.rotation,Il),t.position.x=e+Il.x,t.position.y=i+Il.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(Il),0!==this.rotation&&ul.rotatePoint(this.rotation,Il),t.position.x=e+Il.x,t.position.y=i+Il.y},t.prototype._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),Ol=new Zt,Ml=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],kl=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(Ml).join("|"),"g");(function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new Zt,i.movement=0,i}gl(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){if(this._doSpeed){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t}else{i=this.speedList.current.value*this.speedMultiplier;this.movement+=i*t}Ol.x=this.movement,Ol.y=this.path(this.movement),ul.rotatePoint(this.initialRotation,Ol),this.position.x=this.initialPosition.x+Ol.x,this.position.y=this.initialPosition.y+Ol.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return El.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(kl),i=e.length-1;i>=0;--i)Ml.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){ul.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else ul.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e}})(El),function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}gl(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||ii.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e=[],i=0;i<t.length;++i){for(var n=t[i],r=e[i]={},o=r.textures=[],s=n.textures,a=0;a<s.length;++a){var l=s[a];if("string"==typeof l)o.push(fl(l));else if(l instanceof ii)o.push(l);else{var u=l.count||1;for(l="string"==typeof l.texture?fl(l.texture):l.texture;u>0;--u)o.push(l)}}"matchLife"===n.framerate?(r.framerate=-1,r.duration=0,r.loop=!1):(r.loop=!!n.loop,r.framerate=n.framerate>0?n.framerate:60,r.duration=o.length/r.framerate)}return e}}(El),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._firstChild=null,e._lastChild=null,e._childCount=0,e}gl(e,t),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._childCount},enumerable:!0,configurable:!0}),e.prototype.addChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.addChild(t[i]);else{var n=t[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this._lastChild?(this._lastChild.nextChild=n,n.prevChild=this._lastChild,this._lastChild=n):this._firstChild=this._lastChild=n,++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",n,this,this._childCount),n.emit("added",this)}return t[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this._childCount)throw new Error("addChildAt: The index "+e+" supplied is out of bounds "+this._childCount);t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1;var i=t;if(this._firstChild)if(0===e)this._firstChild.prevChild=i,i.nextChild=this._firstChild,this._firstChild=i;else if(e===this._childCount)this._lastChild.nextChild=i,i.prevChild=this._lastChild,this._lastChild=i;else{for(var n=0,r=this._firstChild;n<e;)r=r.nextChild,++n;r.prevChild.nextChild=i,i.prevChild=r.prevChild,i.nextChild=r,r.prevChild=i}else this._firstChild=this._lastChild=i;return++this._childCount,this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.addChildBelow=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.prevChild.nextChild=t,t.prevChild=e.prevChild,t.nextChild=e,e.prevChild=t,this._firstChild===e&&(this._firstChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.addChildAbove=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.nextChild.prevChild=t,t.nextChild=e.nextChild,t.prevChild=e,e.nextChild=t,this._lastChild===e&&(this._lastChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e&&t.parent===this&&e.parent===this){var i=t,n=i.prevChild,r=i.nextChild;t.prevChild=e.prevChild,t.nextChild=e.nextChild,e.prevChild=n,e.nextChild=r,this._firstChild===t?this._firstChild=e:this._firstChild===e&&(this._firstChild=t),this._lastChild===t?this._lastChild=e:this._lastChild===e&&(this._lastChild=t),this.onChildrenChange()}},e.prototype.getChildIndex=function(t){for(var e=0,i=this._firstChild;i&&i!==t;)i=i.nextChild,++e;if(!i)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this._childCount)throw new Error("The index "+e+" supplied is out of bounds "+this._childCount);if(t.parent!==this)throw new Error("The supplied DisplayObject must be a child of the caller");if(t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,this._firstChild)if(0===e)this._firstChild.prevChild=t,t.nextChild=this._firstChild,this._firstChild=t;else if(e===this._childCount)this._lastChild.nextChild=t,t.prevChild=this._lastChild,this._lastChild=t;else{for(var i=0,n=this._firstChild;i<e;)n=n.nextChild,++i;n.prevChild.nextChild=t,t.prevChild=n.prevChild,t.nextChild=n,n.prevChild=t}else this._firstChild=this._lastChild=t;this.onChildrenChange(e)},e.prototype.removeChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.removeChild(t[i]);else{var n=t[0];if(n.parent!==this)return null;n.parent=null,n.transform._parentID=-1,n.nextChild&&(n.nextChild.prevChild=n.prevChild),n.prevChild&&(n.prevChild.nextChild=n.nextChild),this._firstChild===n&&(this._firstChild=n.nextChild),this._lastChild===n&&(this._lastChild=n.prevChild),n.nextChild=null,n.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(),n.emit("removed",this),this.emit("childRemoved",n,this)}return t[0]},e.prototype.getChildAt=function(t){if(t<0||t>=this._childCount)throw new Error("getChildAt: Index ("+t+") does not exist.");if(0===t)return this._firstChild;if(t===this._childCount)return this._lastChild;for(var e=0,i=this._firstChild;e<t;)i=i.nextChild,++e;return i},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this._childCount);var i=t,n=e,r=n-i;if(r>0&&r<=n){for(var o=[],s=this._firstChild,a=0;a<=n&&s;++a,s=s.nextChild)a>=i&&o.push(s);var l=o[0].prevChild,u=o[o.length-1].nextChild;u?u.prevChild=l:this._lastChild=l,l?l.nextChild=u:this._firstChild=u;for(a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1),o[a].nextChild=null,o[a].prevChild=null;this._boundsID++,this.onChildrenChange(t);for(a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}if(0===r&&0===this._childCount)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){var t,e;for(this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,t=this._firstChild;t;t=e)e=t.nextChild,t.visible&&t.updateTransform()},e.prototype.calculateBounds=function(){var t,e;for(this._bounds.clear(),this._calculateBounds(),t=this._firstChild;t;t=e)if(e=t.nextChild,t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var i=t._mask.maskObject||t._mask;i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds);this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);var i=pe.prototype.getLocalBounds.call(this,t);if(!e){var n=void 0,r=void 0;for(n=this._firstChild;n;n=r)r=n.nextChild,n.visible&&n.updateTransform()}return i},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e,i,n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}for(r&&t.mask.push(this,this._mask),this._render(t),e=this._firstChild;e;e=i)i=e.nextChild,e.render(t);t.batch.flush(),r&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e,i,n=this._filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}for(r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),n&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,i;for(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}}(ge);var Rl=i(24),Dl=i(25),Ll=i(26),Fl=i(27),Nl=i(28);
/**!
 * Adapted from GOAPy (https://github.com/flags/GOAPy)
 *
 * Original License:
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Luke Martin (flags)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function Bl(t,e){const i=new Set(t);for(const t of e)i.delete(t);return i}function jl(t,e){const i=new Set;let n=0;for(const r in e){const o=e[r];-1!==o&&(o!==t[r]&&(n+=1),i.add(r))}for(const r in t){if(i.has(r))continue;const o=t[r];-1!==o&&(o!==e[r]&&(n+=1))}return n}function Gl(t,e){for(const i in e){if(-1!==e[i]&&t[i]!==e[i])return!1}return!0}function Ul(t,e){const i=Object.values(e);for(let e=0;e<i.length;e++){const n=i[e];if(t.state===n.state&&t.name===n.name)return!0}return!1}function zl(t,e,i=""){return t.nodeID+=1,t.nodes[t.nodeID]={state:e,f:0,g:0,h:0,p_id:null,id:t.nodeID,name:i},t.nodes[t.nodeID]}function Hl(t,e,i,n,r){const o={nodes:{},nodeID:0,goal:e,actions:i,reactions:n,weightTable:r,actionNodes:{},oList:{},cList:{}},s=zl(o,t,"start");s.g=0,s.h=jl(t,e),s.f=s.g+s.h,o.oList[s.id]=s;for(const t in i)o.actionNodes[t]=zl(o,i[t],t);return function(t){let e=null;const i=t.cList,n=t.oList;for(;Object.keys(n).length>0;){const r={node:null,f:9e6},o=Object.values(n);for(let t=0;t<o.length;t++){const e=o[t];(null===r.node||e.f<r.f)&&(r.node=e.id,r.f=e.f)}if(null===r.node)return;if(e=t.nodes[r.node],delete n[e.id],Gl(e.state,t.goal)){const i=[];for(;null!==e.p_id;)i.push(e),e=t.nodes[e.p_id];return Object(wa.reverse)(i),i}i[e.id]=e;const s=[],a=Object.keys(t.actionNodes);for(let i=0;i<a.length;i++){const n=a[i];if(!Gl(e.state,t.actionNodes[n].state))continue;t.nodeID+=1;const r=Object.assign({},e);r.state=Object.assign({},e.state),r.id=t.nodeID,r.name=n;for(const e in t.reactions[n]){const i=t.reactions[n][e];-1!==i&&(r.state[e]=i)}t.nodes[r.id]=r,s.push(r)}for(let r=0;r<s.length;r++){const o=s[r],a=e.g+t.weightTable[o.name],l=Ul(o,n),u=Ul(o,i);l&&a<o.g&&delete n[o],u&&a<o.g&&delete i[o.id],l||u||(o.g=a,o.h=jl(o.state,t.goal),o.f=o.g+o.h,o.p_id=e.id,n[o.id]=o)}}return[]}(o)}class Xl{constructor(...t){this.startState=null,this.goalState=null,this.actionList=null,this.values={};for(let e=0;e<t.length;e++)this.values[t[e]]=-1}state(t={}){const e=Object.assign({},this.values);return Object.assign(e,t),e}setStartState(t={}){const e=Bl(new Set(Object.keys(t)),new Set(Object.keys(this.values)));if(e.size>0)throw new Error("Invalid states for world start state: "+Array.from(e.values()));this.startState=this.state(t)}setGoalState(t={}){const e=Bl(new Set(Object.keys(t)),new Set(Object.keys(this.values)));if(e.size>0)throw new Error("Invalid states for world goal state: "+[...e]);this.goalState=this.state(t)}setActionList(t){this.actionList=t}getActionList(){return this.actionList}calculate(){if(null===this.actionList)throw new Error("Can't calculate path with no actionList");if(null===this.startState)throw new Error("Can't calculate path with no startState");if(null===this.goalState)throw new Error("Can't calculate path with no goalState");const t={};for(const e in this.actionList.conditions)t[e]=Object.assign({},this.actionList.conditions[e]);const e={};for(const t in this.actionList.reactions)e[t]=Object.assign({},this.actionList.reactions[t]);return Hl(this.startState,this.goalState,t,e,Object.assign({},this.actionList.weights))}}class Wl{constructor(){this.conditions={},this.reactions={},this.weights={}}addCondition(t,e={}){t in this.weights||(this.weights[t]=1),t in this.conditions?Object.assign(this.conditions[t],e):this.conditions[t]=e}addReaction(t,e={}){if(!(t in this.conditions))throw new Error(`Trying to add reaction "${t}" without matching condition.`);t in this.reactions?Object.assign(this.reactions[t],e):this.reactions[t]=e}setWeight(t,e){if(!(t in this.conditions))throw new Error(`Trying to set weight "${t}" without matching condition.`);this.weights[t]=e}}var Yl=i(3);const Vl={},Kl={tutorial_001:"forrestTheme",tutorial_002:"forrestTheme",forrest_001:"forrestTheme"},ql={id:null,sound:null};function $l(){Vl.uiClick.play()}function Ql(){Vl.uiRollover.rate(nl(.88,1.12)),Vl.uiRollover.volume(nl(.7,1)),Vl.uiRollover.play()}function Zl(){Vl.ping.play()}function Jl(){Vl.doorOpening.play()}function tu(){Vl.boxBreaking.play()}class eu{constructor(t,e){this.height=96;const i=t.height-this.height;this.background=new no,this.background.beginFill(255),this.background.drawRect(0,0,t.width,this.height),this.background.endFill(),this.background.x=0,this.background.y=i,this.background.zIndex=20,this.background.visible=!1,this.healthText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.healthText.x=20,this.healthText.y=i+15,this.healthText.zIndex=21,this.healthText.visible=!1,this.strengthText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.strengthText.x=200,this.strengthText.y=i+15,this.strengthText.zIndex=21,this.strengthText.visible=!1,this.defenseText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.defenseText.x=350,this.defenseText.y=i+15,this.defenseText.zIndex=21,this.defenseText.visible=!1,this.experienceText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.experienceText.x=500,this.experienceText.y=i+15,this.experienceText.zIndex=21,this.experienceText.visible=!1,this.stateText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.stateText.x=20,this.stateText.y=i+45,this.stateText.zIndex=21,this.stateText.visible=!1,this.statusText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.statusText.x=200,this.statusText.y=i+45,this.statusText.zIndex=21,this.statusText.visible=!1,this.targetText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.targetText.x=350,this.targetText.y=i+45,this.targetText.zIndex=21,this.targetText.visible=!1,this.debugPathfindingText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.debugPathfindingText.x=650,this.debugPathfindingText.y=i+45,this.debugPathfindingText.zIndex=21,this.debugPathfindingText.visible=!1,e.addChild(this.background),e.addChild(this.healthText),e.addChild(this.strengthText),e.addChild(this.defenseText),e.addChild(this.experienceText),e.addChild(this.stateText),e.addChild(this.statusText),e.addChild(this.targetText),e.addChild(this.debugPathfindingText),e.addChild(this.targetText)}setVisible(t){var e;this.background.visible=t,this.healthText.visible=t,this.strengthText.visible=t,this.defenseText.visible=t,this.experienceText.visible=t,this.stateText.visible=t,this.statusText.visible=t,this.targetText.visible=t,!0===(null===(e=s.Game)||void 0===e?void 0:e.debugPathfinding)&&(this.debugPathfindingText.visible=t)}update(t,e,i){var n,r,o;const a=t.getEntity("player");if(void 0===a)throw new Error("No player entity found");const l=Hc(a),u=Xc(t,i,a),h=a.getOne(uc),c=a.getOne(_c),d=a.getOne(xc),p=a.getOne(bc),f=a.getOne(wc);if(null===l||null===u||void 0===h||void 0===c)throw new Error("Player missing data");this.healthText.text=`HP: ${l.hp}/${l.maxHp}`,this.strengthText.text="STR: "+u.strength,this.defenseText.text="DEF: "+u.defense,this.experienceText.text=`EXP: ${h.experience}/${50+150*h.level}`,(null===(n=s.Game)||void 0===n?void 0:n.playerId)===(null===(r=s.Game)||void 0===r?void 0:r.currentActor)?this.stateText.text="State: "+Mh[c.state]:this.stateText.text="Enemy Turn";let m="none";void 0!==d&&d.onFire?m="On Fire":void 0!==p&&p.frozen?m="Frozen":void 0!==f&&f.wet&&(m="Wet"),this.statusText.text="Status: "+m;const g=cl.getMousePosition();if(null!==g&&g.x>=0&&g.y>=0&&g.x<e.width&&g.y<e.height){const n=e.data[wh(e,g)][g.y][g.x];if(null!==n&&hh(e,g)){const e=fh(t,i,g);if(0===e.length)this.targetText.text=""+n.name;else{let t;if(1===e.length)t=e[0];else{const i=e.sort((t,e)=>{let i=0,n=0;return void 0!==t.getOne(dc)&&(i+=10),void 0!==t.getOne(nc)&&(i+=5),void 0!==t.getOne(Ec)&&(i+=3),void 0!==e.getOne(dc)&&(n+=10),void 0!==e.getOne(nc)&&(n+=5),void 0!==e.getOne(Ec)&&(n+=3),i-n});t=i[i.length-1]}const i=t.getOne(Zh),n=Hc(t),r=t.getOne(dc);void 0!==i&&void 0!==r&&null!==n?this.targetText.text=`A ${i.name} (${n.hp}/${n.maxHp}) (${r.knowsTargetPosition})`:void 0!==i&&null!==n?this.targetText.text=`A ${i.name} (${n.hp}/${n.maxHp})`:void 0!==i&&(this.targetText.text="A "+i.name)}}!0===(null===(o=s.Game)||void 0===o?void 0:o.debugPathfinding)&&null!==n?(this.debugPathfindingText.text=`(${g.x}, ${g.y}): ${n.pathfindingCost}`,this.debugPathfindingText.visible=!0):this.debugPathfindingText.visible=!1}}}var iu;function nu(t,e=iu.Default){if(null===s.document)throw new Error("Global document object is null");if(null===s.Game)throw new Error("Global Game object is null");const i=s.document.getElementById("log");if(null===i)throw new Error("Can't find log list element");const n=document.createElement("div"),r=document.createElement("p"),o=document.createElement("p");for(r.innerHTML=""+t,e===iu.Tutorial?n.className="tutorial":e===iu.Critical?(n.className="critical",o.innerHTML=`<small>Turn: ${s.Game.totalTurns}</small>`):e===iu.StatusEffect?(n.className="status-effect",o.innerHTML=`<small>Turn: ${s.Game.totalTurns}</small>`):o.innerHTML=`<small>Turn: ${s.Game.totalTurns}</small>`,n.appendChild(r),n.appendChild(o),i.appendChild(n);i.children.length>100;)i.children[0].remove();i.scrollTop=i.scrollHeight}!function(t){t[t.Default=0]="Default",t[t.Tutorial=1]="Tutorial",t[t.Critical=2]="Critical",t[t.StatusEffect=3]="StatusEffect"}(iu||(iu={}));class ru{constructor(t,e){this.pageSize=16,this.unselectedStyle={fontFamily:"monospace",fontSize:14,fill:16777215},this.selectedStyle={fontFamily:"monospace",fontSize:14,fill:0},this.currentSelection=0,this.viewport=t,this.currentStage=e;this.background=new no,this.background.lineStyle(4,10066329,1,1),this.background.beginFill(0),this.background.drawRect(0,0,t.width-8,t.height-8),this.background.endFill(),this.background.x=4,this.background.y=4,this.background.zIndex=20,this.background.visible=!1,this.titleText=new bo("Inventory",{fontFamily:"monospace",fontSize:24,fill:16777215,align:"center"}),this.titleText.x=t.width/2-this.titleText.width/2,this.titleText.y=9,this.titleText.zIndex=21,this.titleText.visible=!1;const i=t.height-96-8;this.descriptionBackground=new no,this.descriptionBackground.lineStyle(4,16777215,1,1),this.descriptionBackground.beginFill(0),this.descriptionBackground.drawRect(0,0,t.width-8-8,96),this.descriptionBackground.endFill(),this.descriptionBackground.x=8,this.descriptionBackground.y=i,this.descriptionBackground.zIndex=22,this.descriptionBackground.visible=!1,this.descriptionText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.descriptionText.x=20,this.descriptionText.y=i+15,this.descriptionText.zIndex=23,this.descriptionText.visible=!1,this.menuItems=[],this.currentStage.addChild(this.background),this.currentStage.addChild(this.titleText),this.currentStage.addChild(this.descriptionBackground),this.currentStage.addChild(this.descriptionText)}open(t){if(null===s.Game)throw new Error("Global Game object is null");this.background.visible=!0,this.titleText.visible=!0,this.descriptionText.visible=!0,this.descriptionBackground.visible=!0;const e=t[this.currentSelection];void 0!==e&&(this.descriptionText.text=e.description);for(let e=0;e<t.length;e++){const i=t[e],n=20*(e+3),r=new lo(ii.WHITE);r.width=.98*this.viewport.width,r.height=20,r.x=.01*this.viewport.width,r.y=n-3,r.zIndex=21,r.visible=!1;const o=new bo(""+i.displayName,this.unselectedStyle);o.x=.02*this.viewport.width,o.y=n,o.zIndex=22,o.visible=!0;const s=new bo("Count: "+i.count,this.unselectedStyle);s.x=.85*this.viewport.width,s.y=n,s.zIndex=22,s.visible=!0,this.menuItems.push({bg:r,name:o,count:s}),this.currentStage.addChild(r),this.currentStage.addChild(o),this.currentStage.addChild(s)}}close(){this.currentSelection=0,this.background.visible=!1,this.titleText.visible=!1,this.descriptionText.visible=!1,this.descriptionBackground.visible=!1;for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];this.currentStage.removeChild(e.bg),this.currentStage.removeChild(e.name),this.currentStage.removeChild(e.count)}this.menuItems=[]}handleInput(t){if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter is null");if(cl.isDown("Enter"))return $l(),t[this.currentSelection];cl.isDown("ArrowUp")&&this.currentSelection>0&&(Ql(),this.currentSelection--,this.descriptionText.text=t[this.currentSelection].description),cl.isDown("ArrowDown")&&this.currentSelection<t.length-1&&(Ql(),this.currentSelection++,this.descriptionText.text=t[this.currentSelection].description);for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];t===this.currentSelection?(e.bg.visible=!0,e.name.style=this.selectedStyle,e.count.style=this.selectedStyle):(e.bg.visible=!1,e.name.style=this.unselectedStyle,e.count.style=this.unselectedStyle)}return null}}class ou{constructor(t,e){this.pageSize=16,this.unselectedStyle={fontFamily:"monospace",fontSize:14,fill:16777215},this.selectedStyle={fontFamily:"monospace",fontSize:14,fill:0},this.currentSelection=0,this.viewport=t,this.currentStage=e;this.background=new no,this.background.lineStyle(4,10066329,1,1),this.background.beginFill(0),this.background.drawRect(0,0,t.width-8,t.height-8),this.background.endFill(),this.background.x=4,this.background.y=4,this.background.zIndex=20,this.background.visible=!1,this.titleText=new bo("Spells",{fontFamily:"monospace",fontSize:24,fill:16777215,align:"center"}),this.titleText.x=t.width/2-this.titleText.width/2,this.titleText.y=15,this.titleText.zIndex=21,this.titleText.visible=!1;const i=t.height-96-8;this.descriptionBackground=new no,this.descriptionBackground.lineStyle(4,16777215,1,1),this.descriptionBackground.beginFill(0),this.descriptionBackground.drawRect(0,0,t.width-8-8,96),this.descriptionBackground.endFill(),this.descriptionBackground.x=8,this.descriptionBackground.y=i,this.descriptionBackground.zIndex=22,this.descriptionBackground.visible=!1,this.descriptionText=new bo("",{fontFamily:"monospace",fontSize:14,fill:16777215}),this.descriptionText.x=20,this.descriptionText.y=i+15,this.descriptionText.zIndex=23,this.descriptionText.visible=!1,this.menuItems=[],this.currentStage.addChild(this.background),this.currentStage.addChild(this.titleText),this.currentStage.addChild(this.descriptionBackground),this.currentStage.addChild(this.descriptionText)}open(t){if(null===s.Game)throw new Error("Global Game object is null");this.background.visible=!0,this.titleText.visible=!0,this.descriptionText.visible=!0,this.descriptionBackground.visible=!0;const e=t[this.currentSelection];void 0!==e&&(this.descriptionText.text=e.description);for(let e=0;e<t.length;e++){const i=t[e],n=20*(e+3),r=new lo(ii.WHITE);r.width=.98*this.viewport.width,r.height=20,r.x=.01*this.viewport.width,r.y=n-3,r.zIndex=21,r.visible=!1;const o=new bo(""+i.displayName,this.unselectedStyle);o.x=.02*this.viewport.width,o.y=n,o.zIndex=22,o.visible=!0;const s=new bo("",this.unselectedStyle);switch(s.x=.55*this.viewport.width,s.y=n,s.zIndex=22,s.visible=!0,i.type){case va.DamageOther:case va.WildDamage:s.text="dmg: "+i.value;break;case va.Effect:s.text="turns: "+i.value;break;case va.HealSelf:case va.HealOther:s.text="health: "+i.value;break;case va.Push:s.text="tiles: "+i.value;break;case va.Passive:break;default:rl(i.type)}const a=new bo(`Count: ${i.count}/${i.maxCount}`,this.unselectedStyle);a.x=.85*this.viewport.width,a.y=n,a.zIndex=22,a.visible=!0,this.menuItems.push({bg:r,name:o,info:s,count:a}),this.currentStage.addChild(r),this.currentStage.addChild(o),this.currentStage.addChild(s),this.currentStage.addChild(a)}}close(){this.currentSelection=0,this.background.visible=!1,this.titleText.visible=!1,this.descriptionText.visible=!1,this.descriptionBackground.visible=!1;for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];this.currentStage.removeChild(e.bg),this.currentStage.removeChild(e.name),this.currentStage.removeChild(e.info),this.currentStage.removeChild(e.count)}this.menuItems=[]}handleInput(t){if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter is null");if(cl.isDown("Enter"))return $l(),Iu[t[this.currentSelection].id];if(cl.isDown("ArrowUp")&&this.currentSelection>0){Ql(),this.currentSelection--;const e=t[this.currentSelection];this.descriptionText.text=e.description}if(cl.isDown("ArrowDown")&&this.currentSelection<t.length-1){Ql(),this.currentSelection++;const e=t[this.currentSelection];this.descriptionText.text=e.description}for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];t===this.currentSelection?(e.bg.visible=!0,e.name.style=this.selectedStyle,e.info.style=this.selectedStyle,e.count.style=this.selectedStyle):(e.bg.visible=!1,e.name.style=this.unselectedStyle,e.info.style=this.unselectedStyle,e.count.style=this.unselectedStyle)}return null}}class su{constructor(t,e){this.unselectedStyle={fontFamily:"monospace",fontSize:14,fill:16777215},this.selectedStyle={fontFamily:"monospace",fontSize:14,fill:0},this.state="selection",this.currentSelection=0,this.currentStage=e,this.viewport=t;this.background=new no,this.background.lineStyle(4,10066329,1,1),this.background.beginFill(0),this.background.drawRect(0,0,t.width-8,t.height-8),this.background.endFill(),this.background.x=4,this.background.y=4,this.background.zIndex=20,this.background.visible=!1,this.titleText=new bo("Keybindings",{fontFamily:"monospace",fontSize:24,fill:16777215,align:"center"}),this.titleText.x=t.width/2-this.titleText.width/2,this.titleText.y=9,this.titleText.zIndex=21,this.titleText.visible=!1,this.menuItems=[],this.currentStage.addChild(this.background),this.currentStage.addChild(this.titleText)}open(t){if(null===s.Game)throw new Error("Global Game object is null");this.background.visible=!0,this.titleText.visible=!0;for(let e=0;e<t.length;e++){const i=t[e],n=20*(e+2),r=new lo(ii.WHITE);r.width=.98*this.viewport.width,r.height=20,r.x=.01*this.viewport.width,r.y=n-3,r.zIndex=21,r.visible=!1;const o=new bo(i.description,this.unselectedStyle);o.x=.05*this.viewport.width,o.y=n,o.zIndex=22,o.visible=!0;const s=new bo(i.key,this.unselectedStyle);s.x=.8*this.viewport.width,s.y=n,s.zIndex=22,s.visible=!0,this.menuItems.push({bg:r,description:o,key:s}),this.currentStage.addChild(r),this.currentStage.addChild(o),this.currentStage.addChild(s)}}close(){this.state="selection",this.currentSelection=0,this.background.visible=!1,this.titleText.visible=!1;for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];this.currentStage.removeChild(e.bg),this.currentStage.removeChild(e.description),this.currentStage.removeChild(e.key)}this.menuItems=[]}handleInput(t){if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter is null");if("selection"===this.state){if(cl.isDown("Escape"))return void $l();cl.isDown("ArrowUp")&&this.currentSelection>0&&(Ql(),this.currentSelection--),cl.isDown("ArrowDown")&&this.currentSelection<t.length-1&&(Ql(),this.currentSelection++),cl.isDown("Enter")&&($l(),this.state="change",this.menuItems[this.currentSelection].key.text="")}else if("change"===this.state){$l();const e=cl.getFirstKeyPressed();null!==e&&(t[this.currentSelection].key=e,this.menuItems[this.currentSelection].key.text=e,this.state="selection")}for(let t=0;t<this.menuItems.length;t++){const e=this.menuItems[t];t===this.currentSelection?(e.bg.visible=!0,e.description.style=this.selectedStyle,e.key.style=this.selectedStyle):(e.bg.visible=!1,e.description.style=this.unselectedStyle,e.key.style=this.unselectedStyle)}}}
/*!
 * @pixi/filter-adjustment - v3.1.0
 * Compiled Wed, 11 Mar 2020 20:38:18 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var au=function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),e=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e),this.direction=e.direction,this.red=e.red,this.green=e.green,this.blue=e.blue,this.offset=e.offset,this.fillMode=e.fillMode,this.average=e.average,this.seed=e.seed,this.minSize=e.minSize,this.sampleSize=e.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=ii.from(this._canvas,{scaleMode:z.NEAREST}),this._slices=0,this.slices=e.slices}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var r=e.filterFrame.width,o=e.filterFrame.height;this.uniforms.dimensions[0]=r,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/r,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,i,n)},e.prototype._randomizeSizes=function(){var t=this._sizes,e=this._slices-1,i=this.sampleSize,n=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var r=this._slices,o=1,s=0;s<e;s++){var a=o/(r-s),l=Math.max(a*(1-.6*Math.random()),n);t[s]=l,o-=l}t[e]=o}else{for(var u=1,h=Math.sqrt(1/this._slices),c=0;c<e;c++){var d=Math.max(h*u*Math.random(),n);t[c]=d,u-=d}t[e]=u}this.shuffle()},e.prototype.shuffle=function(){for(var t=this._sizes,e=this._slices-1;e>0;e--){var i=Math.random()*e>>0,n=t[e];t[e]=t[i],t[i]=n}},e.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var t,e=this.sampleSize,i=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);for(var r=0,o=0;o<this._slices;o++){t=Math.floor(256*this._offsets[o]);var s=this._sizes[o]*e,a=t>0?t:0,l=t<0?-t:0;n.fillStyle="rgba("+a+", "+l+", 0, 1)",n.fillRect(0,r>>0,e,s+1>>0),r+=s}i.baseTexture.update(),this.uniforms.displacementMap=i},i.sizes.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._sizes[i]=t[i]},i.sizes.get=function(){return this._sizes},i.offsets.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._offsets[i]=t[i]},i.offsets.get=function(){return this._offsets},i.slices.get=function(){return this._slices},i.slices.set=function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},i.direction.get=function(){return this._direction},i.direction.set=function(t){if(this._direction!==t){this._direction=t;var e=t*Yt;this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e)}},i.red.get=function(){return this.uniforms.red},i.red.set=function(t){this.uniforms.red=t},i.green.get=function(){return this.uniforms.green},i.green.set=function(t){this.uniforms.green=t},i.blue.get=function(){return this.uniforms.blue},i.blue.set=function(t){this.uniforms.blue=t},e.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(e.prototype,i),e}(on);au.TRANSPARENT=0,au.ORIGINAL=1,au.LOOP=2,au.CLAMP=3,au.MIRROR=4;
/*!
 * @pixi/filter-glow - v3.2.0
 * Compiled Wed, 23 Dec 2020 00:29:02 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var lu=function(t){function e(i){var n=Object.assign({},e.defaults,i),r=n.distance,o=n.outerStrength,s=n.innerStrength,a=n.color,l=n.knockout,u=n.quality;r=Math.round(r),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/u/r).toFixed(7)).replace(/__DIST__/gi,r.toFixed(0)+".0")),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:a,outerStrength:o,innerStrength:s,padding:r,knockout:l})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={color:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0},knockout:{configurable:!0}};return i.color.get=function(){return dt(this.uniforms.glowColor)},i.color.set=function(t){ut(t,this.uniforms.glowColor)},i.outerStrength.get=function(){return this.uniforms.outerStrength},i.outerStrength.set=function(t){this.uniforms.outerStrength=t},i.innerStrength.get=function(){return this.uniforms.innerStrength},i.innerStrength.set=function(t){this.uniforms.innerStrength=t},i.knockout.get=function(){return this.uniforms.knockout},i.knockout.set=function(t){this.uniforms.knockout=t},Object.defineProperties(e.prototype,i),e}(on);lu.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1};
/*!
 * @pixi/filter-godray - v3.2.0
 * Compiled Wed, 23 Dec 2020 00:29:02 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var uu=function(t){function e(i,n,r){void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=.1);var o=Math.max(r*e.MAX_SAMPLES,e.MIN_SAMPLES),s=(2*Math.PI/o).toFixed(7);t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,s)),this.uniforms.thickness=new Float32Array([0,0]),this.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(this,{thickness:i,color:n,quality:r})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={color:{configurable:!0},thickness:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.thickness[0]=this._thickness/e._frame.width,this.uniforms.thickness[1]=this._thickness/e._frame.height,t.applyFilter(this,e,i,n)},i.color.get=function(){return dt(this.uniforms.outlineColor)},i.color.set=function(t){ut(t,this.uniforms.outlineColor)},i.thickness.get=function(){return this._thickness},i.thickness.set=function(t){this._thickness=t,this.padding=t},Object.defineProperties(e.prototype,i),e}(on);uu.MIN_SAMPLES=1,uu.MAX_SAMPLES=100;
/*!
 * pixi-filters - v3.2.2
 * Compiled Wed, 30 Dec 2020 19:07:56 UTC
 *
 * pixi-filters is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
class hu extends l.System{init(){this.graphicsQuery=this.createQuery().fromAll(Jh,$h).not("input").persist()}draw(t,e,i){if(null===s.Game)throw new Error("global Game object is null");if(e.tilePosition.y>=s.Game.map.height||e.tilePosition.x>=s.Game.map.width)throw new Error(`Object ${e.entity.id} exists outside the game world`);if(hh(s.Game.map,e.tilePosition)&&null!==i.sprite){i.sprite.visible=!0;const{x:n,y:r}=s.Game.gameCamera.worldPositionToScreen(e.worldPosition);i.sprite.position.set(n,r),i.sprite.scale.set(s.Game.gameCamera.zoom,s.Game.gameCamera.zoom);const o=t.getOne(xc),a=t.getOne(wc);void 0!==o&&!0===o.onFire?i.sprite.tint=16711680:void 0!==a&&!0===a.wet?i.sprite.tint=255:i.sprite.tint=16777215,i.sprite.alpha=i.opacity,i.sprite.zIndex=i.zIndex}else null!==i.sprite&&(i.sprite.visible=!1)}drawAfterSeen(t,e){if(null===s.Game)throw new Error("global Game object is null");if(t.tilePosition.y>s.Game.map.height||t.tilePosition.x>s.Game.map.width)throw new Error(`Object ${t.entity.id} exists outside the game world`);if(s.Game.map.visibilityData[t.tilePosition.y][t.tilePosition.x].explored&&null!==e.sprite){e.sprite.visible=!0;const{x:i,y:n}=s.Game.gameCamera.tilePositionToScreen(t.tilePosition);e.sprite.position.set(i,n),e.sprite.scale.set(s.Game.gameCamera.zoom,s.Game.gameCamera.zoom),e.sprite.alpha=e.opacity,e.sprite.zIndex=e.zIndex,hh(s.Game.map,t.tilePosition)?e.sprite.tint=16777215:e.sprite.tint=10066329}else null!==e.sprite&&(e.sprite.visible=!1)}update(){if(null===s.Game)throw new Error("Global game is null");const t=this.graphicsQuery.execute();for(const e of t){const t=e.getOne(Jh),i=e.getOne($h);if(void 0===t||void 0===i)throw new Error("missing data for draw system for "+e.id);!0===e.tags.has("drawAfterSeen")?this.drawAfterSeen(i,t):this.draw(e,i,t)}}}class cu extends l.System{init(){this.chestGraphics=this.createQuery().fromAll(Jh,tc,ic).persist()}update(){const t=this.chestGraphics.execute();for(const e of t){const t=e.getOne(Jh),i=e.getOne(tc);if(void 0===t||null===t.sprite||void 0===i)throw new Error("Missing graphics data on chest");0===e.getOne(ic).inventory.size?t.sprite.texture=s.Game.textureAtlas[i.openTextureKey]:t.sprite.texture=s.Game.textureAtlas[i.closedTextureKey]}}}function du(t,e,i){const n=[];for(let r=-t;r<t;r++){const o=Math.round(Math.sqrt(t*t-r*r));for(let t=-o;t<o;t++)n.push(new gh(e+r,i+t))}return n}function pu(t,e,i){const n=[];if(null===e)return[];if(null===t)return n.push(new gh(e.x,e.y)),n;if(void 0!==t.areaOfEffect){if("rectangle"===t.areaOfEffect.type)for(let r=0;r<t.areaOfEffect.width;r++)for(let o=0;o<t.areaOfEffect.height;o++)switch(i){case 0:n.push(new gh(e.x+r,e.y-Math.floor(t.areaOfEffect.height/2)+o));break;case 90:n.push(new gh(e.x-Math.floor(t.areaOfEffect.height/2)+o,e.y+r));break;case 180:n.push(new gh(e.x+r,e.y+Math.floor(t.areaOfEffect.height/2)-o));break;case 270:n.push(new gh(e.x+Math.floor(t.areaOfEffect.height/2)-o,e.y+r))}else if("circle"===t.areaOfEffect.type)return du(t.areaOfEffect.radius,e.x,e.y)}else n.push(new gh(e.x,e.y));return n}class fu extends l.System{init(){this.query=this.createQuery().fromAll($h,ic,"input").persist(),this.pathFilter=new lu({color:16514816,innerStrength:2,outerStrength:0}),this.targetFilter=new lu({color:16711680,innerStrength:2,outerStrength:0}),this.perviousPath=[]}update(){var t,e,i,n,r;if(null===s.Game)throw new Error("Global game is null");const o=this.query.execute();for(const a of o){const o=a.getOne($h),l=a.getOne(_c),u=Wc(this.world,s.Game.entityMap,a),h=a.getOne(Jh);if(null===u||void 0===l||void 0===h||null===h.sprite)throw new Error("Player missing speed or input data");if(hh(s.Game.map,o.tilePosition)){h.sprite.visible=!0;const{x:c,y:d}=s.Game.gameCamera.worldPositionToScreen(o.worldPosition);h.sprite.position.set(c,d),h.sprite.scale.set(s.Game.gameCamera.zoom,s.Game.gameCamera.zoom);const p=a.getOne(xc),f=a.getOne(wc);void 0!==p&&!0===p.onFire?h.sprite.tint=16711680:void 0!==f&&!0===f.wet?h.sprite.tint=255:h.sprite.tint=16777215,h.sprite.alpha=h.opacity,h.sprite.zIndex=h.zIndex;for(let t=0;t<this.perviousPath.length;t++){const e=this.perviousPath[t];null!==e.texture&&(e.filters=[])}if(l.state===Mh.Combat&&s.Game.currentActor===a.id&&0===s.Game.commandQueue.length){const t=cl.getMousePosition();if(null===t)return;if(!s.Game.map.visibilityData[t.y][t.x].explored)return;const e=2*u.maxTilesPerMove;if(yh(o.tilePosition,t)<e){const e=Lh(this.world,s.Game.map,s.Game.entityMap,o.tilePosition,t,u.maxTilesPerMove);if(0===e.length)return;t:for(let t=0;t<e.length;t++){const i=e[t],n=fh(this.world,s.Game.entityMap,i);for(let t=0;t<n.length;t++)if(n[t].tags.has("environmentTile")){const e=n[t].getOne(Jh);if(void 0!==e&&null!==e.sprite){e.sprite.filters=[this.pathFilter],this.perviousPath.push(e.sprite);continue t}}const r=wh(s.Game.map,i),o=s.Game.map.data[r][i.y][i.x].sprite;this.perviousPath.push(o),o.filters=[this.pathFilter]}}}else if(l.state===Mh.Target&&s.Game.currentActor===a.id&&0===s.Game.commandQueue.length){const o=cl.getMousePosition(),u=a.getOne($h).tilePosition,h=null!==(n=null!==(e=null===(t=l.spellForTarget)||void 0===t?void 0:t.range)&&void 0!==e?e:null===(i=l.itemForTarget)||void 0===i?void 0:i.range)&&void 0!==n?n:1/0;if(null!==o&&yh(o,u)<=h){const t=pu(null!==(r=l.spellForTarget)&&void 0!==r?r:l.itemForTarget,o,l.reticleRotation);t:for(let e=0;e<t.length;e++){const i=fh(this.world,s.Game.entityMap,t[e]);for(let t=0;t<i.length;t++)if(i[t].tags.has("environmentTile")){const e=i[t].getOne(Jh);if(void 0!==e&&null!==e.sprite){e.sprite.filters=[this.targetFilter],this.perviousPath.push(e.sprite);continue t}}const n=wh(s.Game.map,t[e]),r=s.Game.map.visibilityData[t[e].y][t[e].x].visible;if(t[e].x>=s.Game.map.width||t[e].y>=s.Game.map.height||!r)return;const o=s.Game.map.data[n][t[e].y][t[e].x].sprite;this.perviousPath.push(o),o.filters=[this.targetFilter]}}}}else h.sprite.visible=!1}}}function mu(t,e){if(null===t.value)throw new Error("Item does not have a healing value");const i=e.getOne(Zh),n=Hc(e);if(null===n)throw new Error(`Trying to heal entity ${e.id} without any hp data`);return n.hp>=n.maxHp?("player"===e.id?nu("You are already at full health."):nu(i.name+" tries and fails to take a health potion"),!1):(Kc(e.getOne(nc),t.value),"player"===e.id?nu(`You are healed for ${t.value} hp.`):nu(`${i.name} is healed for ${t.value} hp.`),!0)}function gu(t,e,i){var n,r,o;const a=t.getOne(Zh),l=t.getOne(xc),u=t.getOne(wc),h=t.getOne(bc),c=t.tags.has("blocks");if(void 0===l)return t.id===(null===(n=s.Game)||void 0===n?void 0:n.playerId)?nu("You were not set on fire because you're immune",iu.StatusEffect):void 0!==a&&nu(a.name+" was not set on fire because it is immune",iu.StatusEffect),!1;if(void 0!==u&&u.wet)return u.wet=!1,u.turnsLeft=0,u.update(),t.id===(null===(r=s.Game)||void 0===r?void 0:r.playerId)?nu("You were not set on fire because you were wet",iu.StatusEffect):void 0!==a&&nu(a.name+" was not set on fire because it was wet",iu.StatusEffect),!1;if(void 0!==h&&h.frozen)return void 0!==u&&(u.wet=!0,u.turnsLeft=h.turnsLeft,u.update()),h.frozen=!1,h.turnsLeft=0,h.update(),t.id===(null===(o=s.Game)||void 0===o?void 0:o.playerId)?nu("You were not set on fire because you were frozen",iu.StatusEffect):void 0!==a&&nu(a.name+" was not set on fire because it was frozen",iu.StatusEffect),!1;!1!==l.onFire||c||(t.addComponent({type:"TriggerTypeComponent",currentTriggerType:xa.Fire,initialTriggerType:xa.Fire}),t.addComponent({type:"FireTriggerComponent",effectTurns:5,effectDamage:5,damage:15})),t.tags.has("sentient")?l.turnsLeft=null!=i?i:il(3,6):l.turnsLeft=1e3;const d=t.getOne(nc);if(l.fireDamage=void 0!==e?e:void 0!==d?Math.max(1,Math.round(.0625*d.maxHp)):3,l.onFire=!0,l.update(),t.id===s.Game.playerId)nu("You are now on fire",iu.StatusEffect);else if(t.tags.has("sentient")){const e=t.getOne(Zh);if(void 0===e)throw new Error("Undefined display name on "+t.id);nu(e.name+" is now on fire",iu.StatusEffect)}return!0}function yu(t,e){var i;const n=t.getOne(xc);void 0!==n&&n.onFire&&(n.onFire=!1,n.turnsLeft=0,n.fireDamage=0,n.update(),t.id===(null===(i=s.Game)||void 0===i?void 0:i.playerId)&&nu("The water doused you",iu.StatusEffect)),void 0===e&&(e=10);const r=t.getOne(wc);return void 0!==r&&(!1===r.wet||r.turnsLeft<e)&&(r.wet=!0,r.turnsLeft=e,r.update(),!0)}function vu(t,e){var i;const n=t.getOne(Sc);if(void 0===n)return!1;if(e=null!=e?e:il(2,4),n.stunned&&n.turnsLeft>=e)return!1;if(n.stunned&&n.turnsLeft<e)return n.turnsLeft=null!=e?e:0,n.update(),!0;if(n.stunned=!0,n.turnsLeft=e,n.update(),t.id===(null===(i=s.Game)||void 0===i?void 0:i.playerId))nu("You are stunned!",iu.StatusEffect);else{const e=t.getOne(Zh);if(void 0===e)throw new Error("Undefined display name on "+t.id);nu(e.name+" is now stunned",iu.StatusEffect)}return!0}function _u(t,e){var i,n;const r=t.getOne(Zh),o=t.getOne(Ec),a=t.getOne(xc);if(void 0!==a&&a.onFire)return a.onFire=!1,a.turnsLeft=0,a.fireDamage=0,a.update(),t.id===(null===(i=s.Game)||void 0===i?void 0:i.playerId)?nu("Instead of being frozen, the fire was extinguished"):void 0!==r&&nu(`Instead of ${r.name} being frozen, it is no longer on fire`),void 0!==o&&o.currentTriggerType===xa.Fire&&(t.removeComponent("TriggerTypeComponent"),t.removeComponent("FireTriggerComponent")),!1;const l=t.getOne(bc);if(void 0!==l&&(!1===l.frozen||l.turnsLeft<e)){l.frozen=!0,l.turnsLeft=e,l.update(),t.id===(null===(n=s.Game)||void 0===n?void 0:n.playerId)?nu("You are frozen",iu.StatusEffect):void 0!==r&&t.tags.has("sentient")&&nu(r.name+" is now frozen",iu.StatusEffect),void 0===o||o.currentTriggerType!==xa.DeepWater&&o.currentTriggerType!==xa.ShallowWater&&o.currentTriggerType!==xa.Mud||(o.currentTriggerType=xa.Ice,o.update());const i=t.getOne(Jh);return void 0!==i&&null!==i.sprite&&null!==l.textureKey?i.sprite.texture=s.Game.textureAtlas[l.textureKey]:void 0!==i&&null!==i.sprite&&null===l.textureKey&&(i.sprite.texture=s.Game.textureAtlas[i.textureKey]),!0}return!1}function bu(t,e,i,n){if(void 0!==t.statusEffect&&Ta.a.getUniform()<=i.ailmentSusceptibility)switch(t.statusEffect){case _a.OnFire:gu(e,Math.round(.0625*n.maxHp),il(3,6));break;case _a.Frozen:throw new Error("Not implemented");case _a.Stunned:vu(e,il(2,4));break;default:rl(t.statusEffect)}}function xu(t,e,i,n,r,o){var s,a,l;if(null===t.value)throw new Error("Item does not have a value for castDamageSpell");const u=Vh(i,n,r,o);if(null===u)return nu("Canceled casting"),!1;const h=u.getOne(Zh);if(void 0===u.getOne(nc)&&void 0!==h)return nu(h.name+" isn't attack-able"),!1;if(t.damageType===pa.Electric){if(fh(i,r,o).filter(t=>t.tags.has("waterTile")).length>0){const e=function(t){const e=[],n=new Map;n.set(`${t.x},${t.y}`,t);const o=new Set;for(;n.size>0;){const t=n.values().next().value;o.add(`${t.x},${t.y}`),n.delete(`${t.x},${t.y}`);const s=fh(i,r,t),a=s.filter(t=>t.tags.has("waterTile")),l=s.filter(t=>void 0!==t.getOne(nc));a.length>0&&e.push(...l);for(let e=0;e<Ya[4].length;e++){const s=Ya[4][e],a=new gh(t.x+s[0],t.y+s[1]),l=`${a.x},${a.y}`;if(o.has(l))continue;fh(i,r,a).filter(t=>t.tags.has("waterTile")).length>0&&n.set(l,a)}}return e}(o);for(let n=0;n<e.length;n++)Vc(i,r,e[n],t.value,!1,null!==(s=t.damageType)&&void 0!==s?s:pa.Physical)}else Vc(i,r,u,t.value,!1,null!==(a=t.damageType)&&void 0!==a?a:pa.Physical)}else Vc(i,r,u,t.value,!1,null!==(l=t.damageType)&&void 0!==l?l:pa.Physical);const c=Xc(i,r,u),d=Hc(u);return null===c||null===d||bu(t,u,c,d),!0}function wu(t,e,i,n,r,o){if(null===t.value)throw new Error("Item does not have a value");const s=Vh(i,n,r,o);if(null===s)return nu("Canceled casting"),!1;if(void 0===s.getOne(dc))return nu("Canceled casting"),!1;s.addComponent({type:"ConfusedAIComponent",turnsLeft:t.value});const a=s.getOne(Zh);if(void 0===a)throw new Error("Undefined display name on "+s.id);return nu(a.name+" is now confused"),!0}function Tu(){if(null===s.Game)throw new Error("Global game object is null");return nu("You have been granted Clairvoyance"),bh(s.Game.map),!0}function Su(t,e){if(null===t.value)throw new Error("Item does not have a value");const i=e.getComponents(sc);for(const t of i)if("Haste"===t.name)return nu("You are already hasted"),!1;return e.addComponent({type:"SpeedEffectComponent",name:"Haste",stat:"speed",modifierType:"multiply",turnsLeft:t.value,value:2}),!0}function Eu(t,e,i,n,r,o){if(null===t.value)throw new Error("Item does not have a value");const s=Vh(i,n,r,o);if(null===s)return nu("Canceled casting"),!1;const a=s.getOne(oc),l=s.getOne(Zh);if(void 0===l)throw new Error(s.id+" is missing a display name");if(void 0===a)return nu(l.name+" isn't slow-able"),!1;const u=s.getComponents(sc);for(const t of u)if("Slow"===t.name)return nu(l.name+" is already slowed"),!1;return nu("Spell hits and slows "+l.name),s.addComponent({type:"SpeedEffectComponent",name:"Slow",stat:"speed",modifierType:"multiply",turnsLeft:t.value,value:.5}),!0}function Cu(t,e,i,n,r,o,a,l){if(null===s.Game)throw new Error("Global game object is null");if(void 0===t.areaOfEffect)throw new Error("areaOfEffect cannot be null for castWall");const u=pu(t,o,a);for(let t=0;t<u.length;t++){const{blocks:e,entity:o}=mh(i,n,r,u[t]);!0===e&&null===o||Nc(i,s.Game.textureAtlas,l,u[t])}return!0}const Pu={health_potion_weak:{id:"health_potion_weak",displayName:"Weak Potion of Healing",description:"Potion that restores a small amount of health",value:25,type:ya.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},health_potion:{id:"health_potion",displayName:"Potion of Healing",description:"Potion that restores a some health",value:50,type:ya.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},health_potion_strong:{id:"health_potion_strong",displayName:"Strong Potion of Healing",description:"Potion that restores a large amount of health",value:100,type:ya.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},lightning_scroll_weak:{id:"lightning_scroll_weak",displayName:"Weak Scroll of Lightning Bolt",description:"Conjure a lightning bolt that damages a target with lightning damage",value:20,type:ya.DamageScroll,damageType:pa.Electric,range:9,useFunc:xu,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},lightning_scroll:{id:"lightning_scroll",displayName:"Scroll of Lightning",description:"Conjure a lightning bolt that damages a target with lightning damage",value:50,type:ya.DamageScroll,damageType:pa.Electric,useFunc:xu,range:9,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},lightning_scroll_strong:{id:"lightning_scroll_strong",displayName:"Strong Scroll of Lightning",description:"Conjure a lightning bolt that damages a target with lightning damage",value:100,type:ya.DamageScroll,damageType:pa.Electric,useFunc:xu,range:9,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},fireball_scroll_weak:{id:"fireball_scroll_weak",displayName:"Weak Scroll of Fire",description:"Conjure a ball of fire that damages a target with fire damage",value:20,type:ya.DamageScroll,damageType:pa.Fire,range:9,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},fireball_scroll:{id:"fireball_scroll",displayName:"Scroll of Fire",description:"Conjure a ball of fire that damages a target with fire damage",value:50,type:ya.DamageScroll,damageType:pa.Fire,range:9,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},fireball_scroll_strong:{id:"fireball_scroll_strong",displayName:"Strong Scroll of Fire",description:"Conjure a ball of fire that damages a target with fire damage",value:100,type:ya.DamageScroll,damageType:pa.Fire,range:9,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},lightning_scroll_weak_wild:{id:"lightning_scroll_weak_wild",displayName:"Weak Scroll of Wild Lightning",description:"Summons a lightning bolt that's beyond your control and attacks randomly with lightning damage",value:50,type:ya.WildDamageScroll,damageType:pa.Electric,useFunc:xu,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},lightning_scroll_wild:{id:"lightning_scroll_wild",displayName:"Scroll of Wild Lightning",description:"Summons a lightning bolt that's beyond your control and attacks randomly with lightning damage",value:100,type:ya.WildDamageScroll,damageType:pa.Electric,useFunc:xu,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},lightning_scroll_strong_wild:{id:"lightning_scroll_strong_wild",displayName:"Strong Scroll of Wild Lightning",description:"Summons a lightning bolt that's beyond your control and attacks randomly with lightning damage",value:150,type:ya.WildDamageScroll,damageType:pa.Electric,useFunc:xu,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},fireball_scroll_weak_wild:{id:"fireball_scroll_weak_wild",displayName:"Weak Scroll of Wild Fire",description:"Summons a ball of fire that's beyond your control and attacks randomly with fire damage",value:50,type:ya.WildDamageScroll,damageType:pa.Fire,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},fireball_scroll_wild:{id:"fireball_scroll_wild",displayName:"Scroll of Wild Fire",description:"Summons a ball of fire that's beyond your control and attacks randomly with fire damage",value:100,type:ya.WildDamageScroll,damageType:pa.Fire,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},fireball_scroll_strong_wild:{id:"fireball_scroll_strong_wild",displayName:"Strong Scroll of Wild Fire",description:"Summons a ball of fire that's beyond your control and attacks randomly with fire damage",value:150,type:ya.WildDamageScroll,damageType:pa.Fire,useFunc:xu,statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},confuse_scroll:{id:"confuse_scroll",displayName:"Scroll of Confuse Enemy",description:"Your target loses control of their actions",value:8,type:ya.ConfuseScroll,useFunc:wu,effect:"particles",particles:{particleLocation:"target",particleImages:["particle_star"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#eaff00",end:"#eaff00"},emitterLifetime:1,frequency:.057,lifetime:{min:.3,max:.4},maxParticles:500,maxSpeed:0,noRotation:!1,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:.8,end:.6,minimumScaleMultiplier:.5},spawnCircle:{x:8,y:8,r:30},spawnType:"circle",speed:{start:0,end:0,minimumSpeedMultiplier:1},startRotation:{min:0,max:360}}}},clairvoyance_scroll:{id:"clairvoyance_scroll",displayName:"Scroll of Clairvoyance",description:"Use sensory magics to learn the layout of the whole map",value:null,type:ya.ClairvoyanceScroll,useFunc:Tu},haste_potion_weak:{id:"haste_potion_weak",displayName:"Weak Potion of Haste",description:"Haste gives you more actions per turn",value:5,type:ya.HasteSelf,useFunc:Su,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_arrow_up"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:1},blendMode:"normal",color:{start:"#4BA86D",end:"#4BA86D"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:50,end:200,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},slow_poison_weak:{id:"slow_poison_weak",displayName:"Weak Poison of Slow",description:"Only allow your target to take one action per two turns",value:5,type:ya.SlowOther,useFunc:Eu,effect:"particles",particles:{particleLocation:"target",particleImages:["particle_arrow_up"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:1},blendMode:"normal",color:{start:"#B760A6",end:"#B760A6"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:1},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:-16,w:20,h:0},spawnType:"rect",speed:{start:100,end:10,minimumSpeedMultiplier:1},startRotation:{min:90,max:90}}}}},Iu={lightning_bolt:{id:"lightning_bolt",displayName:"Lightning Bolt",description:"Send a bolt of lighting hurtling towards your foes. Deals electric damage.",baseCastCount:10,value:20,type:va.DamageOther,damageType:pa.Electric,range:9,useFunc:xu,effect:"lightning",lightning:{duration:500,segments:20,strikes:1,fadeOut:300}},wild_lightning_bolt:{id:"wild_lightning_bolt",displayName:"Wild Lightning Bolt",description:"Summons a lightning bolt that's beyond your control and attacks a random target within 10 spaces. Deals lightning damage",baseCastCount:10,value:30,type:va.WildDamage,damageType:pa.Electric,useFunc:xu,effect:"lightning",lightning:{duration:300,segments:20,strikes:2,fadeOut:400}},fireball:{id:"fireball",displayName:"Fireball",description:"Hurl a ball of fire towards a specific spot that deals fire damage and has a chance to catch targets on fire. Explodes in a large radius, possibly dealing self-damage or friendly fire",baseCastCount:3,value:20,type:va.DamageOther,damageType:pa.Fire,range:10,useFunc:function(t,e,i,n,r,o,s){var a;if(null===t.value)throw new Error("Item does not have a value for castFireBall");if(null===Vh(i,n,r,o))return nu("Canceled casting"),!1;const l=pu(t,o,s);for(let e=0;e<l.length;e++){const{entity:o}=mh(i,n,r,l[e]);if(null!==o){if(void 0!==o.getOne(nc))if(t.statusEffect!==_a.OnFire||o.tags.has("sentient")){Vc(i,r,o,t.value,!1,null!==(a=t.damageType)&&void 0!==a?a:pa.Physical);const e=Xc(i,r,o),n=Hc(o);null!==e&&null!==n&&bu(t,o,e,n)}else gu(o)}}return!0},areaOfEffect:{type:"circle",radius:3},statusEffect:_a.OnFire,effect:"particles",particles:{particleImages:["particle_cloud"],particleLocation:"target",particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.84,end:.4},angleStart:0,blendMode:"normal",color:{start:"#f7a134",end:"#fa0303"},emitterLifetime:.35,frequency:.04,lifetime:{min:.3,max:.35},maxParticles:80,maxSpeed:0,noRotation:!1,particleSpacing:0,particlesPerWave:40,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:1,end:.3,minimumScaleMultiplier:1},spawnType:"burst",speed:{start:200,end:100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},confuse:{id:"confuse",displayName:"Confuse",description:"Your target loses control of their actions for the given number of turns",baseCastCount:2,value:8,type:va.DamageOther,useFunc:wu,effect:"particles",particles:{particleLocation:"target",particleImages:["particle_star"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#eaff00",end:"#eaff00"},emitterLifetime:1,frequency:.057,lifetime:{min:.3,max:.4},maxParticles:500,maxSpeed:0,noRotation:!1,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:.8,end:.6,minimumScaleMultiplier:.5},spawnCircle:{x:8,y:8,r:30},spawnType:"circle",speed:{start:0,end:0,minimumSpeedMultiplier:1},startRotation:{min:0,max:360}}}},clairvoyance:{id:"clairvoyance",displayName:"Clairvoyance",description:"Use sensory magics to learn the layout of the whole map.",baseCastCount:10,value:null,type:va.Passive,useFunc:Tu},lesser_heal:{id:"lesser_heal",displayName:"Lesser Heal",description:"Heals a small amount of hit points",baseCastCount:5,value:25,type:va.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},heal:{id:"heal",displayName:"Heal",description:"Heals a good amount of health",baseCastCount:10,value:50,type:va.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1.5,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},greater_heal:{id:"greater_heal",displayName:"Greater Heal",description:"Gives a large amount of health",baseCastCount:10,value:100,type:va.HealSelf,useFunc:mu,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1.8,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},heal_other:{id:"heal_other",displayName:"Heal Other",description:"Heals someone else for a small amount of hit points",baseCastCount:10,value:25,type:va.HealOther,useFunc:function(t,e,i,n,r,o){if(null===t.value)throw new Error("Item does not have a value for castDamageSpell");const s=Vh(i,n,r,o);if(null===s)return nu("Canceled casting"),!1;const a=s.getOne(Zh),l=s.getOne(nc);return void 0===l?(nu(a.name+" isn't healable"),!1):(Kc(l,t.value),!0)},effect:"particles",particles:{particleLocation:"target",particleImages:["particle_health_cross"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:.8},blendMode:"normal",color:{start:"#C66527",end:"#C66527"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.7,end:.3,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:100,end:100,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},lesser_haste:{id:"lesser_haste",displayName:"Lesser Haste",description:"You can make two actions for every one turn for the given number of turns.",baseCastCount:10,value:10,type:va.Effect,useFunc:Su,effect:"particles",particles:{particleLocation:"self",particleImages:["particle_arrow_up"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:1},blendMode:"normal",color:{start:"#4BA86D",end:"#4BA86D"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:.3},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:16,w:20,h:0},spawnType:"rect",speed:{start:50,end:200,minimumSpeedMultiplier:1},startRotation:{min:270,max:270}}}},lesser_slow:{id:"lesser_slow",displayName:"Lesser Slow",description:"Only allow your target to take one action per two turns",baseCastCount:10,value:10,type:va.DamageOther,range:9,useFunc:Eu,effect:"particles",particles:{particleLocation:"target",particleImages:["particle_arrow_up"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:1,end:1},blendMode:"normal",color:{start:"#B760A6",end:"#B760A6"},emitterLifetime:1,frequency:.077,lifetime:{min:.2,max:1},maxParticles:500,maxSpeed:0,noRotation:!0,pos:{x:0,y:0},rotationSpeed:{min:0,max:20},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},spawnRect:{x:-3,y:-16,w:20,h:0},spawnType:"rect",speed:{start:100,end:10,minimumSpeedMultiplier:1},startRotation:{min:90,max:90}}}},fire_wall:{id:"fire_wall",displayName:"Wall of Fire",description:"Conjure a wall of flame that damages all who walk through it",baseCastCount:10,value:10,type:va.DamageOther,damageType:pa.Fire,range:9,areaOfEffect:{type:"rectangle",width:1,height:6},useFunc:function(t,e,i,n,r,o,s){return Cu(t,0,i,n,r,o,s,"fire_effect")}},ice_wall:{id:"ice_wall",displayName:"Wall of Ice",description:"Conjure a wall of ice that blocks foe's path",baseCastCount:10,value:null,type:va.DamageOther,range:9,areaOfEffect:{type:"rectangle",width:1,height:6},useFunc:function(t,e,i,n,r,o,s){return Cu(t,0,i,n,r,o,s,"ice_wall")}},combust:{id:"combust",displayName:"Combust",description:"Doesn't do much damage, but is guaranteed to light something on fire",baseCastCount:3,value:5,type:va.DamageOther,range:11,useFunc:function(t,e,i,n,r,o){if(o.x>=n.width||o.y>=n.height||!1===n.visibilityData[o.y][o.x].visible)return nu("Canceled casting"),!1;const a=fh(i,r,o).sort((t,e)=>{const i=t.getOne(dc),n=e.getOne(dc);return void 0!==i&&void 0===n?-1:void 0===i&&void 0===n?0:void 0===i&&void 0!==n||void 0!==i&&void 0!==n?1:-1})[0];if(void 0===a)return nu("Canceled casting"),!1;if(a.tags.has("waterTile")){for(let t=-5;t<5;t++){const e=Math.round(Math.sqrt(25-t*t));for(let n=-e;n<e;n++)Nc(i,s.Game.textureAtlas,"steam",new gh(o.x+t,o.y+n))}const t=a.getOne(Qh);void 0!==t&&"puddle"===t.entityType&&Bc(i,a)}else gu(a);return!0},effect:"particles",particles:{particleLocation:"target",particleImages:["particle_cloud","particle_fire"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.62,end:0},blendMode:"normal",color:{start:"#fff191",end:"#ff622c"},emitterLifetime:.5,frequency:.001,lifetime:{min:.05,max:.1},maxParticles:1e3,maxSpeed:0,noRotation:!1,pos:{x:8,y:8},rotationSpeed:{min:50,max:50},scale:{start:.2,end:1,minimumScaleMultiplier:1},spawnCircle:{x:0,y:0,r:10},spawnType:"circle",speed:{start:500,end:500,minimumSpeedMultiplier:1},startRotation:{min:265,max:275}}}},rain:{id:"rain",displayName:"Rain",description:"Calls a storm which makes everything wet",baseCastCount:10,value:15,type:va.Passive,useFunc:function(t,e,i,n,r){if(null===s.Game)throw new Error("Global game object cannot be null");if(null===t.value)throw new Error("value cannot be null for castRain");const o=i.entities.values();for(const e of o)yu(e,t.value);for(let t=0;t<30;t++){const t=vh(i,n,r);Nc(i,s.Game.textureAtlas,"puddle",t)}return!0},effect:"particles",particles:{particleLocation:"self",particleImages:["particle_cloud"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!1,alpha:{start:.4,end:.5},blendMode:"normal",color:{start:"#7e82fc",end:"#321fff"},emitterLifetime:2,frequency:.002,lifetime:{min:.81,max:.81},maxParticles:1e3,maxSpeed:0,noRotation:!1,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:.3,end:.3,minimumScaleMultiplier:1},spawnRect:{x:-600,y:-460,w:900,h:20},spawnType:"rect",speed:{start:800,end:800,minimumSpeedMultiplier:1},startRotation:{min:65,max:65}}}},silence:{id:"silence",displayName:"Silence",description:"Removes the target's ability to cast spells for a number of turns",baseCastCount:10,value:3,type:va.DamageOther,useFunc:function(t,e,i,n,r,o){if(null===t.value)throw new Error("Item does not have a value for castSilence");const s=Vh(i,n,r,o);if(null===s)return nu("Canceled casting"),!1;const a=s.getOne(Zh),l=s.getOne(cc),u=s.getOne(Tc);return void 0===u?(nu(a.name+" is immune to silence effects"),!1):void 0===l?(nu(a.name+" cannot be silenced because it doesn't know any spells"),!1):(nu(a.name+" is silenced"),u.silenced=!0,u.turnsLeft=t.value,u.update(),!0)},effect:"particles",particles:{particleLocation:"target",particleImages:["particle_cloud"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!0,alpha:{start:.74,end:.2},blendMode:"normal",color:{start:"#00bd19",end:"#171414"},emitterLifetime:1,frequency:.017,lifetime:{min:.2,max:.2},maxParticles:100,maxSpeed:0,noRotation:!1,pos:{x:0,y:0},rotationSpeed:{min:0,max:0},scale:{start:.8,end:.2,minimumScaleMultiplier:1},spawnCircle:{x:8,y:8,r:20,minR:20},spawnType:"ring",speed:{start:-100,end:-100,minimumSpeedMultiplier:1},startRotation:{min:0,max:0}}}},exhale:{id:"exhale",displayName:"Exhale",description:"Send out a burst of air from your body in all directions, pushing away anything that's too close and stunning enemies. Enemies which slam into objects take physical damage.",baseCastCount:10,value:4,type:va.Push,useFunc:function(t,e,i,n,r){if(null===t.value)throw new Error("Item has missing data");const o=e.getOne($h);if(void 0===o)throw new Error("can't call castExhale with a user without a position");for(let t=0;t<Ya[8].length;t++){const e=Ya[8][t],{entity:a}=mh(i,n,r,new gh(o.tilePosition.x+e[0],o.tilePosition.y+e[1]));null!==a&&a.tags.has("moveable")&&s.Game.commandQueue.push(new Bh(a.id,t,3,1))}return!0},effect:"particles",particles:{particleLocation:"self",particleImages:["particle_cloud"],particleConfig:{acceleration:{x:0,y:0},addAtBack:!0,alpha:{start:.74,end:0},blendMode:"normal",color:{start:"#ffffff",end:"#eb8b58"},emitterLifetime:.2,frequency:.001,lifetime:{min:.4,max:.7},maxParticles:100,maxSpeed:0,noRotation:!1,pos:{x:8,y:8},rotationSpeed:{min:0,max:200},scale:{start:1,end:1.2,minimumScaleMultiplier:1},spawnType:"point",speed:{start:200,end:50,minimumSpeedMultiplier:1},startRotation:{min:0,max:360}}}},freeze:{id:"freeze",displayName:"Freeze",description:"Freezes the target solid so they can't move and they become weak to physical damage. Does not damage the target.",baseCastCount:10,value:4,type:va.DamageOther,range:9,useFunc:function(t,e,i,n,r,o){if(null===t.value)throw new Error("Item does not have a value for castFreeze");if(void 0===t.areaOfEffect)throw new Error("Item does not have an area of effect for castFreeze");const a=Vh(i,n,r,o,!1);if(null===a)return nu("Canceled casting"),!1;const l=a.getOne(Zh);if(void 0===a.getOne(bc))return nu(l.name+" cannot be frozen"),!1;const u=a.getOne($h).tilePosition,h=du(t.areaOfEffect.radius,u.x,u.y);for(const e of h)if(e.x<n.width&&e.y<n.height){const o=wh(n,e),a=fh(i,r,e);if(!1===n.data[o][e.y][e.x].blocks||a.length>0){_u(Nc(i,s.Game.textureAtlas,"puddle",e),3*t.value);for(const e of a)_u(e,t.value)}}return!0},areaOfEffect:{type:"circle",radius:3}}};function Au(t){const e=[];for(const[i,n]of t.inventory){const t=Pu[i];e.push({id:i,displayName:t.displayName,description:t.description,type:t.type,count:n,value:t.value,useFunc:t.useFunc})}return e}function Ou(t,e){return t.inventory.has(e)}function Mu(t,e,i=1){if(null===s.Game)throw new Error("Global Game object is null");if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(!(e in Pu))throw new Error(e+" is not a valid item id");if(Ou(t,e)){const n=t.inventory.get(e)+i;if(100===n)return!1;t.inventory.set(e,n)}else t.inventory.set(e,i);return t.entity.id===s.Game.playerId&&(s.gameEventEmitter.emit("tutorial.inventory"),Pu[e].type===ya.WildDamageScroll&&s.gameEventEmitter.emit("tutorial.wildSpells")),!0}function ku(t,e){const i=t.getOne(ic);if(!Ou(i,e))throw new Error(`Item ${e} not in inventory`);const n=i.inventory.get(e)-1;0===n?i.inventory.delete(e):i.inventory.set(e,n)}function Ru(t){return function(e,i,n){var r;const o=n.getOne(cc);return void 0!==o&&(null!==(r=o.knownSpells[t].count)&&void 0!==r?r:-1)>0}}function Du(t,e,i){const n=i.getOne(ic);if(void 0===n)return!1;return Au(n).filter(t=>t.type===ya.HealSelf).length>0}function Lu(t,e,i){const n=i.getOne(cc);if(void 0===n)return!1;return Qc(n).filter(t=>t.type===va.HealSelf&&t.count>0).length>0}function Fu(t,e,i){const n=i.getOne(cc);if(void 0===n)return!1;return Qc(n).filter(t=>t.type===va.HealOther).length>0}function Nu(t,e,i){const n=i.getOne(cc);if(void 0===n)return!1;return Qc(n).filter(t=>t.type===va.HealOther&&t.count>0).length>0}function Bu(t,e,i,n,r=!0){const o=new Set,s=i.getOne($h).tilePosition,a=Yc(i),l=Math.floor(n/2),u=t.createQuery().fromAll(xc,$h).execute();let h=!1;for(const t of u.values()){const e=t.getOne($h).tilePosition;if(t.getOne(xc).onFire&&yh(e,s)<n){h=!0;break}}for(let n=s.y-l;n<s.y+l;n++)for(let u=s.x-l;u<s.x+l;u++){if(o.has(`${u},${n}`))continue;const s=fh(t,e,new gh(u,n));for(const t of s){if(t===i)continue;const e=t.getOne(xc),s=t.getOne(Cc),l=t.getOne(Ec);if(null!==a){if(a[pa.Fire]!==fa.nullified&&void 0!==e&&e.onFire&&(o.add(`${u},${n}`),r))for(let t=0;t<Ya[8].length;t++){const e=Ya[8][t];o.add(`${u+e[0]},${n+e[1]}`)}a[pa.Fire]!==fa.nullified&&void 0!==e&&h&&o.add(`${u},${n}`),a[pa.Water]!==fa.nullified&&void 0!==l&&l.currentTriggerType===xa.Steam&&o.add(`${u},${n}`)}else void 0!==e&&e.onFire&&o.add(`${u},${n}`),void 0!==s&&o.add(`${u},${n}`),void 0!==l&&l.currentTriggerType===xa.Steam&&o.add(`${u},${n}`)}}return o}function ju(t,e,i){const n=i.getOne(fc);return void 0!==n&&n.fear>=n.fearThreshold}function Gu(t,e,i){var n;const r=i.getOne(dc);if(void 0===r||null===r.teamId)return!1;const o=null===(n=s.Game)||void 0===n?void 0:n.entityTeams.get(r.teamId);if(void 0===o)return!1;const a=i.getOne($h);for(const e of o.memberIds){if(i.id===e)continue;const n=t.getEntity(e);if(void 0===n)continue;const r=n.getOne($h),o=n.getOne(nc);if(void 0!==r&&void 0!==o&&yh(r.tilePosition,a.tilePosition)<12&&o.hp>0)return!0}return!1}function Uu(t,e,i){const n=i.getOne(xc);return!(void 0===n||!n.onFire)}function zu(t,e,i){const n=i.getOne(Tc);return void 0!==n&&n.silenced}const Hu={targetPositionKnown:{resolver:function(t,e,i){const n=i.getOne(dc);return!0===(null==n?void 0:n.knowsTargetPosition)}},targetInLineOfSight:{resolver:function(t,e,i){const n=i.getOne(dc);return!0===(null==n?void 0:n.hasTargetInSight)}},nextToTarget:{resolver:function(t,e,i){var n;const r=i.getOne(dc);if(void 0===r||null===r.targetId)throw new Error(`Entity ${i.id} is missing a target`);const o=t.getEntity(r.targetId);if(void 0===o)return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI)&&console.log(`resolveNextToTarget for ${r.entity.id} has a non-existent target ${r.targetId}`),!1;const a=i.getOne($h),l=o.getOne($h);if(void 0===a||void 0===l)throw new Error(`Entity ${i.id} is missing data for resolveNextToTarget`);return yh(a.tilePosition,l.tilePosition)<1.5}},lowHealth:{resolver:function(t,e,i){const n=Hc(i),r=i.getOne(dc);return null!==n&&void 0!==r&&n.hp/n.maxHp<=r.lowHealthThreshold}},hasHealingItem:{resolver:Du},hasSelfHealingSpell:{resolver:Lu},hasHealOtherSpell:{resolver:Nu},hasAliveAllies:{resolver:Gu},allyLowHealth:{resolver:function(t,e,i){const n=i.getOne($h),r=i.getOne(dc),o=t.createQuery().fromAll($h,dc,nc).execute();let s=null,a=null;for(const t of o){if(t.id===r.targetId||t===i)continue;const e=t.getOne(nc),o=t.getOne($h),l=t.getOne(dc),u=e.hp/e.maxHp<=l.lowHealthThreshold;yh(n.tilePosition,o.tilePosition)<10&&u&&(null===s||e.hp<a.hp)&&(s=o.tilePosition,a=e)}return null!==s}},inDangerousArea:{resolver:function(t,e,i){const n=i.getOne($h).tilePosition;return Bu(t,e,i,5,!0).has(`${n.x},${n.y}`)}},targetKilled:{resolver:function(t,e,i){const n=i.getOne(dc);return void 0!==n&&null===n.targetId}},afraid:{resolver:ju},cowering:{resolver:function(t,e,i){var n,r;const o=i.getOne(fc),s=i.getOne($h);return void 0!==o&&void 0!==s&&(s.x===(null===(n=o.runAwayTarget)||void 0===n?void 0:n.x)&&s.y===(null===(r=o.runAwayTarget)||void 0===r?void 0:r.y))}},atDesiredDistance:{resolver:function(t,e,i){var n;const r=i.getOne(dc);if(void 0===r||null===r.targetId)throw new Error(`Entity ${i.id} is missing a target`);const o=i.getOne($h),a=t.getEntity(r.targetId);if(void 0===a)return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI)&&console.log(`resolveAtDesiredDistance for ${r.entity.id} has a non-existent target ${r.targetId}`),!1;const l=a.getOne($h);if(void 0===o||void 0===l)throw new Error(`Entity ${i.id} is missing data for resolveNextToTarget`);const u=yh(o.tilePosition,l.tilePosition);return Math.floor(u)===r.desiredDistanceToTarget}},atFallbackPosition:{resolver:function(t,e,i){const n=i.getOne(mc);return void 0!==n&&n.isAtFallbackPosition}},onFire:{resolver:Uu},nearWater:{resolver:function(t,e,i){const n=i.getOne($h).tilePosition,r=t.createQuery().fromAll($h,"waterTile").execute();for(const t of r){if(t.id===i.id)continue;if(yh(t.getOne($h).tilePosition,n)<15)return!0}return!1}},alliesAlerted:{resolver:function(t,e,i){var n;const r=i.getOne(dc);if(void 0===r||null===r.teamId)return!1;const o=null===(n=s.Game)||void 0===n?void 0:n.entityTeams.get(r.teamId);return void 0!==o&&"attacking"===o.state}},silenced:{resolver:zu}};for(const t in Iu){Hu["hasCastsFor_"+t]={resolver:Ru(t)}}function Xu(t,e,i,n,r,o,a,l=!0){let u,h;n.tags.has("aquatic")?(u=function(t){return function(e,i){if(null===s.Game)throw new Error("Global game object is null");if(t.x===e&&t.y===i)return!0;const{blocks:n,entity:r}=mh(s.Game.ecs,s.Game.map,s.Game.entityMap,new gh(e,i));return!n&&!(null===r||!r.tags.has("waterTile"))}}(r),h=()=>1):(u=Rh(r),h=Dh(t,e,i,r));const c=new tl.AStar(o.x,o.y,u,h,{topology:8}),d=[];return c.compute(r.x,r.y,(function(t,e){d.push(new gh(t,e))})),d.shift(),l&&d.pop(),d.length>0?d.slice(0,a):[]}function Wu(t,e,i,n){var r;const o=n.entity.getOne(oc),a=n.entity.getOne($h),l=t.getEntity(n.targetId);if(void 0===l)return!0===(null===(r=s.Game)||void 0===r?void 0:r.debugAI)&&console.log(`chase action for ${n.entity.id} is chasing a non-existent entity ${n.targetId}`),new Fh(!0);const u=l.getOne($h);if(void 0===o||void 0===a)throw new Error("Missing data for "+n.entity.id);if(void 0===u)throw new Error("Missing data for "+n.targetId);const h=Xu(t,e,i,n.entity,a.tilePosition,u.tilePosition,o.maxTilesPerMove);return 0===h.length?new Fh(!0):new Nh(n.entity.id,h)}function Yu(t,e,i,n){const r=n.entity.getOne($h),o=n.entity.getOne(cc),s=n.entity.getOne(Zh);if(void 0===r)throw new Error("No position on AI for healAllyAction");if(void 0===o)throw new Error("No spells on AI for healAllyAction");if(void 0===s)throw new Error(`Entity ${n.entity.id} is missing DisplayNameComponent`);const a=Qc(o).filter(t=>t.type===va.HealOther).sort((t,e)=>t.value-e.value)[0],l=t.createQuery().fromAll($h,dc,nc).execute();let u=null,h=null;for(const t of l){const e=t.getOne(nc),i=t.getOne($h),n=e.hp/e.maxHp;yh(r.tilePosition,i.tilePosition)<10&&(null===u||n<h)&&(u=i.tilePosition,h=n)}if(null===u)throw new Error("Should never get here, there's a bug in goal allyLowHealth");return nu(`${s.name} casted ${a.displayName}`),new zh(n.entity.id,Iu[a.id],u,void 0,qc)}function Vu(t){return function(e,i,n,r){var o;const a=e.getEntity(r.targetId);if(void 0===a)return!0===(null===(o=s.Game)||void 0===o?void 0:o.debugAI)&&console.log(`castSpellAction for ${r.entity.id} has a non-existent target ${r.targetId}`),new Fh(!0);const l=r.entity.getOne(cc),u=r.entity.getOne(Zh);if(void 0===l)throw new Error(`No spells on ${r.entity.id} for castSpellAction`);if(void 0===u)throw new Error(`Entity ${r.entity.id} is missing DisplayNameComponent`);if(-1===Qc(l).map(t=>t.id).indexOf(t))throw new Error(`${u.name} does not know spell ${t}`);const h=a.getOne($h);if(void 0===h)throw new Error(`Target entity ${r.targetId} is missing PositionComponent`);return new zh(r.entity.id,Iu[t],h.tilePosition,void 0,qc)}}function Ku(t){return function(e,i,n){var r,o;const a=e.getEntity(n.targetId);if(void 0===a)return!0===(null===(r=s.Game)||void 0===r?void 0:r.debugAI)&&console.log(`castSpellWeight for ${n.entity.id} has a non-existent target ${n.targetId}`),1;const l=a.getOne(nc),u=null!==(o=Iu[t].value)&&void 0!==o?o:1;return Math.max(1,l.hp-u)}}const qu={wander:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:function(t,e,i,n){const r=n.entity.getOne($h).tilePosition,o=[],s=Bu(t,i,n.entity,n.sightRange);if(Math.random()>.8)return new Fh(!0);for(const a of Ya[8]){const l=new gh(r.x+a[0],r.y+a[1]),u=n.entity.tags.has("aquatic"),{blocks:h,entity:c}=mh(t,e,i,l);(u&&!1===h&&null!==c&&c.tags.has("waterTile")||!u&&!1===h)&&(s.has(`${l.x},${l.y}`)||o.push(l))}const a=Ta.a.getItem(o);return null===a?new Fh(!0):new Nh(n.entity.id,[a])},weight:()=>1},guard:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:()=>new Fh(!0),weight:()=>1},patrol:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:function(t,e,i,n){const r=n.entity.getOne($h),o=n.entity.getOne(gc);if(void 0===o||void 0===r)throw new Error("Cannot patrol without a patrolState or position");if(null===o.patrolTarget)throw new Error("Null patrol target for entity "+n.entity.id);let s=t.getEntity(o.patrolTarget),a=null==s?void 0:s.getOne($h);if(void 0===a)throw new Error("Patrol target doesn't have a position");let l=Xu(t,e,i,n.entity,r.tilePosition,a.tilePosition,2);if(0===l.length){const u=null==s?void 0:s.getOne(yc);if(void 0===u)throw new Error("Missing patrol link on node "+o.patrolTarget);if(null===u.next)return new Fh(!0);if(o.patrolTarget=u.next,s=t.getEntity(o.patrolTarget),a=null==s?void 0:s.getOne($h),void 0===a)throw new Error("Patrol target doesn't have a position");l=Xu(t,e,i,n.entity,r.tilePosition,a.tilePosition,2)}return 0===l.length?new Fh(!0):new Nh(n.entity.id,l)},weight:()=>1},chase:{preconditions:{targetPositionKnown:!0,targetInLineOfSight:!1},postconditions:{targetInLineOfSight:!0},updateFunction:Wu,weight:()=>1},standby:{preconditions:{targetPositionKnown:!0,atDesiredDistance:!0,hasAliveAllies:!0,targetKilled:!1},postconditions:{targetKilled:!0},updateFunction:()=>new Fh(!0),weight:function(t,e,i){var n;const r=t.getEntity(i.targetId);if(void 0===r)return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI)&&console.log(`standbyWeight for ${i.entity.id} has a non-existent target ${i.targetId}`),1;const o=r.getOne(nc);if(void 0===o)throw new Error("target is missing a HitPointsComponent");const a=i.entity.getOne(cc);if(void 0!==a){const t=Qc(a);for(let e=0;e<t.length;e++){const i=t[e];if(i.type===va.DamageOther&&i.count>0)return o.hp}}return 1}},reposition:{preconditions:{targetPositionKnown:!0,atDesiredDistance:!1,hasAliveAllies:!0,targetKilled:!1},postconditions:{atDesiredDistance:!0},updateFunction:function(t,e,i,n){var r;const o=t.getEntity(n.targetId);if(void 0===o)return!0===(null===(r=s.Game)||void 0===r?void 0:r.debugAI)&&console.log(`repositionAction for ${n.entity.id} has a non-existent target ${n.targetId}`),new Fh(!0);const a=n.entity.getOne($h),l=o.getOne($h),u=n.entity.getOne(oc);if(void 0===a||void 0===u||void 0===l)throw new Error("Missing data when trying to reposition");const h=new tl.ReverseAStar((t,e)=>{const i=yh(new gh(t,e),l.tilePosition);return Math.floor(i)===n.desiredDistanceToTarget},Rh(a.tilePosition),Dh(t,e,i,a.tilePosition));let c=[];return h.compute(a.tilePosition.x,a.tilePosition.y,(function(t,e){c.splice(0,0,new gh(t,e))})),0===c.length?new Fh(!0):(c.shift(),c=c.slice(0,u.maxTilesPerMove),new Nh(n.entity.id,c))},weight:()=>1},useHealingItem:{preconditions:{lowHealth:!0,hasHealingItem:!0},postconditions:{lowHealth:!1},updateFunction:function(t,e,i,n){const r=n.entity.getOne(ic),o=n.entity.getOne(Zh);if(void 0===r)throw new Error("No inventory on owner for AI for useHealingItemAction");if(void 0===o)throw new Error(`Entity ${n.entity.id} is missing DisplayNameComponent`);const s=Au(r).filter(t=>t.type===ya.HealSelf).sort((t,e)=>t.value-e.value)[0];return nu(`${o.name} used a ${s.displayName}`),new zh(n.entity.id,Pu[s.id],void 0,void 0,ku)},weight:()=>1},useHealingSpell:{preconditions:{lowHealth:!0,hasSelfHealingSpell:!0,silenced:!1},postconditions:{lowHealth:!1},updateFunction:function(t,e,i,n){const r=n.entity.getOne(cc),o=n.entity.getOne(Zh);if(void 0===r)throw new Error("No spells on owner for AI for useHealingSpellAction");if(void 0===o)throw new Error(`Entity ${n.entity.id} is missing DisplayNameComponent`);const s=Qc(r).filter(t=>t.type===va.HealSelf).sort((t,e)=>t.value-e.value)[0];return nu(`${o.name} casted ${s.displayName}`),new zh(n.entity.id,Iu[s.id],void 0,void 0,qc)},weight:()=>1},healAlly:{preconditions:{allyLowHealth:!0,hasHealOtherSpell:!0,silenced:!1},postconditions:{allyLowHealth:!1},updateFunction:Yu,weight:()=>1},goToEnemy:{preconditions:{targetPositionKnown:!0,nextToTarget:!1},postconditions:{nextToTarget:!0},updateFunction:Wu,weight:function(t,e,i){var n;const r=i.entity.getOne($h),o=t.getEntity(i.targetId);if(void 0===o)return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI)&&console.log(`chase weight for ${i.entity.id} is chasing a non-existent entity ${i.targetId}`),1;const a=o.getOne($h);if(void 0===r||void 0===a)throw new Error("no position data for ai");return yh(r.tilePosition,a.tilePosition)}},meleeAttack:{preconditions:{nextToTarget:!0,targetKilled:!1},postconditions:{targetKilled:!0},updateFunction:function(t,e,i,n){if(null===n.targetId)throw new Error("Cannot perform meleeAttackAction without a target");return new jh(n.entity.id,n.targetId)},weight:function(t,e,i){var n;const r=t.getEntity(i.targetId);if(void 0===r)return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI)&&console.log(`meleeAttackWeight for ${i.entity.id} has a non-existent target ${i.targetId}`),1;const o=r.getOne(nc),a=Xc(t,e,i.entity);return Math.max(1,o.hp-a.strength)}},goToSafePosition:{preconditions:{inDangerousArea:!0},postconditions:{inDangerousArea:!1},updateFunction:function(t,e,i,n){const r=n.entity.getOne($h),o=n.entity.getOne(oc);if(void 0===r||void 0===o)throw new Error("Missing data when trying to run away");const s=r.tilePosition,a=Bu(t,i,n.entity,20,!1),l=new tl.ReverseAStar((t,e)=>!a.has(`${t},${e}`),Rh(s),Dh(t,e,i,s));let u=[];return l.compute(s.x,s.y,(function(t,e){u.splice(0,0,new gh(t,e))})),0===u.length?(console.log("Could not find a path to a safe position"),new Fh(!0)):(u.shift(),0===u.length?(console.log("Could not find a path to a safe position"),new Fh(!0)):(u=u.slice(0,o.maxTilesPerMove),new Nh(n.entity.id,u)))},weight:()=>1},runAway:{preconditions:{afraid:!0,cowering:!1},postconditions:{afraid:!1,cowering:!0},updateFunction:function(t,e,i,n){const r=n.entity.getOne($h),o=n.entity.getOne(fc),s=n.entity.getOne(oc);if(void 0===r||void 0===o||void 0===s)throw new Error("Missing data when trying to run away");let a=[];if(null===o.runAwayTarget){let l=0;do{o.runAwayTarget=vh(t,e,i),a=Xu(t,e,i,n.entity,r.tilePosition,o.runAwayTarget,s.maxTilesPerMove),l++}while(0===a.length||l<5)}else a=Xu(t,e,i,n.entity,r.tilePosition,o.runAwayTarget,s.maxTilesPerMove,!1);return null===a?new Fh(!0):(a[a.length-1].x===o.runAwayTarget.x&&a[a.length-1].y===o.runAwayTarget.y&&(o.fear=Math.round(.6*o.fearThreshold),o.runAwayTarget=null),new Nh(n.entity.id,a))},weight:()=>1},goToFallbackPosition:{preconditions:{atFallbackPosition:!1},postconditions:{atFallbackPosition:!0},updateFunction:()=>new Fh(!0),weight:()=>1},douseFireOnSelf:{preconditions:{onFire:!0,nearWater:!0},postconditions:{onFire:!1},updateFunction:function(t,e,i,n){const r=n.entity.getOne($h),o=n.entity.getOne(oc);if(void 0===r||void 0===o)throw new Error("Missing data when trying to run away");const s=new tl.ReverseAStar((e,n)=>{const r=fh(t,i,new gh(e,n));for(const t of r)if(t.tags.has("waterTile"))return!0;return!1},Rh(r.tilePosition),Dh(t,e,i,r.tilePosition));let a=[];return s.compute(r.tilePosition.x,r.tilePosition.y,(function(t,e){a.splice(0,0,new gh(t,e))})),0===a.length?new Fh(!0):(a.shift(),a=a.slice(0,o.maxTilesPerMove),new Nh(n.entity.id,a))},weight:()=>1},alertAllies:{preconditions:{hasAliveAllies:!0,alliesAlerted:!1},postconditions:{alliesAlerted:!0},updateFunction:function(t,e,i,n){return n.currentOrder="attack",n.update(),new Wh(n.entity.id)},weight:()=>1}};for(const t in Iu){const e=Iu[t],i="hasCastsFor_"+t,n="castSpell_"+t;e.type===va.DamageOther||e.type===va.WildDamage?qu[n]={preconditions:{[i]:!0,silenced:!1,targetInLineOfSight:!0,targetKilled:!1},postconditions:{targetKilled:!0},updateFunction:Vu(t),weight:Ku(t)}:e.type===va.HealSelf?qu[n]={preconditions:{lowHealth:!0,silenced:!1,[i]:!0},postconditions:{lowHealth:!1},updateFunction:Vu(t),weight:()=>1}:e.type===va.HealOther&&(qu[n]={preconditions:{allyLowHealth:!0,[i]:!0,silenced:!1},postconditions:{allyLowHealth:!1},updateFunction:Yu,weight:()=>1})}const $u={bandit:i(29),goblin:i(30)};function Qu(t,e,i,n,r,o){var s,a,l;const u=r.getOne(Qh),h={race:null!==(s=null==u?void 0:u.race)&&void 0!==s?s:"generic",classification:null!==(a=null==u?void 0:u.classification)&&void 0!==a?a:"generic"},c=n.get(null!==(l=o.teamId)&&void 0!==l?l:1/0);if(void 0!==c){h.is_team_commander=c.commanderId===r.id,h.did_team_commander_exist=c.createdWithCommander,h.team_commander_alive=null!==c.commanderId,h.team_state=c.state,h.has_alive_allies=Gu(t,0,r);for(const e of c.memberIds){if(e===r.id)continue;const i=t.getEntity(e);if(void 0!==i&&!0===Fu(0,0,i)){h.ally_knows_heal_other_spell=!0;break}}}const d=r.getOne(nc);void 0!==d&&(h.health_percentage=Math.floor(d.hp/d.maxHp*100));const p=r.getOne(Mc);if(void 0!==p)for(const t of p.memory.entries())h[t[0]]=t[1];const f=r.getOne(pc);return void 0!==f&&(h.turns_with_target_out_of_sight=f.turnsWithTargetOutOfSight),h.map_name=e.name,h.knows_target_position=o.knowsTargetPosition,h.has_target_in_sight=o.hasTargetInSight,h.has_healing_items=Du(0,0,r),h.on_fire=Uu(0,0,r),h.is_silenced=zu(0,0,r),h.is_confused=function(t,e,i){const n=i.getOne(vc);return void 0!==n&&n.turnsLeft>0}(0,0,r),h.is_afraid=ju(0,0,r),h.knows_heal_other_spell=Fu(0,0,r),h.has_heal_other_spell_casts=Nu(0,0,r),h.knows_heal_self_spell=function(t,e,i){const n=i.getOne(cc);return void 0!==n&&Qc(n).filter(t=>t.type===va.HealSelf).length>0}(0,0,r),h.has_heal_self_spell_casts=Lu(0,0,r),h.knows_damage_other_spell=function(t,e,i){const n=i.getOne(cc);return void 0!==n&&Qc(n).filter(t=>t.type===va.DamageOther).length>0}(0,0,r),h.has_damage_other_spell_casts=function(t,e,i){const n=i.getOne(cc);return void 0!==n&&Qc(n).filter(t=>t.type===va.DamageOther&&t.count>0).length>0}(0,0,r),h}function Zu(t,e=null){var i,n;const r=[],o=!0===(null===(i=s.Game)||void 0===i?void 0:i.debugAIDialog),a=$u[t.classification];if(void 0===a)return null;t:for(const i of a.rules)if(o&&console.log("definition "+i.name),!(null===e&&null!==i.respondingTo||null!==e&&e!==i.respondingTo)){for(const e of i.rules){if("="===e[1]&&t[e[0]]!==e[2]){o&&console.log("rule fail: "+JSON.stringify(e));continue t}if("<"===e[1]&&t[e[0]]>=e[2]){o&&console.log("rule fail: "+JSON.stringify(e));continue t}if(">"===e[1]&&t[e[0]]<=e[2]){o&&console.log("rule fail: "+JSON.stringify(e));continue t}if("<="===e[1]&&t[e[0]]>e[2]){o&&console.log("rule fail: "+JSON.stringify(e));continue t}if(">="===e[1]&&t[e[0]]<e[2]){o&&console.log("rule fail: "+JSON.stringify(e));continue t}o&&console.log("definition pass")}r.push(i)}if(0===r.length)return null;r.sort((t,e)=>{const i=t.rules.length,n=e.rules.length;return i===n?Math.random()<=.5?-1:1:i-n});const l=r[0];return!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAIDialog)&&console.log("matched definitions",r),l}function Ju(t,e){var i;const n=t.getOne(dc);if(void 0===n)throw new Error("Entity does not have a planner ai");const r=Ta.a.getItem(e.dialog);!0===(null===(i=s.Game)||void 0===i?void 0:i.debugAIDialog)&&console.log("randomly chosen line",r);const o=t.getOne(Mc);if(void 0!==o)for(const t in e.dialogMemoryChange)o.memory.set(t,e.dialogMemoryChange[t]);for(const t in e.aiStateChange)n[t]=e.aiStateChange[t];return new Xh(t.id,r)}function th(t,e){var i;const n=e.getOne(dc),r=e.getOne(fc),o=t.getEntity(n.targetId),a=null===(i=null==o?void 0:o.getOne($h))||void 0===i?void 0:i.tilePosition;return function(i,o,l,u){void 0!==a&&i===a.x&&o===a.y&&u>0&&(void 0!==r&&!1===n.knowsTargetPosition&&(r.fear+=function(t,e){var i;const n=e.getOne(dc),r=e.getOne(uc),o=t.getEntity(n.targetId);if(void 0===o)return!0===(null===(i=s.Game)||void 0===i?void 0:i.debugAI)&&console.log(`calcFearOnSight for ${n.entity.id} has a non-existent target ${n.targetId}`),1;const a=o.getOne(uc);return void 0===r||void 0===a?1:Math.max(a.level-r.level,0)}(t,e),r.update()),n.knowsTargetPosition=!0,n.hasTargetInSight=!0,n.update())}}function eh(t){return function(e,i){if(null===s.Game)throw new Error("Global game object is null");return t.x===e&&t.y===i||!1===function(t,e,i,n){if(n.x<0||n.y<0||n.x>=e.width||n.y>=e.height)return!0;for(let t=0;t<e.depth;t++)if(null!==e.data[t][n.y][n.x]&&!0===e.data[t][n.y][n.x].blocksSight)return!0;const r=fh(t,i,n);for(const t of r)if(!0===t.tags.has("blocksSight"))return!0;return!1}(s.Game.ecs,s.Game.map,s.Game.entityMap,new gh(e,i))}}function ih(t){const e=new Set,i=new Wl;for(const n of t){const t=qu[n];if(void 0===t)throw new Error(n+" is not a valid action");const r=Object.keys(t.preconditions),o=Object.keys(t.postconditions);for(let t=0;t<r.length;t++)e.add(r[t]);for(let t=0;t<o.length;t++)e.add(o[t]);i.addCondition(n,t.preconditions),i.addReaction(n,t.postconditions)}const n=new Xl(...e.values());return n.setActionList(i),{planner:n,goals:e}}function nh(t,e,i){var n;const r=!0===(null===(n=s.Game)||void 0===n?void 0:n.debugAI),o=i.entity.getOne(Zh);if(void 0===o)throw new Error(`Entity ${i.entity.id} is missing a DisplayNameComponent`);const a=function(t,e,i){const n={};for(const r of i.goals){const o=Hu[r];n[r]=o.resolver(t,e,i.entity)}return n}(t,e,i);r&&(console.groupCollapsed(i.entity.id),console.log("worldState",a));const l=i.entity.getOne(pc);if(void 0!==l&&!1===a.targetInLineOfSight&&i.knowsTargetPosition&&(l.turnsWithTargetOutOfSight++,l.turnsWithTargetOutOfSight===l.loseTrackAfterNTurns&&(i.knowsTargetPosition=!1,l.turnsWithTargetOutOfSight=0,a.targetPositionKnown=!1,nu(o.name+" lost track of you")),l.update()),Object(wa.isEqual)(i.previousWorldState,a))return r&&(console.log("World state has not changed from previous turn. currentAction: "+i.currentAction),console.groupEnd()),i.currentAction;!1===i.previousWorldState.targetPositionKnown&&!0===a.targetPositionKnown&&nu(o.name+" saw you");const u=Object.keys(i.planner.actionList.reactions),h=[];for(let n=0;n<u.length;n++){const o=u[n],s=qu[o];if(void 0!==s){const n=s.weight(t,e,i);i.planner.actionList.setWeight(o,n),r&&h.push({action:o,weight:n})}}r&&console.table(h),i.planner.setStartState(a);const c=[];let d;"attack"===i.currentOrder?c.push({targetKilled:!0}):"alert_allies"===i.currentOrder?c.push({alliesAlerted:!0}):"fallback"===i.currentOrder&&i.goals.has("atFallbackPosition")&&c.push({atFallbackPosition:!0}),i.goals.has("lowHealth")&&!0===a.lowHealth&&c.push({lowHealth:!1}),i.goals.has("allyLowHealth")&&!0===a.allyLowHealth&&c.push({allyLowHealth:!1}),i.goals.has("inDangerousArea")&&!0===a.inDangerousArea&&c.push({inDangerousArea:!1}),i.goals.has("afraid")&&!0===a.afraid&&c.push({cowering:!0}),i.goals.has("onFire")&&!0===a.onFire&&c.push({onFire:!1});do{if(d=c.pop(),void 0===d){i.currentAction=null;break}i.planner.setGoalState(d);const t=i.planner.calculate();i.currentAction=Object(wa.get)(t,"['0'].name",null)}while(c.length>0&&null===i.currentAction);return r&&(console.log("goal: "+JSON.stringify(d)),console.log("currentAction: "+i.currentAction),console.groupEnd()),i.previousWorldState=a,i.currentAction}function rh(t,e,i,n){var r,o;const a=e.getOne(vc);if(void 0===a)throw new Error(`Entity ${e.id} is missing a ConfusedAIComponent`);const l=e.getOne($h),u=e.getOne(Zh);if(void 0===l||void 0===u)throw new Error(`Entity ${e.id} is missing data`);if(a.turnsLeft--,a.turnsLeft>0){let s,u=!0,h=null!==(r=Ta.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==r?r:0;do{h=null!==(o=Ta.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==o?o:0,s=new gh(l.tilePosition.x+Ya[8][h][0],l.tilePosition.y+Ya[8][h][1]),({blocks:u}=mh(t,i,n,s))}while(!0===u);return a.update(),new Nh(e.id,[s])}return a.destroy(),e.id===s.Game.playerId?nu("You are no longer confused"):nu(u.name+" is no longer confused"),new Fh(!0)}function oh(t,e,i,n,r){var o,a,l,u;const h=t.getEntity(r);if(void 0===h)return!0===(null===(o=s.Game)||void 0===o?void 0:o.debugAI)&&console.log(`generateAICommands for ${r}, entityId does not exist`),[new Fh(!0)];const c=null===(a=h.getOne($h))||void 0===a?void 0:a.tilePosition;if(void 0===c)throw new Error(`Entity ${h.id} is missing a position component`);const d=h.getOne(Sc);if(void 0!==d&&d.stunned)return[new Fh(!0)];const p=h.getOne(bc);if(void 0!==p&&p.frozen)return[new Fh(!0)];if(void 0!==h.getOne(vc))return[rh(t,h,e,i)];const f=h.getOne(dc);if(void 0!==f){const r=[];new Za.PreciseShadowcasting(eh(c)).compute(c.x,c.y,f.sightRange,th(t,h));const o=t.getEntity(f.targetId);if(void 0===o)return!0===(null===(l=s.Game)||void 0===l?void 0:l.debugAI)&&console.log(`generateAICommands for ${f.entity.id} has a non-existent target ${f.targetId}`),[new Fh(!0)];f.knowsTargetPosition&&o.id===s.Game.playerId&&r.push(new Yh(e,s.Game.gameCamera,h));const a=Qu(t,e,0,n,h,f),d=!0===(null===(u=s.Game)||void 0===u?void 0:u.debugAIDialog);d&&(console.groupCollapsed(f.entity.id+" dialog"),console.log("query",a));const p=Zu(a);if(null!==p){r.push(Ju(h,p));const i=function(t,e,i,n,r,o){var s;const a=n.get(null!==(s=r.teamId)&&void 0!==s?s:1/0),l=[];if(void 0!==a)for(const i of a.memberIds){const r=t.getEntity(i);if(void 0!==r){const s=r.getOne(dc);if(void 0===s)throw new Error(`team mate ${i} is missing a PlannerAIComponent`);const a=Zu(Qu(t,e,0,n,r,s),o.name);null!==a&&l.push({teamMate:r,response:a})}}return 0===l.length?null:(l.sort((t,e)=>{const i=t.response.rules.length,n=e.response.rules.length;return i===n?Math.random()<=.5?-1:1:i-n}),l[0])}(t,e,0,n,f,p);null!==i&&r.push(Ju(i.teamMate,i.response))}return d&&console.groupEnd(),r.push(function(t,e,i,n){const r=nh(t,n,e);return null!==r?qu[r].updateFunction(t,i,n,e):new Fh(!0)}(t,f,e,i)),f.hasTargetInSight=!1,r}throw new Error("Missing AI state on entity "+h.id)}const sh={tutorial_001:Rl,tutorial_002:Dl,forrest_001:Ll,forrest_001_interior_001:Fl,forrest_001_interior_002:Nl},ah={6:{name:"grass",textureKey:"grass_1",blocks:!1,blocksSight:!1,reflectivity:.18},25:{name:"grass",textureKey:"barrel_3",blocks:!1,blocksSight:!1,reflectivity:.18},46:{name:"Window",textureKey:"sprite113",blocks:!1,blocksSight:!1,reflectivity:.18},184:{name:"grass",textureKey:"grass_2",blocks:!1,blocksSight:!1,reflectivity:.18},186:{name:"stone",textureKey:"stone_2",blocks:!1,blocksSight:!1,reflectivity:.18},194:{name:"bed",textureKey:"red_bed_1_front",blocks:!0,blocksSight:!1,reflectivity:.18},218:{name:"Door",textureKey:"brown_door_steel_frame_barred",blocks:!0,blocksSight:!1,reflectivity:.18},221:{name:"Window",textureKey:"brown_square_4x4_window",blocks:!0,blocksSight:!1,reflectivity:.18},364:{name:"Tiled floor",textureKey:"sprite372",blocks:!1,blocksSight:!1,reflectivity:.18},365:{name:"Wood floor",textureKey:"sprite373",blocks:!1,blocksSight:!1,reflectivity:.18},380:{name:"Dresser",textureKey:"sprite457",blocks:!0,blocksSight:!1,reflectivity:.18},382:{name:"Sack of food",textureKey:"sprite493",blocks:!0,blocksSight:!1,reflectivity:.18},383:{name:"Sack of food",textureKey:"sprite510",blocks:!0,blocksSight:!1,reflectivity:.18},384:{name:"Sack of food",textureKey:"sprite494",blocks:!0,blocksSight:!1,reflectivity:.18},385:{name:"A cabinet",textureKey:"cabinets_1",blocks:!0,blocksSight:!1,reflectivity:.18},387:{name:"Pot Rack",textureKey:"sprite495",blocks:!0,blocksSight:!1,reflectivity:.18},388:{name:"Pot Rack",textureKey:"sprite496",blocks:!0,blocksSight:!1,reflectivity:.18},399:{name:"A window",textureKey:"sprite467",blocks:!0,blocksSight:!1,reflectivity:.18},542:{name:"Tiled floor",textureKey:"sprite548",blocks:!1,blocksSight:!1,reflectivity:.18},543:{name:"wood floor",textureKey:"sprite549",blocks:!1,blocksSight:!1,reflectivity:.18},563:{name:"Cabinets",textureKey:"sprite559",blocks:!0,blocksSight:!1,reflectivity:.18},565:{name:"Vanity",textureKey:"sprite668",blocks:!0,blocksSight:!1,reflectivity:.18},566:{name:"Pot Rack",textureKey:"sprite655",blocks:!0,blocksSight:!1,reflectivity:.18},732:{name:"A chair",textureKey:"wooden_chair_1_front",blocks:!0,blocksSight:!1,reflectivity:.18},741:{name:"Cabinets",textureKey:"sprite732",blocks:!0,blocksSight:!1,reflectivity:.18},743:{name:"Vanity",textureKey:"sprite734",blocks:!0,blocksSight:!1,reflectivity:.18},917:{name:"Armoire",textureKey:"sprite974",blocks:!0,blocksSight:!1,reflectivity:.18},935:{name:"Window",textureKey:"brown_window_curved_top_open_shutters",blocks:!0,blocksSight:!1,reflectivity:.18},1090:{name:"A table",textureKey:"long_wooden_table_1_middle",blocks:!0,blocksSight:!1,reflectivity:.18},1095:{name:"Armoire",textureKey:"sprite1072",blocks:!0,blocksSight:!1,reflectivity:.18},1256:{name:"Path",textureKey:"sprite1248",blocks:!1,blocksSight:!1,reflectivity:.18},1432:{name:"Path",textureKey:"sprite1420",blocks:!1,blocksSight:!1,reflectivity:.18},1433:{name:"Path",textureKey:"sprite1421",blocks:!1,blocksSight:!1,reflectivity:.18},1434:{name:"Path",textureKey:"sprite1480",blocks:!1,blocksSight:!1,reflectivity:.18},1438:{name:"An unlit fire",textureKey:"campfire_1_unlit",blocks:!1,blocksSight:!1,reflectivity:.18},1537:{name:"Trees",textureKey:"turquoise_copse_top_left_corner",blocks:!0,blocksSight:!1,reflectivity:.18},1538:{name:"Trees",textureKey:"turquoise_copse_top_middle",blocks:!0,blocksSight:!1,reflectivity:.18},1539:{name:"Trees",textureKey:"turquoise_copse_top_right_corner",blocks:!0,blocksSight:!1,reflectivity:.18},1610:{name:"Dirt",textureKey:"dirt_top_left_corner",blocks:!1,blocksSight:!1,reflectivity:.18},1611:{name:"Dirt",textureKey:"dirt_top_edge",blocks:!1,blocksSight:!1,reflectivity:.18},1612:{name:"Dirt",textureKey:"dirt_top_right_corner",blocks:!1,blocksSight:!1,reflectivity:.18},1619:{name:"A tree",textureKey:"short_pine_tree_1",blocks:!0,blocksSight:!0,reflectivity:.18},1620:{name:"A tree",textureKey:"short_pine_tree_1",blocks:!0,blocksSight:!0,reflectivity:.18},1715:{name:"Trees",textureKey:"turquoise_copse_left_edge",blocks:!0,blocksSight:!1,reflectivity:.18},1716:{name:"Trees",textureKey:"turquoise_copse_middle",blocks:!0,blocksSight:!1,reflectivity:.18},1717:{name:"Trees",textureKey:"turquoise_copse_right_edge",blocks:!0,blocksSight:!1,reflectivity:.18},1788:{name:"Dirt",textureKey:"dirt_left_edge",blocks:!1,blocksSight:!1,reflectivity:.18},1789:{name:"Dirt",textureKey:"dirt_middle",blocks:!1,blocksSight:!1,reflectivity:.18},1790:{name:"Dirt",textureKey:"dirt_right_edge",blocks:!1,blocksSight:!1,reflectivity:.18},1797:{name:"Tree",textureKey:"sprite1812",blocks:!0,blocksSight:!0,reflectivity:.18,defaultToExplored:!0},1799:{name:"Tree",textureKey:"sprite1814",blocks:!0,blocksSight:!0,reflectivity:.18,defaultToExplored:!0},1827:{name:"Tent",textureKey:"green_tent_top_left",blocks:!0,blocksSight:!1,reflectivity:.18},1828:{name:"Tent",textureKey:"green_tent_top_right",blocks:!0,blocksSight:!1,reflectivity:.18},1831:{name:"Magika Shrine",textureKey:"mage_statue_top",blocks:!0,blocksSight:!1,reflectivity:.18},1893:{name:"Trees",textureKey:"turquoise_copse_bottom_left_corner",blocks:!0,blocksSight:!1,reflectivity:.18},1894:{name:"Trees",textureKey:"turquoise_copse_bottom_middle",blocks:!0,blocksSight:!1,reflectivity:.18},1895:{name:"Trees",textureKey:"turquoise_copse_bottom_right_corner",blocks:!0,blocksSight:!1,reflectivity:.18},1966:{name:"Dirt",textureKey:"dirt_bottom_left_corner",blocks:!1,blocksSight:!1,reflectivity:.18},1967:{name:"Dirt",textureKey:"dirt_bottom_edge",blocks:!1,blocksSight:!1,reflectivity:.18},1968:{name:"Dirt",textureKey:"dirt_bottom_right_corner",blocks:!1,blocksSight:!1,reflectivity:.18},1975:{name:"Tree",textureKey:"sprite1886",blocks:!0,blocksSight:!0,reflectivity:.18,defaultToExplored:!0},1977:{name:"Tree",textureKey:"sprite1888",blocks:!0,blocksSight:!0,reflectivity:.18,defaultToExplored:!0},2005:{name:"Tent",textureKey:"green_tent_bottom_left",blocks:!0,blocksSight:!1,reflectivity:.18},2006:{name:"Tent",textureKey:"green_tent_bottom_right",blocks:!0,blocksSight:!1,reflectivity:.18},2010:{name:"Gravestone",textureKey:"gravestone_2",blocks:!0,blocksSight:!1,reflectivity:.18},2151:{name:"Building",textureKey:"sprite2006",blocks:!0,blocksSight:!0,reflectivity:.18},2153:{name:"Building",textureKey:"sprite2008",blocks:!0,blocksSight:!0,reflectivity:.18},2154:{name:"Building",textureKey:"sprite2009",blocks:!0,blocksSight:!0,reflectivity:.18},2156:{name:"Building",textureKey:"sprite2011",blocks:!0,blocksSight:!0,reflectivity:.18},2164:{name:"Building",textureKey:"sprite2019",blocks:!0,blocksSight:!0,reflectivity:.18},2165:{name:"Building",textureKey:"sprite2020",blocks:!0,blocksSight:!0,reflectivity:.18},2166:{name:"Building",textureKey:"sprite2021",blocks:!0,blocksSight:!0,reflectivity:.18},2167:{name:"Building",textureKey:"sprite2022",blocks:!0,blocksSight:!0,reflectivity:.18},2168:{name:"Building",textureKey:"sprite2023",blocks:!0,blocksSight:!0,reflectivity:.18},2328:{name:"Building",textureKey:"sprite2153",blocks:!0,blocksSight:!0,reflectivity:.18},2329:{name:"Building",textureKey:"sprite2154",blocks:!0,blocksSight:!0,reflectivity:.18},2330:{name:"Building",textureKey:"sprite2155",blocks:!0,blocksSight:!0,reflectivity:.18},2331:{name:"Building",textureKey:"sprite2156",blocks:!0,blocksSight:!0,reflectivity:.18},2332:{name:"Building",textureKey:"sprite2157",blocks:!0,blocksSight:!0,reflectivity:.18},2334:{name:"Building",textureKey:"sprite2159",blocks:!0,blocksSight:!0,reflectivity:.18},2344:{name:"Building",textureKey:"sprite2169",blocks:!0,blocksSight:!0,reflectivity:.18},2345:{name:"Building",textureKey:"sprite2170",blocks:!0,blocksSight:!0,reflectivity:.18},2346:{name:"Building",textureKey:"sprite2171",blocks:!0,blocksSight:!0,reflectivity:.18},2506:{name:"Building",textureKey:"sprite2307",blocks:!0,blocksSight:!0,reflectivity:.18},2678:{name:"Stone Road",textureKey:"stone_road_top_left_corner",blocks:!1,blocksSight:!1,reflectivity:.18},2679:{name:"Stone Road",textureKey:"stone_road_top_edge",blocks:!1,blocksSight:!1,reflectivity:.18},2680:{name:"Stone Road",textureKey:"stone_road_top_right_corner",blocks:!1,blocksSight:!1,reflectivity:.18},2684:{name:"Building",textureKey:"sprite2462",blocks:!0,blocksSight:!0,reflectivity:.18},2685:{name:"Building",textureKey:"sprite2463",blocks:!0,blocksSight:!0,reflectivity:.18},2686:{name:"Building",textureKey:"sprite2464",blocks:!0,blocksSight:!0,reflectivity:.18},2687:{name:"Building",textureKey:"sprite2465",blocks:!0,blocksSight:!0,reflectivity:.18},2688:{name:"Building",textureKey:"sprite2466",blocks:!0,blocksSight:!0,reflectivity:.18},2689:{name:"Building",textureKey:"sprite2467",blocks:!0,blocksSight:!0,reflectivity:.18},2690:{name:"Building",textureKey:"sprite2468",blocks:!0,blocksSight:!0,reflectivity:.18},2691:{name:"Building",textureKey:"sprite2469",blocks:!0,blocksSight:!0,reflectivity:.18},2698:{name:"Building",textureKey:"sprite2476",blocks:!0,blocksSight:!0,reflectivity:.18},2699:{name:"Building",textureKey:"sprite2477",blocks:!0,blocksSight:!0,reflectivity:.18},2701:{name:"Building",textureKey:"sprite2479",blocks:!0,blocksSight:!0,reflectivity:.18},2702:{name:"Building",textureKey:"sprite2480",blocks:!0,blocksSight:!0,reflectivity:.18},2703:{name:"Building",textureKey:"sprite2481",blocks:!0,blocksSight:!0,reflectivity:.18},2704:{name:"Building",textureKey:"sprite2482",blocks:!0,blocksSight:!0,reflectivity:.18},2856:{name:"Stone Road",textureKey:"stone_road_left_edge",blocks:!1,blocksSight:!1,reflectivity:.18},2857:{name:"Stone Road",textureKey:"stone_road_middle",blocks:!1,blocksSight:!1,reflectivity:.18},2858:{name:"Stone Road",textureKey:"stone_road_right_edge",blocks:!1,blocksSight:!1,reflectivity:.18},2705:{name:"Building",textureKey:"sprite2483",blocks:!0,blocksSight:!1,reflectivity:.18},3222:{name:"Building",textureKey:"sprite2928",blocks:!0,blocksSight:!1,reflectivity:.18},3224:{name:"Building",textureKey:"sprite2930",blocks:!0,blocksSight:!1,reflectivity:.18},3299:{name:"Table",textureKey:"sprite2973",blocks:!0,blocksSight:!1,reflectivity:.18},3300:{name:"Table",textureKey:"sprite2974",blocks:!0,blocksSight:!1,reflectivity:.18},3301:{name:"Table",textureKey:"sprite2975",blocks:!0,blocksSight:!1,reflectivity:.18},3304:{name:"Table",textureKey:"sprite2978",blocks:!0,blocksSight:!1,reflectivity:.18},3311:{name:"Bed2",textureKey:"sprite3052",blocks:!0,blocksSight:!1,reflectivity:.18},3402:{name:"Building",textureKey:"sprite3082",blocks:!0,blocksSight:!1,reflectivity:.18},3436:{name:"Stump",textureKey:"sprite3215",blocks:!0,blocksSight:!1,reflectivity:.18},3482:{name:"Table",textureKey:"sprite3146",blocks:!0,blocksSight:!1,reflectivity:.18},3489:{name:"Bed",textureKey:"sprite3148",blocks:!0,blocksSight:!1,reflectivity:.18},3580:{name:"Building",textureKey:"sprite3242",blocks:!0,blocksSight:!1,reflectivity:.18},3599:{name:"Building",textureKey:"sprite3258",blocks:!0,blocksSight:!1,reflectivity:.18},3660:{name:"Table",textureKey:"sprite3293",blocks:!0,blocksSight:!1,reflectivity:.18},3668:{name:"Bed",textureKey:"sprite3361",blocks:!0,blocksSight:!1,reflectivity:.18},3759:{name:"Roof",textureKey:"brown_roof_rear_left_slope",blocks:!0,blocksSight:!0,reflectivity:.18},3760:{name:"Roof",textureKey:"brown_roof_rear_right_slope",blocks:!0,blocksSight:!0,reflectivity:.18},3792:{name:"Stump",textureKey:"sprite3421",blocks:!0,blocksSight:!1,reflectivity:.18},3846:{name:"Bed4",textureKey:"sprite3457",blocks:!0,blocksSight:!1,reflectivity:.18},3934:{name:"Building",textureKey:"tan_building_exterior_left_edge",blocks:!0,blocksSight:!0,reflectivity:.18},3935:{name:"Building",textureKey:"tan_building_exterior_middle",blocks:!0,blocksSight:!0,reflectivity:.18},3936:{name:"Building",textureKey:"tan_building_exterior_right_edge",blocks:!0,blocksSight:!0,reflectivity:.18},3937:{name:"Roof",textureKey:"brown_roof_left_slope",blocks:!0,blocksSight:!0,reflectivity:.18},3938:{name:"Roof",textureKey:"brown_roof_right_slope",blocks:!0,blocksSight:!0,reflectivity:.18},3939:{name:"Roof",textureKey:"brown_roof_edge_1",blocks:!0,blocksSight:!0,reflectivity:.18},3942:{name:"Building",textureKey:"brown_building_exterior_middle",blocks:!0,blocksSight:!0,reflectivity:.18},3949:{name:"Building",textureKey:"sprite3576",blocks:!0,blocksSight:!0,reflectivity:.18},3970:{name:"Pile of Wood",textureKey:"sprite3651",blocks:!0,blocksSight:!1,reflectivity:.18},4112:{name:"Building",textureKey:"tan_building_exterior_bottom_right_corner",blocks:!0,blocksSight:!0,reflectivity:.18},4113:{name:"Building",textureKey:"tan_building_exterior_bottom_edge",blocks:!0,blocksSight:!0,reflectivity:.18},4114:{name:"Building",textureKey:"tan_building_exterior_bottom_left_corner",blocks:!0,blocksSight:!0,reflectivity:.18},4115:{name:"Roof",textureKey:"brown_roof_front_left_slope",blocks:!0,blocksSight:!0,reflectivity:.18},4116:{name:"Roof",textureKey:"brown_roof_front_right_slope",blocks:!0,blocksSight:!0,reflectivity:.18},4142:{name:"Fence",textureKey:"sprite3751",blocks:!0,blocksSight:!1,reflectivity:.18},4143:{name:"Fence",textureKey:"sprite3752",blocks:!0,blocksSight:!1,reflectivity:.18},4144:{name:"Fence",textureKey:"sprite3753",blocks:!0,blocksSight:!1,reflectivity:.18},4145:{name:"Fence",textureKey:"sprite3754",blocks:!0,blocksSight:!1,reflectivity:.18},4146:{name:"Fence",textureKey:"sprite3755",blocks:!0,blocksSight:!1,reflectivity:.18},4147:{name:"Fence",textureKey:"sprite3854",blocks:!0,blocksSight:!1,reflectivity:.18},4148:{name:"Fence",textureKey:"sprite3756",blocks:!0,blocksSight:!1,reflectivity:.18},3764:{name:"Building",textureKey:"brown_building_exterior_top_edge",blocks:!0,blocksSight:!0,reflectivity:.18},5805:{name:"A stove",textureKey:"stove_1",blocks:!0,blocksSight:!1,reflectivity:.18},5806:{name:"A stove",textureKey:"stove_2",blocks:!0,blocksSight:!1,reflectivity:.18},5977:{name:"Counter",textureKey:"sprite4890",blocks:!0,blocksSight:!1,reflectivity:.18},5978:{name:"Counter",textureKey:"sprite4891",blocks:!0,blocksSight:!1,reflectivity:.18},5979:{name:"Counter",textureKey:"sprite4892",blocks:!0,blocksSight:!1,reflectivity:.18},5983:{name:"stove",textureKey:"stove_3",blocks:!0,blocksSight:!1,reflectivity:.18}};Object.freeze(ah);const lh=new Map([[1350,"water"],[1,"shallow_water"],[7,"mud"],[211,"door"],[1981,"tall_grass"],[1440,"campfire"],[1805,"thick_underbrush"]]);class uh{constructor(t,e,i,n,r){if(this.pathfindingCost="0",this.name=t,void 0===e[i])throw new Error(`No texture ${i} in atlas`);this.sprite=new lo(e[i]),this.sprite.zIndex=0,this.blocks=n,this.blocksSight=r,this.reflectivity=.18}}function hh(t,e){const i=t.visibilityData[e.y][e.x];return i.visible&&"rgb(50, 50, 50)"!==i.lightingColor}function ch(t,e){if(void 0===t.properties||0===t.properties.length)return null;const i=t.properties.filter(t=>t.name===e);return 0===i.length?null:i[0].value}class dh{constructor(t,e,i){this.name=t,this.data=e,this.depth=e.length,this.height=e[0].length,this.width=e[0][0].length,this.visibilityData=i}}class ph{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n,this.seen=!1}contains(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}center(){return new gh(this.x+Math.round(this.width/2),this.y+Math.round(this.height/2))}tiles(){const t=[];for(let e=this.x;e<this.x+this.width+1;e++)for(let i=this.y;i<this.y+this.height+1;i++)t.push(new gh(e,i));return t}}function fh(t,e,i){var n;const r=null!==(n=e.get(`${i.x},${i.y}`))&&void 0!==n?n:[],o=[];for(const e of r){const i=t.getEntity(e);void 0!==i&&o.push(i)}return o}function mh(t,e,i,n){var r;if(n.x<0||n.y<0||n.x>=e.width||n.y>=e.height)return{entity:null,blocks:!0};for(let t=0;t<e.depth;t++)if(!0===(null===(r=e.data[t][n.y][n.x])||void 0===r?void 0:r.blocks))return{entity:null,blocks:!0};const o=fh(t,i,n);if(o.sort((t,e)=>{var i,n,r,o,s,a;const l=null!==(r=null===(n=null===(i=t.getOne(Jh))||void 0===i?void 0:i.sprite)||void 0===n?void 0:n.zIndex)&&void 0!==r?r:0;return(null!==(a=null===(s=null===(o=e.getOne(Jh))||void 0===o?void 0:o.sprite)||void 0===s?void 0:s.zIndex)&&void 0!==a?a:0)-l}),0===o.length)return{entity:null,blocks:!1};let s;for(const t of o)(void 0===s||void 0!==s&&!s.tags.has("blocks")&&t.tags.has("blocks"))&&(s=t);return void 0!==s?{entity:s,blocks:s.tags.has("blocks")}:{entity:null,blocks:!1}}class gh{constructor(t,e){this.x=t,this.y=e}static fromVector(t){return new gh(t.x,t.y)}isEqual(t){return this.x===t.x&&this.y===t.y}divide(t){this.x/=t,this.y/=t}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){this.divide(this.magnitude())}direction(t){let e=Math.atan2(this.y-t.y,this.x-t.x)*(180/Math.PI);return e<0&&(e=360+e),e}}function yh(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i**2+n**2)}function vh(t,e,i){let n,r,o=!1,s=0;do{r=new gh(il(0,e.width),il(0,e.height)),({entity:n,blocks:o}=mh(t,e,i,r)),++s}while((null!==n||!0===o)&&s<2e3);if(s>=2e3)throw new Error("Infinite loop");return r}function _h(t){for(let e=0;e<t.depth;e++)for(let i=0;i<t.height;i++)for(let n=0;n<t.width;n++)null!==t.data[e][i][n]&&(t.data[e][i][n].pathfindingCost="0")}function bh(t,e=!1,i=!1){for(let n=0;n<t.height;n++)for(let r=0;r<t.width;r++)t.visibilityData[n][r].explored=!0,e&&(t.visibilityData[n][r].visible=!0),i&&(t.visibilityData[n][r].lightingColor="white")}function xh(t,e,i,n,r,o,s,a){const l=16*a;if(o>e.width+l||o<0-l||s>e.height+l||s<0-l)return void(i.sprite.visible=!1);i.sprite.position.set(o,s),i.sprite.scale.set(a,a);const u=t.visibilityData[r][n].explored,h=hh(t,new gh(n,r));i.blocks?h?(i.sprite.tint=16777215,i.sprite.visible=!0):u?u&&!h&&(i.sprite.tint=12303291,i.sprite.visible=!0):(i.sprite.tint=16777215,i.sprite.visible=!1):h?(i.sprite.tint=16777215,i.sprite.visible=!0):u?(i.sprite.tint=12303291,i.sprite.visible=!0):(i.sprite.tint=0,i.sprite.visible=!1)}function wh(t,e){let i=0;for(let n=0;n<t.depth;n++){null!==t.data[n][e.y][e.x]&&(i=n)}return i}function Th(t,e,i,n){const r=i.getOne(xc);if(void 0!==r){const o=n.getOne(Cc);if(void 0===o)throw new Error("Fire trigger is missing its data");if(!gu(i,Math.max(r.fireDamage,o.effectDamage),Math.max(r.turnsLeft,o.effectTurns)))return;Vc(t,e,i,o.damage,!1,pa.Fire)}}function Sh(t,e){if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");const i=e.getOne(Pc),n=t.getOne(Qh);if(void 0===i)throw new Error(`Event trigger ${e.id} is missing a EventTriggerComponent`);if(void 0===n)throw new Error(`Actor ${t.id} is missing a TypeComponent`);"player"===n.entityType&&s.gameEventEmitter.emit(i.event)}function Eh(t){void 0!==t.getOne(oc)&&t.addComponent({type:"SpeedEffectComponent",name:"mud",stat:"maxTilesPerMove",modifierType:"multiply",turnsLeft:1,value:.1,display:!1})}function Ch(t){var e;yu(t,10);const i=t.getOne(wc);void 0!==i&&!1===i.wet&&t.id===(null===(e=s.Game)||void 0===e?void 0:e.playerId)&&nu("You are now wet from stepping in the water")}function Ph(t){var e;yu(t,20);const i=t.getOne(wc);if(void 0!==i&&!1===i.wet&&t.id===(null===(e=s.Game)||void 0===e?void 0:e.playerId)&&nu("You are now wet from stepping in the water"),!t.tags.has("aquatic")){void 0!==t.getOne(oc)&&t.addComponent({type:"SpeedEffectComponent",name:"water",stat:"maxTilesPerMove",modifierType:"multiply",turnsLeft:1,value:.1,display:!1})}}function Ih(t,e,i){var n;if(i.id===(null===(n=s.Game)||void 0===n?void 0:n.playerId))nu("You take damage from the steam");else{const t=i.getOne(Zh);void 0!==t&&nu(t.name+" is hurt by the steam")}Vc(t,e,i,7,!1,pa.Water)}function Ah(t,e){const i=t.getOne(ic),n=e.getOne(ic);if(null===s.Game)throw new Error("Global game object is null");if(void 0===i||void 0===n)throw new Error(`Missing inventory on ${t.id} or ${e.id}`);{const r=Au(n);if(r.length>0){for(let t=0;t<r.length;t++){const n=r[t];nu("Found a "+Pu[n.id].displayName),Mu(i,n.id,n.count),ku(e,n.id)}const n=e.getOne(Qh);t.id===s.Game.playerId&&"chest"===(null==n?void 0:n.entityType)&&Vl.chestOpening.play(),"dropped_item"===(null==n?void 0:n.entityType)&&Bc(s.Game.ecs,e)}else nu("Empty")}}var Oh,Mh;!function(t){t[t.Linear=0]="Linear",t[t.EaseIn=1]="EaseIn"}(Oh||(Oh={}));class kh{constructor(t){this.hasStarted=!1,this.finished=!1,this.timer=0,this.obj=t.object,this.key=t.key,this.duration=t.duration,this.delay=t.delay,this.start=t.start,this.end=t.end,this.transition=t.transition,this.timer=0}update(t){!1===this.hasStarted&&(this.hasStarted=!0),!0!==this.finished&&(this.timer+=t,this.timer>=this.delay&&(this.transition===Oh.Linear?this.obj[this.key]=this.linear((this.timer-this.delay)/this.duration,this.timer-this.delay,this.start,this.end):this.transition===Oh.EaseIn&&(this.obj[this.key]=this.easeIn((this.timer-this.delay)/this.duration,this.timer-this.delay,this.start,this.end,this.duration))),this.timer>=this.duration+this.delay&&(this.finished=!0))}linear(t,e,i,n){return i+(n-i)*t}easeIn(t,e,i,n,r){return n*(e/r)*e+i}}function Rh(t){return function(e,i){if(null===s.Game)throw new Error("Global game object is null");if(t.x===e&&t.y===i)return!0;const{blocks:n}=mh(s.Game.ecs,s.Game.map,s.Game.entityMap,new gh(e,i));return!n}}function Dh(t,e,i,n){return function(r,o){var a;if(null===s.Game)throw new Error("Global game object is null");const l=[];for(let n=0;n<Ya[8].length;n++){const s=Ya[8][n],a=new gh(r+s[0],o+s[1]);mh(t,e,i,a).blocks||l.push(a)}let u=Math.max(Math.abs(r-n.x),Math.abs(o-n.y));if(r!==n.x||o!==n.y){const e=fh(t,i,new gh(r,o));for(let t=0;t<e.length;t++){const i=e[t].getOne(Ec);if(void 0!==i)switch(i.currentTriggerType){case xa.Fire:u+=20;break;case xa.ShallowWater:u+=2;break;case xa.DeepWater:case xa.Mud:u+=7;break;case xa.Steam:u+=20;break;case xa.Event:break;case xa.Ice:u+=7;break;default:rl(i.currentTriggerType)}}for(let e=0;e<l.length;e++){const n=l[e],r=fh(t,i,n);for(let t=0;t<r.length;t++){void 0!==r[t].getOne(Cc)&&(u+=5)}}}return!0===(null===(a=s.Game)||void 0===a?void 0:a.debugPathfinding)&&(s.Game.map.data[0][o][r].pathfindingCost=u.toString(10)),u}}function Lh(t,e,i,n,r,o){if(yh(r,n)<2*o){const s=new tl.AStar(r.x,r.y,Rh(n),function(t){return function(e,i){return Math.max(Math.abs(e-t.x),Math.abs(i-t.y))}}(n),{topology:8});if(r.y>=e.height||r.x>=e.width)return[];if(!0===mh(t,e,i,r).blocks)return[];const a=[];return s.compute(n.x,n.y,(function(t,e){a.push(new gh(t,e))})),0===a.length||a.length>o?[]:(a.shift(),0===a.length?[]:a)}return[]}class Fh{constructor(t){this.blocks=!0,this.isSetUp=!1,this.usesTurn=t}usedTurn(){return this.usesTurn}isFinished(){return!0}update(){}}class Nh{constructor(t,e){if(this.blocks=!0,this.isSetUp=!1,this.tilesMoved=0,this.done=!1,0===e.length)throw new Error("Zero length path for GoToLocationCommand");this.entityId=t,this.path=e}usedTurn(){return!0}isFinished(){return this.done}update(t,e){const i=this.path[0],{blocks:n}=mh(s.Game.ecs,s.Game.map,s.Game.entityMap,i);if(!0===n)return void(this.done=!0);const r=t.getEntity(this.entityId);if(void 0===r)return void(this.done=!0);const o=r.getOne(Jh);if(void 0===o||null===o.sprite)throw new Error("No graphics for entity");const a=r.getOne($h);if(void 0===a)throw new Error(`Entity ${this.entityId} does not have a position for GoToLocationCommand`);const l=yh(s.Game.gameCamera.tilePositionToWorld(a.tilePosition),s.Game.gameCamera.tilePositionToWorld(i)),u=new gh(i.x-a.tilePosition.x,i.y-a.tilePosition.y);a.worldPosition.x+=.25*u.x*e,a.worldPosition.y+=.25*u.y*e,a.update();if(yh(s.Game.gameCamera.tilePositionToWorld(a.tilePosition),gh.fromVector(a.worldPosition))>=l){const e=s.Game.gameCamera.tilePositionToWorld(i);a.worldPosition=e,a.tilePosition=i,a.update(),this.tilesMoved++,this.path.shift();const n=r.getOne(xc),o=fh(t,s.Game.entityMap,i);for(let e=0;e<o.length;e++){const l=o[e],u=l.getOne(Ec),h=l.getOne(xc);if(void 0!==n&&!0===n.onFire&&void 0!==h&&!1===h.onFire&&Math.random()>=.5&&gu(l,n.fireDamage,il(3,6)),void 0!==u)switch(u.currentTriggerType){case xa.Event:Sh(r,l);break;case xa.Fire:Th(t,s.Game.entityMap,r,l);break;case xa.ShallowWater:Ch(r);break;case xa.DeepWater:Ph(r);break;case xa.Mud:Eh(r);break;case xa.Steam:Ih(t,s.Game.entityMap,r);break;case xa.Ice:{const t=i.x-a.tilePosition.x,e=i.y-a.tilePosition.y;return s.Game.commandQueue.push(new Nh(this.entityId,[new gh(i.x+t,i.y+e)])),void(this.done=!0)}default:rl(u.currentTriggerType)}}const l=Wc(s.Game.ecs,s.Game.entityMap,r);if(null!==l&&l.maxTilesPerMove<=this.tilesMoved)return void(this.done=!0);0===this.path.length&&(this.done=!0)}}}class Bh{constructor(t,e,i,n=.3){this.blocks=!1,this.isSetUp=!1,this.tilesMoved=0,this.entityId=t,this.dir=e,this.numTiles=i,this.stunProbability=n}usedTurn(){return!1}isFinished(){return this.tilesMoved===this.numTiles}tearDown(t){const e=t.getEntity(this.entityId);void 0!==e&&Math.random()<=this.stunProbability&&vu(e,1)}update(t,e){var i;const n=t.getEntity(this.entityId);if(void 0===n)return void(this.tilesMoved=this.numTiles);const r=n.getOne($h);if(void 0===r)throw new Error(`Entity ${this.entityId} does not have a position for PushBackCommand`);const o=Ya[8][this.dir],a=new gh(r.tilePosition.x+o[0],r.tilePosition.y+o[1]),{blocks:l,entity:u}=mh(s.Game.ecs,s.Game.map,s.Game.entityMap,a);if(!0===l){const e=this.numTiles-this.tilesMoved,r=3*this.numTiles+2*e;if(Vc(t,s.Game.entityMap,n,r,!1,pa.Physical),Math.random()>.3){if(vu(n,3)){nu(n.getOne(Zh).name+" is now stunned",iu.StatusEffect)}}return null!==u&&(Vc(t,s.Game.entityMap,u,r,!1,pa.Physical),Math.random()<=this.stunProbability&&vu(u,1),u.tags.has("moveable")&&(null===(i=s.Game)||void 0===i||i.commandQueue.push(new Bh(u.id,this.dir,e)))),void(this.numTiles=this.tilesMoved)}const h=yh(s.Game.gameCamera.tilePositionToWorld(r.tilePosition),s.Game.gameCamera.tilePositionToWorld(a));r.worldPosition.x+=.5*o[0]*e,r.worldPosition.y+=.5*o[1]*e,r.update();if(yh(s.Game.gameCamera.tilePositionToWorld(r.tilePosition),gh.fromVector(r.worldPosition))>=h){const e=s.Game.gameCamera.tilePositionToWorld(a);r.worldPosition=e,r.tilePosition=a,r.update(),this.tilesMoved++;const i=n.getOne(xc),o=fh(t,s.Game.entityMap,a);for(let e=0;e<o.length;e++){const r=o[e],a=r.getOne(Ec),l=r.getOne(xc);if(void 0!==i&&!0===i.onFire&&void 0!==l&&!1===l.onFire&&Math.random()>=.5&&gu(r,i.fireDamage,il(3,6)),void 0!==a)switch(a.currentTriggerType){case xa.Event:Sh(n,r);break;case xa.Fire:Th(t,s.Game.entityMap,n,r);break;case xa.ShallowWater:Ch(n);break;case xa.DeepWater:Ph(n);break;case xa.Mud:Eh(n);break;case xa.Steam:Ih(t,s.Game.entityMap,n);break;case xa.Ice:this.numTiles++;break;default:rl(a.currentTriggerType)}}}}}class jh{constructor(t,e){this.blocks=!0,this.isSetUp=!1,this.interacted=!0,this.entityId=t,this.targetId=e}usedTurn(){return this.interacted}isFinished(){return!0}update(t){const e=t.getEntity(this.entityId),i=t.getEntity(this.targetId);if(void 0===e||void 0===i)return;const n=e.getOne(ac),r=i.getOne(Ic),o=i.getOne(nc);if(void 0===r){if(void 0!==o&&void 0!==n)return function(t,e,i,n){var r;const o=i.getOne(uc),s=Xc(t,e,i),a=i.getOne(Zh),l=n.getOne(uc),u=n.getOne(Zh);if(null===s)throw new Error("Cannot attack damage without a StatsComponent");let h=Math.round(s.strength),c=!1;Ta.a.getUniform()<=s.criticalChance&&(h=Math.ceil(h*s.criticalDamageMultiplier),c=!0);if(h>0){const i=null!==(r=null==l?void 0:l.experienceGiven)&&void 0!==r?r:0;Vc(t,e,n,h,c,pa.Physical)&&void 0!==o&&(o.experience+=i,o.update())}else void 0!==a&&void 0!==u&&nu(`${a.name} attacks ${u.name}, but it's too weak!`)}(t,s.Game.entityMap,e,i),void(this.interacted=!0);this.interacted=!1}else{switch(r.interactableType){case ba.Door:!function(t,e){if(null===s.Game)throw new Error("Global game object is null");Jl(),Bc(s.Game.ecs,e)}(0,i);break;case ba.GiveItems:Ah(e,i);break;case ba.GiveSpells:!function(t,e){var i;const n=e.getOne(cc);if(void 0===n)throw new Error(`Entity ${e.id} is missing a SpellsComponent`);const r=Qc(n);for(const e of r){const n=$c(t,e.id,e.count,e.maxCount);t.id===(null===(i=s.Game)||void 0===i?void 0:i.playerId)&&nu(n?"You learned a new spell: "+e.displayName:"You already know "+e.displayName)}}(e,i);break;case ba.LoadLevel:!function(t,e){const i=e.getOne(Ac),n=e.getOne(Qh);if(void 0===i)throw new Error("No level name has been set for load");if(null===s.Game)throw new Error("Global game object is null");if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");s.Game.loadLevel(i.levelName),"load_door"===(null==n?void 0:n.entityType)&&Jl()}(0,i);break;case ba.Rest:!function(t){const e=t.getOne(nc);void 0!==e&&(e.hp=e.maxHp,e.update());const i=t.getOne(cc);if(void 0!==i){const t=Qc(i);for(const e of t)i.knownSpells[e.id].count=e.maxCount}nu("You are now rested")}(e);break;default:rl(r.interactableType)}this.interacted=!0}}}class Gh{constructor(){this.blocks=!0,this.isSetUp=!1}usedTurn(){return!1}isFinished(){return!0}update(){const t=s.Game;if(null===t)throw new Error("Global Game object is null");t.setState(t.inventoryMenuState)}}class Uh{constructor(){this.blocks=!0,this.isSetUp=!1}usedTurn(){return!1}isFinished(){return!0}update(){var t;null===(t=s.Game)||void 0===t||t.setState(s.Game.spellMenuState)}}class zh{constructor(t,e,i,n,r){this.blocks=!0,this.isSetUp=!1,this.didUseTurn=!1,this.particleEmitter=null,this.effectGraphics=null,this.effectTween=null,this.entityId=t,this.target=i,this.rotation=n,this.details=e,this.skillCallback=r}usedTurn(){return this.didUseTurn}isFinished(){return s.gameEventEmitter.emit("tutorial.spellCasts"),null!==this.particleEmitter?!this.particleEmitter.emit:null===this.effectTween||this.effectTween.finished}setUp(t){var e,i,n,r,o;const a=t.getEntity(this.entityId);if(void 0!==a){if(this.details.type===va.WildDamage||this.details.type===ya.WildDamageScroll){const t=function(t,e,i,n){const r=t.createQuery().fromAll($h,nc,dc).execute(),o=[];for(const t of r){const e=t.getOne($h),r=yh(i,e.tilePosition);!i.isEqual(e.tilePosition)&&r<=n&&o.push(t)}return o.length>0?Ta.a.getItem(o):null}(s.Game.ecs,s.Game.map,a.getOne($h).tilePosition,16);if(null===t)return"player"===a.id&&nu("No target is close enough to use the scroll"),void(this.didUseTurn=!1);this.target=t.getOne($h).tilePosition}if(this.didUseTurn=this.details.useFunc(this.details,a,s.Game.ecs,s.Game.map,s.Game.entityMap,this.target,this.rotation),this.didUseTurn){if(void 0!==this.skillCallback&&this.skillCallback(a,this.details.id),"particles"===this.details.effect&&void 0!==this.details.particles){let o;if("target"===this.details.particles.particleLocation&&void 0!==this.target){const n=fh(t,s.Game.entityMap,this.target);n.sort((t,e)=>{var i,n,r,o,s,a;const l=null!==(r=null===(n=null===(i=t.getOne(Jh))||void 0===i?void 0:i.sprite)||void 0===n?void 0:n.zIndex)&&void 0!==r?r:0;return(null!==(a=null===(s=null===(o=e.getOne(Jh))||void 0===o?void 0:o.sprite)||void 0===s?void 0:s.zIndex)&&void 0!==a?a:0)-l});const r=n[0];void 0!==r&&(o=null!==(i=null===(e=r.getOne(Jh))||void 0===e?void 0:e.sprite)&&void 0!==i?i:void 0);let a=wh(s.Game.map,this.target);for(;void 0===o;){const t=s.Game.map.data[a][this.target.y][this.target.x];null!==t&&null!==t.sprite?o=t.sprite:--a}}else"self"===this.details.particles.particleLocation&&(o=null!==(r=null===(n=a.getOne(Jh))||void 0===n?void 0:n.sprite)&&void 0!==r?r:void 0);this.particleEmitter=new Al(o,this.details.particles.particleImages.map(t=>s.Game.textureAtlas[t]),this.details.particles.particleConfig),this.particleEmitter.emit=!0}if("lightning"===this.details.effect&&void 0!==this.details.lightning&&void 0!==this.target){const t=a.getOne($h).tilePosition,e=s.Game.gameCamera.tilePositionToScreen(t);this.effectGraphics=function t(e,i,n,r,o,a){var l,u;let h=0,c=0;const d=r*(null!==(u=null===(l=s.Game)||void 0===l?void 0:l.gameCamera.zoom)&&void 0!==u?u:1),p=new no;p.zIndex=10,p.x=e+16*s.Game.gameCamera.zoom/2,p.y=i+16*s.Game.gameCamera.zoom/2,o||p.clear();for(let e=0;e<n&&(p.lineStyle(d,16777215,1),p.moveTo(h,c),h+=il(-30,30),h<=10&&(h=10),h>=190&&(h=190),c+=o?il(10,20):il(20,a/n),(!o&&e===n-1||c>a)&&(o||(c=a,h=0)),p.lineTo(h,c),!(c>=a));e++)if(!o&&Math.random()<=.3){const e=t(h,c,il(3,10),1,!0,il(Math.floor(a/2),Math.floor(a)));e.x=h,e.y=c,p.addChild(e)}return o||(p.filters=[new lu({color:16777215,innerStrength:0,outerStrength:2})]),p}(e.x,e.y,20,2,!1,function(t,e,i){const n=16*e.x*i-16*t.x*i,r=16*e.y*i-16*t.y*i;return Math.sqrt(n**2+r**2)}(t,this.target,s.Game.gameCamera.zoom)),this.effectGraphics.rotation=Math.atan2(-(this.target.x-t.x),this.target.y-t.y),null===(o=s.Game)||void 0===o||o.pixiApp.stage.addChild(this.effectGraphics),this.effectTween=new kh({object:this.effectGraphics,key:"alpha",duration:this.details.lightning.fadeOut,delay:this.details.lightning.duration,start:1,end:0,transition:Oh.Linear})}}}}update(t,e){this.didUseTurn&&null!==this.particleEmitter&&this.particleEmitter.emit&&this.particleEmitter.update(.001*e),this.didUseTurn&&null!==this.effectTween&&this.effectTween.update(e)}tearDown(){null!==this.particleEmitter&&this.particleEmitter.destroy(),null!==this.effectGraphics&&this.effectGraphics.destroy()}}class Hh{constructor(t){this.blocks=!0,this.isSetUp=!1,this.entityId=t}usedTurn(){return!1}isFinished(){return!0}update(t){const e=t.getEntity(this.entityId);if(void 0===e)return;const i=e.getOne(_c);if(void 0!==i){switch(i.reticleRotation){case 0:i.reticleRotation=90;break;case 90:i.reticleRotation=180;break;case 180:i.reticleRotation=270;break;case 270:i.reticleRotation=0}i.update()}}}class Xh{constructor(t,e,i=1e3){this.blocks=!0,this.isSetUp=!1,this.effectGraphics=null,this.effectTween=null,this.entityId=t,this.dialog=e,this.duration=i}usedTurn(){return!1}isFinished(){return null===this.effectTween||this.effectTween.finished}setUp(t){var e;const i=t.getEntity(this.entityId);if(void 0===i)return;const n=i.getOne($h).tilePosition,r=s.Game.gameCamera.tilePositionToScreen(n);r.x<s.Game.gameCamera.viewport.width&&r.x>=0&&r.y<s.Game.gameCamera.viewport.height&&r.y>=0&&(this.effectGraphics=function(t,e,i){const n=new no;n.zIndex=10,n.zIndex=10;const r=new bo(i,{fontFamily:"monospace",fontSize:12,fill:0}),o=r.width+20,a=r.height+20,l=16*s.Game.gameCamera.zoom/2;return n.x=t-o/2+l,n.y=e-a-l,r.x+=10,r.y+=10,n.clear(),n.beginFill(16777215,1),n.drawRoundedRect(0,0,o,a,5),n.drawPolygon([new Zt(o/2-l,a),new Zt(o/2+l,a),new Zt(o/2,a+l)]),n.addChild(r),n}(r.x,r.y,this.dialog),null===(e=s.Game)||void 0===e||e.pixiApp.stage.addChild(this.effectGraphics),this.effectTween=new kh({object:this.effectGraphics,key:"alpha",delay:this.duration,duration:200,start:1,end:0,transition:Oh.Linear}))}update(t,e){null!==this.effectTween&&this.effectTween.update(e)}tearDown(){null!==this.effectGraphics&&this.effectGraphics.destroy()}}class Wh{constructor(t){this.blocks=!0,this.isSetUp=!1,this.entityId=t}usedTurn(){return!0}isFinished(){return!0}update(t){const e=t.getEntity(this.entityId);if(void 0===e)return;const i=e.getOne(dc);if(void 0!==i&&null!==i.teamId){const t=s.Game.entityTeams.get(i.teamId);void 0!==t&&t.alert()}}}class Yh{constructor(t,e,i,n=null){this.blocks=!0,this.isSetUp=!1,this.xTween=null,this.yTween=null,this.map=t,this.camera=e,this.camera.following=null,this.entityId=i.id;const r=i.getOne($h);this.position=e.clamp(r.worldPosition.x,r.worldPosition.y,t.width,t.height),this.duration=null!=n?n:Math.min(Math.max(50,3.5*yh(this.position,gh.fromVector(e))),1500)}usedTurn(){return!1}isFinished(){const t=null===this.xTween||this.xTween.finished;return t&&(this.camera.following=this.entityId),t}setUp(){this.xTween=new kh({object:this.camera,key:"x",delay:200,duration:this.duration,start:this.camera.x,end:this.position.x,transition:Oh.Linear}),this.yTween=new kh({object:this.camera,key:"y",delay:200,duration:this.duration,start:this.camera.y,end:this.position.y,transition:Oh.Linear})}update(t,e){null!==this.xTween&&null!==this.yTween&&(this.xTween.update(e),this.yTween.update(e))}}function Vh(t,e,i,n,r=!0){var o;if(n.x>=e.width||n.y>=e.height||!1===e.visibilityData[n.y][n.x].visible)return null;const s=fh(t,i,n);let a;return a=r?s.filter(t=>{const e=t.getOne(nc),i=t.getOne(Ic);return void 0!==e||void 0!==i}):s,a=a.sort((t,e)=>{let i=0,n=0;return void 0!==t.getOne(dc)&&(i+=10),void 0!==t.getOne(nc)&&(i+=5),void 0!==t.getOne(Ic)&&(i+=3),void 0!==e.getOne(dc)&&(n+=10),void 0!==e.getOne(nc)&&(n+=5),void 0!==e.getOne(Ic)&&(n+=3),n-i}),null!==(o=a[0])&&void 0!==o?o:null}!function(t){t[t.Combat=0]="Combat",t[t.Target=1]="Target"}(Mh||(Mh={}));const Kh={[pa.Physical]:fa.normal,[pa.Fire]:fa.normal,[pa.Electric]:fa.normal,[pa.Water]:fa.normal,[pa.Nature]:fa.normal,[pa.Ice]:fa.normal},qh={[pa.Physical]:fa.normal,[pa.Fire]:fa.strong,[pa.Electric]:fa.weak,[pa.Water]:fa.strong,[pa.Nature]:fa.normal,[pa.Ice]:fa.weak};class $h extends l.Component{}$h.typeName="PositionComponent",$h.properties={worldPosition:new gh(0,0),tilePosition:new gh(0,0)};class Qh extends l.Component{}Qh.typeName="TypeComponent",Qh.properties={entityType:"player",race:"human",classification:"player"};class Zh extends l.Component{}Zh.typeName="DisplayNameComponent",Zh.properties={name:"player"};class Jh extends l.Component{}Jh.typeName="GraphicsComponent",Jh.properties={textureKey:"",sprite:null,opacity:1,zIndex:10};class tc extends l.Component{}tc.typeName="ChestComponent",tc.properties={openTextureKey:"",closedTextureKey:""};class ec extends l.Component{}ec.typeName="LightingComponent",ec.properties={color:"white",range:10,lightingType:ga.OnePass};class ic extends l.Component{}ic.typeName="InventoryComponent",ic.properties={inventory:new Map};class nc extends l.Component{}nc.typeName="HitPointsComponent",nc.properties={hp:100,maxHp:100,onDeath:ma.Default};class rc extends l.Component{}rc.typeName="HitPointsEffectComponent",rc.properties={name:"",stat:"hp",modifierType:"add",turnsLeft:0,value:0};class oc extends l.Component{}oc.typeName="SpeedComponent",oc.properties={speed:10,maxTilesPerMove:7};class sc extends l.Component{}sc.typeName="SpeedEffectComponent",sc.properties={name:"",stat:"speed",modifierType:"add",turnsLeft:0,value:0,display:!0};class ac extends l.Component{}ac.typeName="StatsComponent",ac.properties={strength:5,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1};class lc extends l.Component{}lc.typeName="StatsEffectComponent",lc.properties={name:"",stat:"strength",modifierType:"add",turnsLeft:0,value:0};class uc extends l.Component{}uc.typeName="LevelComponent",uc.properties={level:1,experience:0,experienceGiven:0};class hc extends l.Component{}pa.Physical,pa.Fire,pa.Electric,pa.Water,pa.Ice,pa.Nature,hc.typeName="DamageAffinityComponent",hc.properties={[pa.Physical]:fa.normal,[pa.Fire]:fa.normal,[pa.Electric]:fa.normal,[pa.Water]:fa.normal,[pa.Nature]:fa.normal,[pa.Ice]:fa.normal};class cc extends l.Component{}cc.typeName="SpellsComponent",cc.properties={knownSpells:{}};class dc extends l.Component{}dc.typeName="PlannerAIComponent",dc.properties={targetId:"",teamId:null,sightRange:7,planner:null,previousWorldState:{},currentAction:null,currentOrder:"attack",goals:null,actions:null,lowHealthThreshold:.25,desiredDistanceToTarget:1,knowsTargetPosition:!1,hasTargetInSight:!1};class pc extends l.Component{}pc.typeName="LoseTargetAIComponent",pc.properties={turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:10};class fc extends l.Component{}fc.typeName="FearAIComponent",fc.properties={fear:0,fearThreshold:10,runAwayTarget:null,isCowering:!1};class mc extends l.Component{}mc.typeName="FallbackAIComponent",mc.properties={isAtFallbackPosition:!1,fallbackPosition:l.EntityRef};class gc extends l.Component{}gc.typeName="PatrolAIComponent",gc.properties={patrolTarget:""};class yc extends l.Component{}yc.typeName="PatrolPathComponent",yc.properties={next:""};class vc extends l.Component{}vc.typeName="ConfusedAIComponent",vc.properties={turnsLeft:0};class _c extends l.Component{}_c.typeName="InputHandlingComponent",_c.properties={state:Mh.Combat,reticleRotation:0,keyCommands:[],itemForTarget:null,spellForTarget:null};class bc extends l.Component{}bc.typeName="FreezableComponent",bc.properties={frozen:!1,turnsLeft:0,textureKey:null};class xc extends l.Component{}xc.typeName="FlammableComponent",xc.properties={onFire:!1,fireDamage:0,turnsLeft:1};class wc extends l.Component{}wc.typeName="WetableComponent",wc.properties={wet:!1,turnsLeft:0};class Tc extends l.Component{}Tc.typeName="SilenceableComponent",Tc.properties={silenced:!1,turnsLeft:0};class Sc extends l.Component{}Sc.typeName="StunnableComponent",Sc.properties={stunned:!1,turnsLeft:0};class Ec extends l.Component{}Ec.typeName="TriggerTypeComponent",Ec.properties={currentTriggerType:null,initialTriggerType:null};class Cc extends l.Component{}Cc.typeName="FireTriggerComponent",Cc.properties={effectTurns:0,effectDamage:0,damage:0};class Pc extends l.Component{}Pc.typeName="EventTriggerComponent",Pc.properties={event:""};class Ic extends l.Component{}Ic.typeName="InteractableTypeComponent",Ic.properties={interactableType:ba.Door};class Ac extends l.Component{}Ac.typeName="LoadLevelComponent",Ac.properties={levelName:""};class Oc extends l.Component{}Oc.typeName="RemoveAfterNTurnsComponent",Oc.properties={turnsLeft:0};class Mc extends l.Component{}Mc.typeName="DialogMemoryComponent",Mc.properties={memory:new Map};const kc={door:{staticallyKnownComponents:{tags:["blocks","blocksSight"],c:{DisplayNameComponent:{name:"Door"},TypeComponent:{entityType:"door",race:null,classification:"object"},GraphicsComponent:{textureKey:"door_1_closed",sprite:null,zIndex:5},InteractableTypeComponent:{interactableType:ba.Door}}}},load_door:{staticallyKnownComponents:{tags:["blocks","drawAfterSeen"],c:{DisplayNameComponent:{name:"Door to new area"},TypeComponent:{entityType:"load_door",race:null,classification:"object"},GraphicsComponent:{textureKey:"door_1_closed",sprite:null,zIndex:5},InteractableTypeComponent:{interactableType:ba.LoadLevel}}}},stairs:{staticallyKnownComponents:{tags:["blocks","drawAfterSeen"],c:{DisplayNameComponent:{name:"Stairs"},TypeComponent:{entityType:"stairs",race:null,classification:"object"},GraphicsComponent:{textureKey:"stone_stairs_right",sprite:null,zIndex:5},InteractableTypeComponent:{interactableType:ba.LoadLevel}}}},chest:{addInventory:!0,staticallyKnownComponents:{tags:["blocks","drawAfterSeen"],c:{DisplayNameComponent:{name:"Chest"},TypeComponent:{entityType:"chest",race:null,classification:"object"},GraphicsComponent:{textureKey:"chest_1_closed",sprite:null,zIndex:5},ChestComponent:{closedTextureKey:"chest_1_closed",openTextureKey:"chest_1_open"},InteractableTypeComponent:{interactableType:ba.GiveItems},FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0}}}},crate:{addInventory:!0,staticallyKnownComponents:{tags:["blocks","moveable"],c:{TypeComponent:{entityType:"crate",race:null,classification:"object"},DisplayNameComponent:{name:"Wooden Crate"},GraphicsComponent:{textureKey:"wood_steel_crate",sprite:null,zIndex:5},HitPointsComponent:{hp:5,maxHp:5,onDeath:ma.RemoveFromWorld},DamageAffinityComponent:{[pa.Physical]:fa.normal,[pa.Fire]:fa.weak,[pa.Electric]:fa.normal,[pa.Water]:fa.strong,[pa.Nature]:fa.normal,[pa.Ice]:fa.strong},FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0}}}},barrel:{addInventory:!0,staticallyKnownComponents:{tags:["blocks","moveable"],c:{TypeComponent:{entityType:"barrel",race:null,classification:"object"},DisplayNameComponent:{name:"Wooden Barrel"},GraphicsComponent:{textureKey:"barrel_3",sprite:null,zIndex:5},HitPointsComponent:{hp:5,maxHp:5,onDeath:ma.RemoveFromWorld},DamageAffinityComponent:{[pa.Physical]:fa.normal,[pa.Fire]:fa.weak,[pa.Electric]:fa.normal,[pa.Water]:fa.strong,[pa.Nature]:fa.normal,[pa.Ice]:fa.strong},FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0}}}},dead_body:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"dead_body",race:null,classification:"object"},DisplayNameComponent:{name:"Dead Body"},GraphicsComponent:{textureKey:"skull_bone",sprite:null,zIndex:5}}}},lantern:{staticallyKnownComponents:{tags:["blocks"],c:{TypeComponent:{entityType:"lantern",race:null,classification:"object"},DisplayNameComponent:{name:"Small Lantern"},GraphicsComponent:{textureKey:"iron_lantern_lit",sprite:null,zIndex:5},LightingComponent:{color:"yellow",range:4,lightingType:ga.TwoPass}}}},campfire:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"campfire",race:null,classification:"object"},DisplayNameComponent:{name:"Small Campfire"},GraphicsComponent:{textureKey:"campfire_1_lit_1",sprite:null,zIndex:5},LightingComponent:{color:"orange",range:6,lightingType:ga.TwoPass},TriggerTypeComponent:{currentTriggerType:xa.Fire,initialTriggerType:xa.Fire},FireTriggerComponent:{effectTurns:3,effectDamage:3,damage:10}}}},rest_point:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"rest_point",race:null,classification:"object"},DisplayNameComponent:{name:"Bedroll"},GraphicsComponent:{textureKey:"green_bedroll_right",sprite:null,zIndex:5},InteractableTypeComponent:{interactableType:ba.Rest}}}},fire_effect:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"fire_effect",race:null,classification:"object"},DisplayNameComponent:{name:"Fire"},GraphicsComponent:{textureKey:"campfire_1_lit_1",sprite:null,zIndex:8},LightingComponent:{color:"orange",range:4,lightingType:ga.TwoPass},RemoveAfterNTurnsComponent:{turnsLeft:5},TriggerTypeComponent:{currentTriggerType:xa.Fire,initialTriggerType:xa.Fire},FireTriggerComponent:{effectTurns:5,effectDamage:5,damage:15}}}},ice_wall:{staticallyKnownComponents:{tags:["blocks","blocksSight"],c:{TypeComponent:{entityType:"ice_wall",race:null,classification:"object"},DisplayNameComponent:{name:"Ice Wall"},GraphicsComponent:{textureKey:"ice_wall",sprite:null,zIndex:8},HitPointsComponent:{hp:100,maxHp:100,onDeath:ma.RemoveFromWorld},DamageAffinityComponent:{[pa.Physical]:fa.normal,[pa.Fire]:fa.weak,[pa.Electric]:fa.normal,[pa.Water]:fa.strong,[pa.Nature]:fa.strong,[pa.Ice]:fa.nullified}}}},dropped_item:{addInventory:!0,staticallyKnownComponents:{tags:["moveable"],c:{TypeComponent:{entityType:"dropped_item",race:null,classification:"object"},DisplayNameComponent:{name:"Dropped Item"},GraphicsComponent:{textureKey:"yellow_and_green_bottle",sprite:null,zIndex:8},InteractableTypeComponent:{interactableType:ba.GiveItems}}}},magic_shrine:{staticallyKnownComponents:{tags:["blocks","blocksSight","drawAfterSeen"],c:{TypeComponent:{entityType:"magic_shrine",race:null,classification:"object"},DisplayNameComponent:{name:"Magicka Shrine"},GraphicsComponent:{textureKey:"mage_statue_bottom",sprite:null,zIndex:5},InteractableTypeComponent:{interactableType:ba.GiveSpells}}}},event_trigger:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"event_trigger",race:null,classification:"trigger"},TriggerTypeComponent:{currentTriggerType:xa.Event,initialTriggerType:xa.Event}}}},shallow_water:{staticallyKnownComponents:{tags:["environmentTile","waterTile"],c:{TypeComponent:{entityType:"shallow_water",race:null,classification:"object"},DisplayNameComponent:{name:"Water"},GraphicsComponent:{textureKey:"water_1",sprite:null,zIndex:5},TriggerTypeComponent:{currentTriggerType:xa.ShallowWater,initialTriggerType:xa.ShallowWater},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"frozen_water"}}}},puddle:{staticallyKnownComponents:{tags:["environmentTile","waterTile"],c:{TypeComponent:{entityType:"puddle",race:null,classification:"object"},DisplayNameComponent:{name:"Puddle"},GraphicsComponent:{textureKey:"water_1",sprite:null,zIndex:3},TriggerTypeComponent:{currentTriggerType:xa.ShallowWater,initialTriggerType:xa.ShallowWater},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"frozen_water"},RemoveAfterNTurnsComponent:{turnsLeft:30}}}},water:{staticallyKnownComponents:{tags:["environmentTile","waterTile"],c:{TypeComponent:{entityType:"water",race:null,classification:"object"},DisplayNameComponent:{name:"Deep Water"},GraphicsComponent:{textureKey:"deep_water",sprite:null,zIndex:5},TriggerTypeComponent:{currentTriggerType:xa.DeepWater,initialTriggerType:xa.DeepWater},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"frozen_water"}}}},steam:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"steam",race:null,classification:"object"},DisplayNameComponent:{name:"Steam"},GraphicsComponent:{textureKey:"sprite4691",sprite:null,zIndex:10,opacity:.6},TriggerTypeComponent:{currentTriggerType:xa.Steam,initialTriggerType:xa.Steam},RemoveAfterNTurnsComponent:{turnsLeft:5}}}},mud:{staticallyKnownComponents:{tags:["environmentTile"],c:{TypeComponent:{entityType:"mud",race:null,classification:"object"},DisplayNameComponent:{name:"Mud"},GraphicsComponent:{textureKey:"mud_1",sprite:null,zIndex:5},TriggerTypeComponent:{currentTriggerType:xa.Mud,initialTriggerType:xa.Mud},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"frozen_water"}}}},tall_grass:{staticallyKnownComponents:{c:{TypeComponent:{entityType:"tall_grass",race:null,classification:"object"},DisplayNameComponent:{name:"Tall Grass"},GraphicsComponent:{textureKey:"tall_grass_2",sprite:null,zIndex:5},FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},WetableComponent:{wet:!1,turnsLeft:0},HitPointsComponent:{hp:10,maxHp:10,onDeath:ma.RemoveFromWorld}}}},thick_underbrush:{staticallyKnownComponents:{tags:["blocksSight"],c:{TypeComponent:{entityType:"thick_underbrush",race:null,classification:"object"},DisplayNameComponent:{name:"Underbrush"},GraphicsComponent:{textureKey:"shrub_1",sprite:null,zIndex:10},FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},WetableComponent:{wet:!1,turnsLeft:0},HitPointsComponent:{hp:10,maxHp:10,onDeath:ma.RemoveFromWorld}}}},player:{addInventory:!0,addInput:!0,spells:[["lightning_bolt",10]],staticallyKnownComponents:{id:"player",tags:["blocks","input","sentient","moveable"],c:{TypeComponent:{entityType:"player",race:"human",classification:"player"},DisplayNameComponent:{name:"The Player"},GraphicsComponent:{textureKey:"player",sprite:null,zIndex:8},LightingComponent:{color:"white",range:7,lightingType:ga.Player},HitPointsComponent:{hp:100,maxHp:100,onDeath:ma.Default},SpeedComponent:{speed:10,maxTilesPerMove:7},StatsComponent:{strength:5,defense:2,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:1,experience:0,experienceGiven:0},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},SilenceableComponent:{silenced:!1,turnsLeft:0}}}},goblin:{addInventory:!0,addPlannerAI:!0,addDialogMemory:!0,sightRange:7,lowHealthThreshold:.5,desiredDistanceToTarget:1,actions:["wander","chase","goToEnemy","meleeAttack","goToSafePosition","douseFireOnSelf","alertAllies"],inventoryPool:[{itemID:"health_potion_weak",probability:.25}],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"goblin",race:"goblin",classification:"goblin"},DisplayNameComponent:{name:"Goblin"},GraphicsComponent:{textureKey:"orc_body_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},SpeedComponent:{speed:10,maxTilesPerMove:3},HitPointsComponent:{hp:30,maxHp:30,onDeath:ma.Default},StatsComponent:{strength:3,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:3,experience:0,experienceGiven:50},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},goblin_brute:{addInventory:!0,addPlannerAI:!0,addDialogMemory:!0,sightRange:10,desiredDistanceToTarget:1,actions:["guard","chase","useHealingItem","goToEnemy","goToSafePosition","meleeAttack","douseFireOnSelf","alertAllies"],inventoryPool:[{itemID:"health_potion_weak",probability:.25},{itemID:"health_potion",probability:.1}],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"goblin_brute",race:"goblin",classification:"goblin"},DisplayNameComponent:{name:"Goblin Brute"},GraphicsComponent:{textureKey:"orc_body_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},SpeedComponent:{speed:10,maxTilesPerMove:5},HitPointsComponent:{hp:100,maxHp:100,onDeath:ma.Default},StatsComponent:{strength:7,defense:4,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:10,experience:0,experienceGiven:500},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},rat:{addPlannerAI:!0,sightRange:5,lowHealthThreshold:.5,desiredDistanceToTarget:1,actions:["wander","chase","goToEnemy","meleeAttack","goToSafePosition","runAway","douseFireOnSelf"],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"rat",race:"rat",classification:"rat"},DisplayNameComponent:{name:"Rat"},GraphicsComponent:{textureKey:"rat",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:5,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:5},HitPointsComponent:{hp:10,maxHp:10,onDeath:ma.Default},StatsComponent:{strength:2,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:1,experience:0,experienceGiven:10},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},eel:{addPlannerAI:!0,sightRange:9,lowHealthThreshold:.5,desiredDistanceToTarget:1,actions:["wander","chase","goToEnemy","goToSafePosition","meleeAttack"],staticallyKnownComponents:{tags:["blocks","sentient","moveable","aquatic"],c:{TypeComponent:{entityType:"eel",race:"eel",classification:"eel"},DisplayNameComponent:{name:"Eel"},GraphicsComponent:{textureKey:"eel_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:10,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:4},HitPointsComponent:{hp:10,maxHp:10,onDeath:ma.Default},StatsComponent:{strength:2,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:1,experience:0,experienceGiven:10},DamageAffinityComponent:qh,FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},StunnableComponent:{stunned:!1,turnsLeft:0}}}},bandit:{addInventory:!0,addPlannerAI:!0,addDialogMemory:!0,sightRange:8,lowHealthThreshold:.5,desiredDistanceToTarget:1,actions:["guard","chase","useHealingItem","goToEnemy","goToSafePosition","runAway","meleeAttack","douseFireOnSelf","alertAllies"],inventoryPool:[{itemID:"health_potion_weak",probability:.25}],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"bandit",race:"human",classification:"bandit"},DisplayNameComponent:{name:"Bandit"},GraphicsComponent:{textureKey:"bandit_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:10,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:3},HitPointsComponent:{hp:30,maxHp:30,onDeath:ma.Default},StatsComponent:{strength:2,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:1,experience:0,experienceGiven:10},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},bandit_mage:{addInventory:!0,addPlannerAI:!0,addDialogMemory:!0,sightRange:8,lowHealthThreshold:.5,desiredDistanceToTarget:5,spells:[["lightning_bolt",3],["lesser_heal",1]],actions:["wander","chase","standby","reposition","useHealingItem","useHealingSpell","goToEnemy","goToSafePosition","runAway","meleeAttack","douseFireOnSelf","alertAllies"],inventoryPool:[{itemID:"health_potion_weak",probability:.25}],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"bandit_mage",race:"human",classification:"bandit"},DisplayNameComponent:{name:"Bandit Mage"},GraphicsComponent:{textureKey:"blue_mage_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:30,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:5},HitPointsComponent:{hp:30,maxHp:30,onDeath:ma.Default},StatsComponent:{strength:2,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:5,experience:0,experienceGiven:10},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},SilenceableComponent:{silenced:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},bandit_white_mage:{addInventory:!0,addPlannerAI:!0,addDialogMemory:!0,sightRange:8,lowHealthThreshold:.4,desiredDistanceToTarget:5,spells:[["heal_other",2]],actions:["wander","chase","standby","reposition","useHealingItem","useHealingSpell","healAlly","goToEnemy","goToSafePosition","runAway","meleeAttack","douseFireOnSelf","alertAllies"],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"bandit_white_mage",race:"human",classification:"bandit"},DisplayNameComponent:{name:"Bandit White Mage"},GraphicsComponent:{textureKey:"red_mage_1",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:30,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:5},HitPointsComponent:{hp:30,maxHp:30,onDeath:ma.Default},StatsComponent:{strength:2,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:5,experience:0,experienceGiven:10},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},SilenceableComponent:{silenced:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}},dog:{addPlannerAI:!0,sightRange:7,lowHealthThreshold:.5,desiredDistanceToTarget:1,actions:["wander","chase","goToEnemy","meleeAttack","runAway"],staticallyKnownComponents:{tags:["blocks","sentient","moveable"],c:{TypeComponent:{entityType:"dog",race:"dog",classification:"dog"},DisplayNameComponent:{name:"Dog"},GraphicsComponent:{textureKey:"dog",sprite:null,zIndex:5},LoseTargetAIComponent:{turnsWithTargetOutOfSight:0,loseTrackAfterNTurns:6},FearAIComponent:{fear:0,isAfraidThreshold:10,isCowering:!1},SpeedComponent:{speed:10,maxTilesPerMove:7},HitPointsComponent:{hp:20,maxHp:20,onDeath:ma.Default},StatsComponent:{strength:5,defense:1,criticalChance:.05,criticalDamageMultiplier:1.5,ailmentSusceptibility:.1},LevelComponent:{level:3,experience:0,experienceGiven:10},DamageAffinityComponent:Kh,FlammableComponent:{onFire:!1,fireDamage:0,turnsLeft:0},FreezableComponent:{frozen:!1,turnsLeft:0,textureKey:"ice_wall"},WetableComponent:{wet:!1,turnsLeft:0},StunnableComponent:{stunned:!1,turnsLeft:0}}}}};for(const t in kc){const e=kc[t];if(void 0!==e.spells&&void 0!==e.actions)for(let t=0;t<e.spells.length;t++){const i=e.spells[t];e.actions.push("castSpell_"+i[0])}}class Rc{constructor(){this.state="passive",this.memberIds=[],this.createdWithCommander=!1,this.commanderId=null}update(){var t,e,i;if(null!==this.commanderId){void 0===(null===(t=s.Game)||void 0===t?void 0:t.ecs.getEntity(this.commanderId))&&(this.commanderId=null)}for(let t=0;t<this.memberIds.length;t++){const n=null!==(i=null===(e=s.Game)||void 0===e?void 0:e.ecs.getEntity(this.memberIds[t]))&&void 0!==i?i:null;if(null===n){this.memberIds.splice(t,1);continue}void 0!==n.getOne(dc)||this.memberIds.splice(t,1)}}alert(){var t;for(let e=0;e<this.memberIds.length;e++){const i=null===(t=s.Game)||void 0===t?void 0:t.ecs.getEntity(this.memberIds[e]);if(void 0!==i){const t=i.getOne(dc);void 0!==t&&(t.knowsTargetPosition=!0,t.update())}}this.state="attacking"}}class Dc extends l.System{init(){this.mainQuery=this.createQuery().fromAll($h).persist()}update(){var t;if(null===s.Game)throw new Error("Global game object is null");const e=this.mainQuery.execute();s.Game.entityMap.clear();for(const i of e){const e=i.getOne($h).tilePosition,n=`${e.x},${e.y}`,r=null!==(t=s.Game.entityMap.get(n))&&void 0!==t?t:[];r.push(i.id),s.Game.entityMap.set(n,r)}}}class Lc extends l.System{init(){this.query=this.createQuery().fromAll(Oc).persist()}update(){const t=this.query.execute();for(const e of t){const t=e.getOne(Oc);t.turnsLeft--,0===t.turnsLeft?Bc(this.world,e):t.update()}}}class Fc extends l.System{update(){for(const t of s.Game.entityTeams.values())t.update()}}function Nc(t,e,i,n,r){var o,a,l;if(null===s.Game)throw new Error("Global game is null");if(!(i in kc))throw new Error(i+" is not valid object id");let u=il(1,2147483647);u&=u;const h=null!=r?r:`${i}-${u.toString(16)}`,c=kc[i],d=t.createEntity(Object(wa.assignIn)({},{id:h},c.staticallyKnownComponents));if(void 0!==n&&!1===d.has($h)){const t=s.Game.gameCamera.tilePositionToWorld(n);d.addComponent({type:"PositionComponent",worldPosition:t,tilePosition:n})}const p=d.getOne(Jh);if(void 0!==p&&(p.sprite=new lo(e[p.textureKey]),s.Game.pixiApp.stage.addChild(p.sprite)),void 0!==c.spells&&!1===d.has(cc)){const t={};c.spells.forEach(e=>{t[e[0]]={count:e[1],maxCount:e[1]}}),d.addComponent({type:"SpellsComponent",knownSpells:t})}if(!0===(null==c?void 0:c.addInventory)&&!1===d.has(ic)){const t=new Map;if(void 0!==c.inventoryPool)for(let e=0;e<c.inventoryPool.length;e++)Ta.a.getUniform()<=c.inventoryPool[e].probability&&t.set(c.inventoryPool[e].itemID,1);d.addComponent({type:"InventoryComponent",inventory:t})}if(!0===(null==c?void 0:c.addDialogMemory)&&!1===d.has(Mc)){const t=new Map,e=d.getOne(Qh);if(void 0!==e){const i=$u[e.classification];if(void 0!==i)for(const e of i.rules)t.set("said_"+e.name,!1)}d.addComponent({type:"DialogMemoryComponent",memory:t})}if(!0===(null==c?void 0:c.addInput)&&!1===d.has(_c)){const t=[{key:"i",description:"Inventory",command:()=>new Gh},{key:"m",description:"Spell Menu",command:()=>new Uh},{key:"r",description:"Rotate Target Reticle",command:()=>new Hh(d.id)},{key:"x",description:"Pass Turn",command:()=>new Fh(!0)}];d.addComponent({type:"InputHandlingComponent",state:Mh.Combat,reticleRotation:0,keyCommands:t,itemForTarget:null,spellForTarget:null})}if(!0===(null==c?void 0:c.addPlannerAI)&&void 0!==c.actions){const t=new Set(c.actions),{goals:e,planner:i}=ih(t);d.addComponent({type:"PlannerAIComponent",sightRange:null!==(o=null==c?void 0:c.sightRange)&&void 0!==o?o:5,desiredDistanceToTarget:null!==(a=null==c?void 0:c.desiredDistanceToTarget)&&void 0!==a?a:1,planner:i,targetId:"player",teamId:null,previousWorldState:{},currentAction:null,currentOrder:"attack",goals:e,actions:t,lowHealthThreshold:null!==(l=c.lowHealthThreshold)&&void 0!==l?l:.25,knowsTargetPosition:!1,hasTargetInSight:!1})}return d}function Bc(t,e){if(null===s.Game)throw new Error("Global game is null");const i=e.getOne(Jh);void 0!==i&&null!==i.sprite&&(s.Game.pixiApp.stage.removeChild(i.sprite),i.sprite.visible=!1,i.sprite.destroy(),i.sprite=null),t.removeEntity(e)}class jc extends l.System{init(){this.mainQuery=this.createQuery().fromAll(nc).persist()}generateUpdateFearVisibilityCallback(t){const e=t.getOne(uc),i=this;return function(n,r){if(void 0===e)return;const o=fh(i.world,s.Game.entityMap,new gh(n,r));for(const i of o){if(i===t)continue;const n=i.getOne(fc),r=i.getOne(uc);if(void 0===n||void 0===r)continue;const o=e.level-r.level,s=Math.round(.5*o),a=il(o-s,o+s);n.fear+=Math.max(a,1),n.update()}}}actorDeath(t){if(null===s.Game)throw new Error("Global game object is null");if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");const e=t.getOne(Zh);void 0!==e&&(nu(e.name+" has been killed"),e.name="Remains of a "+e.name,e.update()),t.removeTag("blocks"),t.removeTag("blocksSight"),t.removeTag("sentient");const i=t.getOne(Jh);void 0!==i&&null!==i.sprite&&(i.sprite.texture=s.Game.textureAtlas.skull_bone,i.update());const n=t.getOne($h).tilePosition;new Za.PreciseShadowcasting(eh(n)).compute(n.x,n.y,10,this.generateUpdateFearVisibilityCallback(t));const r=[nc,ac,oc,dc,pc,fc,Ic,xc,wc,bc,Ec,Cc,Sc];for(let e=0;e<r.length;e++){const i=t.getOne(r[e]);void 0!==i&&t.removeComponent(i)}t.tags.delete("sentient");const o=t.getOne(ic),a=t.getOne($h);if(void 0!==o&&void 0!==a&&o.inventory.size>0){s.gameEventEmitter.emit("tutorial.pickUpItem");Nc(this.world,s.Game.textureAtlas,"dropped_item",a.tilePosition).getOne(ic).inventory=o.inventory}t.removeComponent(t.getOne(ic))}removeDeath(t){if(null===s.Game)throw new Error("Global game object is null");if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");const e=t.getOne(ic),i=t.getOne($h);if(void 0!==e&&void 0!==i&&e.inventory.size>0){s.gameEventEmitter.emit("tutorial.pickUpItem");Nc(this.world,s.Game.textureAtlas,"dropped_item",i.tilePosition).getOne(ic).inventory=e.inventory}const n=t.getOne(Qh);"crate"===(null==n?void 0:n.entityType)&&tu(),"barrel"===(null==n?void 0:n.entityType)&&tu(),Bc(this.world,t)}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(nc);if(void 0===t)throw new Error("hp missing in death system "+e.id);if(t.hp<=0)switch(t.onDeath){case ma.Default:this.actorDeath(e);break;case ma.RemoveFromWorld:this.removeDeath(e);break;default:rl(t.onDeath)}}}}class Gc extends l.System{init(){this.subscribe("SpeedComponent")}update(){var t;if(null===s.Game)throw new Error("Game object is null");for(let e=0;e<this.changes.length;e++){const i=this.changes[e],n=this.world.getEntity(i.entity);switch(i.op){case"add":if((null==n?void 0:n.id)===(null===(t=s.Game)||void 0===t?void 0:t.playerId))continue;s.Game.scheduler.add(i.entity,!0);break;case"destroy":s.Game.scheduler.remove(i.entity);break;case"change":case"addRef":case"deleteRef":break;default:throw new Error(`${i.entity}: Unknown change operation ${i.op}`)}}}}class Uc extends l.System{init(){this.mainQuery=this.createQuery().fromAll(uc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(uc),i=50+150*t.level;if(t.experience>=i){t.level+=1,t.experience=0,t.update();const i=e.getOne(nc),n=e.getOne(ac),r=Hc(e),o=Xc(this.world,s.Game.entityMap,e);void 0!==i&&null!==r&&(i.hp=r.maxHp,i.update()),void 0!==n&&null!==o&&(n.strength++,n.defense++,n.update()),null!==s.Game&&e.id===s.Game.playerId&&nu(`You reached level ${t.level}!`)}}}}function zc(t,e){const i=Object(wa.cloneDeep)(e);switch(t.modifierType){case"add":i[t.stat]+=t.value;break;case"multiply":i[t.stat]*=t.value;break;default:throw new Error("Bad StatisticEffect type "+t.modifierType)}return i}function Hc(t){const e=t.getComponents(rc),i=t.getOne(nc);if(void 0===i)return null;if(0===e.size)return i;let n=Object(wa.pick)(i,"hp","maxHp");return e.forEach(t=>{n=zc(t,n)}),n.maxHp<=0&&(n.maxHp=1),i.hp>n.maxHp&&(i.hp=n.maxHp,n.hp=n.maxHp),n}function Xc(t,e,i){const n=i.getComponents(lc),r=i.getOne(ac);if(void 0===r)return null;let o=Object(wa.pick)(r,"strength","defense","criticalChance","criticalDamageMultiplier","ailmentSusceptibility");if(n.forEach(t=>{o=zc(t,o)}),"player"===i.id){let n=0;const r=i.getOne($h).tilePosition;for(const i of Ya[8]){const o=fh(t,e,new gh(r.x+i[0],r.y+i[1]));for(const t of o)t.tags.has("sentient")&&"player"!==t.id&&++n}n>1&&(o.defense-=(n-1)*Math.max(1,Math.floor(.15*o.defense)))}return o.strength=Math.max(1,o.strength),o.defense=Math.max(0,o.defense),o.ailmentSusceptibility=Math.min(1,o.ailmentSusceptibility),o}function Wc(t,e,i){const n=i.getComponents(sc),r=i.getOne(oc);if(void 0===r)return null;let o=Object(wa.pick)(r,"speed","maxTilesPerMove");if(n.forEach(t=>{o=zc(t,o)}),"player"===i.id){let n=0;const r=i.getOne($h).tilePosition;for(const i of Ya[8]){const o=fh(t,e,new gh(r.x+i[0],r.y+i[1]));for(const t of o)t.tags.has("sentient")&&"player"!==t.id&&++n}n>1&&(o.maxTilesPerMove-=n-1)}return o.maxTilesPerMove=Math.max(1,o.maxTilesPerMove),o.speed=Math.max(1,o.speed),o}function Yc(t){const e=t.getOne(hc),i=t.getOne(wc),n=t.getOne(bc);if(void 0===e)return null;if(void 0===i&&void 0===n)return e;const r=Object(wa.pick)(e,...Object.keys(pa));return void 0!==i&&i.wet&&r[pa.Electric]!==fa.strong&&r[pa.Electric]!==fa.nullified&&(r[pa.Electric]=fa.weak),void 0!==n&&n.frozen&&r[pa.Physical]!==fa.strong&&r[pa.Physical]!==fa.nullified&&(r[pa.Physical]=fa.weak),r}function Vc(t,e,i,n,r,o){let s=n;const a=i.getOne(Zh),l=i.getOne(nc);if(void 0===l)return!1;const u=Xc(t,e,i),h=Yc(i);if(null!==u&&null!==h?(s*=h[o],s=Math.max(1,s-u.defense)):null===u&&null!==h?(s*=h[o],s=Math.max(1,s)):null!==u&&(s=Math.max(1,s-u.defense)),s>0){const t=i.getOne(dc);void 0!==t&&!1===t.knowsTargetPosition&&(s=Math.ceil(1.5*s),r=!0),l.hp-=s,l.update()}return r&&void 0!==a?nu(`CRITICAL! ${a.name} takes ${s} of ${pa[o]} damage.`,iu.Critical):void 0!==a&&null!==h&&h[o]===fa.nullified?nu(`${a.name} is immune to ${pa[o]} attacks!`):void 0!==a&&null!==h&&h[o]===fa.strong?nu(`${a.name} resists the ${pa[o]} damage and takes ${s} damage.`):void 0!==a&&nu(`${a.name} takes ${s} ${pa[o]} damage.`),l.hp<=0}function Kc(t,e){const i=Hc(t.entity);null!==i&&(t.hp+=e,t.hp>i.maxHp&&(t.hp=i.maxHp),t.update())}function qc(t,e){const i=t.getOne(cc);if(!(e in i.knownSpells))throw new Error(`Spell ${e} is not known`);const n=i.knownSpells[e].count-1;n>-1&&(i.knownSpells[e].count=n),i.update()}function $c(t,e,i,n){if(null===s.Game)throw new Error("Global Game object is null");if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(!(e in Iu))throw new Error(e+" is not a valid spell id");const r=t.getOne(cc);return void 0!==r&&!(e in r.knownSpells)&&(t.id===s.Game.playerId&&(s.gameEventEmitter.emit("tutorial.spellMenu"),Iu[e].type===va.WildDamage&&s.gameEventEmitter.emit("tutorial.wildSpells")),r.knownSpells[e]={count:i,maxCount:n},r.update(),!0)}function Qc(t){return[...Object.entries(t.knownSpells)].map(([t,e])=>({id:t,count:e.count,maxCount:e.maxCount,displayName:Iu[t].displayName,description:Iu[t].description,type:Iu[t].type,value:Iu[t].value,damageType:Iu[t].damageType,statusEffect:Iu[t].statusEffect,areaOfEffect:Iu[t].areaOfEffect}))}class Zc extends da{add(t,e){var i;const n=s.Game.ecs.getEntity(t);if(void 0===n)throw new Error(`Unknown entity ${t} in scheduler`);const r=Wc(s.Game.ecs,s.Game.entityMap,n),o=null!==(i=null==r?void 0:r.speed)&&void 0!==i?i:10;return this._queue.add(t,1/o),super.add(t,e)}next(){var t;if(null!==this._current&&-1!==this._repeat.indexOf(this._current)){const e=s.Game.ecs.getEntity(this._current);if(void 0===e)throw new Error(`Unknown entity ${this._current} in scheduler`);const i=Wc(s.Game.ecs,s.Game.entityMap,e),n=null!==(t=null==i?void 0:i.speed)&&void 0!==t?t:10;this._queue.add(this._current,1/n)}return super.next()}}class Jc{constructor(t){this.tileSize=16,this.x=0,this.y=0,this.zoom=2,this.viewport=t,this.following=null}update(t,e){if(null===this.following)return;const i=t.getEntity(this.following);if(void 0===i)return;const n=i.getOne($h);if(void 0===n)return;const r=this.clamp(n.worldPosition.x,n.worldPosition.y,e.width,e.height);this.x=r.x,this.y=r.y}clamp(t,e,i,n){let r=Math.floor(t-this.viewport.width/4),o=Math.floor(e-this.viewport.height/4);return r=Math.max(0,Math.min(r,i*this.tileSize)),o=Math.max(0,Math.min(o,n*this.tileSize)),new gh(r,o)}tilePositionToScreen(t){const e=t.x*this.tileSize*this.zoom-this.x*this.zoom,i=t.y*this.tileSize*this.zoom-this.y*this.zoom;return new gh(e,i)}worldPositionToScreen(t){const e=t.x*this.zoom-this.x*this.zoom,i=t.y*this.zoom-this.y*this.zoom;return new gh(e,i)}tilePositionToWorld(t){return new gh(t.x*this.tileSize,t.y*this.tileSize)}worldPositionToTile(t){return new gh(Math.floor(t.x/this.tileSize),Math.floor(t.y/this.tileSize))}screenToTilePosition(t,e){return new gh(Math.floor(t/(this.tileSize*this.zoom))+Math.floor(this.x/this.tileSize),Math.floor(e/(this.tileSize*this.zoom))+Math.floor(this.y/this.tileSize))}mouseToTilePosition(t,e){return new gh(Math.round(t/(this.tileSize*this.zoom))+Math.floor(this.x/this.tileSize),Math.round(e/(this.tileSize*this.zoom))+Math.floor(this.y/this.tileSize))}}const td={movement:!1,attack:!1,inventory:!1,pickUpItem:!1,spellMenu:!1,spellTargeting:!1,wildSpells:!1,spellCasts:!1,spellShrines:!1,environment:!1,enemySurrounding:!1};function ed(){td.movement||(nu("Move by clicking where you want to go. You can only move seven tiles at a time.",iu.Tutorial),td.movement=!0)}function id(){td.attack||(nu("Click on an enemy when next to it to attack",iu.Tutorial),Zl(),td.attack=!0)}function nd(){td.inventory||(nu("Use i to open your inventory",iu.Tutorial),Zl(),td.inventory=!0)}function rd(){td.spellMenu||(nu("Press m to open your spells",iu.Tutorial),Zl(),td.spellMenu=!0)}function od(){td.pickUpItem||(nu("Click on a dropped item to pick it up",iu.Tutorial),Zl(),td.pickUpItem=!0)}function sd(){td.spellTargeting||(nu("Left click on an enemy to target it, click elsewhere to cancel",iu.Tutorial),Zl(),td.spellMenu=!0,td.spellTargeting=!0)}function ad(){td.wildSpells||(nu("Wild spells will randomly target an enemy within range",iu.Tutorial),Zl(),td.wildSpells=!0)}function ld(){td.spellCasts||(nu("Spells have a limited number of casts. Use them sparingly.",iu.Tutorial),Zl(),td.spellMenu=!0,td.spellCasts=!0)}function ud(){td.spellShrines||(nu("Learn new spells by finding magic shrines",iu.Tutorial),Zl(),td.spellShrines=!0)}function hd(){td.environment||(nu("Spells can interact with the environment in different ways",iu.Tutorial),Zl(),td.environment=!0)}function cd(){td.enemySurrounding||(nu("Your defense and movement are penalized for each enemy which surrounds you.",iu.Tutorial),Zl(),td.enemySurrounding=!0)}class dd extends l.System{init(){this.mainQuery=this.createQuery().fromAll(ec,$h).persist()}computePlayerLighting(t,e){new Za.PreciseShadowcasting(eh(t.tilePosition)).compute(t.tilePosition.x,t.tilePosition.y,30,(function(t,i,n,r){if(null===s.Game||t<0||i<0||i>=s.Game.map.height||t>=s.Game.map.width)return;const o=s.Game.map.visibilityData[i][t];if(o.explored=!0,o.visible=!0,o.lightingColor=e.color,r>0){const e=s.Game.shadowBoxes.filter(e=>e.contains(t,i))[0];void 0!==e&&(e.seen=!0)}}));for(let t=0;t<s.Game.shadowBoxes.length;t++){const i=s.Game.shadowBoxes[t];if(i.seen){const t=i.tiles();for(let i=0;i<t.length;i++){const n=t[i],r=s.Game.map.visibilityData[n.y][n.x];r.explored=!0,r.visible=!0,r.lightingColor=e.color}}}}computeReflectivityLighting(t,e){const i=new Za.PreciseShadowcasting(eh(t.tilePosition)),n=new el((r=s.Game.map,function(t,e){return t<0||e<0||e>=r.height||t>=r.width||r.data[0][e][t].blocksSight?0:r.data[0][e][t].reflectivity}),{range:e.range,passes:2});var r;n.setFOV(i),n.setLight(t.tilePosition.x,t.tilePosition.y,e.color),n.compute((function(t,e,i){t<0||e<0||e>=s.Game.map.height||t>=s.Game.map.width||(s.Game.map.visibilityData[e][t].lightingColor=Object(Oa.toRGB)(Object(Oa.add)(Object(Oa.fromString)(s.Game.map.visibilityData[e][t].lightingColor),i)))})),s.Game.map.visibilityData[t.tilePosition.y][t.tilePosition.x].lightingColor=e.color}update(){if(null===s.Game)throw new Error("Missing properties on global Game object required for lighting");if(s.Game.isLightingEnabled){!function(t,e){for(let e=0;e<t.height;e++)for(let i=0;i<t.width;i++)t.visibilityData[e][i].visible=!1,t.visibilityData[e][i].lightingColor="rgb(50, 50, 50)";for(let t=0;t<e.length;t++)e[t].seen=!1}(s.Game.map,s.Game.shadowBoxes);const t=this.mainQuery.execute();for(const e of t){const t=e.getOne($h),i=e.getOne(ec);switch(i.lightingType){case ga.Player:this.computePlayerLighting(t,i);break;case ga.OnePass:throw new Error("not implemented");case ga.TwoPass:this.computeReflectivityLighting(t,i);break;default:rl(i.lightingType)}}}else bh(s.Game.map,!0,!0)}}class pd extends l.System{init(){this.mainQuery=this.createQuery().fromAll(nc,xc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(xc);if(!0===t.onFire){if(Vc(this.world,s.Game.entityMap,e,t.fireDamage,!1,pa.Fire),t.turnsLeft--,t.turnsLeft<=0){if(t.onFire=!1,t.fireDamage=0,!1===e.tags.has("blocks")&&e.has(Ec)&&(e.removeComponent(e.getOne(Ec)),e.removeComponent(e.getOne(Cc))),e.id===s.Game.playerId)nu("You are no longer on fire",iu.StatusEffect);else if(e.tags.has("sentient")){const t=e.getOne(Zh);void 0!==t&&nu(t.name+" is no longer on fire",iu.StatusEffect)}}else{const t=e.getOne($h);if(void 0!==t)for(let e=0;e<Ya[8].length;e++){const i=Ya[8][e],n=fh(this.world,s.Game.entityMap,new gh(t.tilePosition.x+i[0],t.tilePosition.y+i[1]));if(Math.random()>=.65)for(const t of n)gu(t)}}if(t.update(),null===s.Game)continue;if(e.id===s.Game.playerId)nu(`You took ${t.fireDamage} damage from being on fire`);else if(e.tags.has("sentient")){const i=e.getOne(Zh);void 0!==i&&nu(`${i.name} took ${t.fireDamage} damage from being on fire`)}}}}}class fd extends l.System{init(){this.mainQuery=this.createQuery().fromAll(wc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(wc);if(t.wet&&t.turnsLeft>0)t.turnsLeft--,t.update();else if(t.wet&&t.turnsLeft<=0)if(t.wet=!1,t.update(),e.id===s.Game.playerId)nu("You are no longer wet",iu.StatusEffect);else{const t=e.getOne(Zh);void 0!==t&&nu(t.name+" is no longer wet",iu.StatusEffect)}}}}class md extends l.System{init(){this.mainQuery=this.createQuery().fromAll(Tc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(Tc);if(t.silenced&&t.turnsLeft>0)t.turnsLeft--,t.update();else if(t.silenced&&t.turnsLeft<=0)if(t.silenced=!1,t.update(),e.id===s.Game.playerId)nu("You are no longer silenced",iu.StatusEffect);else{const t=e.getOne(Zh);void 0!==t&&nu(t.name+" is no longer silenced",iu.StatusEffect)}}}}class gd extends l.System{init(){this.mainQuery=this.createQuery().fromAll(Sc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(Sc);if(t.stunned&&t.turnsLeft>0)t.turnsLeft--,t.update();else if(t.stunned&&t.turnsLeft<=0)if(t.stunned=!1,t.update(),e.id===s.Game.playerId)nu("You are no longer stunned",iu.StatusEffect);else{const t=e.getOne(Zh);void 0!==t&&nu(t.name+" is no longer stunned",iu.StatusEffect)}}}}class yd extends l.System{init(){this.mainQuery=this.createQuery().fromAll(bc).persist()}update(){const t=this.mainQuery.execute();for(const e of t){const t=e.getOne(bc);if(t.frozen&&t.turnsLeft>0)t.turnsLeft--,t.update();else if(t.frozen&&t.turnsLeft<=0){t.frozen=!1,t.update();const i=e.getOne(Qh),n=e.getOne(Jh);void 0!==i&&void 0!==n&&null!==n.sprite&&(n.sprite.texture=s.Game.textureAtlas[kc[i.entityType].staticallyKnownComponents.c.GraphicsComponent.textureKey],n.update());const r=e.getOne(Ec);if(void 0!==r&&r.currentTriggerType!==r.initialTriggerType&&(r.currentTriggerType=r.initialTriggerType,r.update()),e.id===s.Game.playerId)nu("You are no longer frozen",iu.StatusEffect);else{const t=e.getOne(Zh);void 0!==t&&nu(t.name+" is no longer frozen",iu.StatusEffect)}}}}}class vd extends l.System{init(){this.hitPointsEffectQuery=this.createQuery().fromAll(rc).persist()}update(){const t=this.hitPointsEffectQuery.execute();for(const e of t){const t=e.getComponents(rc);for(const i of t)if(i.turnsLeft-=1,0===i.turnsLeft){e.removeComponent(i),i.destroy();const t=e.getOne(Zh);nu(`${i.name} has ended for ${t.name}`,iu.StatusEffect)}else i.update()}}}class _d extends l.System{init(){this.statsEffectQuery=this.createQuery().fromAll(lc).persist()}update(){const t=this.statsEffectQuery.execute();for(const e of t){const t=e.getComponents(lc);for(const i of t)if(i.turnsLeft-=1,0===i.turnsLeft){e.removeComponent(i),i.destroy();const t=e.getOne(Zh);nu(`${i.name} has ended for ${t.name}`,iu.StatusEffect)}else i.update()}}}class bd extends l.System{init(){this.speedEffectQuery=this.createQuery().fromAll(sc).persist()}update(){const t=this.speedEffectQuery.execute();for(const e of t){const t=e.getComponents(sc);for(const i of t)if(i.turnsLeft--,0===i.turnsLeft){if(e.removeComponent(i),i.destroy(),i.display){const t=e.getOne(Zh);nu(`${i.name} has ended for ${t.name}`,iu.StatusEffect)}}else i.update()}}}s.gameEventEmitter=new a.EventEmitter;const xd={enter(t){t.blackBackground.visible=!0,t.openingText.visible=!0},exit(t){t.blackBackground.visible=!1,t.openingText.visible=!1},handleInput(t){if(cl.isDown("Enter")){const e=Nc(t.ecs,t.textureAtlas,"player",new gh(1,1));t.playerId=e.id,t.scheduler.add(t.playerId,!0),t.openingText.visible=!1,t.loadLevel("tutorial_001"),t.setState(t.gameplayState),s.gameEventEmitter.emit("tutorial.start")}},update(){},render(){}},wd={enter(t){t.blackBackground.visible=!0,t.winningText.visible=!0},exit(t){t.blackBackground.visible=!1,t.winningText.visible=!1,t.reset(),t.loadLevel("tutorial_001"),s.gameEventEmitter.emit("tutorial.start")},handleInput(t){cl.isDown("Enter")&&t.setState(t.gameplayState)},update(){},render(){}},Td={enter(t){t.blackBackground.visible=!0,t.losingText.visible=!0},exit(t){t.blackBackground.visible=!1,t.losingText.visible=!1,t.reset(),t.loadLevel("tutorial_001"),s.gameEventEmitter.emit("tutorial.start")},handleInput(t){cl.isDown("Enter")&&t.setState(t.gameplayState)},update(){},render(){}},Sd={enter(t){t.statusBar.setVisible(!0)},exit(t){t.statusBar.setVisible(!1)},update(t){if(null===t.currentActor&&(t.currentActor=t.scheduler.next(),t.currentActor===t.playerId&&t.gameCamera.following!==t.playerId)){const e=t.ecs.getEntity(t.currentActor);void 0!==e&&t.commandQueue.unshift(new Yh(t.map,t.gameCamera,e))}null!==t.currentActor&&t.currentActor!==t.playerId&&0===t.commandQueue.length&&(t.processAI?t.commandQueue.push(...oh(t.ecs,t.map,t.entityMap,t.entityTeams,t.currentActor)):t.commandQueue.push(new Fh(!0))),t.shouldProcessCommands&&null!==t.currentActor&&t.processCommands();const e=t.ecs.getEntity(t.playerId);if(void 0!==e){const i=Hc(e);null===i||i.hp<=0?t.setState(t.losingCinematicState):t.statusBar.update(t.ecs,t.map,t.entityMap)}else t.setState(t.losingCinematicState)},handleInput(t){const e=t.ecs.getEntity(t.playerId);if(void 0===e)return;const i=e.getOne(_c);if(void 0!==i)if(cl.isDown("Escape")&&i.state===Mh.Combat)t.setState(t.pauseMenuState);else{if(cl.isDown("Escape")&&i.state===Mh.Target)return i.state=Mh.Combat,i.itemForTarget=null,i.spellForTarget=null,i.update(),void nu("Canceled casting");if(t.currentActor===t.playerId){const i=function(t,e,i,n){var r,o,a,l;if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");const u=n.getOne(_c),h=n.getOne($h),c=n.getOne(oc);if(void 0===u||void 0===h||void 0===c)throw new Error("player is missing data");if(u.state===Mh.Combat){for(let t=0;t<u.keyCommands.length;t++){const e=u.keyCommands[t];if(cl.isDown(e.key))return e.command()}const r=cl.getLeftMouseDown();if(null!==r){if(yh(r,h.tilePosition)<1.5){const o=Vh(t,e,i,r);if(null!==o&&o!==u.entity)return new jh(n.id,o.id)}if(!s.Game.map.visibilityData[r.y][r.x].explored)return null;const o=Lh(t,e,i,h.tilePosition,r,c.maxTilesPerMove);if(0!==o.length)return new Nh(n.id,o)}return null}if(u.state===Mh.Target){s.gameEventEmitter.emit("tutorial.spellTargeting");for(let t=0;t<u.keyCommands.length;t++){const e=u.keyCommands[t];if(cl.isDown(e.key))return e.command()}const t=cl.getLeftMouseDown();if(null===t)return null;const e=n.getOne($h).tilePosition,i=null!==(l=null!==(o=null===(r=u.spellForTarget)||void 0===r?void 0:r.range)&&void 0!==o?o:null===(a=u.itemForTarget)||void 0===a?void 0:a.range)&&void 0!==l?l:1/0;if(yh(t,e)<=i){let e=null;return null!==u.itemForTarget?e=new zh(n.id,Pu[u.itemForTarget.id],t,u.reticleRotation,ku):null!==u.spellForTarget&&(e=new zh(n.id,Iu[u.spellForTarget.id],t,u.reticleRotation,qc)),u.state=Mh.Combat,u.itemForTarget=null,u.spellForTarget=null,u.update(),e}}return null}(t.ecs,t.map,t.entityMap,e);null!==i&&t.commandQueue.push(i)}}},render(t){t.gameCamera.update(t.ecs,t.map),function(t,e){for(let i=0;i<e.depth;i++)for(let n=0;n<e.height;n++)for(let r=0;r<e.width;r++)if(null!==e.data[i][n][r]){const o=t.tilePositionToScreen(new gh(r,n));xh(e,t.viewport,e.data[i][n][r],r,n,o.x,o.y,t.zoom)}}(t.gameCamera,t.map),t.ecs.runSystems("frame")}},Ed={enter(t){null!==ql.id&&null!==ql.sound&&ql.sound.pause(ql.id),$l();const e=t.ecs.getEntity(t.playerId);if(void 0===e)throw new Error("player is undefined");const i=e.getOne(_c);if(void 0===i)throw new Error("player needs an input");t.keyBindingMenu.open(i.keyCommands)},exit(t){null!==ql.id&&null!==ql.sound&&ql.sound.play(ql.id),$l(),t.keyBindingMenu.close()},handleInput(t){const e=t.ecs.getEntity(t.playerId);if(void 0===e)return;const i=e.getOne(_c);void 0!==i&&(cl.isDown("Escape")?t.setState(t.gameplayState):t.keyBindingMenu.handleInput(i.keyCommands))},update(){},render(){}},Cd={enter(t){Vl.handleLeather2.play();const e=t.ecs.getEntity(t.playerId);if(void 0===e)throw new Error("player is undefined");const i=e.getOne(ic);t.inventoryMenu.open(Au(i))},exit(t){Vl.handleLeather.play(),t.inventoryMenu.close()},handleInput(t){const e=t.ecs.getEntity(t.playerId);if(void 0===e)return;const i=e.getOne(_c),n=e.getOne(ic);if(void 0===n||void 0===i)return;if(cl.isDown("Escape"))return void t.setState(t.gameplayState);const r=t.inventoryMenu.handleInput(Au(n));if(null!==r){if(!Ou(n,r.id))return void nu(`You don't have ${r.displayName} in your inventory`);switch(r.type){case ya.HealSelf:case ya.ClairvoyanceScroll:case ya.HasteSelf:case ya.WildDamageScroll:t.setState(t.gameplayState),t.commandQueue.push(new zh(t.playerId,Pu[r.id],void 0,void 0,ku));break;case ya.DamageScroll:case ya.SlowOther:case ya.ConfuseScroll:i.itemForTarget=r,i.state=Mh.Target,i.update(),t.setState(t.gameplayState);break;default:rl(r.type)}}},update(){},render(){}},Pd={enter(t){Vl.bookFlip.play();const e=t.ecs.getEntity(t.playerId);if(void 0===e)throw new Error("player is undefined");const i=e.getOne(cc);t.spellSelectionMenu.open(Qc(i))},exit(t){Vl.bookFlip2.play(),t.spellSelectionMenu.close()},handleInput(t){var e,i;const n=t.ecs.getEntity(t.playerId);if(void 0===n)return;const r=n.getOne(_c),o=n.getOne(cc),s=n.getOne(Tc);if(void 0===o||void 0===r)return;if(cl.isDown("Escape"))return void t.setState(t.gameplayState);const a=t.spellSelectionMenu.handleInput(Qc(o));if(null!==a){if(void 0!==s&&s.silenced)return void nu("Cannot cast spells while silenced");if(!(a.id in o.knownSpells))return void nu("You don't know "+a.displayName);if((null!==(i=null===(e=o.knownSpells[a.id])||void 0===e?void 0:e.count)&&void 0!==i?i:-1)<1)return void nu("You don't have enough casts to use "+a.displayName);switch(a.type){case va.Effect:case va.HealSelf:case va.Passive:case va.WildDamage:case va.Push:t.commandQueue.push(new zh(t.playerId,Iu[a.id],void 0,void 0,qc)),t.setState(t.gameplayState);break;case va.DamageOther:case va.HealOther:r.spellForTarget=a,r.state=Mh.Target,r.update(),t.setState(t.gameplayState);break;default:rl(a.type)}}},update(){},render(){}};class Id{constructor(){var t;if(this.openingCinematicState=xd,this.winingCinematicState=wd,this.losingCinematicState=Td,this.gameplayState=Sd,this.pauseMenuState=Ed,this.inventoryMenuState=Cd,this.spellMenuState=Pd,null===s.window)throw new Error("Global window cannot be null");if(null===s.document)throw new Error("Global document cannot be null");this.canvas=null,this.currentActor=null,this.commandQueue=[],this.scheduler=new Zc,this.map=new dh("",[[[]]],[[]]),this.entityMap=new Map,this.shadowBoxes=[],this.totalTurns=1,this.state=this.openingCinematicState,this.processAI=!0,this.shouldProcessCommands=!0,this.isLightingEnabled=!0,this.debugPathfinding=!1,this.debugAI=!1,this.debugAIDialog=!1,this.pixiApp=new Xn({width:1216,height:640});const e=s.document.getElementById("canvas");if(null===e)throw new Error("this.canvas cannot be null");if(e.prepend(this.pixiApp.view),this.canvas=this.pixiApp.view,Q.RESOLUTION=null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,Q.SCALE_MODE=z.NEAREST,this.pixiApp.stage.sortableChildren=!0,vr.shared.onProgress.add(t=>{i.loadingText.text=`Loading Textures: ${t.progress}%`}),this.blackBackground=new no,this.blackBackground.beginFill(0),this.blackBackground.drawRect(0,0,this.pixiApp.screen.width,this.pixiApp.screen.height),this.blackBackground.endFill(),this.blackBackground.zIndex=20,this.blackBackground.visible=!1,this.pixiApp.stage.addChild(this.blackBackground),this.openingText=new bo("This is an experiment to test a bunch of gameplay ideas I have. \nIt doesn't represent a finished product, but I hope you'll enjoy it anyway!\n\n\nPress [enter] to start",{fontFamily:"monospace",fontSize:14,fill:16777215,align:"center"}),this.openingText.x=this.pixiApp.screen.width/2-this.openingText.width/2,this.openingText.y=200,this.openingText.visible=!1,this.openingText.zIndex=25,this.pixiApp.stage.addChild(this.openingText),this.losingText=new bo("You have died\n\n\nPress [enter] to restart",{fontFamily:"monospace",fontSize:14,fill:16777215,align:"center"}),this.losingText.x=this.pixiApp.screen.width/2-this.losingText.width/2,this.losingText.y=200,this.losingText.visible=!1,this.losingText.zIndex=25,this.pixiApp.stage.addChild(this.losingText),this.winningText=new bo("You won!\n\n\nPress [enter] to restart the game",{fontFamily:"monospace",fontSize:14,fill:16777215,align:"center"}),this.winningText.x=this.pixiApp.screen.width/2-this.winningText.width/2,this.winningText.y=200,this.winningText.visible=!1,this.winningText.zIndex=25,this.pixiApp.stage.addChild(this.winningText),this.loadingText=new bo("Loading",{fontFamily:"monospace",fontSize:14,fill:16777215,align:"center"}),this.loadingText.x=this.pixiApp.screen.width/2-this.loadingText.width/2,this.loadingText.y=200,this.loadingText.visible=!0,this.loadingText.zIndex=25,this.pixiApp.stage.addChild(this.loadingText),this.ecs=new l.World({trackChanges:!0,entityPool:200,cleanupPools:!0}),this.ecs.registerTags("blocks","blocksSight","drawAfterSeen","input","sentient","moveable","aquatic","environmentTile","waterTile"),this.ecs.registerComponent($h,100),this.ecs.registerComponent(Qh,100),this.ecs.registerComponent(Zh,100),this.ecs.registerComponent(Jh,100),this.ecs.registerComponent(tc,10),this.ecs.registerComponent(ec,20),this.ecs.registerComponent(ic,20),this.ecs.registerComponent(nc,50),this.ecs.registerComponent(rc,50),this.ecs.registerComponent(oc,50),this.ecs.registerComponent(sc,50),this.ecs.registerComponent(ac,50),this.ecs.registerComponent(lc,50),this.ecs.registerComponent(uc,20),this.ecs.registerComponent(hc,50),this.ecs.registerComponent(cc,20),this.ecs.registerComponent(dc,20),this.ecs.registerComponent(Mc,20),this.ecs.registerComponent(pc,20),this.ecs.registerComponent(fc,20),this.ecs.registerComponent(mc,50),this.ecs.registerComponent(gc,50),this.ecs.registerComponent(yc,50),this.ecs.registerComponent(vc,10),this.ecs.registerComponent(_c,1),this.ecs.registerComponent(bc,50),this.ecs.registerComponent(xc,50),this.ecs.registerComponent(wc,50),this.ecs.registerComponent(Tc,50),this.ecs.registerComponent(Sc,50),this.ecs.registerComponent(Ec,50),this.ecs.registerComponent(Cc,20),this.ecs.registerComponent(Pc,20),this.ecs.registerComponent(Ic,50),this.ecs.registerComponent(Ac,10),this.ecs.registerComponent(Oc,10),this.ecs.registerSystem("frame",dd),this.ecs.registerSystem("frame",hu),this.ecs.registerSystem("frame",fu),this.ecs.registerSystem("postTurn",jc),this.ecs.registerSystem("postTurn",Gc),this.ecs.registerSystem("postTurn",Dc),this.ecs.registerSystem("postTurn",Fc),this.ecs.registerSystem("postTurn",cu),this.ecs.registerSystem("postOneTurnCycle",Lc),this.ecs.registerSystem("postOneTurnCycle",vd),this.ecs.registerSystem("postOneTurnCycle",_d),this.ecs.registerSystem("postOneTurnCycle",bd),this.ecs.registerSystem("postOneTurnCycle",fd),this.ecs.registerSystem("postOneTurnCycle",pd),this.ecs.registerSystem("postOneTurnCycle",md),this.ecs.registerSystem("postOneTurnCycle",gd),this.ecs.registerSystem("postOneTurnCycle",yd),this.ecs.registerSystem("postOneTurnCycle",Uc),null===s.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");s.gameEventEmitter.on("tutorial.start",ed),s.gameEventEmitter.on("tutorial.attacking",id),s.gameEventEmitter.on("tutorial.inventory",nd),s.gameEventEmitter.on("tutorial.spellMenu",rd),s.gameEventEmitter.on("tutorial.pickUpItem",od),s.gameEventEmitter.on("tutorial.spellTargeting",sd),s.gameEventEmitter.on("tutorial.wildSpells",ad),s.gameEventEmitter.on("tutorial.spellCasts",ld),s.gameEventEmitter.on("tutorial.spellShrine",ud),s.gameEventEmitter.on("tutorial.environmentInteractivity",hd),s.gameEventEmitter.on("tutorial.enemySurrounding",cd),this.keyBindingMenu=new su(this.pixiApp.screen,this.pixiApp.stage),this.inventoryMenu=new ru(this.pixiApp.screen,this.pixiApp.stage),this.spellSelectionMenu=new ou(this.pixiApp.screen,this.pixiApp.stage),this.statusBar=new eu(this.pixiApp.screen,this.pixiApp.stage),this.gameCamera=new Jc({x:this.pixiApp.screen.x,y:this.pixiApp.screen.y,width:this.pixiApp.screen.width,height:this.pixiApp.screen.height-this.statusBar.height});const i=this;vr.shared.add("bin/images/packed_rougelike_sheet.png").add("bin/images/sprites.json").load((t,e)=>{i.textureAtlas=e["bin/images/sprites.json"].textures,i.startGameplay().then(()=>i.pixiApp.ticker.add(i.mainLoop.bind(i)))})}setState(t){this.state.exit(this),this.state=t,this.state.enter(this)}reset(){if(null===s.document)throw new Error("Global document cannot be null");this.scheduler.clear(),this.ecs.entities.forEach(t=>{Bc(this.ecs,t)}),this.currentActor=null;const t=Nc(this.ecs,this.textureAtlas,"player",new gh(1,1));this.playerId=t.id,this.totalTurns=1,this.loadLevel("tutorial_001"),this.scheduler.add(this.playerId,!0),this.gameCamera.following=this.playerId;const e=s.document.getElementById("log");null!==e&&(e.innerHTML="")}async startGameplay(){this.loadingText.text="Loading Sounds";try{await async function(){await Promise.all([new Promise((function(t,e){Vl.uiClick=new Yl.Howl({src:["bin/sounds/click.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.uiRollover=new Yl.Howl({src:["bin/sounds/rollover.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.bookFlip=new Yl.Howl({src:["bin/sounds/book_flip.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.bookFlip2=new Yl.Howl({src:["bin/sounds/book_flip2.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.handleLeather=new Yl.Howl({src:["bin/sounds/handle_small_leather1.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.handleLeather2=new Yl.Howl({src:["bin/sounds/handle_small_leather2.mp3"],onload:t,onloaderror:e})})),new Promise((function(t,e){Vl.ping=new Yl.Howl({src:["bin/sounds/ping.mp3"],onload:t,onloaderror:e,volume:.2})})),new Promise((function(t,e){Vl.doorOpening=new Yl.Howl({src:["bin/sounds/door_open.mp3"],onload:t,onloaderror:e,volume:.5})})),new Promise((function(t,e){Vl.chestOpening=new Yl.Howl({src:["bin/sounds/chest_open.mp3"],onload:t,onloaderror:e,volume:.5})})),new Promise((function(t,e){Vl.boxBreaking=new Yl.Howl({src:["bin/sounds/box_break.mp3"],onload:t,onloaderror:e,volume:.1})})),new Promise((function(t,e){Vl.forrestTheme=new Yl.Howl({src:["bin/sounds/water_prelude.mp3"],onload:t,onloaderror:e,volume:0,loop:!0})}))])}()}catch(t){return void(this.loadingText.text="There was an error when loading sounds. Please reload and try again")}Vl.caveTheme=new Yl.Howl({src:["bin/sounds/unpromised.mp3"],volume:0,loop:!0}),cl.init(),this.loadingText.visible=!1,this.openingText.visible=!0}loadLevel(t){if(null===s.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");for(const t of this.ecs.entities.values())t.id!==this.playerId&&Bc(this.ecs,t);for(let t=0;t<this.map.depth;t++)for(let e=0;e<this.map.height;e++)for(let i=0;i<this.map.width;i++){const n=this.map.data[t][e][i];null!==n&&(n.sprite.visible=!1,this.pixiApp.stage.removeChild(n.sprite),n.sprite.destroy())}this.scheduler.clear(),this.scheduler.add(this.playerId,!0);const{map:e,playerLocation:i,shadowBoxes:n,teams:r}=function(t,e,i,n){if(!(n in sh))throw new Error(n+" is not a valid level");const r=sh[n],o=r.tileheight,s=[],a=new gh(0,0),l=r.layers.filter(t=>"tile"===Object(wa.get)(t,"properties[0].value",null)),u=r.layers.filter(t=>"Entity Layer"===t.name)[0],h=Object(wa.get)(r.layers.filter(t=>"Object Layer"===t.name),"[0]",null),c=Object(wa.get)(r.layers.filter(t=>"Node Layer"===t.name),"[0]",null),d=Object(wa.get)(r.layers.filter(t=>"Shadow Boxes"===t.name),"[0]",null);if(0===l.length)throw new Error("No tile layer in map "+n);if(null===h)throw new Error("No object layer in map "+n);if(null===c)throw new Error("No node layer in map "+n);if(null===d)throw new Error("No shadow box layer in map "+n);const p=new Array(r.height);for(let t=0;t<r.height;t++){p[t]=new Array(r.width);for(let e=0;e<p[t].length;e++)p[t][e]={explored:!1,visible:!1,lightingColor:"white"}}for(let t=0;t<l.length;t++){const n=l[t].data,o=[];for(let s=0;s<n.length;s++){const a=n[s];if(0===a&&0===t)throw new Error("Can't have a null tile in the base layer");if(0===a&&0!==t){o.push(null);continue}if(!(a in ah))throw new Error(a+" is not valid tile");const l=ah[a],u=new uh(l.name,i,l.textureKey,l.blocks,l.blocksSight);u.sprite.zIndex=t,e.addChild(u.sprite),o.push(u),!0===l.defaultToExplored&&(p[Math.floor(s/r.width)][s%r.width].explored=!0)}const a=[];for(let t=0;t<o.length;t+=r.width)a.push(o.slice(t,t+r.width));s.push(a)}c.objects.forEach(e=>{t.createEntity({id:e.id.toString(10),c:{PositionComponent:{worldPosition:new gh(e.x,e.y),tilePosition:new gh(Math.floor(e.x/o),Math.floor(e.y/o))}}})}),c.objects.forEach(e=>{const i=t.getEntity(e.id.toString());if(void 0===i)throw new Error(`Node ${e.id} not initialized in level load`);const n=ch(e,"next"),r=null!==n?t.getEntity(n.toString(10)):void 0;if(void 0!==r){i.addComponent({type:"PatrolPathComponent"}).next=r.id}}),u.data.forEach((e,n)=>{if(0===e)return;const o=lh.get(e);if(void 0===o)throw new Error("Unknown environment tile "+e);Nc(t,i,o,new gh(Math.floor(n%r.width),Math.floor(n/r.width)))});const f=new Map;h.objects.forEach(e=>{if(void 0!==e.point){if("object"!==e.type)throw new Error("Unrecognized object type "+e.type);{const n=ch(e,"objectType"),r=ch(e,"inventory"),s=ch(e,"levelName"),l=ch(e,"spellId"),u=ch(e,"patrolTarget"),h=ch(e,"fallbackPosition"),c=ch(e,"event"),d=ch(e,"teamId"),p=ch(e,"commander");if(null===n)throw new Error("No type for "+e.name);if("player"===n)a.x=Math.floor(e.x/o)*o,a.y=Math.floor(e.y/o)*o;else{const a=Nc(t,i,n,new gh(Math.floor(e.x/o),Math.floor(e.y/o)),`${n}-${e.id}`);if(null!==r){const t=new Map;r.split(",").filter(t=>t in Pu).forEach(e=>t.set(e,1));const e=a.getOne(ic);void 0===e?a.addComponent({type:"InventoryComponent",inventory:t}):e.inventory=t}if(null!==s&&a.addComponent({type:"LoadLevelComponent",levelName:s}),null!==l){const t=Iu[l];if(void 0===t)throw new Error(l+" is not a valid spell");const e={[l]:{count:t.baseCastCount,maxCount:t.baseCastCount}};a.addComponent({type:"SpellsComponent",knownSpells:e})}if(null!==u){const e=t.getEntity(u.toString());if(void 0===e)throw new Error(`Patrol target ${u} is not initialized`);a.addComponent({type:"PatrolAIComponent",patrolTarget:e.id});const i=a.getOne(dc);if(void 0===i)throw new Error("Trying to set patrol target without an ai");i.actions.delete("wander"),i.actions.delete("guard"),i.actions.add("patrol");const{goals:n,planner:r}=ih(i.actions);i.goals=n,i.planner=r,i.update()}if(null!==h){const e=t.getEntity(h.toString());if(void 0===e)throw new Error(`Fallback target ${h} is not initialized`);a.addComponent({type:"FallbackAIComponent",isAtFallbackPosition:!1,fallbackPosition:e});const i=a.getOne(dc);if(void 0===i)throw new Error("Trying to set fallback position without an ai");i.actions.add("goToFallbackPosition");const{goals:n,planner:r}=ih(i.actions);i.goals=n,i.planner=r,i.update()}if("event_trigger"===n&&null!==c&&(a.addComponent({type:"TriggerTypeComponent",initialTriggerType:xa.Event,currentTriggerType:xa.Event}),a.addComponent({type:"EventTriggerComponent",event:c})),null!==d){f.has(d)||f.set(d,new Rc);const t=f.get(d);t.memberIds.push(a.id),p&&(t.createdWithCommander=!0,t.commanderId=a.id);const e=a.getOne(dc);void 0!==e&&(e.teamId=d)}}}}});const m=d.objects.map(t=>new ph(Math.floor(t.x/o),Math.floor(t.y/o),Math.floor(t.width/o),Math.floor(t.height/o)));return{map:new dh(n,s,p),playerLocation:a,shadowBoxes:m,teams:f}}(this.ecs,this.pixiApp.stage,this.textureAtlas,t);this.map=e,this.shadowBoxes=n,this.entityTeams=r;const o=this.ecs.getEntity(this.playerId);if(void 0===o)throw new Error("player is undefined");const a=o.getOne($h);if(void 0===a)throw new Error("Player doesn't have a PositionComponent");a.worldPosition=i,a.tilePosition=this.gameCamera.worldPositionToTile(a.worldPosition),a.update();for(const t of this.ecs.queries)t.refresh();this.ecs.runSystems("postTurn"),this.gameCamera.update(this.ecs,this.map),function(t){const e=Vl[Kl[t]];void 0!==e&&ql.sound!==e&&(null!==ql.id&&null!==ql.sound&&ql.sound.fade(.8,0,3e3,ql.id),ql.sound=e,ql.id=e.play(),ql.sound.fade(0,.8,3e3,ql.id))}(t)}processCommands(){for(let t=0;t<this.commandQueue.length;t++){const e=this.commandQueue[t];if(void 0===e.setUp||e.isSetUp||(e.setUp(this.ecs),e.isSetUp=!0),e.update(this.ecs,this.deltaTime),e.isFinished()&&(e.usedTurn()&&(this.currentActor===this.playerId&&(this.ecs.runSystems("postOneTurnCycle"),this.totalTurns++),this.ecs.runSystems("postTurn"),this.currentActor=null),void 0!==e.tearDown&&e.tearDown(this.ecs),this.commandQueue.splice(t,1),--t,this.debugPathfinding&&_h(this.map)),e.blocks)break}}update(){this.state.update(this)}render(){this.state.render(this)}handleInput(){this.state.handleInput(this)}mainLoop(){this.deltaTime=this.pixiApp.ticker.deltaMS,this.handleInput(),this.update(),this.render(),cl.clearInputs(),this.ecs.tick()}}s.window=window,s.document=document,s.window.giveAllItems=function(){if(null===s.Game)throw new Error("Global game object is null");const t=s.Game.ecs.getEntity(s.Game.playerId).getOne(ic);if(void 0===t)throw new Error("Global player does not have an inventory");for(const e in Pu)Mu(t,e)},s.window.giveAllSpells=function(){if(null===s.Game)throw new Error("Global game object is null");const t=s.Game.ecs.getEntity(s.Game.playerId);if(void 0===t.getOne(cc))throw new Error("Global player cannot learn spells");for(const e in Iu)$c(t,e,10,10)},s.window.toggleAI=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.processAI=!s.Game.processAI},s.window.togglePlayerFOV=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.isLightingEnabled=!s.Game.isLightingEnabled},s.window.toggleCommandExecution=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.shouldProcessCommands=!s.Game.shouldProcessCommands},s.window.togglePathfindingDebug=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.debugPathfinding=!s.Game.debugPathfinding},s.window.toggleAIDebug=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.debugAI=!s.Game.debugAI},s.window.toggleAIDialogDebug=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.debugAIDialog=!s.Game.debugAIDialog},s.window.startGameLoop=function(){s.Game.pixiApp.ticker.start()},s.window.stopGameLoop=function(){s.Game.pixiApp.ticker.stop()},s.window.loopOnce=function(){s.Game.mainLoop.bind(s.Game)()},s.window.getEntity=function(t){if(null===s.Game)throw new Error("Global game object is null");return s.Game.ecs.getEntity(t)},s.window.getEntities=function(t,e){if(null===s.Game)throw new Error("Global game object is null");return void 0===t||void 0===e?[...s.Game.ecs.entities.values()]:fh(s.Game.ecs,s.Game.entityMap,new gh(t,e))},s.window.step=function(){if(null===s.Game)throw new Error("Global game object is null");s.Game.processCommands()},window.addEventListener("load",(function(){const t=s.document.getElementById("loading");t.parentNode.removeChild(t);const e=document.createElement("button");e.innerText="Play",e.classList.add("play-button"),e.addEventListener("click",(function(){s.Game=new Id,s.window.Game=s.Game,e.remove()}));document.getElementById("canvas").prepend(e)}))}]);