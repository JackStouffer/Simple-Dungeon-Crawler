!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",u="[object Array]",c="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",v="[object Object]",_="[object RegExp]",y="[object Set]",w="[object String]",b="[object Symbol]",x="[object WeakMap]",E="[object ArrayBuffer]",T="[object DataView]",k="[object Float32Array]",A="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",j="[object Int32Array]",M="[object Uint8Array]",I="[object Uint16Array]",O="[object Uint32Array]",P=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,N=RegExp(D.source),R=RegExp(L.source),H=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,X=RegExp(V.source),q=/^\s+|\s+$/g,Y=/^\s+/,K=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,le=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,he=/['\n\r\u2028\u2029\\]/g,fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",ge="["+de+"]",me="["+fe+"]",ve="\\d+",_e="[\\u2700-\\u27bf]",ye="[a-z\\xdf-\\xf6\\xf8-\\xff]",we="[^\\ud800-\\udfff"+de+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",be="\\ud83c[\\udffb-\\udfff]",xe="[^\\ud800-\\udfff]",Ee="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ae="(?:"+ye+"|"+we+")",Se="(?:"+ke+"|"+we+")",Ce="(?:"+me+"|"+be+")"+"?",je="[\\ufe0e\\ufe0f]?"+Ce+("(?:\\u200d(?:"+[xe,Ee,Te].join("|")+")[\\ufe0e\\ufe0f]?"+Ce+")*"),Me="(?:"+[_e,Ee,Te].join("|")+")"+je,Ie="(?:"+[xe+me+"?",me,Ee,Te,pe].join("|")+")",Oe=RegExp("['’]","g"),Pe=RegExp(me,"g"),Ge=RegExp(be+"(?="+be+")|"+Ie+je,"g"),Fe=RegExp([ke+"?"+ye+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ge,ke,"$"].join("|")+")",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ge,ke+Ae,"$"].join("|")+")",ke+"?"+Ae+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ke+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Me].join("|"),"g"),De=RegExp("[\\u200d\\ud800-\\udfff"+fe+"\\ufe0e\\ufe0f]"),Le=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Re=-1,He={};He[k]=He[A]=He[S]=He[C]=He[j]=He[M]=He["[object Uint8ClampedArray]"]=He[I]=He[O]=!0,He[s]=He[u]=He[E]=He[c]=He[T]=He[h]=He[f]=He[d]=He[g]=He[m]=He[v]=He[_]=He[y]=He[w]=He[x]=!1;var We={};We[s]=We[u]=We[E]=We[T]=We[c]=We[h]=We[k]=We[A]=We[S]=We[C]=We[j]=We[g]=We[m]=We[v]=We[_]=We[y]=We[w]=We[b]=We[M]=We["[object Uint8ClampedArray]"]=We[I]=We[O]=!0,We[f]=We[d]=We[x]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,Ue=parseInt,$e="object"==typeof e&&e&&e.Object===Object&&e,Ve="object"==typeof self&&self&&self.Object===Object&&self,Xe=$e||Ve||Function("return this")(),qe=t&&!t.nodeType&&t,Ye=qe&&"object"==typeof r&&r&&!r.nodeType&&r,Ke=Ye&&Ye.exports===qe,Ze=Ke&&$e.process,Qe=function(){try{var e=Ye&&Ye.require&&Ye.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}(),Je=Qe&&Qe.isArrayBuffer,et=Qe&&Qe.isDate,tt=Qe&&Qe.isMap,nt=Qe&&Qe.isRegExp,rt=Qe&&Qe.isSet,it=Qe&&Qe.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ct(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ht(e,t){return!!(null==e?0:e.length)&&bt(e,t,0)>-1}function ft(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function gt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function mt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var _t=kt("length");function yt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function wt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function bt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):wt(e,Et,n)}function xt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Et(e){return e!=e}function Tt(e,t){var n=null==e?0:e.length;return n?Ct(e,t)/n:NaN}function kt(e){return function(t){return null==t?void 0:t[e]}}function At(e){return function(t){return null==e?void 0:e[t]}}function St(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ct(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Mt(e){return function(t){return e(t)}}function It(e,t){return dt(t,(function(t){return e[t]}))}function Ot(e,t){return e.has(t)}function Pt(e,t){for(var n=-1,r=e.length;++n<r&&bt(t,e[n],0)>-1;);return n}function Gt(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function Ft(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Dt=At({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Lt=At({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nt(e){return"\\"+Be[e]}function Rt(e){return De.test(e)}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Wt(e,t){return function(n){return e(t(n))}}function Bt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var l=e[n];l!==t&&l!==a||(e[n]=a,o[i++]=n)}return o}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function $t(e){return Rt(e)?function(e){var t=Ge.lastIndex=0;for(;Ge.test(e);)++t;return t}(e):_t(e)}function Vt(e){return Rt(e)?function(e){return e.match(Ge)||[]}(e):function(e){return e.split("")}(e)}var Xt=At({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var qt=function e(t){var n,r=(t=null==t?Xe:qt.defaults(Xe.Object(),t,qt.pick(Xe,Ne))).Array,i=t.Date,fe=t.Error,de=t.Function,pe=t.Math,ge=t.Object,me=t.RegExp,ve=t.String,_e=t.TypeError,ye=r.prototype,we=de.prototype,be=ge.prototype,xe=t["__core-js_shared__"],Ee=we.toString,Te=be.hasOwnProperty,ke=0,Ae=(n=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Se=be.toString,Ce=Ee.call(ge),je=Xe._,Me=me("^"+Ee.call(Te).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Ke?t.Buffer:void 0,Ge=t.Symbol,De=t.Uint8Array,Be=Ie?Ie.allocUnsafe:void 0,$e=Wt(ge.getPrototypeOf,ge),Ve=ge.create,qe=be.propertyIsEnumerable,Ye=ye.splice,Ze=Ge?Ge.isConcatSpreadable:void 0,Qe=Ge?Ge.iterator:void 0,_t=Ge?Ge.toStringTag:void 0,At=function(){try{var e=Ji(ge,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=t.clearTimeout!==Xe.clearTimeout&&t.clearTimeout,Kt=i&&i.now!==Xe.Date.now&&i.now,Zt=t.setTimeout!==Xe.setTimeout&&t.setTimeout,Qt=pe.ceil,Jt=pe.floor,en=ge.getOwnPropertySymbols,tn=Ie?Ie.isBuffer:void 0,nn=t.isFinite,rn=ye.join,on=Wt(ge.keys,ge),an=pe.max,ln=pe.min,sn=i.now,un=t.parseInt,cn=pe.random,hn=ye.reverse,fn=Ji(t,"DataView"),dn=Ji(t,"Map"),pn=Ji(t,"Promise"),gn=Ji(t,"Set"),mn=Ji(t,"WeakMap"),vn=Ji(ge,"create"),_n=mn&&new mn,yn={},wn=So(fn),bn=So(dn),xn=So(pn),En=So(gn),Tn=So(mn),kn=Ge?Ge.prototype:void 0,An=kn?kn.valueOf:void 0,Sn=kn?kn.toString:void 0;function Cn(e){if(Ua(e)&&!Pa(e)&&!(e instanceof On)){if(e instanceof In)return e;if(Te.call(e,"__wrapped__"))return Co(e)}return new In(e)}var jn=function(){function e(){}return function(t){if(!za(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Mn(){}function In(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function On(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Fn;++t<n;)this.add(e[t])}function Ln(e){var t=this.__data__=new Gn(e);this.size=t.size}function Nn(e,t){var n=Pa(e),r=!n&&Oa(e),i=!n&&!r&&La(e),o=!n&&!r&&!i&&Qa(e),a=n||r||i||o,l=a?jt(e.length,ve):[],s=l.length;for(var u in e)!t&&!Te.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ao(u,s))||l.push(u);return l}function Rn(e){var t=e.length;return t?e[Dr(0,t-1)]:void 0}function Hn(e,t){return To(vi(e),Yn(t,0,e.length))}function Wn(e){return To(vi(e))}function Bn(e,t,n){(void 0!==n&&!ja(e[t],n)||void 0===n&&!(t in e))&&Xn(e,t,n)}function zn(e,t,n){var r=e[t];Te.call(e,t)&&ja(r,n)&&(void 0!==n||t in e)||Xn(e,t,n)}function Un(e,t){for(var n=e.length;n--;)if(ja(e[n][0],t))return n;return-1}function $n(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Vn(e,t){return e&&_i(t,wl(t),e)}function Xn(e,t,n){"__proto__"==t&&At?At(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qn(e,t){for(var n=-1,i=t.length,o=r(i),a=null==e;++n<i;)o[n]=a?void 0:gl(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Kn(e,t,n,r,i,o){var a,l=1&t,u=2&t,f=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!za(e))return e;var x=Pa(e);if(x){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Te.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return vi(e,a)}else{var P=no(e),G=P==d||P==p;if(La(e))return hi(e,l);if(P==v||P==s||G&&!i){if(a=u||G?{}:io(e),!l)return u?function(e,t){return _i(e,to(e),t)}(e,function(e,t){return e&&_i(t,bl(t),e)}(a,e)):function(e,t){return _i(e,eo(e),t)}(e,Vn(a,e))}else{if(!We[P])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case E:return fi(e);case c:case h:return new r(+e);case T:return function(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case k:case A:case S:case C:case j:case M:case"[object Uint8ClampedArray]":case I:case O:return di(e,n);case g:return new r;case m:case w:return new r(e);case _:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return new r;case b:return i=e,An?ge(An.call(i)):{}}var i}(e,P,l)}}o||(o=new Ln);var F=o.get(e);if(F)return F;o.set(e,a),Ya(e)?e.forEach((function(r){a.add(Kn(r,t,n,r,e,o))})):$a(e)&&e.forEach((function(r,i){a.set(i,Kn(r,t,n,i,e,o))}));var D=x?void 0:(f?u?Vi:$i:u?bl:wl)(e);return lt(D||e,(function(r,i){D&&(r=e[i=r]),zn(a,i,Kn(r,t,n,i,e,o))})),a}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ge(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new _e(o);return wo((function(){e.apply(void 0,n)}),t)}function Jn(e,t,n,r){var i=-1,o=ht,a=!0,l=e.length,s=[],u=t.length;if(!l)return s;n&&(t=dt(t,Mt(n))),r?(o=ft,a=!1):t.length>=200&&(o=Ot,a=!1,t=new Dn(t));e:for(;++i<l;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=u;f--;)if(t[f]===h)continue e;s.push(c)}else o(t,h,r)||s.push(c)}return s}Cn.templateSettings={escape:H,evaluate:W,interpolate:B,variable:"",imports:{_:Cn}},Cn.prototype=Mn.prototype,Cn.prototype.constructor=Cn,In.prototype=jn(Mn.prototype),In.prototype.constructor=In,On.prototype=jn(Mn.prototype),On.prototype.constructor=On,Pn.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Pn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pn.prototype.get=function(e){var t=this.__data__;if(vn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Te.call(t,e)?t[e]:void 0},Pn.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:Te.call(t,e)},Pn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=Un(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=Un(t,e);return n<0?void 0:t[n][1]},Gn.prototype.has=function(e){return Un(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=Un(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Pn,map:new(dn||Gn),string:new Pn}},Fn.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},Fn.prototype.get=function(e){return Zi(this,e).get(e)},Fn.prototype.has=function(e){return Zi(this,e).has(e)},Fn.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Dn.prototype.add=Dn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.clear=function(){this.__data__=new Gn,this.size=0},Ln.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ln.prototype.get=function(e){return this.__data__.get(e)},Ln.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fn(r)}return n.set(e,t),this.size=n.size,this};var er=bi(sr),tr=bi(ur,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===l?a==a&&!Za(a):n(a,l)))var l=a,s=o}return s}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=oo),i||(i=[]);++o<a;){var l=e[o];t>0&&n(l)?t>1?or(l,t-1,n,r,i):pt(i,l):r||(i[i.length]=l)}return i}var ar=xi(),lr=xi(!0);function sr(e,t){return e&&ar(e,t,wl)}function ur(e,t){return e&&lr(e,t,wl)}function cr(e,t){return ct(t,(function(t){return Ha(e[t])}))}function hr(e,t){for(var n=0,r=(t=li(t,e)).length;null!=e&&n<r;)e=e[Ao(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return Pa(e)?r:pt(r,n(e))}function dr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_t&&_t in ge(e)?function(e){var t=Te.call(e,_t),n=e[_t];try{e[_t]=void 0;var r=!0}catch(e){}var i=Se.call(e);r&&(t?e[_t]=n:delete e[_t]);return i}(e):function(e){return Se.call(e)}(e)}function pr(e,t){return e>t}function gr(e,t){return null!=e&&Te.call(e,t)}function mr(e,t){return null!=e&&t in ge(e)}function vr(e,t,n){for(var i=n?ft:ht,o=e[0].length,a=e.length,l=a,s=r(a),u=1/0,c=[];l--;){var h=e[l];l&&t&&(h=dt(h,Mt(t))),u=ln(h.length,u),s[l]=!n&&(t||o>=120&&h.length>=120)?new Dn(l&&h):void 0}h=e[0];var f=-1,d=s[0];e:for(;++f<o&&c.length<u;){var p=h[f],g=t?t(p):p;if(p=n||0!==p?p:0,!(d?Ot(d,g):i(c,g,n))){for(l=a;--l;){var m=s[l];if(!(m?Ot(m,g):i(e[l],g,n)))continue e}d&&d.push(g),c.push(p)}}return c}function _r(e,t,n){var r=null==(e=mo(e,t=li(t,e)))?e:e[Ao(Ro(t))];return null==r?void 0:ot(r,e,n)}function yr(e){return Ua(e)&&dr(e)==s}function wr(e,t,n,r,i){return e===t||(null==e||null==t||!Ua(e)&&!Ua(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Pa(e),l=Pa(t),d=a?u:no(e),p=l?u:no(t),x=(d=d==s?v:d)==v,k=(p=p==s?v:p)==v,A=d==p;if(A&&La(e)){if(!La(t))return!1;a=!0,x=!1}if(A&&!x)return o||(o=new Ln),a||Qa(e)?zi(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new De(e),new De(t)));case c:case h:case m:return ja(+e,+t);case f:return e.name==t.name&&e.message==t.message;case _:case w:return e==t+"";case g:var l=Ht;case y:var s=1&r;if(l||(l=zt),e.size!=t.size&&!s)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var d=zi(l(e),l(t),r,i,o,a);return a.delete(e),d;case b:if(An)return An.call(e)==An.call(t)}return!1}(e,t,d,n,r,i,o);if(!(1&n)){var S=x&&Te.call(e,"__wrapped__"),C=k&&Te.call(t,"__wrapped__");if(S||C){var j=S?e.value():e,M=C?t.value():t;return o||(o=new Ln),i(j,M,n,r,o)}}if(!A)return!1;return o||(o=new Ln),function(e,t,n,r,i,o){var a=1&n,l=$i(e),s=l.length,u=$i(t).length;if(s!=u&&!a)return!1;var c=s;for(;c--;){var h=l[c];if(!(a?h in t:Te.call(t,h)))return!1}var f=o.get(e),d=o.get(t);if(f&&d)return f==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);var g=a;for(;++c<s;){h=l[c];var m=e[h],v=t[h];if(r)var _=a?r(v,m,h,t,e,o):r(m,v,h,e,t,o);if(!(void 0===_?m===v||i(m,v,n,r,o):_)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,n,r,wr,i))}function br(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=ge(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var s=(l=n[i])[0],u=e[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in e))return!1}else{var h=new Ln;if(r)var f=r(u,c,s,e,t,h);if(!(void 0===f?wr(c,u,3,r,h):f))return!1}}return!0}function xr(e){return!(!za(e)||(t=e,Ae&&Ae in t))&&(Ha(e)?Me:ae).test(So(e));var t}function Er(e){return"function"==typeof e?e:null==e?Vl:"object"==typeof e?Pa(e)?jr(e[0],e[1]):Cr(e):ts(e)}function Tr(e){if(!ho(e))return on(e);var t=[];for(var n in ge(e))Te.call(e,n)&&"constructor"!=n&&t.push(n);return t}function kr(e){if(!za(e))return function(e){var t=[];if(null!=e)for(var n in ge(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var r in e)("constructor"!=r||!t&&Te.call(e,r))&&n.push(r);return n}function Ar(e,t){return e<t}function Sr(e,t){var n=-1,i=Fa(e)?r(e.length):[];return er(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Cr(e){var t=Qi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||br(n,e,t)}}function jr(e,t){return so(e)&&fo(t)?po(Ao(e),t):function(n){var r=gl(n,e);return void 0===r&&r===t?ml(n,e):wr(t,r,3)}}function Mr(e,t,n,r,i){e!==t&&ar(t,(function(o,a){if(i||(i=new Ln),za(o))!function(e,t,n,r,i,o,a){var l=_o(e,n),s=_o(t,n),u=a.get(s);if(u)return void Bn(e,n,u);var c=o?o(l,s,n+"",e,t,a):void 0,h=void 0===c;if(h){var f=Pa(s),d=!f&&La(s),p=!f&&!d&&Qa(s);c=s,f||d||p?Pa(l)?c=l:Da(l)?c=vi(l):d?(h=!1,c=hi(s,!0)):p?(h=!1,c=di(s,!0)):c=[]:Xa(s)||Oa(s)?(c=l,Oa(l)?c=al(l):za(l)&&!Ha(l)||(c=io(s))):h=!1}h&&(a.set(s,c),i(c,s,r,o,a),a.delete(s));Bn(e,n,c)}(e,t,a,n,Mr,r,i);else{var l=r?r(_o(e,a),o,a+"",e,t,i):void 0;void 0===l&&(l=o),Bn(e,a,l)}}),bl)}function Ir(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function Or(e,t,n){t=t.length?dt(t,(function(e){return Pa(e)?function(t){return hr(t,1===e.length?e[0]:e)}:e})):[Vl];var r=-1;return t=dt(t,Mt(Ki())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Sr(e,(function(e,n,i){return{criteria:dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=n.length;for(;++r<a;){var s=pi(i[r],o[r]);if(s){if(r>=l)return s;var u=n[r];return s*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function Pr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],l=hr(e,a);n(l,a)&&Wr(o,li(a,e),l)}return o}function Gr(e,t,n,r){var i=r?xt:bt,o=-1,a=t.length,l=e;for(e===t&&(t=vi(t)),n&&(l=dt(e,Mt(n)));++o<a;)for(var s=0,u=t[o],c=n?n(u):u;(s=i(l,c,s,r))>-1;)l!==e&&Ye.call(l,s,1),Ye.call(e,s,1);return e}function Fr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ao(i)?Ye.call(e,i,1):Jr(e,i)}}return e}function Dr(e,t){return e+Jt(cn()*(t-e+1))}function Lr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Nr(e,t){return bo(go(e,t,Vl),e+"")}function Rr(e){return Rn(jl(e))}function Hr(e,t){var n=jl(e);return To(n,Yn(t,0,n.length))}function Wr(e,t,n,r){if(!za(e))return e;for(var i=-1,o=(t=li(t,e)).length,a=o-1,l=e;null!=l&&++i<o;){var s=Ao(t[i]),u=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=a){var c=l[s];void 0===(u=r?r(c,s,l):void 0)&&(u=za(c)?c:ao(t[i+1])?[]:{})}zn(l,s,u),l=l[s]}return e}var Br=_n?function(e,t){return _n.set(e,t),e}:Vl,zr=At?function(e,t){return At(e,"toString",{configurable:!0,enumerable:!1,value:zl(t),writable:!0})}:Vl;function Ur(e){return To(jl(e))}function $r(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Vr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Xr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Za(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return qr(e,t,Vl,n)}function qr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,l=null===t,s=Za(t),u=void 0===t;i<o;){var c=Jt((i+o)/2),h=n(e[c]),f=void 0!==h,d=null===h,p=h==h,g=Za(h);if(a)var m=r||p;else m=u?p&&(r||f):l?p&&f&&(r||!d):s?p&&f&&!d&&(r||!g):!d&&!g&&(r?h<=t:h<t);m?i=c+1:o=c}return ln(o,4294967294)}function Yr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],l=t?t(a):a;if(!n||!ja(l,s)){var s=l;o[i++]=0===a?0:a}}return o}function Kr(e){return"number"==typeof e?e:Za(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(Pa(e))return dt(e,Zr)+"";if(Za(e))return Sn?Sn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,i=ht,o=e.length,a=!0,l=[],s=l;if(n)a=!1,i=ft;else if(o>=200){var u=t?null:Li(e);if(u)return zt(u);a=!1,i=Ot,s=new Dn}else s=t?[]:l;e:for(;++r<o;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=s.length;f--;)if(s[f]===h)continue e;t&&s.push(h),l.push(c)}else i(s,h,n)||(s!==l&&s.push(h),l.push(c))}return l}function Jr(e,t){return null==(e=mo(e,t=li(t,e)))||delete e[Ao(Ro(t))]}function ei(e,t,n,r){return Wr(e,t,n(hr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?$r(e,r?0:o,r?o+1:i):$r(e,r?o+1:0,r?i:o)}function ni(e,t){var n=e;return n instanceof On&&(n=n.value()),gt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Qr(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var l=e[o],s=-1;++s<i;)s!=o&&(a[o]=Jn(a[o]||l,e[s],t,n));return Qr(or(a,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var l=r<o?t[r]:void 0;n(a,e[r],l)}return a}function oi(e){return Da(e)?e:[]}function ai(e){return"function"==typeof e?e:Vl}function li(e,t){return Pa(e)?e:so(e,t)?[e]:ko(ll(e))}var si=Nr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:$r(e,t,n)}var ci=Yt||function(e){return Xe.clearTimeout(e)};function hi(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function fi(e){var t=new e.constructor(e.byteLength);return new De(t).set(new De(e)),t}function di(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Za(e),a=void 0!==t,l=null===t,s=t==t,u=Za(t);if(!l&&!u&&!o&&e>t||o&&a&&s&&!l&&!u||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!s)return-1}return 0}function gi(e,t,n,i){for(var o=-1,a=e.length,l=n.length,s=-1,u=t.length,c=an(a-l,0),h=r(u+c),f=!i;++s<u;)h[s]=t[s];for(;++o<l;)(f||o<a)&&(h[n[o]]=e[o]);for(;c--;)h[s++]=e[o++];return h}function mi(e,t,n,i){for(var o=-1,a=e.length,l=-1,s=n.length,u=-1,c=t.length,h=an(a-s,0),f=r(h+c),d=!i;++o<h;)f[o]=e[o];for(var p=o;++u<c;)f[p+u]=t[u];for(;++l<s;)(d||o<a)&&(f[p+n[l]]=e[o++]);return f}function vi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function _i(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],s=r?r(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),i?Xn(n,l,s):zn(n,l,s)}return n}function yi(e,t){return function(n,r){var i=Pa(n)?at:$n,o=t?t():{};return i(n,e,Ki(r,2),o)}}function wi(e){return Nr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&lo(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=ge(t);++r<i;){var l=n[r];l&&e(t,l,r,o)}return t}))}function bi(e,t){return function(n,r){if(null==n)return n;if(!Fa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ge(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function xi(e){return function(t,n,r){for(var i=-1,o=ge(t),a=r(t),l=a.length;l--;){var s=a[e?l:++i];if(!1===n(o[s],s,o))break}return t}}function Ei(e){return function(t){var n=Rt(t=ll(t))?Vt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function Ti(e){return function(t){return gt(Hl(Ol(t).replace(Oe,"")),e,"")}}function ki(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return za(r)?r:n}}function Ai(e){return function(t,n,r){var i=ge(t);if(!Fa(t)){var o=Ki(n,3);t=wl(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Si(e){return Ui((function(t){var n=t.length,r=n,i=In.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new _e(o);if(i&&!l&&"wrapper"==qi(a))var l=new In([],!0)}for(r=l?r:n;++r<n;){var s=qi(a=t[r]),u="wrapper"==s?Xi(a):void 0;l=u&&uo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[qi(u[0])].apply(l,u[3]):1==a.length&&uo(a)?l[s]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Pa(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ci(e,t,n,i,o,a,l,s,u,c){var h=128&t,f=1&t,d=2&t,p=24&t,g=512&t,m=d?void 0:ki(e);return function v(){for(var _=arguments.length,y=r(_),w=_;w--;)y[w]=arguments[w];if(p)var b=Yi(v),x=Ft(y,b);if(i&&(y=gi(y,i,o,p)),a&&(y=mi(y,a,l,p)),_-=x,p&&_<c){var E=Bt(y,b);return Fi(e,t,Ci,v.placeholder,n,y,E,s,u,c-_)}var T=f?n:this,k=d?T[e]:e;return _=y.length,s?y=vo(y,s):g&&_>1&&y.reverse(),h&&u<_&&(y.length=u),this&&this!==Xe&&this instanceof v&&(k=m||ki(k)),k.apply(T,y)}}function ji(e,t){return function(n,r){return function(e,t,n,r){return sr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Mi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Kr(n),r=Kr(r)),i=e(n,r)}return i}}function Ii(e){return Ui((function(t){return t=dt(t,Mt(Ki())),Nr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function Oi(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Lr(t,e):t;var r=Lr(t,Qt(e/$t(t)));return Rt(t)?ui(Vt(r),0,e).join(""):r.slice(0,e)}function Pi(e){return function(t,n,i){return i&&"number"!=typeof i&&lo(t,n,i)&&(n=i=void 0),t=nl(t),void 0===n?(n=t,t=0):n=nl(n),function(e,t,n,i){for(var o=-1,a=an(Qt((t-e)/(n||1)),0),l=r(a);a--;)l[i?a:++o]=e,e+=n;return l}(t,n,i=void 0===i?t<n?1:-1:nl(i),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ol(t),n=ol(n)),e(t,n)}}function Fi(e,t,n,r,i,o,a,l,s,u){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var h=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,l,s,u],f=n.apply(void 0,h);return uo(e)&&yo(f,h),f.placeholder=r,xo(f,e,t)}function Di(e){var t=pe[e];return function(e,n){if(e=ol(e),(n=null==n?0:ln(rl(n),292))&&nn(e)){var r=(ll(e)+"e").split("e");return+((r=(ll(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Li=gn&&1/zt(new gn([,-0]))[1]==1/0?function(e){return new gn(e)}:Zl;function Ni(e){return function(t){var n=no(t);return n==g?Ht(t):n==y?Ut(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ri(e,t,n,i,l,s,u,c){var h=2&t;if(!h&&"function"!=typeof e)throw new _e(o);var f=i?i.length:0;if(f||(t&=-97,i=l=void 0),u=void 0===u?u:an(rl(u),0),c=void 0===c?c:rl(c),f-=l?l.length:0,64&t){var d=i,p=l;i=l=void 0}var g=h?void 0:Xi(e),m=[e,t,n,i,l,d,p,s,u,c];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,l=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!l)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?gi(u,s,t[4]):s,e[4]=u?Bt(e[3],a):t[4]}(s=t[5])&&(u=e[5],e[5]=u?mi(u,s,t[6]):s,e[6]=u?Bt(e[5],a):t[6]);(s=t[7])&&(e[7]=s);128&r&&(e[8]=null==e[8]?t[8]:ln(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(m,g),e=m[0],t=m[1],n=m[2],i=m[3],l=m[4],!(c=m[9]=void 0===m[9]?h?0:e.length:an(m[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=ki(e);return function o(){for(var a=arguments.length,l=r(a),s=a,u=Yi(o);s--;)l[s]=arguments[s];var c=a<3&&l[0]!==u&&l[a-1]!==u?[]:Bt(l,u);if((a-=c.length)<n)return Fi(e,t,Ci,o.placeholder,void 0,l,c,void 0,void 0,n-a);var h=this&&this!==Xe&&this instanceof o?i:e;return ot(h,this,l)}}(e,t,c):32!=t&&33!=t||l.length?Ci.apply(void 0,m):function(e,t,n,i){var o=1&t,a=ki(e);return function t(){for(var l=-1,s=arguments.length,u=-1,c=i.length,h=r(c+s),f=this&&this!==Xe&&this instanceof t?a:e;++u<c;)h[u]=i[u];for(;s--;)h[u++]=arguments[++l];return ot(f,o?n:this,h)}}(e,t,n,i);else var v=function(e,t,n){var r=1&t,i=ki(e);return function t(){var o=this&&this!==Xe&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return xo((g?Br:yo)(v,m),e,t)}function Hi(e,t,n,r){return void 0===e||ja(e,be[n])&&!Te.call(r,n)?t:e}function Wi(e,t,n,r,i,o){return za(e)&&za(t)&&(o.set(t,e),Mr(e,t,void 0,Wi,o),o.delete(t)),e}function Bi(e){return Xa(e)?void 0:e}function zi(e,t,n,r,i,o){var a=1&n,l=e.length,s=t.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var h=-1,f=!0,d=2&n?new Dn:void 0;for(o.set(e,t),o.set(t,e);++h<l;){var p=e[h],g=t[h];if(r)var m=a?r(g,p,h,t,e,o):r(p,g,h,e,t,o);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!vt(t,(function(e,t){if(!Ot(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){f=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Ui(e){return bo(go(e,void 0,Go),e+"")}function $i(e){return fr(e,wl,eo)}function Vi(e){return fr(e,bl,to)}var Xi=_n?function(e){return _n.get(e)}:Zl;function qi(e){for(var t=e.name+"",n=yn[t],r=Te.call(yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(Te.call(Cn,"placeholder")?Cn:e).placeholder}function Ki(){var e=Cn.iteratee||Xl;return e=e===Xl?Er:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Qi(e){for(var t=wl(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fo(i)]}return t}function Ji(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xr(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ge(e),ct(en(e),(function(t){return qe.call(e,t)})))}:is,to=en?function(e){for(var t=[];e;)pt(t,eo(e)),e=$e(e);return t}:is,no=dr;function ro(e,t,n){for(var r=-1,i=(t=li(t,e)).length,o=!1;++r<i;){var a=Ao(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ba(i)&&ao(a,i)&&(Pa(e)||Oa(e))}function io(e){return"function"!=typeof e.constructor||ho(e)?{}:jn($e(e))}function oo(e){return Pa(e)||Oa(e)||!!(Ze&&e&&e[Ze])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function lo(e,t,n){if(!za(n))return!1;var r=typeof t;return!!("number"==r?Fa(n)&&ao(t,n.length):"string"==r&&t in n)&&ja(n[t],e)}function so(e,t){if(Pa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Za(e))||(U.test(e)||!z.test(e)||null!=t&&e in ge(t))}function uo(e){var t=qi(e),n=Cn[t];if("function"!=typeof n||!(t in On.prototype))return!1;if(e===n)return!0;var r=Xi(n);return!!r&&e===r[0]}(fn&&no(new fn(new ArrayBuffer(1)))!=T||dn&&no(new dn)!=g||pn&&"[object Promise]"!=no(pn.resolve())||gn&&no(new gn)!=y||mn&&no(new mn)!=x)&&(no=function(e){var t=dr(e),n=t==v?e.constructor:void 0,r=n?So(n):"";if(r)switch(r){case wn:return T;case bn:return g;case xn:return"[object Promise]";case En:return y;case Tn:return x}return t});var co=xe?Ha:os;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}function fo(e){return e==e&&!za(e)}function po(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ge(n)))}}function go(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=an(i.length-t,0),l=r(a);++o<a;)l[o]=i[t+o];o=-1;for(var s=r(t+1);++o<t;)s[o]=i[o];return s[t]=n(l),ot(e,this,s)}}function mo(e,t){return t.length<2?e:hr(e,$r(t,0,-1))}function vo(e,t){for(var n=e.length,r=ln(t.length,n),i=vi(e);r--;){var o=t[r];e[r]=ao(o,n)?i[o]:void 0}return e}function _o(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var yo=Eo(Br),wo=Zt||function(e,t){return Xe.setTimeout(e,t)},bo=Eo(zr);function xo(e,t,n){var r=t+"";return bo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return lt(l,(function(n){var r="_."+n[0];t&n[1]&&!ht(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Q);return t?t[1].split(J):[]}(r),n)))}function Eo(e){var t=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function To(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Dr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var ko=function(e){var t=Ea(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function Ao(e){if("string"==typeof e||Za(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function So(e){if(null!=e){try{return Ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Co(e){if(e instanceof On)return e.clone();var t=new In(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var jo=Nr((function(e,t){return Da(e)?Jn(e,or(t,1,Da,!0)):[]})),Mo=Nr((function(e,t){var n=Ro(t);return Da(n)&&(n=void 0),Da(e)?Jn(e,or(t,1,Da,!0),Ki(n,2)):[]})),Io=Nr((function(e,t){var n=Ro(t);return Da(n)&&(n=void 0),Da(e)?Jn(e,or(t,1,Da,!0),void 0,n):[]}));function Oo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rl(n);return i<0&&(i=an(r+i,0)),wt(e,Ki(t,3),i)}function Po(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=rl(n),i=n<0?an(r+i,0):ln(i,r-1)),wt(e,Ki(t,3),i,!0)}function Go(e){return(null==e?0:e.length)?or(e,1):[]}function Fo(e){return e&&e.length?e[0]:void 0}var Do=Nr((function(e){var t=dt(e,oi);return t.length&&t[0]===e[0]?vr(t):[]})),Lo=Nr((function(e){var t=Ro(e),n=dt(e,oi);return t===Ro(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?vr(n,Ki(t,2)):[]})),No=Nr((function(e){var t=Ro(e),n=dt(e,oi);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?vr(n,void 0,t):[]}));function Ro(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ho=Nr(Wo);function Wo(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var Bo=Ui((function(e,t){var n=null==e?0:e.length,r=qn(e,t);return Fr(e,dt(t,(function(e){return ao(e,n)?+e:e})).sort(pi)),r}));function zo(e){return null==e?e:hn.call(e)}var Uo=Nr((function(e){return Qr(or(e,1,Da,!0))})),$o=Nr((function(e){var t=Ro(e);return Da(t)&&(t=void 0),Qr(or(e,1,Da,!0),Ki(t,2))})),Vo=Nr((function(e){var t=Ro(e);return t="function"==typeof t?t:void 0,Qr(or(e,1,Da,!0),void 0,t)}));function Xo(e){if(!e||!e.length)return[];var t=0;return e=ct(e,(function(e){if(Da(e))return t=an(e.length,t),!0})),jt(t,(function(t){return dt(e,kt(t))}))}function qo(e,t){if(!e||!e.length)return[];var n=Xo(e);return null==t?n:dt(n,(function(e){return ot(t,void 0,e)}))}var Yo=Nr((function(e,t){return Da(e)?Jn(e,t):[]})),Ko=Nr((function(e){return ri(ct(e,Da))})),Zo=Nr((function(e){var t=Ro(e);return Da(t)&&(t=void 0),ri(ct(e,Da),Ki(t,2))})),Qo=Nr((function(e){var t=Ro(e);return t="function"==typeof t?t:void 0,ri(ct(e,Da),void 0,t)})),Jo=Nr(Xo);var ea=Nr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,qo(e,n)}));function ta(e){var t=Cn(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ra=Ui((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return qn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof On&&ao(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[i],thisArg:void 0}),new In(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ia=yi((function(e,t,n){Te.call(e,n)?++e[n]:Xn(e,n,1)}));var oa=Ai(Oo),aa=Ai(Po);function la(e,t){return(Pa(e)?lt:er)(e,Ki(t,3))}function sa(e,t){return(Pa(e)?st:tr)(e,Ki(t,3))}var ua=yi((function(e,t,n){Te.call(e,n)?e[n].push(t):Xn(e,n,[t])}));var ca=Nr((function(e,t,n){var i=-1,o="function"==typeof t,a=Fa(e)?r(e.length):[];return er(e,(function(e){a[++i]=o?ot(t,e,n):_r(e,t,n)})),a})),ha=yi((function(e,t,n){Xn(e,n,t)}));function fa(e,t){return(Pa(e)?dt:Sr)(e,Ki(t,3))}var da=yi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var pa=Nr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&lo(e,t[0],t[1])?t=[]:n>2&&lo(t[0],t[1],t[2])&&(t=[t[0]]),Or(e,or(t,1),[])})),ga=Kt||function(){return Xe.Date.now()};function ma(e,t,n){return t=n?void 0:t,Ri(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function va(e,t){var n;if("function"!=typeof t)throw new _e(o);return e=rl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var _a=Nr((function(e,t,n){var r=1;if(n.length){var i=Bt(n,Yi(_a));r|=32}return Ri(e,r,t,n,i)})),ya=Nr((function(e,t,n){var r=3;if(n.length){var i=Bt(n,Yi(ya));r|=32}return Ri(t,r,e,n,i)}));function wa(e,t,n){var r,i,a,l,s,u,c=0,h=!1,f=!1,d=!0;if("function"!=typeof e)throw new _e(o);function p(t){var n=r,o=i;return r=i=void 0,c=t,l=e.apply(o,n)}function g(e){return c=e,s=wo(v,t),h?p(e):l}function m(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=a}function v(){var e=ga();if(m(e))return _(e);s=wo(v,function(e){var n=t-(e-u);return f?ln(n,a-(e-c)):n}(e))}function _(e){return s=void 0,d&&r?p(e):(r=i=void 0,l)}function y(){var e=ga(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return g(u);if(f)return ci(s),s=wo(v,t),p(u)}return void 0===s&&(s=wo(v,t)),l}return t=ol(t)||0,za(n)&&(h=!!n.leading,a=(f="maxWait"in n)?an(ol(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&ci(s),c=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?l:_(ga())},y}var ba=Nr((function(e,t){return Qn(e,1,t)})),xa=Nr((function(e,t,n){return Qn(e,ol(t)||0,n)}));function Ea(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new _e(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ea.Cache||Fn),n}function Ta(e){if("function"!=typeof e)throw new _e(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ea.Cache=Fn;var ka=si((function(e,t){var n=(t=1==t.length&&Pa(t[0])?dt(t[0],Mt(Ki())):dt(or(t,1),Mt(Ki()))).length;return Nr((function(r){for(var i=-1,o=ln(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Aa=Nr((function(e,t){return Ri(e,32,void 0,t,Bt(t,Yi(Aa)))})),Sa=Nr((function(e,t){return Ri(e,64,void 0,t,Bt(t,Yi(Sa)))})),Ca=Ui((function(e,t){return Ri(e,256,void 0,void 0,void 0,t)}));function ja(e,t){return e===t||e!=e&&t!=t}var Ma=Gi(pr),Ia=Gi((function(e,t){return e>=t})),Oa=yr(function(){return arguments}())?yr:function(e){return Ua(e)&&Te.call(e,"callee")&&!qe.call(e,"callee")},Pa=r.isArray,Ga=Je?Mt(Je):function(e){return Ua(e)&&dr(e)==E};function Fa(e){return null!=e&&Ba(e.length)&&!Ha(e)}function Da(e){return Ua(e)&&Fa(e)}var La=tn||os,Na=et?Mt(et):function(e){return Ua(e)&&dr(e)==h};function Ra(e){if(!Ua(e))return!1;var t=dr(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xa(e)}function Ha(e){if(!za(e))return!1;var t=dr(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Wa(e){return"number"==typeof e&&e==rl(e)}function Ba(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function za(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ua(e){return null!=e&&"object"==typeof e}var $a=tt?Mt(tt):function(e){return Ua(e)&&no(e)==g};function Va(e){return"number"==typeof e||Ua(e)&&dr(e)==m}function Xa(e){if(!Ua(e)||dr(e)!=v)return!1;var t=$e(e);if(null===t)return!0;var n=Te.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ee.call(n)==Ce}var qa=nt?Mt(nt):function(e){return Ua(e)&&dr(e)==_};var Ya=rt?Mt(rt):function(e){return Ua(e)&&no(e)==y};function Ka(e){return"string"==typeof e||!Pa(e)&&Ua(e)&&dr(e)==w}function Za(e){return"symbol"==typeof e||Ua(e)&&dr(e)==b}var Qa=it?Mt(it):function(e){return Ua(e)&&Ba(e.length)&&!!He[dr(e)]};var Ja=Gi(Ar),el=Gi((function(e,t){return e<=t}));function tl(e){if(!e)return[];if(Fa(e))return Ka(e)?Vt(e):vi(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=no(e);return(t==g?Ht:t==y?zt:jl)(e)}function nl(e){return e?(e=ol(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function rl(e){var t=nl(e),n=t%1;return t==t?n?t-n:t:0}function il(e){return e?Yn(rl(e),0,4294967295):0}function ol(e){if("number"==typeof e)return e;if(Za(e))return NaN;if(za(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=za(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(q,"");var n=oe.test(e);return n||le.test(e)?Ue(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function al(e){return _i(e,bl(e))}function ll(e){return null==e?"":Zr(e)}var sl=wi((function(e,t){if(ho(t)||Fa(t))_i(t,wl(t),e);else for(var n in t)Te.call(t,n)&&zn(e,n,t[n])})),ul=wi((function(e,t){_i(t,bl(t),e)})),cl=wi((function(e,t,n,r){_i(t,bl(t),e,r)})),hl=wi((function(e,t,n,r){_i(t,wl(t),e,r)})),fl=Ui(qn);var dl=Nr((function(e,t){e=ge(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&lo(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=bl(o),l=-1,s=a.length;++l<s;){var u=a[l],c=e[u];(void 0===c||ja(c,be[u])&&!Te.call(e,u))&&(e[u]=o[u])}return e})),pl=Nr((function(e){return e.push(void 0,Wi),ot(El,void 0,e)}));function gl(e,t,n){var r=null==e?void 0:hr(e,t);return void 0===r?n:r}function ml(e,t){return null!=e&&ro(e,t,mr)}var vl=ji((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),e[t]=n}),zl(Vl)),_l=ji((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),Te.call(e,t)?e[t].push(n):e[t]=[n]}),Ki),yl=Nr(_r);function wl(e){return Fa(e)?Nn(e):Tr(e)}function bl(e){return Fa(e)?Nn(e,!0):kr(e)}var xl=wi((function(e,t,n){Mr(e,t,n)})),El=wi((function(e,t,n,r){Mr(e,t,n,r)})),Tl=Ui((function(e,t){var n={};if(null==e)return n;var r=!1;t=dt(t,(function(t){return t=li(t,e),r||(r=t.length>1),t})),_i(e,Vi(e),n),r&&(n=Kn(n,7,Bi));for(var i=t.length;i--;)Jr(n,t[i]);return n}));var kl=Ui((function(e,t){return null==e?{}:function(e,t){return Pr(e,t,(function(t,n){return ml(e,n)}))}(e,t)}));function Al(e,t){if(null==e)return{};var n=dt(Vi(e),(function(e){return[e]}));return t=Ki(t),Pr(e,n,(function(e,n){return t(e,n[0])}))}var Sl=Ni(wl),Cl=Ni(bl);function jl(e){return null==e?[]:It(e,wl(e))}var Ml=Ti((function(e,t,n){return t=t.toLowerCase(),e+(n?Il(t):t)}));function Il(e){return Rl(ll(e).toLowerCase())}function Ol(e){return(e=ll(e))&&e.replace(ue,Dt).replace(Pe,"")}var Pl=Ti((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gl=Ti((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Fl=Ei("toLowerCase");var Dl=Ti((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ll=Ti((function(e,t,n){return e+(n?" ":"")+Rl(t)}));var Nl=Ti((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Rl=Ei("toUpperCase");function Hl(e,t,n){return e=ll(e),void 0===(t=n?void 0:t)?function(e){return Le.test(e)}(e)?function(e){return e.match(Fe)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Wl=Nr((function(e,t){try{return ot(e,void 0,t)}catch(e){return Ra(e)?e:new fe(e)}})),Bl=Ui((function(e,t){return lt(t,(function(t){t=Ao(t),Xn(e,t,_a(e[t],e))})),e}));function zl(e){return function(){return e}}var Ul=Si(),$l=Si(!0);function Vl(e){return e}function Xl(e){return Er("function"==typeof e?e:Kn(e,1))}var ql=Nr((function(e,t){return function(n){return _r(n,e,t)}})),Yl=Nr((function(e,t){return function(n){return _r(e,n,t)}}));function Kl(e,t,n){var r=wl(t),i=cr(t,r);null!=n||za(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,wl(t)));var o=!(za(n)&&"chain"in n&&!n.chain),a=Ha(e);return lt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Zl(){}var Ql=Ii(dt),Jl=Ii(ut),es=Ii(vt);function ts(e){return so(e)?kt(Ao(e)):function(e){return function(t){return hr(t,e)}}(e)}var ns=Pi(),rs=Pi(!0);function is(){return[]}function os(){return!1}var as=Mi((function(e,t){return e+t}),0),ls=Di("ceil"),ss=Mi((function(e,t){return e/t}),1),us=Di("floor");var cs,hs=Mi((function(e,t){return e*t}),1),fs=Di("round"),ds=Mi((function(e,t){return e-t}),0);return Cn.after=function(e,t){if("function"!=typeof t)throw new _e(o);return e=rl(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=ma,Cn.assign=sl,Cn.assignIn=ul,Cn.assignInWith=cl,Cn.assignWith=hl,Cn.at=fl,Cn.before=va,Cn.bind=_a,Cn.bindAll=Bl,Cn.bindKey=ya,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Pa(e)?e:[e]},Cn.chain=ta,Cn.chunk=function(e,t,n){t=(n?lo(e,t,n):void 0===t)?1:an(rl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,l=r(Qt(i/t));o<i;)l[a++]=$r(e,o,o+=t);return l},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(Pa(n)?vi(n):[n],or(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=Ki();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new _e(o);return[n(e[0]),e[1]]})):[],Nr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},Cn.conforms=function(e){return function(e){var t=wl(e);return function(n){return Zn(n,e,t)}}(Kn(e,1))},Cn.constant=zl,Cn.countBy=ia,Cn.create=function(e,t){var n=jn(e);return null==t?n:Vn(n,t)},Cn.curry=function e(t,n,r){var i=Ri(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.curryRight=function e(t,n,r){var i=Ri(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.debounce=wa,Cn.defaults=dl,Cn.defaultsDeep=pl,Cn.defer=ba,Cn.delay=xa,Cn.difference=jo,Cn.differenceBy=Mo,Cn.differenceWith=Io,Cn.drop=function(e,t,n){var r=null==e?0:e.length;return r?$r(e,(t=n||void 0===t?1:rl(t))<0?0:t,r):[]},Cn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?$r(e,0,(t=r-(t=n||void 0===t?1:rl(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!0):[]},Cn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&lo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=rl(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:rl(r))<0&&(r+=i),r=n>r?0:il(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Cn.filter=function(e,t){return(Pa(e)?ct:ir)(e,Ki(t,3))},Cn.flatMap=function(e,t){return or(fa(e,t),1)},Cn.flatMapDeep=function(e,t){return or(fa(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:rl(n),or(fa(e,t),n)},Cn.flatten=Go,Cn.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},Cn.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:rl(t)):[]},Cn.flip=function(e){return Ri(e,512)},Cn.flow=Ul,Cn.flowRight=$l,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Cn.functions=function(e){return null==e?[]:cr(e,wl(e))},Cn.functionsIn=function(e){return null==e?[]:cr(e,bl(e))},Cn.groupBy=ua,Cn.initial=function(e){return(null==e?0:e.length)?$r(e,0,-1):[]},Cn.intersection=Do,Cn.intersectionBy=Lo,Cn.intersectionWith=No,Cn.invert=vl,Cn.invertBy=_l,Cn.invokeMap=ca,Cn.iteratee=Xl,Cn.keyBy=ha,Cn.keys=wl,Cn.keysIn=bl,Cn.map=fa,Cn.mapKeys=function(e,t){var n={};return t=Ki(t,3),sr(e,(function(e,r,i){Xn(n,t(e,r,i),e)})),n},Cn.mapValues=function(e,t){var n={};return t=Ki(t,3),sr(e,(function(e,r,i){Xn(n,r,t(e,r,i))})),n},Cn.matches=function(e){return Cr(Kn(e,1))},Cn.matchesProperty=function(e,t){return jr(e,Kn(t,1))},Cn.memoize=Ea,Cn.merge=xl,Cn.mergeWith=El,Cn.method=ql,Cn.methodOf=Yl,Cn.mixin=Kl,Cn.negate=Ta,Cn.nthArg=function(e){return e=rl(e),Nr((function(t){return Ir(t,e)}))},Cn.omit=Tl,Cn.omitBy=function(e,t){return Al(e,Ta(Ki(t)))},Cn.once=function(e){return va(2,e)},Cn.orderBy=function(e,t,n,r){return null==e?[]:(Pa(t)||(t=null==t?[]:[t]),Pa(n=r?void 0:n)||(n=null==n?[]:[n]),Or(e,t,n))},Cn.over=Ql,Cn.overArgs=ka,Cn.overEvery=Jl,Cn.overSome=es,Cn.partial=Aa,Cn.partialRight=Sa,Cn.partition=da,Cn.pick=kl,Cn.pickBy=Al,Cn.property=ts,Cn.propertyOf=function(e){return function(t){return null==e?void 0:hr(e,t)}},Cn.pull=Ho,Cn.pullAll=Wo,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,Ki(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,void 0,n):e},Cn.pullAt=Bo,Cn.range=ns,Cn.rangeRight=rs,Cn.rearg=Ca,Cn.reject=function(e,t){return(Pa(e)?ct:ir)(e,Ta(Ki(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ki(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Fr(e,i),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new _e(o);return Nr(e,t=void 0===t?t:rl(t))},Cn.reverse=zo,Cn.sampleSize=function(e,t,n){return t=(n?lo(e,t,n):void 0===t)?1:rl(t),(Pa(e)?Hn:Hr)(e,t)},Cn.set=function(e,t,n){return null==e?e:Wr(e,t,n)},Cn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Wr(e,t,n,r)},Cn.shuffle=function(e){return(Pa(e)?Wn:Ur)(e)},Cn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&lo(e,t,n)?(t=0,n=r):(t=null==t?0:rl(t),n=void 0===n?r:rl(n)),$r(e,t,n)):[]},Cn.sortBy=pa,Cn.sortedUniq=function(e){return e&&e.length?Yr(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Yr(e,Ki(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&lo(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ll(e))&&("string"==typeof t||null!=t&&!qa(t))&&!(t=Zr(t))&&Rt(e)?ui(Vt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new _e(o);return t=null==t?0:an(rl(t),0),Nr((function(n){var r=n[t],i=ui(n,0,t);return r&&pt(i,r),ot(e,this,i)}))},Cn.tail=function(e){var t=null==e?0:e.length;return t?$r(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?$r(e,0,(t=n||void 0===t?1:rl(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?$r(e,(t=r-(t=n||void 0===t?1:rl(t)))<0?0:t,r):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new _e(o);return za(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),wa(e,t,{leading:r,maxWait:t,trailing:i})},Cn.thru=na,Cn.toArray=tl,Cn.toPairs=Sl,Cn.toPairsIn=Cl,Cn.toPath=function(e){return Pa(e)?dt(e,Ao):Za(e)?[e]:vi(ko(ll(e)))},Cn.toPlainObject=al,Cn.transform=function(e,t,n){var r=Pa(e),i=r||La(e)||Qa(e);if(t=Ki(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:za(e)&&Ha(o)?jn($e(e)):{}}return(i?lt:sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Cn.unary=function(e){return ma(e,1)},Cn.union=Uo,Cn.unionBy=$o,Cn.unionWith=Vo,Cn.uniq=function(e){return e&&e.length?Qr(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Qr(e,Ki(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||Jr(e,t)},Cn.unzip=Xo,Cn.unzipWith=qo,Cn.update=function(e,t,n){return null==e?e:ei(e,t,ai(n))},Cn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,ai(n),r)},Cn.values=jl,Cn.valuesIn=function(e){return null==e?[]:It(e,bl(e))},Cn.without=Yo,Cn.words=Hl,Cn.wrap=function(e,t){return Aa(ai(t),e)},Cn.xor=Ko,Cn.xorBy=Zo,Cn.xorWith=Qo,Cn.zip=Jo,Cn.zipObject=function(e,t){return ii(e||[],t||[],zn)},Cn.zipObjectDeep=function(e,t){return ii(e||[],t||[],Wr)},Cn.zipWith=ea,Cn.entries=Sl,Cn.entriesIn=Cl,Cn.extend=ul,Cn.extendWith=cl,Kl(Cn,Cn),Cn.add=as,Cn.attempt=Wl,Cn.camelCase=Ml,Cn.capitalize=Il,Cn.ceil=ls,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ol(n))==n?n:0),void 0!==t&&(t=(t=ol(t))==t?t:0),Yn(ol(e),t,n)},Cn.clone=function(e){return Kn(e,4)},Cn.cloneDeep=function(e){return Kn(e,5)},Cn.cloneDeepWith=function(e,t){return Kn(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return Kn(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Zn(e,t,wl(t))},Cn.deburr=Ol,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=ss,Cn.endsWith=function(e,t,n){e=ll(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Yn(rl(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Cn.eq=ja,Cn.escape=function(e){return(e=ll(e))&&R.test(e)?e.replace(L,Lt):e},Cn.escapeRegExp=function(e){return(e=ll(e))&&X.test(e)?e.replace(V,"\\$&"):e},Cn.every=function(e,t,n){var r=Pa(e)?ut:nr;return n&&lo(e,t,n)&&(t=void 0),r(e,Ki(t,3))},Cn.find=oa,Cn.findIndex=Oo,Cn.findKey=function(e,t){return yt(e,Ki(t,3),sr)},Cn.findLast=aa,Cn.findLastIndex=Po,Cn.findLastKey=function(e,t){return yt(e,Ki(t,3),ur)},Cn.floor=us,Cn.forEach=la,Cn.forEachRight=sa,Cn.forIn=function(e,t){return null==e?e:ar(e,Ki(t,3),bl)},Cn.forInRight=function(e,t){return null==e?e:lr(e,Ki(t,3),bl)},Cn.forOwn=function(e,t){return e&&sr(e,Ki(t,3))},Cn.forOwnRight=function(e,t){return e&&ur(e,Ki(t,3))},Cn.get=gl,Cn.gt=Ma,Cn.gte=Ia,Cn.has=function(e,t){return null!=e&&ro(e,t,gr)},Cn.hasIn=ml,Cn.head=Fo,Cn.identity=Vl,Cn.includes=function(e,t,n,r){e=Fa(e)?e:jl(e),n=n&&!r?rl(n):0;var i=e.length;return n<0&&(n=an(i+n,0)),Ka(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&bt(e,t,n)>-1},Cn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rl(n);return i<0&&(i=an(r+i,0)),bt(e,t,i)},Cn.inRange=function(e,t,n){return t=nl(t),void 0===n?(n=t,t=0):n=nl(n),function(e,t,n){return e>=ln(t,n)&&e<an(t,n)}(e=ol(e),t,n)},Cn.invoke=yl,Cn.isArguments=Oa,Cn.isArray=Pa,Cn.isArrayBuffer=Ga,Cn.isArrayLike=Fa,Cn.isArrayLikeObject=Da,Cn.isBoolean=function(e){return!0===e||!1===e||Ua(e)&&dr(e)==c},Cn.isBuffer=La,Cn.isDate=Na,Cn.isElement=function(e){return Ua(e)&&1===e.nodeType&&!Xa(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Fa(e)&&(Pa(e)||"string"==typeof e||"function"==typeof e.splice||La(e)||Qa(e)||Oa(e)))return!e.length;var t=no(e);if(t==g||t==y)return!e.size;if(ho(e))return!Tr(e).length;for(var n in e)if(Te.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return wr(e,t)},Cn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?wr(e,t,void 0,n):!!r},Cn.isError=Ra,Cn.isFinite=function(e){return"number"==typeof e&&nn(e)},Cn.isFunction=Ha,Cn.isInteger=Wa,Cn.isLength=Ba,Cn.isMap=$a,Cn.isMatch=function(e,t){return e===t||br(e,t,Qi(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,br(e,t,Qi(t),n)},Cn.isNaN=function(e){return Va(e)&&e!=+e},Cn.isNative=function(e){if(co(e))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=Va,Cn.isObject=za,Cn.isObjectLike=Ua,Cn.isPlainObject=Xa,Cn.isRegExp=qa,Cn.isSafeInteger=function(e){return Wa(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=Ya,Cn.isString=Ka,Cn.isSymbol=Za,Cn.isTypedArray=Qa,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Ua(e)&&no(e)==x},Cn.isWeakSet=function(e){return Ua(e)&&"[object WeakSet]"==dr(e)},Cn.join=function(e,t){return null==e?"":rn.call(e,t)},Cn.kebabCase=Pl,Cn.last=Ro,Cn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=rl(n))<0?an(r+i,0):ln(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):wt(e,Et,i,!0)},Cn.lowerCase=Gl,Cn.lowerFirst=Fl,Cn.lt=Ja,Cn.lte=el,Cn.max=function(e){return e&&e.length?rr(e,Vl,pr):void 0},Cn.maxBy=function(e,t){return e&&e.length?rr(e,Ki(t,2),pr):void 0},Cn.mean=function(e){return Tt(e,Vl)},Cn.meanBy=function(e,t){return Tt(e,Ki(t,2))},Cn.min=function(e){return e&&e.length?rr(e,Vl,Ar):void 0},Cn.minBy=function(e,t){return e&&e.length?rr(e,Ki(t,2),Ar):void 0},Cn.stubArray=is,Cn.stubFalse=os,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=hs,Cn.nth=function(e,t){return e&&e.length?Ir(e,rl(t)):void 0},Cn.noConflict=function(){return Xe._===this&&(Xe._=je),this},Cn.noop=Zl,Cn.now=ga,Cn.pad=function(e,t,n){e=ll(e);var r=(t=rl(t))?$t(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Oi(Jt(i),n)+e+Oi(Qt(i),n)},Cn.padEnd=function(e,t,n){e=ll(e);var r=(t=rl(t))?$t(e):0;return t&&r<t?e+Oi(t-r,n):e},Cn.padStart=function(e,t,n){e=ll(e);var r=(t=rl(t))?$t(e):0;return t&&r<t?Oi(t-r,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(ll(e).replace(Y,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&lo(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=nl(e),void 0===t?(t=e,e=0):t=nl(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return ln(e+i*(t-e+ze("1e-"+((i+"").length-1))),t)}return Dr(e,t)},Cn.reduce=function(e,t,n){var r=Pa(e)?gt:St,i=arguments.length<3;return r(e,Ki(t,4),n,i,er)},Cn.reduceRight=function(e,t,n){var r=Pa(e)?mt:St,i=arguments.length<3;return r(e,Ki(t,4),n,i,tr)},Cn.repeat=function(e,t,n){return t=(n?lo(e,t,n):void 0===t)?1:rl(t),Lr(ll(e),t)},Cn.replace=function(){var e=arguments,t=ll(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var r=-1,i=(t=li(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Ao(t[r])];void 0===o&&(r=i,o=n),e=Ha(o)?o.call(e):o}return e},Cn.round=fs,Cn.runInContext=e,Cn.sample=function(e){return(Pa(e)?Rn:Rr)(e)},Cn.size=function(e){if(null==e)return 0;if(Fa(e))return Ka(e)?$t(e):e.length;var t=no(e);return t==g||t==y?e.size:Tr(e).length},Cn.snakeCase=Dl,Cn.some=function(e,t,n){var r=Pa(e)?vt:Vr;return n&&lo(e,t,n)&&(t=void 0),r(e,Ki(t,3))},Cn.sortedIndex=function(e,t){return Xr(e,t)},Cn.sortedIndexBy=function(e,t,n){return qr(e,t,Ki(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Xr(e,t);if(r<n&&ja(e[r],t))return r}return-1},Cn.sortedLastIndex=function(e,t){return Xr(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return qr(e,t,Ki(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Xr(e,t,!0)-1;if(ja(e[n],t))return n}return-1},Cn.startCase=Ll,Cn.startsWith=function(e,t,n){return e=ll(e),n=null==n?0:Yn(rl(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},Cn.subtract=ds,Cn.sum=function(e){return e&&e.length?Ct(e,Vl):0},Cn.sumBy=function(e,t){return e&&e.length?Ct(e,Ki(t,2)):0},Cn.template=function(e,t,n){var r=Cn.templateSettings;n&&lo(e,t,n)&&(t=void 0),e=ll(e),t=cl({},t,r,Hi);var i,o,a=cl({},t.imports,r.imports,Hi),l=wl(a),s=It(a,l),u=0,c=t.interpolate||ce,h="__p += '",f=me((t.escape||ce).source+"|"+c.source+"|"+(c===B?ne:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),d="//# sourceURL="+(Te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Re+"]")+"\n";e.replace(f,(function(t,n,r,a,l,s){return r||(r=a),h+=e.slice(u,s).replace(he,Nt),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),l&&(o=!0,h+="';\n"+l+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t})),h+="';\n";var p=Te.call(t,"variable")&&t.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(P,""):h).replace(G,"$1").replace(F,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Wl((function(){return de(l,d+"return "+h).apply(void 0,s)}));if(g.source=h,Ra(g))throw g;return g},Cn.times=function(e,t){if((e=rl(e))<1||e>9007199254740991)return[];var n=4294967295,r=ln(e,4294967295);e-=4294967295;for(var i=jt(r,t=Ki(t));++n<e;)t(n);return i},Cn.toFinite=nl,Cn.toInteger=rl,Cn.toLength=il,Cn.toLower=function(e){return ll(e).toLowerCase()},Cn.toNumber=ol,Cn.toSafeInteger=function(e){return e?Yn(rl(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=ll,Cn.toUpper=function(e){return ll(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=ll(e))&&(n||void 0===t))return e.replace(q,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e),i=Vt(t);return ui(r,Pt(r,i),Gt(r,i)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=ll(e))&&(n||void 0===t))return e.replace(K,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e);return ui(r,0,Gt(r,Vt(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=ll(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e);return ui(r,Pt(r,Vt(t))).join("")},Cn.truncate=function(e,t){var n=30,r="...";if(za(t)){var i="separator"in t?t.separator:i;n="length"in t?rl(t.length):n,r="omission"in t?Zr(t.omission):r}var o=(e=ll(e)).length;if(Rt(e)){var a=Vt(e);o=a.length}if(n>=o)return e;var l=n-$t(r);if(l<1)return r;var s=a?ui(a,0,l).join(""):e.slice(0,l);if(void 0===i)return s+r;if(a&&(l+=s.length-l),qa(i)){if(e.slice(l).search(i)){var u,c=s;for(i.global||(i=me(i.source,ll(re.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var h=u.index;s=s.slice(0,void 0===h?l:h)}}else if(e.indexOf(Zr(i),l)!=l){var f=s.lastIndexOf(i);f>-1&&(s=s.slice(0,f))}return s+r},Cn.unescape=function(e){return(e=ll(e))&&N.test(e)?e.replace(D,Xt):e},Cn.uniqueId=function(e){var t=++ke;return ll(e)+t},Cn.upperCase=Nl,Cn.upperFirst=Rl,Cn.each=la,Cn.eachRight=sa,Cn.first=Fo,Kl(Cn,(cs={},sr(Cn,(function(e,t){Te.call(Cn.prototype,t)||(cs[t]=e)})),cs),{chain:!1}),Cn.VERSION="4.17.20",lt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),lt(["drop","take"],(function(e,t){On.prototype[e]=function(n){n=void 0===n?1:an(rl(n),0);var r=this.__filtered__&&!t?new On(this):this.clone();return r.__filtered__?r.__takeCount__=ln(n,r.__takeCount__):r.__views__.push({size:ln(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},On.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),lt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;On.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ki(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),lt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");On.prototype[e]=function(){return this[n](1).value()[0]}})),lt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");On.prototype[e]=function(){return this.__filtered__?new On(this):this[n](1)}})),On.prototype.compact=function(){return this.filter(Vl)},On.prototype.find=function(e){return this.filter(e).head()},On.prototype.findLast=function(e){return this.reverse().find(e)},On.prototype.invokeMap=Nr((function(e,t){return"function"==typeof e?new On(this):this.map((function(n){return _r(n,e,t)}))})),On.prototype.reject=function(e){return this.filter(Ta(Ki(e)))},On.prototype.slice=function(e,t){e=rl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new On(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=rl(t))<0?n.dropRight(-t):n.take(t-e)),n)},On.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},On.prototype.toArray=function(){return this.take(4294967295)},sr(On.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Cn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Cn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof On,s=a[0],u=l||Pa(t),c=function(e){var t=i.apply(Cn,pt([e],a));return r&&h?t[0]:t};u&&n&&"function"==typeof s&&1!=s.length&&(l=u=!1);var h=this.__chain__,f=!!this.__actions__.length,d=o&&!h,p=l&&!f;if(!o&&u){t=p?t:new On(this);var g=e.apply(t,a);return g.__actions__.push({func:na,args:[c],thisArg:void 0}),new In(g,h)}return d&&p?e.apply(this,a):(g=this.thru(c),d?r?g.value()[0]:g.value():g)})})),lt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Pa(i)?i:[],e)}return this[n]((function(n){return t.apply(Pa(n)?n:[],e)}))}})),sr(On.prototype,(function(e,t){var n=Cn[t];if(n){var r=n.name+"";Te.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],On.prototype.clone=function(){var e=new On(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},On.prototype.reverse=function(){if(this.__filtered__){var e=new On(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},On.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Pa(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ln(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,l=o.end,s=l-a,u=r?l:a-1,c=this.__iteratees__,h=c.length,f=0,d=ln(s,this.__takeCount__);if(!n||!r&&i==s&&d==s)return ni(e,this.__actions__);var p=[];e:for(;s--&&f<d;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],_=v.iteratee,y=v.type,w=_(m);if(2==y)m=w;else if(!w){if(1==y)continue e;break e}}p[f++]=m}return p},Cn.prototype.at=ra,Cn.prototype.chain=function(){return ta(this)},Cn.prototype.commit=function(){return new In(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=tl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof Mn;){var r=Co(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof On){var t=e;return this.__actions__.length&&(t=new On(this)),(t=t.reverse()).__actions__.push({func:na,args:[zo],thisArg:void 0}),new In(t,this.__chain__)}return this.thru(zo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Qe&&(Cn.prototype[Qe]=function(){return this}),Cn}();Xe._=qt,void 0===(i=function(){return qt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(8),n(6)(e))},function(e,t,n){"use strict";n.r(t),n.d(t,"fromString",(function(){return o})),n.d(t,"add",(function(){return a})),n.d(t,"add_",(function(){return l})),n.d(t,"multiply",(function(){return s})),n.d(t,"multiply_",(function(){return u})),n.d(t,"interpolate",(function(){return c})),n.d(t,"lerp",(function(){return h})),n.d(t,"interpolateHSL",(function(){return f})),n.d(t,"lerpHSL",(function(){return d})),n.d(t,"randomize",(function(){return p})),n.d(t,"rgb2hsl",(function(){return g})),n.d(t,"hsl2rgb",(function(){return v})),n.d(t,"toRGB",(function(){return _})),n.d(t,"toHex",(function(){return y}));var r=n(3),i=n(4);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function o(e){let t,n;if(e in w)t=w[e];else{if("#"===e.charAt(0)){const n=(e.match(/[0-9a-f]/gi)||[]).map(e=>parseInt(e,16));if(3===n.length)t=n.map(e=>17*e);else{for(let e=0;e<3;e++)n[e+1]+=16*n[e],n.splice(e,1);t=n}}else t=(n=e.match(/rgb\(([0-9, ]+)\)/i))?n[1].split(/\s*,\s*/).map(e=>parseInt(e)):[0,0,0];w[e]=t}return t.slice()}function a(e,...t){const n=e.slice();for(let e=0;e<3;e++)for(let r=0;r<t.length;r++)n[e]+=t[r][e];return n}function l(e,...t){for(let n=0;n<3;n++)for(let r=0;r<t.length;r++)e[n]+=t[r][n];return e}function s(e,...t){const n=e.slice();for(let e=0;e<3;e++){for(let r=0;r<t.length;r++)n[e]*=t[r][e]/255;n[e]=Math.round(n[e])}return n}function u(e,...t){for(let n=0;n<3;n++){for(let r=0;r<t.length;r++)e[n]*=t[r][n]/255;e[n]=Math.round(e[n])}return e}function c(e,t,n=.5){const r=e.slice();for(let i=0;i<3;i++)r[i]=Math.round(r[i]+n*(t[i]-e[i]));return r}const h=c;function f(e,t,n=.5){const r=g(e),i=g(t);for(let e=0;e<3;e++)r[e]+=n*(i[e]-r[e]);return v(r)}const d=f;function p(e,t){t instanceof Array||(t=Math.round(i.a.getNormal(0,t)));const n=e.slice();for(let e=0;e<3;e++)n[e]+=t instanceof Array?Math.round(i.a.getNormal(0,t[e])):t;return n}function g(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,l=0,s=(i+o)/2;if(i===o)a=0;else{const e=i-o;switch(a=s>.5?e/(2-i-o):e/(i+o),i){case t:l=(n-r)/e+(n<r?6:0);break;case n:l=(r-t)/e+2;break;case r:l=(t-n)/e+4}l/=6}return[l,a,s]}function m(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function v(e){let t=e[2];if(0===e[1])return t=Math.round(255*t),[t,t,t];{const n=e[1],r=t<.5?t*(1+n):t+n-t*n,i=2*t-r,o=m(i,r,e[0]+1/3),a=m(i,r,e[0]),l=m(i,r,e[0]-1/3);return[Math.round(255*o),Math.round(255*a),Math.round(255*l)]}}function _(e){return`rgb(${e.map(e=>Object(r.clamp)(e,0,255)).join(",")})`}function y(e){return"#"+e.map(e=>Object(r.clamp)(e,0,255).toString(16).padStart(2,"0")).join("")}const w={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(e,t,n){(function(n){var r;
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||d(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||d(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,d()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),a=0;a<o.length;a++){var l=e._howls[i]._soundById(o[a]);l&&l._node&&!l._node._unlocked&&(l._node._unlocked=!0,l._node.load())}e._autoResume();var s=e.ctx.createBufferSource();s.buffer=e._scratchBuffer,s.connect(e.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),s.onended=function(){s.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new i,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return o.ctx||d(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new l(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?e=null:r=null}}var l=r?n._soundById(r):n._inactiveSound();if(!l)return null;if(r&&!e&&(e=l._sprite||"__default"),"loaded"!==n._state){l._sprite=e,l._ended=!1;var s=l._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(r&&!l._paused)return t||n._loadQueue("play"),l._id;n._webAudio&&o._autoResume();var u=Math.max(0,l._seek>0?l._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),h=1e3*c/Math.abs(l._rate),f=n._sprite[e][0]/1e3,d=(n._sprite[e][0]+n._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var p=function(){l._paused=!1,l._seek=u,l._start=f,l._stop=d,l._loop=!(!l._loop&&!n._sprite[e][2])};if(!(u>=d)){var g=l._node;if(n._webAudio){var m=function(){n._playLock=!1,p(),n._refreshBuffer(l);var e=l._muted||n._muted?0:l._volume;g.gain.setValueAtTime(e,o.ctx.currentTime),l._playStart=o.ctx.currentTime,void 0===g.bufferSource.start?l._loop?g.bufferSource.noteGrainOn(0,u,86400):g.bufferSource.noteGrainOn(0,u,c):l._loop?g.bufferSource.start(0,u,86400):g.bufferSource.start(0,u,c),h!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),h)),t||setTimeout((function(){n._emit("play",l._id),n._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(l._id))}else{var v=function(){g.currentTime=u,g.muted=l._muted||n._muted||o._muted||g.muted,g.volume=l._volume*o.volume(),g.playbackRate=l._rate;try{var r=g.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,p(),r.then((function(){n._playLock=!1,g._unlocked=!0,t||(n._emit("play",l._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0}))):t||(n._playLock=!1,p(),n._emit("play",l._id),n._loadQueue()),g.playbackRate=l._rate,g.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),h):(n._endTimers[l._id]=function(){n._ended(l),g.removeEventListener("ended",n._endTimers[l._id],!1)},g.addEventListener("ended",n._endTimers[l._id],!1))}catch(e){n._emit("playerror",l._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=n._src,g.load());var _=window&&window.ejecta||!g.readyState&&o._navigator.isCocoonJS;if(g.readyState>=3||_)v();else{n._playLock=!0;var y=function(){v(),g.removeEventListener(o._canPlayEvent,y,!1)};g.addEventListener(o._canPlayEvent,y,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),l=a.indexOf(i[0]);l>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var s=0;s<t.length;s++)(n=r._soundById(t[s]))&&(n._volume=e,i[2]||r._stopFade(t[s]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),l=0;l<a.length;l++){var s=i._soundById(a[l]);if(s){if(r||i._stopFade(a[l]),i._webAudio&&!s._muted){var u=o.ctx.currentTime,c=u+n/1e3;s._volume=e,s._node.gain.setValueAtTime(e,u),s._node.gain.linearRampToValueAtTime(t,c)}i._startFadeInterval(s,e,t,n,a[l],void 0===r)}}return i},_startFadeInterval:function(e,t,n,r,i,o){var a=this,l=t,s=n-t,u=Math.abs(s/.01),c=Math.max(4,u>0?r/u:r),h=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var i=(Date.now()-h)/r;h=Date.now(),l+=s*i,l=Math.round(100*l)/100,l=s<0?Math.max(n,l):Math.min(n,l),a._webAudio?e._volume=l:a.volume(l,e._id,!0),o&&(a._volume=l),(n<t&&l<=n||n>t&&l>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),l=a.indexOf(i[0]);l>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var s=0;s<t.length;s++)if(n=r._soundById(t[s])){r.playing(t[s])&&(n._rateSeek=r.seek(t[s]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var u=r.seek(t[s]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-u,h=1e3*c/Math.abs(n._rate);!r._endTimers[t[s]]&&n._paused||(r._clearTimer(t[s]),r._endTimers[t[s]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var l=n._soundById(t);if(l){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(t)?o.ctx.currentTime-l._playStart:0,u=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(u+s*Math.abs(l._rate))}return l._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),l._seek=e,l._ended=!1,n._clearTimer(t),n._webAudio||!l._node||isNaN(l._node.duration)||(l._node.currentTime=e);var h=function(){n._emit("seek",t),c&&n.play(t,!0)};if(c&&!n._webAudio){var f=function(){n._playLock?setTimeout(f,0):h()};setTimeout(f,0)}else h()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return s&&i&&delete s[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new l(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=s[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var s={},u=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?h(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},c(o)}},c=function(e){try{e.send()}catch(t){e.onerror()}},h=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(s[t._src]=e,f(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},d=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=l):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=l)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(this._orientation=[e,t,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l){if("number"!=typeof e)return l._stereo;l._stereo=e,l._pos=[e,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",l._panner&&l._panner.pan||t(l,i),"spatial"===i?void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(e,0,0):l._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",l._id)}}return r},Howl.prototype.pos=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof e)return o._pos;o._pos=[e,n,r]}for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var s=o._soundById(a[l]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,n,r],s._node&&(s._panner&&!s._panner.pan||t(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setPosition(e,n,r)),o._emit("pos",s._id)}}return o},Howl.prototype.orientation=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof e)return o._orientation;o._orientation=[e,n,r]}for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var s=o._soundById(a[l]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,n,r],s._node&&(s._panner||(s._pos||(s._pos=o._pos||[0,0,-.5]),t(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setOrientation(e,n,r)),o._emit("orientation",s._id)}}return o},Howl.prototype.pannerAttr=function(){var e,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;e=o[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),l=0;l<a.length;l++)if(r=i._soundById(a[l])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var u=r._panner;u?(u.coneInnerAngle=s.coneInnerAngle,u.coneOuterAngle=s.coneOuterAngle,u.coneOuterGain=s.coneOuterGain,u.distanceModel=s.distanceModel,u.maxDistance=s.maxDistance,u.refDistance=s.refDistance,u.rolloffFactor=s.rolloffFactor,u.panningModel=s.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(8))},function(e,t,n){"use strict";
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function r(e,t){return(e%t+t)%t}function i(e,t=0,n=1){return e<t?t:e>n?n:e}function o(e){return e.charAt(0).toUpperCase()+e.substring(1)}function a(e,...t){const n=a.map;return e.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,(function(r,i,a,l){if("%"===e.charAt(l-1))return r.substring(1);if(!t.length)return r;let s=t[0];const u=(i||a).split(","),c=u.shift()||"",h=n[c.toLowerCase()];if(!h)return r;s=t.shift();let f=s[h].apply(s,u);const d=c.charAt(0);return d!==d.toLowerCase()&&(f=o(f)),f}))}n.r(t),n.d(t,"mod",(function(){return r})),n.d(t,"clamp",(function(){return i})),n.d(t,"capitalize",(function(){return o})),n.d(t,"format",(function(){return a})),a.map={s:"toString"}},function(e,t,n){"use strict";
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const r=2.3283064365386963e-10;class i{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(e){return e=e<1?1/e:e,this._seed=e,this._s0=(e>>>0)*r,e=69069*e+1>>>0,this._s1=e*r,e=69069*e+1>>>0,this._s2=e*r,this._c=1,this}getUniform(){const e=2091639*this._s0+this._c*r;return this._s0=this._s1,this._s1=this._s2,this._c=0|e,this._s2=e-this._c,this._s2}getUniformInt(e,t){const n=Math.max(e,t),r=Math.min(e,t);return Math.floor(this.getUniform()*(n-r+1))+r}getNormal(e=0,t=1){let n,r,i;do{n=2*this.getUniform()-1,r=2*this.getUniform()-1,i=n*n+r*r}while(i>1||0===i);return e+n*Math.sqrt(-2*Math.log(i)/i)*t}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(e){return e.length?e[Math.floor(this.getUniform()*e.length)]:null}shuffle(e){const t=[],n=e.slice();for(;n.length;){const e=n.indexOf(this.getItem(n));t.push(n.splice(e,1)[0])}return t}getWeightedValue(e){let t=0;for(const n in e)t+=e[n];const n=this.getUniform()*t;let r,i=0;for(r in e)if(i+=e[r],n<i)return r;return r}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(e){return this._s0=e[0],this._s1=e[1],this._s2=e[2],this._c=e[3],this}clone(){return(new i).setState(this.getState())}}t.a=(new i).setSeed(Date.now())},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class r{getContainer(){return null}setOptions(e){this._options=e}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(5),i=n(1);function o(e){const t=i.fromString(e);return 36*Math.floor(t[0]*(6/256))+6*Math.floor(t[1]*(6/256))+1*Math.floor(t[2]*(6/256))+16}class a extends r.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}setOptions(e){super.setOptions(e);const t=[e.width,e.height],n=this.computeSize();this._offset=n.map((e,n)=>Math.floor((e-t[n])/2))}clear(){e.stdout.write(`[0;48;5;${o(this._options.bg)}m[2J`)}draw(t,n){let[r,i,a,l,s]=t;const u=this._offset[0]+r,c=this._offset[1]+i,h=this.computeSize();if(u<0||u>=h[0])return;if(c<0||c>=h[1])return;if(u===this._cursor[0]&&c===this._cursor[1]||(e.stdout.write(function(e,t){return`[${t+1};${e+1}H`}(u,c)),this._cursor[0]=u,this._cursor[1]=c),n&&(a||(a=" ")),!a)return;const f=function(e,t){return`[0;38;5;${o(e)};48;5;${o(t)}m`}(l,s);if(f!==this._lastColor&&(e.stdout.write(f),this._lastColor=f),"\t"!==a){const t=[].concat(a);e.stdout.write(t[0])}this._cursor[0]++,this._cursor[0]>=h[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(e,t){return[e,t]}computeSize(){return[e.stdout.columns,e.stdout.rows]}}}).call(this,n(13))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a,l;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,l=s,console&&console.warn&&console.warn(l)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return c(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)o(s,this,t);else{var u=s.length,c=m(s,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return h(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return h(this,e,t,!0)},l.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return p(this,e,!0)},l.prototype.rawListeners=function(e){return p(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){(function(e){var t;t={compressionlevel:-1,editorsettings:{export:{target:"."}},height:100,infinite:!1,layers:[{draworder:"topdown",id:4,name:"World Layout",objects:[{gid:3073,height:38337.6,id:21,name:"World Map",rotation:0,type:"",visible:!0,width:38337.6,x:-5138.67916444398,y:2855.67508895881}],offsetx:-2887.98689881748,offsety:2769.98583384405,opacity:1,type:"objectgroup",visible:!1,x:0,y:0},{data:[1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1543,1048,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,1048,900,900,900,900,900,1048,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,900,900,900,900,1048,900,900,980,2936,2936,1048,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,900,900,900,1048,1048,1048,1048,1048,1048,1048,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,2869,900,900,900,900,2869,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,2869,900,900,2869,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,780,900,900,780,900,900,780,900,900,780,900,900,780,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,780,900,900,780,900,900,780,900,900,780,900,900,780,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,780,900,900,780,900,900,780,900,900,780,900,900,780,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,1165,900,900,900,900,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,1165,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,1165,1165,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,1165,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,1165,900,900,900,900,900,900,1165,900,1165,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,1165,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,1165,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,1165,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1165,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900],height:100,id:1,name:"Tile Layer",opacity:1,type:"tilelayer",visible:!0,width:70,x:0,y:0},{draworder:"topdown",id:2,name:"Object Layer",objects:[{height:0,id:1,name:"Fire",point:!0,properties:[{name:"objectType",type:"string",value:"campfire"}],rotation:0,type:"object",visible:!0,width:0,x:1359.43345152199,y:474.20204354433},{height:0,id:2,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak"},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:1519.48935537457,y:440.741072766735},{height:0,id:3,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:""},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:1492.09888714889,y:438.227878496818},{height:0,id:4,name:"Goblin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:1443.79118357932,y:520.959011276967},{height:0,id:5,name:"Rat",point:!0,properties:[{name:"objectType",type:"string",value:"rat"}],rotation:0,type:"object",visible:!0,width:0,x:1247.02699102889,y:759.977100331318},{height:0,id:6,name:"Goblin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:806.429892890274,y:151.062577766692},{height:0,id:7,name:"Barrel",point:!0,properties:[{name:"inventory",type:"string",value:""},{name:"objectType",type:"string",value:"barrel"}],rotation:0,type:"object",visible:!0,width:0,x:1105.27396337073,y:529.648827795078},{height:0,id:8,name:"Barrel",point:!0,properties:[{name:"inventory",type:"string",value:""},{name:"objectType",type:"string",value:"barrel"}],rotation:0,type:"object",visible:!0,width:0,x:1104.24125747701,y:568.292697425079},{height:0,id:9,name:"Door",point:!0,properties:[{name:"objectType",type:"string",value:"door"}],rotation:0,type:"object",visible:!0,width:0,x:558.804418453541,y:151.072124756335},{height:0,id:10,name:"Barrel",point:!0,properties:[{name:"inventory",type:"string",value:""},{name:"objectType",type:"string",value:"barrel"}],rotation:0,type:"object",visible:!0,width:0,x:595.193249453778,y:217.73525201537},{height:0,id:11,name:"Dead Body",point:!0,properties:[{name:"objectType",type:"string",value:"dead_body"}],rotation:0,type:"object",visible:!0,width:0,x:656.219392752204,y:180.818202365705},{height:0,id:12,name:"Player",point:!0,properties:[{name:"objectType",type:"string",value:"player"}],rotation:0,type:"object",visible:!0,width:0,x:11.9135881457158,y:627.183739576656},{height:0,id:13,name:"Load Door",point:!0,properties:[{name:"levelName",type:"string",value:"durdwin_001"},{name:"objectType",type:"string",value:"load_door"}],rotation:0,type:"object",visible:!0,width:0,x:1710.30519759869,y:630.284396617986},{height:0,id:16,name:"Chest",point:!0,properties:[{name:"inventory",type:"string",value:"confuse_scroll"},{name:"objectType",type:"string",value:"chest"}],rotation:0,type:"object",visible:!0,width:0,x:1073.2833237161,y:1112.95441431044},{height:0,id:31,name:"Bandit",point:!0,properties:[{name:"fallbackPosition",type:"object",value:32},{name:"objectType",type:"string",value:"bandit"},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"object",visible:!0,width:0,x:304.373875692173,y:1398.22503366288},{height:0,id:35,name:"Bandit Mage",point:!0,properties:[{name:"fallbackPosition",type:"object",value:32},{name:"inventory",type:"string",value:"mana_potion_weak"},{name:"objectType",type:"string",value:"bandit_mage"},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"object",visible:!0,width:0,x:337.672052694903,y:1399.66714135481},{height:0,id:36,name:"Bandit",point:!0,properties:[{name:"fallbackPosition",type:"object",value:32},{name:"objectType",type:"string",value:"bandit"},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"object",visible:!0,width:0,x:303.835220653339,y:1431.56717461205},{height:0,id:37,name:"Attacking Tutorial Trigger",point:!0,properties:[{name:"event",type:"string",value:"tutorial.attacking"},{name:"objectType",type:"string",value:"event_trigger"}],rotation:0,type:"object",visible:!0,width:0,x:1067.03309833911,y:786.234914565659},{height:0,id:38,name:"Attacking Tutorial Trigger",point:!0,properties:[{name:"event",type:"string",value:"tutorial.attacking"},{name:"objectType",type:"string",value:"event_trigger"}],rotation:0,type:"object",visible:!0,width:0,x:372.804397180069,y:184.012426813239}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:5,name:"Node Layer",objects:[{height:0,id:30,name:"Patrol Path",point:!0,properties:[{name:"next",type:"object",value:25},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"path_node",visible:!0,width:0,x:1157.68463073852,y:1388.88888888889},{height:0,id:29,name:"Patrol Path",point:!0,properties:[{name:"next",type:"object",value:30},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"path_node",visible:!0,width:0,x:956.098950243405,y:2074.03948567639},{height:0,id:26,name:"Patrol Path",point:!0,properties:[{name:"next",type:"object",value:29},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"path_node",visible:!0,width:0,x:177.075098814229,y:1868.77470355731},{height:0,id:25,name:"Patrol Path",point:!0,properties:[{name:"next",type:"object",value:26},{name:"pathName",type:"string",value:"forrest_path_01"}],rotation:0,type:"path_node",visible:!0,width:0,x:217.391304347826,y:1366.930171278},{height:0,id:32,name:"Fallback Position",point:!0,rotation:0,type:"fallback_node",visible:!0,width:0,x:338.912712685019,y:1521.648914096}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:39,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.4.2",tileheight:32,tilesets:[{firstgid:1,source:"DungeonCrawl_ProjectUtumnoTileset.tsx"},{firstgid:3073,source:"World.tsx"}],tilewidth:32,type:"map",version:1.4,width:70},"undefined"==typeof onTileMapLoaded?("undefined"==typeof TileMaps&&(TileMaps={}),TileMaps.forrest_001=t):onTileMapLoaded("forrest_001",t),e&&e.exports&&(e.exports=t)}).call(this,n(6)(e))},function(e,t,n){(function(e){var t;t={compressionlevel:-1,editorsettings:{export:{target:"."}},height:39,infinite:!1,layers:[{data:[1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,2936,2936,2936,900,1048,1048,1048,900,900,900,900,900,900,900,2869,900,900,900,2869,900,900,900,2869,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,2710,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,2869,900,900,900,2869,900,900,900,2869,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,1048,1048,1048,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048],height:39,id:1,name:"Tile Layer",opacity:1,type:"tilelayer",visible:!0,width:70,x:0,y:0},{draworder:"topdown",id:4,name:"Object Layer",objects:[{height:0,id:4,name:"Player",point:!0,properties:[{name:"objectType",type:"string",value:"player"}],rotation:0,type:"object",visible:!0,width:0,x:48.9730893444762,y:727.91157376972},{height:0,id:5,name:"Golbin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:644.193719444052,y:712.330540708638},{height:0,id:6,name:"Chest",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak,lightning_scroll_weak"},{name:"objectType",type:"string",value:"chest"}],rotation:0,type:"object",visible:!0,width:0,x:341.526275397425,y:948.672967850652},{height:0,id:7,name:"Stairs",point:!0,properties:[{name:"levelName",type:"string",value:"level_2"},{name:"objectType",type:"string",value:"stairs"}],rotation:0,type:"object",visible:!0,width:0,x:1202.30788561211,y:247.937747564976},{height:0,id:8,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak"},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:370.617261554132,y:949.94792690583},{height:0,id:9,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:""},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:944.729776321084,y:725.333340842067},{height:0,id:11,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak"},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:943.603906892819,y:760.182468483655},{height:0,id:12,name:"Golbin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:340.545596044442,y:1083.26097831731},{height:0,id:14,name:"Fire",point:!0,properties:[{name:"objectType",type:"string",value:"campfire"}],rotation:0,type:"object",visible:!0,width:0,x:658.781710294825,y:237.201980125518},{height:0,id:15,name:"Fire",point:!0,properties:[{name:"objectType",type:"string",value:"campfire"}],rotation:0,type:"object",visible:!0,width:0,x:786.258618604088,y:238.296842869239},{height:0,id:16,name:"Fire",point:!0,properties:[{name:"objectType",type:"string",value:"campfire"}],rotation:0,type:"object",visible:!0,width:0,x:910.850368936736,y:239.506471513245},{height:0,id:17,name:"Lantern",point:!0,properties:[{name:"objectType",type:"string",value:"lantern"}],rotation:0,type:"object",visible:!0,width:0,x:209.265755413088,y:951.97774283295},{height:0,id:18,name:"Golbin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:949.558485544938,y:145.155437280755},{height:0,id:19,name:"Golbin",point:!0,properties:[{name:"objectType",type:"string",value:"goblin"}],rotation:0,type:"object",visible:!0,width:0,x:622.958751663239,y:147.574694568767},{height:0,id:20,name:"Rat",point:!0,properties:[{name:"objectType",type:"string",value:"rat"}],rotation:0,type:"object",visible:!0,width:0,x:244.344986089271,y:226.200556429176},{height:0,id:22,name:"Load Door",point:!0,properties:[{name:"levelName",type:"string",value:"forrest_001"},{name:"objectType",type:"string",value:"load_door"}],rotation:0,type:"object",visible:!0,width:0,x:14.605418138987,y:723.203769140165},{height:0,id:29,name:"Door",point:!0,properties:[{name:"objectType",type:"string",value:"door"}],rotation:0,type:"object",visible:!0,width:0,x:526.910048927362,y:728.264960481746}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:5,nextobjectid:30,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.4.2",tileheight:32,tilesets:[{firstgid:1,source:"DungeonCrawl_ProjectUtumnoTileset.tsx"}],tilewidth:32,type:"map",version:1.4,width:70},"undefined"==typeof onTileMapLoaded?("undefined"==typeof TileMaps&&(TileMaps={}),TileMaps.durdwin_001=t):onTileMapLoaded("durdwin_001",t),e&&e.exports&&(e.exports=t)}).call(this,n(6)(e))},function(e,t,n){(function(e){var t;t={compressionlevel:-1,editorsettings:{export:{target:"."}},height:39,infinite:!1,layers:[{data:[1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,1048,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,1048,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,1048,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,1048,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,1048,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,1048,1048,1048,1048,1048,1048,1048,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,900,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048,1048],height:39,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:70,x:0,y:0},{draworder:"topdown",id:2,name:"Object Layer 1",objects:[{height:0,id:1,name:"Player",point:!0,properties:[{name:"objectType",type:"string",value:"player"}],rotation:0,type:"object",visible:!0,width:0,x:880.250035462825,y:754.192197850584},{height:0,id:2,name:"Door",point:!0,properties:[{name:"objectType",type:"string",value:"door"}],rotation:0,type:"object",visible:!0,width:0,x:1297.45889387145,y:627.80269058296},{height:0,id:3,name:"Water Sprite",point:!0,properties:[{name:"objectType",type:"string",value:"water_sprite"}],rotation:0,type:"object",visible:!0,width:0,x:1297.45889387145,y:488.789237668161},{height:0,id:4,name:"Chest",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak,lightning_scroll_weak"},{name:"objectType",type:"string",value:"chest"}],rotation:0,type:"object",visible:!0,width:0,x:1166.46397769314,y:887.051192293996},{height:0,id:5,name:"Lantern",point:!0,properties:[{name:"objectType",type:"string",value:"lantern"}],rotation:0,type:"object",visible:!0,width:0,x:1139.76083707025,y:757.847533632287},{height:0,id:6,name:"Chest",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak,health_potion_weak"},{name:"objectType",type:"string",value:"chest"}],rotation:0,type:"object",visible:!0,width:0,x:1038.86397608371,y:887.144992526158},{height:0,id:7,name:"Magika Shrine",point:!0,properties:[{name:"objectType",type:"string",value:"magic_shrine"},{name:"spellId",type:"string",value:"lightning_bolt"}],rotation:0,type:"object",visible:!0,width:0,x:1425.26158445441,y:760.837070254111},{height:0,id:8,name:"Crate",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion_weak"},{name:"objectType",type:"string",value:"crate"}],rotation:0,type:"object",visible:!0,width:0,x:1135.27653213752,y:887.144992526158},{height:0,id:9,name:"Door",point:!0,properties:[{name:"objectType",type:"string",value:"door"}],rotation:0,type:"object",visible:!0,width:0,x:1039.61136023916,y:630.792227204783},{height:0,id:10,name:"Goblin Brute",point:!0,properties:[{name:"objectType",type:"string",value:"goblin_brute"}],rotation:0,type:"object",visible:!0,width:0,x:1043.34828101644,y:507.473841554559},{height:0,id:11,name:"Barrel",point:!0,properties:[{name:"inventory",type:"string",value:"health_potion"},{name:"objectType",type:"string",value:"barrel"}],rotation:0,type:"object",visible:!0,width:0,x:1202.4730820996,y:883.664199192463}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:3,nextobjectid:12,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.4.2",tileheight:32,tilesets:[{firstgid:1,source:"DungeonCrawl_ProjectUtumnoTileset.tsx"}],tilewidth:32,type:"map",version:1.4,width:70},"undefined"==typeof onTileMapLoaded?("undefined"==typeof TileMaps&&(TileMaps={}),TileMaps.dev_room=t):onTileMapLoaded("dev_room",t),e&&e.exports&&(e.exports=t)}).call(this,n(6)(e))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],c=!1,h=-1;function f(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&d())}function d(){if(!c){var e=l(f);c=!0;for(var t=u.length;t;){for(s=u,u=[];++h<t;)s&&s[h].run();h=-1,t=u.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||l(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"TYPE_TEXT",(function(){return x})),n.d(r,"TYPE_NEWLINE",(function(){return E})),n.d(r,"TYPE_FG",(function(){return T})),n.d(r,"TYPE_BG",(function(){return k})),n.d(r,"measure",(function(){return A})),n.d(r,"tokenize",(function(){return S}));var i={Game:null,animationFrameID:null,gameEventEmitter:null,document:null,window:null},o=n(9),a=n(4),l=n(5);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class s extends l.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}getContainer(){return this._ctx.canvas}setOptions(e){super.setOptions(e);const t=`${e.fontStyle?e.fontStyle+" ":""} ${e.fontSize}px ${e.fontFamily}`;this._ctx.font=t,this._updateSize(),this._ctx.font=t,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(e,t){const n=this._ctx.canvas,r=n.getBoundingClientRect();return e-=r.left,t-=r.top,e*=n.width/r.width,t*=n.height/r.height,e<0||t<0||e>=n.width||t>=n.height?[-1,-1]:this._normalizedEventToPosition(e,t)}}var u=n(3);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class c extends s{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(e,t){const[n,r,i,o,a]=e,l=[(n+1)*this._spacingX,r*this._spacingY+this._hexSize];if(this._options.transpose&&l.reverse(),t&&(this._ctx.fillStyle=a,this._fill(l[0],l[1])),!i)return;this._ctx.fillStyle=o;const s=[].concat(i);for(let e=0;e<s.length;e++)this._ctx.fillText(s[e],l[0],Math.ceil(l[1]))}computeSize(e,t){this._options.transpose&&(e+=t,e-=t=e-t);return[Math.floor(e/this._spacingX)-1,Math.floor((t-2*this._hexSize)/this._spacingY+1)]}computeFontSize(e,t){this._options.transpose&&(e+=t,e-=t=e-t);const n=2*e/((this._options.width+1)*Math.sqrt(3))-1,r=t/(2+1.5*(this._options.height-1));let i=Math.min(n,r);const o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;const a=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;const l=a/100;i=Math.floor(i)+1;const s=2*i/(this._options.spacing*(1+l/Math.sqrt(3)));return Math.ceil(s)-1}_normalizedEventToPosition(e,t){let n;this._options.transpose?(e+=t,e-=t=e-t,n=this._ctx.canvas.width):n=this._ctx.canvas.height;const r=n/this._options.height;return t=Math.floor(t/r),Object(u.mod)(t,2)?(e-=this._spacingX,e=1+2*Math.floor(e/(2*this._spacingX))):e=2*Math.floor(e/(2*this._spacingX)),[e,t]}_fill(e,t){const n=this._hexSize,r=this._options.border,i=this._ctx;i.beginPath(),this._options.transpose?(i.moveTo(e-n+r,t),i.lineTo(e-n/2+r,t+this._spacingX-r),i.lineTo(e+n/2-r,t+this._spacingX-r),i.lineTo(e+n-r,t),i.lineTo(e+n/2-r,t-this._spacingX+r),i.lineTo(e-n/2+r,t-this._spacingX+r),i.lineTo(e-n+r,t)):(i.moveTo(e,t-n+r),i.lineTo(e+this._spacingX-r,t-n/2+r),i.lineTo(e+this._spacingX-r,t+n/2-r),i.lineTo(e,t+n-r),i.lineTo(e-this._spacingX+r,t+n/2-r),i.lineTo(e-this._spacingX+r,t-n/2+r),i.lineTo(e,t-n+r)),i.fill()}_updateSize(){const e=this._options,t=Math.ceil(this._ctx.measureText("W").width);let n,r;this._hexSize=Math.floor(e.spacing*(e.fontSize+t/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,e.transpose?(n="height",r="width"):(n="width",r="height"),this._ctx.canvas[n]=Math.ceil((e.width+1)*this._spacingX),this._ctx.canvas[r]=Math.ceil((e.height-1)*this._spacingY+2*this._hexSize)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class h extends s{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(e){super.setOptions(e),this._canvasCache={}}draw(e,t){h.cache?this._drawWithCache(e):this._drawNoCache(e,t)}_drawWithCache(e){const[t,n,r,i,o]=e,a=""+r+i+o;let l;if(a in this._canvasCache)l=this._canvasCache[a];else{const e=this._options.border;l=document.createElement("canvas");const t=l.getContext("2d");if(l.width=this._spacingX,l.height=this._spacingY,t.fillStyle=o,t.fillRect(e,e,l.width-e,l.height-e),r){t.fillStyle=i,t.font=this._ctx.font,t.textAlign="center",t.textBaseline="middle";const e=[].concat(r);for(let n=0;n<e.length;n++)t.fillText(e[n],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[a]=l}this._ctx.drawImage(l,t*this._spacingX,n*this._spacingY)}_drawNoCache(e,t){const[n,r,i,o,a]=e;if(t){const e=this._options.border;this._ctx.fillStyle=a,this._ctx.fillRect(n*this._spacingX+e,r*this._spacingY+e,this._spacingX-e,this._spacingY-e)}if(!i)return;this._ctx.fillStyle=o;const l=[].concat(i);for(let e=0;e<l.length;e++)this._ctx.fillText(l[e],(n+.5)*this._spacingX,Math.ceil((r+.5)*this._spacingY))}computeSize(e,t){return[Math.floor(e/this._spacingX),Math.floor(t/this._spacingY)]}computeFontSize(e,t){const n=Math.floor(e/this._options.width);let r=Math.floor(t/this._options.height);const i=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;const o=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=i;const a=o/100*r/n;return a>1&&(r=Math.floor(r/a)),Math.floor(r/this._options.spacing)}_normalizedEventToPosition(e,t){return[Math.floor(e/this._spacingX),Math.floor(t/this._spacingY)]}_updateSize(){const e=this._options,t=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(e.spacing*t),this._spacingY=Math.ceil(e.spacing*e.fontSize),e.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=e.width*this._spacingX,this._ctx.canvas.height=e.height*this._spacingY}}h.cache=!0;
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class f extends s{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(e,t){const[n,r,i,o,a]=e,l=this._options.tileWidth,s=this._options.tileHeight;if(t&&(this._options.tileColorize?this._ctx.clearRect(n*l,r*s,l,s):(this._ctx.fillStyle=a,this._ctx.fillRect(n*l,r*s,l,s))),!i)return;const u=[].concat(i),c=[].concat(o),h=[].concat(a);for(let e=0;e<u.length;e++){const t=this._options.tileMap[u[e]];if(!t)throw new Error(`Char "${u[e]}" not found in tileMap`);if(this._options.tileColorize){const i=this._colorCanvas,o=i.getContext("2d");o.globalCompositeOperation="source-over",o.clearRect(0,0,l,s);const a=c[e],u=h[e];o.drawImage(this._options.tileSet,t[0],t[1],l,s,0,0,l,s),"transparent"!==a&&(o.fillStyle=a,o.globalCompositeOperation="source-atop",o.fillRect(0,0,l,s)),"transparent"!==u&&(o.fillStyle=u,o.globalCompositeOperation="destination-over",o.fillRect(0,0,l,s)),this._ctx.drawImage(i,n*l,r*s,l,s)}else this._ctx.drawImage(this._options.tileSet,t[0],t[1],l,s,n*l,r*s,l,s)}}computeSize(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}_updateSize(){const e=this._options;this._ctx.canvas.width=e.width*e.tileWidth,this._ctx.canvas.height=e.height*e.tileHeight,this._colorCanvas.width=e.tileWidth,this._colorCanvas.height=e.tileHeight}}var d=n(1);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class p extends l.a{constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(e){alert(e.message)}}static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}getContainer(){return this._gl.canvas}setOptions(e){super.setOptions(e),this._updateSize();const t=this._options.tileSet;t&&"complete"in t&&!t.complete?t.addEventListener("load",()=>this._updateTexture(t)):this._updateTexture(t)}draw(e,t){const n=this._gl,r=this._options,[i,o,a,l,s]=e,u=n.canvas.height-(o+1)*r.tileHeight;if(n.scissor(i*r.tileWidth,u,r.tileWidth,r.tileHeight),t&&(r.tileColorize?n.clearColor(0,0,0,0):n.clearColor(...y(s)),n.clear(n.COLOR_BUFFER_BIT)),!a)return;const c=[].concat(a),h=[].concat(s),f=[].concat(l);n.uniform2fv(this._uniforms.targetPosRel,[i,o]);for(let e=0;e<c.length;e++){const t=this._options.tileMap[c[e]];if(!t)throw new Error(`Char "${c[e]}" not found in tileMap`);n.uniform1f(this._uniforms.colorize,r.tileColorize?1:0),n.uniform2fv(this._uniforms.tilesetPosAbs,t),r.tileColorize&&(n.uniform4fv(this._uniforms.tint,y(f[e])),n.uniform4fv(this._uniforms.bg,y(h[e]))),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}clear(){const e=this._gl;e.clearColor(...y(this._options.bg)),e.scissor(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT)}computeSize(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(e,t){const n=this._gl.canvas,r=n.getBoundingClientRect();return e-=r.left,t-=r.top,e*=n.width/r.width,t*=n.height/r.height,e<0||t<0||e>=n.width||t>=n.height?[-1,-1]:this._normalizedEventToPosition(e,t)}_initWebGL(){const e=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=e;const t=function(e,t,n){const r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r)||"");const i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(i)||"");const o=e.createProgram();if(e.attachShader(o,r),e.attachShader(o,i),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(o)||"");return o}(e,m,v);return e.useProgram(t),function(e){const t=new Float32Array([0,0,1,0,0,1,1,1]),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0)}(e),g.forEach(n=>this._uniforms[n]=e.getUniformLocation(t,n)),this._program=t,e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.SCISSOR_TEST),e}_normalizedEventToPosition(e,t){return[Math.floor(e/this._options.tileWidth),Math.floor(t/this._options.tileHeight)]}_updateSize(){const e=this._gl,t=this._options,n=[t.width*t.tileWidth,t.height*t.tileHeight];e.canvas.width=n[0],e.canvas.height=n[1],e.viewport(0,0,n[0],n[1]),e.uniform2fv(this._uniforms.tileSize,[t.tileWidth,t.tileHeight]),e.uniform2fv(this._uniforms.targetSize,n)}_updateTexture(e){!function(e,t){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)}(this._gl,e)}}const g=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],m="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n    vec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n    vec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n    targetPosNdc.y *= -1.0;\n\n    gl_Position = vec4(targetPosNdc, 0.0, 1.0);\n    tilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),v="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n    fragColor = vec4(0, 0, 0, 1);\n\n    vec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n    if (colorize) {\n        texel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n        fragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n        fragColor.a = texel.a + (1.0-texel.a)*bg.a;\n    } else {\n        fragColor = texel;\n    }\n}".trim();const _={};function y(e){if(!(e in _)){let t;if("transparent"===e)t=[0,0,0,0];else if(e.indexOf("rgba")>-1){t=(e.match(/[\d.]+/g)||[]).map(Number);for(let e=0;e<3;e++)t[e]=t[e]/255}else t=d.fromString(e).map(e=>e/255),t.push(1);_[e]=t}return _[e]}var w=n(7);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const b=/%([bc]){([^}]*)}/g,x=0,E=1,T=2,k=3;function A(e,t){const n={width:0,height:1},r=S(e,t);let i=0;for(let e=0;e<r.length;e++){const t=r[e];switch(t.type){case x:i+=t.value.length;break;case E:n.height++,n.width=Math.max(n.width,i),i=0;break;case T:case k:break;default:throw new Error("unknown token type")}}return n.width=Math.max(n.width,i),n}function S(e,t){const n=[];let r=0;e.replace(b,(function(t,i,o,a){const l=e.substring(r,a);return l.length&&n.push({type:x,value:l}),n.push({type:"c"===i?T:k,value:o.trim()}),r=a+t.length,""}));const i=e.substring(r);return i.length&&n.push({type:x,value:i}),function(e,t){t||(t=1/0);let n=0,r=0,i=-1;for(;n<e.length;){const o=e[n];if(o.type===E&&(r=0,i=-1),o.type!==x){n++;continue}for(;0===r&&" "===o.value.charAt(0);)o.value=o.value.substring(1);const a=o.value.indexOf("\n");if(-1!==a){o.value=C(e,n,a,!0);const t=o.value.split("");for(;t.length&&" "===t[t.length-1];)t.pop();o.value=t.join("")}if(o.value.length){if(r+o.value.length>t){let a=-1;for(;;){const e=o.value.indexOf(" ",a+1);if(-1===e)break;if(r+e>t)break;a=e}if(-1!==a)o.value=C(e,n,a,!0);else if(-1!==i){const t=e[i],r=t.value.lastIndexOf(" ");t.value=C(e,i,r,!0),n=i}else o.value=C(e,n,t-r,!1)}else r+=o.value.length,-1!==o.value.indexOf(" ")&&(i=n);n++}else e.splice(n,1)}e.push({type:E});let o=null;for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case x:o=n;break;case E:if(o){const e=o.value.split("");for(;e.length&&" "===e[e.length-1];)e.pop();o.value=e.join("")}o=null;break;case T:case k:break;default:throw new Error("Unknown token type")}}return e.pop(),e}(n,t)}function C(e,t,n,r){const i={type:E},o={type:x,value:e[t].value.substring(n+(r?1:0))};return e.splice(t+1,0,i,o),e[t].value.substring(0,n)}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const j={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},M={hex:c,rect:h,tile:f,"tile-gl":p,term:w.a},I={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class O{constructor(e={}){this._data={},this._dirty=!1,this._options={},e=Object.assign({},I,e),this.setOptions(e),this.DEBUG=this.DEBUG.bind(this)}DEBUG(e,t,n){const r=[this._options.bg,this._options.fg];this.draw(e,t,null,null,r[n%r.length])}clear(){this._data={},this._dirty=!0}setOptions(e){if(Object.assign(this._options,e),e.width||e.height||e.fontSize||e.fontFamily||e.spacing||e.layout){if(e.layout){const t=M[e.layout];this._backend=new t}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(e,t){return this._backend.computeSize(e,t)}computeFontSize(e,t){return this._backend.computeFontSize(e,t)}computeTileSize(e,t){return[Math.floor(e/this._options.width),Math.floor(t/this._options.height)]}eventToPosition(e){let t,n;return"touches"in e?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY),this._backend.eventToPosition(t,n)}draw(e,t,n,r,i){r||(r=this._options.fg),i||(i=this._options.bg);const o=`${e},${t}`;this._data[o]=[e,t,n,r,i],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[o]=!0)}drawText(e,t,n,r){let i=null,o=null,a=e,l=t,s=1;r||(r=this._options.width-e);const u=S(n,r);for(;u.length;){const t=u.shift();let n=!1,r=!1,c=!1,h=!1;switch(t.type){case x:for(let e=0;e<t.value.length;e++){const s=t.value.charCodeAt(e),u=t.value.charAt(e);if("term"===this._options.layout){const e=s>>8;if(17===e||e>=46&&e<=159||e>=172&&e<=215||s>=43360&&s<=43391){this.draw(a+0,l,u,i,o),this.draw(a+1,l,"\t",i,o),a+=2;continue}}c=s>65280&&s<65377||s>65500&&s<65512||s>65518,n=32===u.charCodeAt(0)||12288===u.charCodeAt(0),!h||c||n||a++,c&&!r&&a++,this.draw(a++,l,u,i,o),r=n,h=c}break;case T:i=t.value||null;break;case k:o=t.value||null;break;case E:a=e,l++,s++;break;default:throw new Error("Unknown text type")}}return s}drawWithCache(){if(this._dirty){if(!0===this._dirty){this._backend.clear();for(const e in this._data)this._draw(e,!1)}else for(const e in this._dirty)this._draw(e,!0);this._dirty=!1}}_draw(e,t){const n=this._data[e];n[4]!==this._options.bg&&(t=!0),this._backend.draw(n,t)}}O.Rect=h,O.Hex=c,O.Tile=f,O.TileGL=p,O.Term=w.a;
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class P{constructor(){this.heap=[],this.timestamp=0}lessThan(e,t){return e.key===t.key?e.timestamp<t.timestamp:e.key<t.key}shift(e){this.heap=this.heap.map(({key:t,value:n,timestamp:r})=>({key:t+e,value:n,timestamp:r}))}len(){return this.heap.length}push(e,t){this.timestamp+=1;const n=this.len();this.heap.push({value:e,timestamp:this.timestamp,key:t}),this.updateUp(n)}pop(){if(0===this.len())throw new Error("no element to pop");const e=this.heap[0];return this.len()>1?(this.heap[0]=this.heap.pop(),this.updateDown(0)):this.heap.pop(),e}find(e){for(let t=0;t<this.len();t++)if(e===this.heap[t].value)return this.heap[t];return null}remove(e){let t=null;for(let n=0;n<this.len();n++)e===this.heap[n].value&&(t=n);if(null===t)return!1;if(this.len()>1){const n=this.heap.pop();return n.value!==e&&(this.heap[t]=n,this.updateDown(t)),!0}return this.heap.pop(),!0}parentNode(e){return Math.floor((e-1)/2)}leftChildNode(e){return 2*e+1}rightChildNode(e){return 2*e+2}existNode(e){return e>=0&&e<this.heap.length}swap(e,t){const n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n}minNode(e){const t=e.filter(this.existNode.bind(this));let n=t[0];for(const e of t)this.lessThan(this.heap[e],this.heap[n])&&(n=e);return n}updateUp(e){if(0===e)return;const t=this.parentNode(e);this.existNode(t)&&this.lessThan(this.heap[e],this.heap[t])&&(this.swap(e,t),this.updateUp(t))}updateDown(e){const t=this.leftChildNode(e),n=this.rightChildNode(e);if(!this.existNode(t))return;const r=this.minNode([e,t,n]);r!==e&&(this.swap(e,r),this.updateDown(r))}debugPrint(){console.log(this.heap)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class G{constructor(){this._time=0,this._events=new P}getTime(){return this._time}clear(){return this._events=new P,this}add(e,t){this._events.push(e,t)}get(){if(!this._events.len())return null;const{key:e,value:t}=this._events.pop();return e>0&&(this._time+=e,this._events.shift(-e)),t}getEventTime(e){const t=this._events.find(e);if(t){const{key:e}=t;return e}}remove(e){return this._events.remove(e)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class F{constructor(){this._queue=new G,this._repeat=[],this._current=null}getTime(){return this._queue.getTime()}add(e,t){return t&&this._repeat.push(e),this}getTimeOf(e){return this._queue.getEventTime(e)}clear(){return this._queue.clear(),this._repeat=[],this._current=null,this}remove(e){const t=this._queue.remove(e),n=this._repeat.indexOf(e);return-1!==n&&this._repeat.splice(n,1),this._current===e&&(this._current=null),t}next(){return this._current=this._queue.get(),this._current}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class D extends F{add(e,t,n){return this._queue.add(e,void 0!==n?n:1/e.getSpeed()),super.add(e,t)}next(){return this._current&&-1!==this._repeat.indexOf(this._current)&&this._queue.add(this._current,1/this._current.getSpeed()),super.next()}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */class L{constructor(e,t={}){this._lightPasses=e,this._options=Object.assign({topology:8},t)}_getCircle(e,t,n){let r,i,o,a=[];switch(this._options.topology){case 4:i=1,o=[0,1],r=[j[8][7],j[8][1],j[8][3],j[8][5]];break;case 6:r=j[6],i=1,o=[-1,1];break;case 8:r=j[4],i=2,o=[-1,1];break;default:throw new Error("Incorrect topology for FOV computation")}let l=e+o[0]*n,s=t+o[1]*n;for(let e=0;e<r.length;e++)for(let t=0;t<n*i;t++)a.push([l,s]),l+=r[e][0],s+=r[e][1];return a}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const N=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var R={DiscreteShadowcasting:class extends L{compute(e,t,n,r){if(r(e,t,0,1),!this._lightPasses(e,t))return;let i,o,a,l,s,u=[];for(let c=1;c<=n;c++){let n=this._getCircle(e,t,c),h=360/n.length;for(let e=0;e<n.length;e++)if(a=n[e][0],l=n[e][1],i=h*(e-.5),o=i+h,s=!this._lightPasses(a,l),this._visibleCoords(Math.floor(i),Math.ceil(o),s,u)&&r(a,l,c,1),2==u.length&&0==u[0]&&360==u[1])return}}_visibleCoords(e,t,n,r){if(e<0){let i=this._visibleCoords(0,t,n,r),o=this._visibleCoords(360+e,360,n,r);return i||o}let i=0;for(;i<r.length&&r[i]<e;)i++;if(i==r.length)return n&&r.push(e,t),!0;let o=0;if(i%2){for(;i<r.length&&r[i]<t;)i++,o++;return 0!=o&&(n&&(o%2?r.splice(i-o,o,t):r.splice(i-o,o)),!0)}for(;i<r.length&&r[i]<t;)i++,o++;return(e!=r[i-o]||1!=o)&&(n&&(o%2?r.splice(i-o,o,e):r.splice(i-o,o,e,t)),!0)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */,PreciseShadowcasting:class extends L{compute(e,t,n,r){if(r(e,t,0,1),!this._lightPasses(e,t))return;let i,o,a,l,s,u,c=[];for(let h=1;h<=n;h++){let n=this._getCircle(e,t,h),f=n.length;for(let e=0;e<f;e++)if(i=n[e][0],o=n[e][1],l=[e?2*e-1:2*f-1,2*f],s=[2*e+1,2*f],a=!this._lightPasses(i,o),u=this._checkVisibility(l,s,a,c),u&&r(i,o,h,u),2==c.length&&0==c[0][0]&&c[1][0]==c[1][1])return}}_checkVisibility(e,t,n,r){if(e[0]>t[0]){return(this._checkVisibility(e,[e[1],e[1]],n,r)+this._checkVisibility([0,1],t,n,r))/2}let i=0,o=!1;for(;i<r.length;){let t=r[i],n=t[0]*e[1]-e[0]*t[1];if(n>=0){0!=n||i%2||(o=!0);break}i++}let a=r.length,l=!1;for(;a--;){let e=r[a],n=t[0]*e[1]-e[0]*t[1];if(n>=0){0==n&&a%2&&(l=!0);break}}let s,u=!0;if((i==a&&(o||l)||o&&l&&i+1==a&&a%2||i>a&&i%2)&&(u=!1),!u)return 0;let c=a-i+1;if(c%2)if(i%2){let e=r[i];s=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),n&&r.splice(i,c,t)}else{let t=r[a];s=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),n&&r.splice(i,c,e)}else{if(!(i%2))return n&&r.splice(i,c,e,t),1;{let e=r[i],t=r[a];s=(t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]),n&&r.splice(i,c)}}return s/((t[0]*e[1]-e[0]*t[1])/(e[1]*t[1]))}},RecursiveShadowcasting:class extends L{compute(e,t,n,r){r(e,t,0,1);for(let i=0;i<N.length;i++)this._renderOctant(e,t,N[i],n,r)}compute180(e,t,n,r,i){i(e,t,0,1);let o=(r-1+8)%8,a=(r-2+8)%8,l=(r+1+8)%8;this._renderOctant(e,t,N[a],n,i),this._renderOctant(e,t,N[o],n,i),this._renderOctant(e,t,N[r],n,i),this._renderOctant(e,t,N[l],n,i)}compute90(e,t,n,r,i){i(e,t,0,1);let o=(r-1+8)%8;this._renderOctant(e,t,N[r],n,i),this._renderOctant(e,t,N[o],n,i)}_renderOctant(e,t,n,r,i){this._castVisibility(e,t,1,1,0,r+1,n[0],n[1],n[2],n[3],i)}_castVisibility(e,t,n,r,i,o,a,l,s,u,c){if(!(r<i))for(let h=n;h<=o;h++){let n=-h-1,f=-h,d=!1,p=0;for(;n<=0;){n+=1;let g=e+n*a+f*l,m=t+n*s+f*u,v=(n-.5)/(f+.5),_=(n+.5)/(f-.5);if(!(_>r)){if(v<i)break;if(n*n+f*f<o*o&&c(g,m,h,1),d){if(!this._lightPasses(g,m)){p=_;continue}d=!1,r=p}else!this._lightPasses(g,m)&&h<o&&(d=!0,this._castVisibility(e,t,h+1,r,v,o,a,l,s,u,c),p=_)}}if(d)break}}}};
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
Math.sqrt(3),Math.sqrt(3);
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class H{constructor(e,t,n,r={}){this._toX=e,this._toY=t,this._passableCallback=n,this._options=Object.assign({topology:8},r),this._dirs=j[this._options.topology],8===this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(e,t){const n=[];for(let r=0;r<this._dirs.length;r++){const i=this._dirs[r],o=e+i[0],a=t+i[1];this._passableCallback(o,a)&&n.push([o,a])}return n}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var W={Dijkstra:class extends H{constructor(e,t,n,r){super(e,t,n,r),this._computed={},this._todo=[],this._add(e,t,null)}compute(e,t,n){const r=e+","+t;if(r in this._computed||this._compute(e,t),!(r in this._computed))return;let i=this._computed[r];for(;null!==i;)n(i.x,i.y),i=i.prev}_compute(e,t){for(;this._todo.length>0;){const n=this._todo.shift();if(n.x===e&&n.y===t)return;const r=this._getNeighbors(n.x,n.y);for(let e=0;e<r.length;e++){const t=r[e],i=t[0],o=t[1];i+","+o in this._computed||this._add(i,o,n)}}}_add(e,t,n){const r={x:e,y:t,prev:n};this._computed[e+","+t]=r,this._todo.push(r)}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */,AStar:class extends H{constructor(e,t,n,r,i={}){super(e,t,n,i),this.todo=[],this.done={},this.weightCallback=r}compute(e,t,n){for(this.todo=[],this.done={},this.fromX=e,this.fromY=t,this._add(this._toX,this._toY,null);this.todo.length>0;){const n=this.todo.shift(),r=n.x+","+n.y;if(r in this.done)continue;if(this.done[r]=n,n.x===e&&n.y===t)break;const i=this._getNeighbors(n.x,n.y);for(let e=0;e<i.length;e++){const t=i[e],r=t[0],o=t[1];r+","+o in this.done||this._add(r,o,n)}}let r=this.done[e+","+t];if(null!=r)for(;null!=r;)n(r.x,r.y),r=r.prev}_add(e,t,n){const r=this._distance(e,t)+this.weightCallback(e,t),i={x:e,y:t,prev:n,g:null!==n?n.g+1:0,h:r},o=i.g+i.h;for(let e=0;e<this.todo.length;e++){const t=this.todo[e],n=t.g+t.h;if(o<n||o===n&&r<t.h)return void this.todo.splice(e,0,i)}this.todo.push(i)}_distance(e,t){const n=Math.abs(e-this.fromX),r=Math.abs(t-this.fromY);switch(this._options.topology){case 4:return Math.abs(e-this.fromX)+Math.abs(t-this.fromY);case 6:return r+Math.max(0,(n-r)/2);case 8:return Math.max(Math.abs(e-this.fromX),Math.abs(t-this.fromY));default:return 0}}}};
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
class B{constructor(e,t={}){this._reflectivityCallback=e,this._options={},t=Object.assign({passes:1,emissionThreshold:100,range:10},t),this._lights={},this._reflectivityCache={},this._fovCache={},this.setOptions(t)}setOptions(e){return Object.assign(this._options,e),(null==e?void 0:e.range)&&this.reset(),this}setFOV(e){return this._fov=e,this._fovCache={},this}setLight(e,t,n){const r=e+","+t;return n?this._lights[r]="string"==typeof n?d.fromString(n):n:delete this._lights[r],this}clearLights(){this._lights={}}reset(){return this._reflectivityCache={},this._fovCache={},this}compute(e){const t={};let n={};const r={};for(const e in this._lights){const t=this._lights[e];n[e]=[0,0,0],d.add_(n[e],t)}for(let e=0;e<this._options.passes;e++)this._emitLight(n,r,t),e+1!==this._options.passes&&(n=this._computeEmitters(r,t));for(const t in r){const n=t.split(",");e(parseInt(n[0]),parseInt(n[1]),r[t])}return this}_emitLight(e,t,n){for(const r in e){const i=r.split(","),o=parseInt(i[0]),a=parseInt(i[1]);this._emitLightFromCell(o,a,e[r],t),n[r]=1}return this}_computeEmitters(e,t){const n={};for(const r in e){if(r in t)continue;const i=e[r];let o;if(r in this._reflectivityCache)o=this._reflectivityCache[r];else{const e=r.split(","),t=parseInt(e[0]),n=parseInt(e[1]);o=this._reflectivityCallback(t,n),this._reflectivityCache[r]=o}if(0===o)continue;const a=[0,0,0];let l=0;for(let e=0;e<3;e++){const t=Math.round(i[e]*o);a[e]=t,l+=t}l>this._options.emissionThreshold&&(n[r]=a)}return n}_emitLightFromCell(e,t,n,r){const i=e+","+t;let o;o=i in this._fovCache?this._fovCache[i]:this._updateFOV(e,t);for(const e in o){const t=o[e];let i;e in r?i=r[e]:(i=[0,0,0],r[e]=i);for(let e=0;e<3;e++)i[e]+=Math.round(n[e]*t)}return this}_updateFOV(e,t){const n=e+","+t,r={};this._fovCache[n]=r;const i=this._options.range;return this._fov.compute(e,t,i,function(e,t,n,o){const a=o*(1-n/i);0!==a&&(r[e+","+t]=a)}.bind(this)),r}}
/**!
 * Copyright (c) 2012-now(), Ondrej Zara
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 	* Redistributions of source code must retain the above copyright notice,
 * 	  this list of conditions and the following disclaimer.
 * 	* Redistributions in binary form must reproduce the above copyright notice,
 * 	  this list of conditions and the following disclaimer in the documentation
 * 	  and/or other materials provided with the distribution.
 * 	* Neither the name of Ondrej Zara nor the names of its contributors may be used
 * 	  to endorse or promote products derived from this software without specific
 * 	  prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var z=n(2);const U={},$={forrest_001:"forrestTheme",durdwin_001:"caveTheme"},V={id:null,sound:null};function X(){U.uiClick.play()}function q(){U.uiRollover.play()}function Y(){U.bookFlip.play()}function K(){U.bookFlip2.play()}function Z(){U.handleLeather2.play()}function Q(){U.handleLeather.play()}function J(){U.ping.play()}function ee(){U.doorOpening.play()}function te(){U.chestOpening.play()}function ne(){U.boxBreaking.play()}function re(e){const t=U[$[e]];V.sound!==t&&(null!==V.id&&null!==V.sound&&V.sound.fade(.8,0,3e3,V.id),V.sound=t,V.id=t.play(),V.sound.fade(0,.8,3e3,V.id))}function ie(){null!==V.id&&null!==V.sound&&V.sound.pause(V.id)}function oe(){null!==V.id&&null!==V.sound&&V.sound.play(V.id)}var ae=n(10),le=n(11),se=n(12),ue=n(0);
/**!
 * Adapted from GOAPy (https://github.com/flags/GOAPy)
 *
 * Original License:
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Luke Martin (flags)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function ce(e,t){const n=new Set(e);for(const e of t)n.delete(e);return n}function he(e,t){const n=new Set;let r=0;for(const i in t){const o=t[i];-1!==o&&(o!==e[i]&&(r+=1),n.add(i))}for(const i in e){if(n.has(i))continue;const o=e[i];-1!==o&&(o!==t[i]&&(r+=1))}return r}function fe(e,t){for(const n in t){if(-1!==t[n]&&e[n]!==t[n])return!1}return!0}function de(e,t){const n=Object.values(t);for(let t=0;t<n.length;t++){const r=n[t];if(e.state===r.state&&e.name===r.name)return!0}return!1}function pe(e,t,n=""){return e.nodeID+=1,e.nodes[e.nodeID]={state:t,f:0,g:0,h:0,p_id:null,id:e.nodeID,name:n},e.nodes[e.nodeID]}function ge(e,t,n,r,i){const o={nodes:{},nodeID:0,goal:t,actions:n,reactions:r,weightTable:i,actionNodes:{},oList:{},cList:{}},a=pe(o,e,"start");a.g=0,a.h=he(e,t),a.f=a.g+a.h,o.oList[a.id]=a;for(const e in n)o.actionNodes[e]=pe(o,n[e],e);return function(e){let t=null;const n=e.cList,r=e.oList;for(;Object.keys(r).length>0;){const i={node:null,f:9e6},o=Object.values(r);for(let e=0;e<o.length;e++){const t=o[e];(null===i.node||t.f<i.f)&&(i.node=t.id,i.f=t.f)}if(null===i.node)return;if(t=e.nodes[i.node],delete r[t.id],fe(t.state,e.goal)){const n=[];for(;null!==t.p_id;)n.push(t),t=e.nodes[t.p_id];return Object(ue.reverse)(n),n}n[t.id]=t;const a=[],l=Object.keys(e.actionNodes);for(let n=0;n<l.length;n++){const r=l[n];if(!fe(t.state,e.actionNodes[r].state))continue;e.nodeID+=1;const i=Object.assign({},t);i.state=Object.assign({},t.state),i.id=e.nodeID,i.name=r;for(const t in e.reactions[r]){const n=e.reactions[r][t];-1!==n&&(i.state[t]=n)}e.nodes[i.id]=i,a.push(i)}for(let i=0;i<a.length;i++){const o=a[i],l=t.g+e.weightTable[o.name],s=de(o,r),u=de(o,n);s&&l<o.g&&delete r[o],u&&l<o.g&&delete n[o.id],s||u||(o.g=l,o.h=he(o.state,e.goal),o.f=o.g+o.h,o.p_id=t.id,r[o.id]=o)}}return[]}(o)}class me{constructor(...e){this.startState=null,this.goalState=null,this.actionList=null,this.values={};for(let t=0;t<e.length;t++)this.values[e[t]]=-1}state(e={}){const t=Object.assign({},this.values);return Object.assign(t,e),t}setStartState(e={}){const t=ce(new Set(Object.keys(e)),new Set(Object.keys(this.values)));if(t.size>0)throw new Error("Invalid states for world start state: "+Array.from(t.values()));this.startState=this.state(e)}setGoalState(e={}){const t=ce(new Set(Object.keys(e)),new Set(Object.keys(this.values)));if(t.size>0)throw new Error("Invalid states for world goal state: "+[...t]);this.goalState=this.state(e)}setActionList(e){this.actionList=e}getActionList(){return this.actionList}calculate(){if(null===this.actionList)throw new Error("Can't calculate path with no actionList");if(null===this.startState)throw new Error("Can't calculate path with no startState");if(null===this.goalState)throw new Error("Can't calculate path with no goalState");const e={};for(const t in this.actionList.conditions)e[t]=Object.assign({},this.actionList.conditions[t]);const t={};for(const e in this.actionList.reactions)t[e]=Object.assign({},this.actionList.reactions[e]);return ge(this.startState,this.goalState,e,t,Object.assign({},this.actionList.weights))}}class ve{constructor(){this.conditions={},this.reactions={},this.weights={}}addCondition(e,t={}){e in this.weights||(this.weights[e]=1),e in this.conditions?Object.assign(this.conditions[e],t):this.conditions[e]=t}addReaction(e,t={}){if(!(e in this.conditions))throw new Error(`Trying to add reaction "${e}" without matching condition.`);e in this.reactions?Object.assign(this.reactions[e],t):this.reactions[e]=t}setWeight(e,t){if(!(e in this.conditions))throw new Error(`Trying to set weight "${e}" without matching condition.`);this.weights[e]=t}}function _e(e,t,n,r,i){if(null===rn[n.type].maxTilesPerMove)throw new Error("Missing maxTilesPerMove for "+n.type);const o=rn[n.type].maxTilesPerMove;if(Et({x:e,y:t},n)<2*o){const a=new W.AStar(e,t,Be(n),()=>0,{topology:8});if(t>=r.length||e>=r[0].length||r[t][e].blocks)return null;if(wt(i,e,t).filter(e=>e.blocks&&e!==n).length>0)return null;const l=[];return a.compute(n.x,n.y,(function(e,t){l.push([e,t])})),0===l.length||l.length>o?null:(l.shift(),0===l.length?null:l)}return null}class ye{constructor(e){this.usesTurn=e}usedTurn(){return this.usesTurn}isFinished(){return!0}execute(){}}class we{constructor(e,t,n){this.usesTurn=!0,this.done=!1,this.path=e,this.map=t,this.gameObjects=n}usedTurn(){return!0}isFinished(){return this.done}execute(e,t){const n=this.path[0],{blocks:r}=bt(this.map,this.gameObjects,n[0],n[1]);if(!0===r)return void(this.done=!0);const i=new Map;this.gameObjects.filter(e=>e.trigger).forEach(e=>{i.set(`${e.x},${e.y}`,e)});for(let e=0;e<this.path.length;e++){const n=this.path[e],r=i.get(`${n[0]},${n[1]}`);null!=r&&null!==r.trigger&&r.trigger.trigger(t)}t.x=n[0],t.y=n[1],this.path.shift(),0===this.path.length&&(this.done=!0)}}class be{constructor(e){this.interacted=!0,this.target=e}usedTurn(){return this.interacted}isFinished(){return!0}execute(e,t){return null!==this.target.interactable?(this.target.interactable.interact(t),void(this.interacted=!0)):null!==t.fighter&&null!==this.target.fighter?(t.fighter.attack(this.target),void(this.interacted=!0)):void(this.interacted=!1)}}class xe{usedTurn(){return!1}isFinished(){return!0}execute(){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter is null");i.gameEventEmitter.emit("ui.openInventory"),i.Game.state=Jt.InventoryMenu}}class Ee{usedTurn(){return!1}isFinished(){return!0}execute(){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter is null");i.gameEventEmitter.emit("ui.openSpells"),i.Game.state=Jt.SpellMenu}}class Te{constructor(e,t=null,n=null,r=null){this.didUseItem=!0,this.target=null,this.map=null,this.objects=null,this.itemID=e,this.target=t,this.map=n,this.objects=r}usedTurn(){return this.didUseItem}isFinished(){return!0}execute(e,t){if(null===t.inventory)throw new Error("Cannot use an item without an inventory");if(!t.inventory.hasItem(this.itemID))throw new Error(`Cannot use ${this.itemID}, not in inventory`);const n=on[this.itemID];if(n.useFunc(n,t,this.target,this.map,this.objects,null))return t.inventory.useItem(this.itemID),void(this.didUseItem=!0);this.didUseItem=!1}}class ke{constructor(e,t=null,n=null,r=null,i=null){this.didUseSpell=!1,this.target=null,this.map=null,this.objects=null,this.rotation=null,this.spellID=e,this.target=t,this.map=n,this.objects=r,this.rotation=i}usedTurn(){return this.didUseSpell}isFinished(){return!0}execute(e,t){if(null===t.fighter)return;if(!t.fighter.hasSpell(this.spellID))return;const n=an[this.spellID],r=t.fighter.getEffectiveStats();n.manaCost>r.mana?this.didUseSpell=!1:(this.didUseSpell=n.useFunc(n,t,this.target,this.map,this.objects,this.rotation),this.didUseSpell&&t.fighter.useMana(n.manaCost))}}class Ae{usedTurn(){return!1}isFinished(){return!0}execute(e,t){if(null!==t.inputHandler)switch(t.inputHandler.reticleRotation){case 0:t.inputHandler.reticleRotation=90;break;case 90:t.inputHandler.reticleRotation=180;break;case 180:t.inputHandler.reticleRotation=270;break;case 270:t.inputHandler.reticleRotation=0}}}const Se=new Set;let Ce=null,je=null;var Me,Ie,Oe,Pe={init:function(){if(null===i.window||void 0===i.window||null===i.Game||void 0===i.Game||null===i.Game.canvas)throw new Error("Cannot init input without the globals initialized");i.window.addEventListener("keydown",(function(e){e.preventDefault(),Se.add(e.key)})),i.window.addEventListener("mousedown",(function(e){e.preventDefault(),Ce=e})),i.Game.canvas.addEventListener("mousemove",(function(e){e.preventDefault(),je=e}))},isDown:function(e){return Se.has(e)},pressKey:function(e){Se.add(e)},pressMouse:function(){Ce=new MouseEvent("mousedown")},getFirstKeyPressed:function(){return Object(ue.get)([...Se.values()],"[0]",null)},getLeftMouseDown:function(){if(null===i.Game||void 0===i.Game||null===i.Game.display||null===Ce)return null;const e=i.Game.display.eventToPosition(Ce);return i.Game.gameCamera.screenToWorld(e[0],e[1])},getMousePosition:function(){if(null===i.Game||void 0===i.Game||null===i.Game.display||null===je)return null;const e=i.Game.display.eventToPosition(je);return i.Game.gameCamera.screenToWorld(e[0],e[1])},clearInputs:function(){Ce=null,Se.clear()}};function Ge(e,t,n){let r=null;const i=wt(n,e.x,e.y);if(e.x>=t[0].length||e.y>=t.length||!1===t[e.y][e.x].visible)return null;for(let e=0;e<i.length;e++)if(null!==i[e].fighter||null!==i[e].interactable){r=i[e];break}return r}!function(e){e[e.Combat=0]="Combat",e[e.Target=1]="Target"}(Me||(Me={}));class Fe{constructor(){this.owner=null,this.reticleRotation=0,this.state=Me.Combat,this.itemForTarget=null,this.spellForTarget=null,this.keyCommands=[{key:"i",description:"Inventory",command:new xe},{key:"m",description:"Spell Menu",command:new Ee},{key:"r",description:"Rotate Target Reticle",command:new Ae},{key:"x",description:"Do Nothing",command:new ye(!0)}]}getTargetingReticle(){if(this.state!==Me.Target)throw new Error("Cannot get reticle outside of targeting state");const e=[],t=Pe.getMousePosition();if(null===t)return e;if(null!==this.spellForTarget){const n=an[this.spellForTarget.id];if(null!==n.areaOfEffect)for(let r=0;r<n.areaOfEffect.width;r++)for(let i=0;i<n.areaOfEffect.height;i++)switch(this.reticleRotation){case 0:e.push({x:t.x+r,y:t.y+i});break;case 90:e.push({x:t.x+i,y:t.y+r});break;case 180:e.push({x:t.x+r,y:t.y-i});break;case 270:e.push({x:t.x-i,y:t.y+r})}else e.push({x:t.x,y:t.y})}else e.push({x:t.x,y:t.y});return e}handleInput(e,t){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");if(null===this.owner)throw new Error("Can't handle input without an owner");if(this.state===Me.Combat){for(let e=0;e<this.keyCommands.length;e++){const t=this.keyCommands[e];if(Pe.isDown(t.key))return t.command}const n=Pe.getLeftMouseDown();if(null!==n){if(Et(n,this.owner)<1.5){const r=Ge(n,e,t);if(null!==r&&r!==this.owner)return new be(r)}const r=_e(n.x,n.y,this.owner,e,t);if(null!==r)return new we(r,e,t)}return null}if(this.state===Me.Target){i.gameEventEmitter.emit("tutorial.spellTargeting");for(let e=0;e<this.keyCommands.length;e++){const t=this.keyCommands[e];if(Pe.isDown(t.key))return t.command}const n=Pe.getLeftMouseDown();if(null===n)return null;let r=null;return null!==this.itemForTarget?r=new Te(this.itemForTarget.id,n,e,t):null!==this.spellForTarget&&(r=new ke(this.spellForTarget.id,n,e,t,this.reticleRotation)),this.state=Me.Combat,this.itemForTarget=null,this.spellForTarget=null,r}return null}}function De(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Le(e){throw new Error("Should be unreachable")}function Ne(e,t=Ie.Default){if(null===i.document)throw new Error("Global document object is null");if(null===i.Game)throw new Error("Global Game object is null");const n=i.document.getElementById("log");if(null===n)throw new Error("Can't find log list element");const r=document.createElement("div"),o=document.createElement("p"),a=document.createElement("p");for(o.innerHTML=""+e,t===Ie.Tutorial?r.className="tutorial":t===Ie.Critical?(r.className="critical",a.innerHTML=`<small>Turn: ${i.Game.getTurnNumber()}</small>`):a.innerHTML=`<small>Turn: ${i.Game.getTurnNumber()}</small>`,r.appendChild(o),r.appendChild(a),n.appendChild(r);n.children.length>100;)n.children[0].remove();n.scrollTop=n.scrollHeight}!function(e){e[e.Default=0]="Default",e[e.Tutorial=1]="Tutorial",e[e.Critical=2]="Critical"}(Ie||(Ie={}));class Re{constructor(){this.currentSelection=0,this.allowedKeys=new Set(["ArrowDown","ArrowUp","Enter"])}resetState(){this.currentSelection=0}draw(e){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.Game.display)throw new Error("Cannot draw InventoryMenu when display is null");const t=e.length+Wt;for(let e=0;e<Rt;e++)for(let n=0;n<t;n++)0===e||0===n||e===Rt-1||n===t-1?i.Game.display.draw(e,n,"1","grey","grey"):i.Game.display.draw(e,n,"1","black","black");i.Game.display.drawText(2,1,"%c{white}%b{black}Player Inventory");for(let t=0;t<e.length;t++){let n;n=t===this.currentSelection?`%c{white}%b{grey}${e[t].displayName} (${e[t].count})`:`%c{white}%b{black}${e[t].displayName} (${e[t].count})`,i.Game.display.drawText(2,t+3,n)}}handleInput(e){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter is null");return Pe.isDown("Enter")?(i.gameEventEmitter.emit("ui.select"),e[this.currentSelection]):(Pe.isDown("ArrowUp")&&this.currentSelection>0&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection--),Pe.isDown("ArrowDown")&&this.currentSelection<e.length-1&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection++),null)}}class He{constructor(){this.currentSelection=0,this.allowedKeys=new Set(["ArrowDown","ArrowUp","Enter"])}resetState(){this.currentSelection=0}draw(e){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.Game.display)throw new Error("Cannot draw InventoryMenu when display is null");const t=e.length+Wt;for(let e=0;e<Rt;e++)for(let n=0;n<t;n++)0===e||0===n||e===Rt-1||n===t-1?i.Game.display.draw(e,n,"1","grey","grey"):i.Game.display.draw(e,n,"1","black","black");i.Game.display.drawText(2,1,"%c{white}%b{black}Spells");for(let t=0;t<e.length;t++){const n=e[t];let r;r=t===this.currentSelection?"%c{white}%b{grey}":"%c{white}%b{black}",i.Game.display.drawText(2,t+3,r+" "+n.displayName);let o="%c{white}%b{black}";switch(n.type){case tn.DamageOther:case tn.WildDamage:o+="dmg: "+n.value;break;case tn.Effect:o+="turns: "+n.value;break;case tn.HealSelf:o+="health: "+n.value;break;case tn.Passive:break;default:Le(n.type)}i.Game.display.drawText(25,t+3,o),i.Game.display.drawText(40,t+3,"%c{white}%b{black}cost: "+n.manaCost)}}handleInput(e){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter is null");return Pe.isDown("Enter")?(i.gameEventEmitter.emit("ui.select"),e[this.currentSelection]):(Pe.isDown("ArrowUp")&&this.currentSelection>0&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection--),Pe.isDown("ArrowDown")&&this.currentSelection<e.length-1&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection++),null)}}class We{constructor(){this.state="selection",this.currentSelection=0,this.allowedSelectionKeys=new Set(["ArrowDown","ArrowUp","Enter","Escape"])}resetState(){this.state="selection",this.currentSelection=0}draw(e){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.Game.display)throw new Error("Cannot draw InventoryMenu when display is null");const t=e.length+Wt+4,n=Rt;for(let e=0;e<n;e++)for(let r=0;r<t;r++)0===e||0===r||e===n-1||r===t-1?i.Game.display.draw(e,r,"1","grey","grey"):i.Game.display.draw(e,r,"1","black","black");i.Game.display.drawText(2,1,"%c{white}%b{black} Keyboard Bindings"),i.Game.display.drawText(2,3,"%c{white}%b{black} Use the arrow keys to select a binding, and enter to change it. Use Escape to exit");for(let t=0;t<e.length;t++){const n=e[t].key;t===this.currentSelection?"selection"===this.state?i.Game.display.drawText(2,t+7,"%c{white}%b{grey} "+e[t].description+": "+n):i.Game.display.drawText(2,t+7,"%c{white}%b{grey} "+e[t].description+":"):i.Game.display.drawText(2,t+7,"%c{white}%b{black} "+e[t].description+": "+n)}}handleInput(e){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter is null");if("selection"===this.state){if(Pe.isDown("Escape"))return void i.gameEventEmitter.emit("ui.select");Pe.isDown("ArrowUp")&&this.currentSelection>0&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection--),Pe.isDown("ArrowDown")&&this.currentSelection<e.length-1&&(i.gameEventEmitter.emit("ui.cursorMove"),this.currentSelection++),Pe.isDown("Enter")&&(i.gameEventEmitter.emit("ui.select"),this.state="change")}else if("change"===this.state){i.gameEventEmitter.emit("ui.select");const t=Pe.getFirstKeyPressed();null!==t&&(e[this.currentSelection].key=t,this.state="selection")}}}function Be(e){return function(t,n){if(null===i.Game)throw new Error("Global game object is null");if(e.x===t&&e.y===n)return!0;const{blocks:r}=bt(i.Game.map,i.Game.gameObjects,t,n);return!r}}function ze(e){return function(t,n){if(null===i.Game)throw new Error("Global game object is null");return e.x===t&&e.y===n||!1===function(e,t,n,r){if(!Array.isArray(e)||0===e.length||!Array.isArray(e[0]))throw new Error("Bad map data");if(n<0||r<0||n>=e[0].length||r>=e.length||e[r][n].blocksSight)return!0;const i=wt(t,n,r);for(let e=0;e<i.length;e++)if(i[e].blocksSight)return!0;return!1}(i.Game.map,i.Game.gameObjects,t,n)}}class Ue{constructor(e){var t;if(null===i.Game)throw new Error("Global game object is null");this.owner=null,this.target=i.Game.player,this.currentOrder="attack",this.fear=0,this.fearThreshold=10,this.lowHealthThreshold=.25,this.lowManaThreshold=.25,this.sightRange=null!==(t=e.sightRange)&&void 0!==t?t:0,this.pathName=null,this.patrolTarget=null,this.fallbackPosition=null,this.turnsWithTargetOutOfSight=0,this.knowsTargetPosition=!1,this.hasTargetInSight=!1,this.isCowering=!1,this.isAtFallbackPosition=!1,this.previousWorldState={},this.currentAction=null,this.goals=new Set,this.actions=new Set(e.actions)}createPlanner(){const e=new ve;for(const t of this.actions){const n=sn[t],r=Object.keys(n.preconditions),i=Object.keys(n.postconditions);for(let e=0;e<r.length;e++)this.goals.add(r[e]);for(let e=0;e<i.length;e++)this.goals.add(i[e]);e.addCondition(t,n.preconditions),e.addReaction(t,n.postconditions),e.setWeight(t,n.weight(this))}this.planner=new me(...this.goals.values()),this.planner.setActionList(e)}setOwner(e){this.owner=e,null!==e&&this.createPlanner()}getStateName(){switch(this.currentAction){case"wander":case"guard":case"patrol":return this.currentAction;case"goToEnemy":case"meleeAttack":return"attacking";default:return""}}setPatrolPath(e){this.pathName=e,this.actions.delete("wander"),this.actions.delete("guard"),this.actions.add("patrol"),this.createPlanner()}setFallbackPosition(e){this.fallbackPosition=e,this.actions.add("goToFallbackPosition"),this.createPlanner()}generateWorldState(){const e={};for(const t of this.goals){const n=ln[t];e[t]=n.resolver(this)}return e}getPlan(){if(null===this.owner)throw new Error("Cannot create a plan without an owner");const e=this.generateWorldState();!1===e.targetInLineOfSight&&this.knowsTargetPosition&&this.turnsWithTargetOutOfSight++;const t=rn[this.owner.type].loseTrackAfterNTurns;if(this.turnsWithTargetOutOfSight===t&&(this.knowsTargetPosition=!1,this.turnsWithTargetOutOfSight=0,e.targetPositionKnown=!1,Ne(this.owner.name+" lost track of you")),Object(ue.isEqual)(this.previousWorldState,e))return this.currentAction;!1===this.previousWorldState.targetPositionKnown&&!0===e.targetPositionKnown&&Ne(this.owner.name+" saw you"),this.planner.setStartState(e);const n=[];"attack"===this.currentOrder&&n.push({targetKilled:!0}),!0===e.lowMana&&n.push({lowMana:!1}),!0===e.lowHealth&&n.push({lowHealth:!1}),!0===e.inDangerousArea&&n.push({inDangerousArea:!1}),"fallback"===this.currentOrder&&this.goals.has("atFallbackPosition")&&n.push({atFallbackPosition:!0}),!0===e.afraid&&n.push({cowering:!0});do{this.planner.setGoalState(n.pop());const e=this.planner.calculate();this.currentAction=Object(ue.get)(e,"['0'].name",null)}while(n.length>0&&null===this.currentAction);return this.previousWorldState=e,this.currentAction}act(e,t,n){if(null===this.owner)throw new Error("Planning AI must have an owner to act");if(null===this.owner.fighter)throw new Error("Planning AI must have a fighter");var r;new R.PreciseShadowcasting(ze(this.owner)).compute(this.owner.x,this.owner.y,this.sightRange,(r=this,function(e,t,n,i){null!==r.target&&e===r.target.x&&t===r.target.y&&i>0&&(r.knowsTargetPosition=!0,r.hasTargetInSight=!0)}));const i=this.getPlan();return this.hasTargetInSight=!1,null!==i?sn[i].updateFunction(this,e,t,n):new ye(!0)}}class $e{constructor(e,t){this.owner=null,this.oldAI=e,this.turns=t}setOwner(e){this.owner=e}getStateName(){return"confused"}act(){var e,t;if(null===i.Game)throw new Error("Global game object is null");if(null===this.owner)throw new Error("ConfusedAI must have an owner to act");if(this.turns>0){let n=!0,r=0,o=0,l=null!==(e=a.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==e?e:0;do{l=null!==(t=a.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==t?t:0,r=this.owner.x+j[8][l][0],o=this.owner.y+j[8][l][1],({blocks:n}=bt(i.Game.map,i.Game.gameObjects,r,o))}while(!0===n);return this.turns--,new we([[r,o]],i.Game.map,i.Game.gameObjects)}return this.owner===i.Game.player?Ne("You are no longer confused"):Ne(this.owner.name+" is no longer confused"),this.owner.ai=this.oldAI,new ye(!0)}}class Ve{constructor(e){if(null===e.bgColor)throw new Error("Missing data bgColor on ChestAI ctor");if(null===e.emptyColor)throw new Error("Missing data emptyColor on ChestAI ctor");this.owner=null,this.bgColor=e.bgColor,this.emptyColor=e.emptyColor}setOwner(e){this.owner=e}getStateName(){if(null===this.owner)throw new Error("ChestAI must have an owner to getStateName");if(null===this.owner.graphics)throw new Error("ChestAI must have graphics to getStateName");return this.owner.graphics.bgColor===this.emptyColor?"empty":"closed"}act(){if(null===this.owner)throw new Error("ChestAI must have an owner to act");if(null===this.owner.inventory)throw new Error("ChestAI must have an inventory to act");if(null===this.owner.graphics)throw new Error("ChestAI must have graphics to act");return 0===this.owner.inventory.getItems().length?this.owner.graphics.bgColor=this.emptyColor:this.owner.graphics.bgColor=this.bgColor,new ye(!0)}}class Xe{constructor(){this.owner=null}setOwner(e){this.owner=e}getStateName(){return""}act(){if(null===i.Game)throw new Error("Global game object is null");if(null===this.owner)throw new Error("DroppedItemAI must have an owner to act");if(null===this.owner.inventory)throw new Error("DroppedItemAI must have an inventory to act");return 0===this.owner.inventory.getItems().length&&i.Game.removeObject(this.owner),new ye(!0)}}class qe{constructor(e){if(null===e.removeAfterNTurns)throw new Error("RemoveAfterNTurns needs removeAfterNTurns set on the data");this.owner=null,this.turns=e.removeAfterNTurns}getStateName(){return"Turns Left: "+this.turns}setOwner(e){this.owner=e}act(){if(null===i.Game)throw new Error("Global game object is null");if(null===this.owner)throw new Error("Can't interact without an owner");return this.turns<=0&&i.Game.removeObject(this.owner),this.turns--,new ye(!0)}}class Ye{constructor(){this.owner=null}interact(e){if(null===i.Game)throw new Error("Global game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(null===this.owner)throw new Error("Can't interact without an owner");if(null===this.owner.inventory||null===e.inventory)throw new Error(`Missing inventory on ${this.owner.name} or ${e.name}`);{const t=this.owner.inventory.getItems();if(t.length>0){for(let n=0;n<t.length;n++){const r=t[n];Ne("Found a "+on[r.id].displayName),e.inventory.addItem(r.id,r.count),this.owner.inventory.useItem(r.id)}e===i.Game.player&&"chest"===this.owner.type&&i.gameEventEmitter.emit("chest.open")}else Ne("Empty")}}}class Ke{constructor(){this.owner=null,this.spellId=""}setOwner(e){this.owner=e}setSpell(e){this.spellId=e}interact(e){if(null===e.fighter)return;if(null===this.spellId)throw new Error("No spell id given");if(!(this.spellId in an))throw new Error(this.spellId+" is not a valid spell");const t=e.fighter.addSpellById(this.spellId),n=an[this.spellId];Ne(t?"You learned a new spell: "+n.displayName:"You already know "+n.displayName)}}class Ze{constructor(){this.owner=null}setOwner(e){this.owner=e}interact(){if(null===i.Game)throw new Error("Global game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(null===this.owner)throw new Error("Can't interact without an owner");i.gameEventEmitter.emit("door.open"),i.Game.removeObject(this.owner)}}class Qe{constructor(){this.owner=null,this.levelName=""}setLevel(e){this.levelName=e}setOwner(e){this.owner=e}interact(){if(null===i.Game)throw new Error("Global game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(null===this.owner)throw new Error("Can't interact without an owner");if(null===this.levelName)throw new Error("No level name has been set for load");i.Game.loadLevel(this.levelName),"load_door"===this.owner.type&&i.gameEventEmitter.emit("door.open")}}class Je{constructor(){this.owner=null,this.inventory=new Map}getItems(){const e=[];for(const[t,n]of this.inventory){const r=on[t];e.push({id:t,displayName:r.displayName,type:r.type,count:n,value:r.value})}return e}hasItem(e){return this.inventory.has(e)}addItem(e,t=1){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(null===this.owner)throw new Error("Tried to add an item on a ownerless inventory");if(!(e in on))throw new Error(e+" is not a valid item id");if(this.hasItem(e)){const n=this.inventory.get(e)+t;if(100===n)return!1;this.inventory.set(e,n)}else this.inventory.set(e,t);return this.owner===i.Game.player&&(i.gameEventEmitter.emit("tutorial.inventory"),on[e].type===en.WildDamageScroll&&i.gameEventEmitter.emit("tutorial.wildSpells")),!0}useItem(e){if(!this.hasItem(e))throw new Error(`Item ${e} not in inventory`);this.inventory.set(e,this.inventory.get(e)-1),0===this.inventory.get(e)&&this.inventory.delete(e)}}class et{constructor(e){if(null===e.char)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.fgColor)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.bgColor)throw new Error("Missing data on DrawAfterSeen ctor");this.char=e.char,this.fgColor=e.fgColor,this.bgColor=e.bgColor,this.owner=null}draw(e,t,n){if(null===this.owner)throw new Error("Can't draw BasicGraphics without owner");if(n[this.owner.y][this.owner.x].isVisibleAndLit()){const{x:n,y:r}=t.worldToScreen(this.owner.x,this.owner.y);e.draw(n,r,this.char,this.fgColor,this.bgColor)}}}class tt{constructor(e){if(null===e.char)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.fgColor)throw new Error("Missing data on DrawAfterSeen ctor");this.char=e.char,this.fgColor=e.fgColor,this.owner=null}draw(e,t,n,r){if(null===this.owner)throw new Error("Can't draw TransparencyGraphics without owner");if(n[this.owner.y][this.owner.x].isVisibleAndLit()){let i=n[this.owner.y][this.owner.x].lightingColor;const o=wt(r,this.owner.x,this.owner.y);if(o.length>0)for(let e=0;e<o.length;e++){const t=o[e];t!==this.owner&&null!==t.graphics&&(null!==t.graphics.bgColor&&(i=t.graphics.bgColor))}const{x:a,y:l}=t.worldToScreen(this.owner.x,this.owner.y);e.draw(a,l,this.char,this.fgColor,i)}}}class nt{constructor(e){if(null===e.char)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.fgColor)throw new Error("Missing data on DrawAfterSeen ctor");this.char=e.char,this.fgColor=e.fgColor,this.owner=null}draw(e,t,n,r){if(null===this.owner)throw new Error("Can't draw PlayerGraphics without owner");if(null===this.owner.inputHandler)throw new Error("Can't draw PlayerGraphics without inputHandler");if(null===rn[this.owner.type].maxTilesPerMove)throw new Error("Missing maxTilesPerMove for "+this.owner.type);const i=rn[this.owner.type].maxTilesPerMove;if(n[this.owner.y][this.owner.x].isVisibleAndLit()){let o=n[this.owner.y][this.owner.x].lightingColor;const a=wt(r,this.owner.x,this.owner.y);if(a.length>0)for(let e=0;e<a.length;e++){const t=a[e];t!==this.owner&&null!==t.graphics&&(null!==t.graphics.bgColor&&(o=t.graphics.bgColor))}const{x:l,y:s}=t.worldToScreen(this.owner.x,this.owner.y);e.draw(l,s,this.char,this.fgColor,o);const u=this.owner.inputHandler.state;if(u===Me.Combat){const o=Pe.getMousePosition();if(null===o)return;if(Et(this.owner,o)<2*i){const i=_e(o.x,o.y,this.owner,n,r);if(null===i)return;for(let n=0;n<i.length;n++){const r=i[n],{x:o,y:a}=t.worldToScreen(r[0],r[1]);e.draw(o,a,"","yellow","yellow")}}}else if(u===Me.Target){const r=this.owner.inputHandler.getTargetingReticle();for(let i=0;i<r.length;i++){if(r[i].x>=n[0].length||r[i].y>=n.length||!1===n[r[i].y][r[i].x].visible)return;const{x:o,y:a}=t.worldToScreen(r[i].x,r[i].y);e.draw(o,a,"X","black","yellow")}}}}}class rt{constructor(e){if(null===e.char)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.fgColor)throw new Error("Missing data on DrawAfterSeen ctor");if(null===e.bgColor)throw new Error("Missing data on DrawAfterSeen ctor");this.char=e.char,this.fgColor=e.fgColor,this.bgColor=e.bgColor,this.owner=null}draw(e,t,n){if(null===this.owner)throw new Error("Can't draw DrawAfterSeen without owner");if(n[this.owner.y][this.owner.x].explored){const{x:n,y:r}=t.worldToScreen(this.owner.x,this.owner.y);e.draw(n,r,this.char,this.fgColor,this.bgColor)}}}function it(e){return function(t,n){return t<0||n<0||n>=e.length||t>=e[n].length||e[n][t].blocksSight?0:e[n][t].reflectivity}}class ot{constructor(e,t){this.color=e,this.range=t}setOwner(e){this.owner=e}compute(e){if(null===this.owner)throw new Error("Cannot compute lighting for null owner");const t=new R.PreciseShadowcasting(ze(this.owner)),n=new B(it(e),{range:this.range,passes:2});n.setFOV(t),n.setLight(this.owner.x,this.owner.y,this.color),n.compute((function(t,n,r){t<0||n<0||n>=e.length||t>=e[n].length||(e[n][t].lightingColor=Object(d.toRGB)(Object(d.add)(Object(d.fromString)(e[n][t].lightingColor),r)))})),e[this.owner.y][this.owner.x].lightingColor=this.color}}class at{constructor(e,t){this.color=e,this.range=t}setOwner(e){this.owner=e}compute(e){if(null===this.owner)throw new Error("Cannot compute lighting for null owner");new R.PreciseShadowcasting(ze(this.owner)).compute(this.owner.x,this.owner.y,Rt+2,(function(t,n){t<0||n<0||n>=e.length||t>=e[n].length||(e[n][t].explored=!0,e[n][t].visible=!0,e[n][t].lightingColor="white")}))}}class lt{constructor(e,t=null){this.stats={hp:e.maxHp,maxHp:e.maxHp,mana:e.maxMana,maxMana:e.maxMana,strength:e.strength,defense:e.defense,speed:e.speed,ailmentSusceptibility:e.ailmentSusceptibility},this.deathCallback=t,this.owner=null,this.experience=e.experience,this.experienceGiven=e.experienceGiven,this.level=e.level,this.criticalChance="criticalChance"in e?e.criticalChance:.05,this.criticalDamageMultiplier=1.5,this.statusEffects=[],this.statisticEffects=[],this.damageAffinity=e.damageAffinity,this.knownSpells=new Set}act(){if(null===i.Game)throw new Error("Global Game object is null");const e=this.getEffectiveStats(),t=qt+this.level*Yt;this.experience>=t&&(this.level+=1,this.experience=0,this.stats.hp=e.maxHp,this.stats.mana=e.maxMana,this.stats.strength++,this.owner===i.Game.player&&Ne(`You reached level ${this.level}!`));for(let e=0;e<this.statusEffects.length;e++){const t=this.statusEffects[e];t.act(),0===t.turns&&null!==this.owner&&(Ne(`${t.name} has ended for ${this.owner.name}`),this.statusEffects.splice(e,1))}for(let e=0;e<this.statisticEffects.length;e++){const t=this.statisticEffects[e];t.act(),0===t.turns&&null!==this.owner&&(Ne(`${t.name} has ended for ${this.owner.name}`),this.statisticEffects.splice(e,1))}}takeDamage(e,t,n){const r=this.getEffectiveStats();return e*=this.damageAffinity[n],(e=Math.max(1,e-r.defense))>0&&(this.stats.hp-=e),t&&null!==this.owner?Ne(`CRITICAL! ${this.owner.name} takes ${e} of ${Kt[n]} damage.`,Ie.Critical):null!==this.owner&&Ne(`${this.owner.name} takes ${e} ${Kt[n]} damage.`),this.stats.hp<=0&&(null!==this.deathCallback&&null!==this.owner&&this.deathCallback(this.owner),!0)}attack(e){var t;if(null===e.fighter)return;const n=this.getEffectiveStats();let r=Math.round(n.strength),i=!1;if(a.a.getUniform()<=this.criticalChance&&(r=Math.ceil(r*this.criticalDamageMultiplier),i=!0),r>0){const n=null!==(t=e.fighter.experienceGiven)&&void 0!==t?t:0;e.fighter.takeDamage(r,i,Kt.Physical)&&(this.experience+=n)}else null!==this.owner&&Ne(`${this.owner.name} attacks ${e.name}, but it's too weak!`)}heal(e){const t=this.getEffectiveStats();this.stats.hp+=e,this.stats.hp>t.maxHp&&(this.stats.hp=t.maxHp)}useMana(e){this.stats.mana=Math.max(this.stats.mana-e,0)}addMana(e){const t=this.getEffectiveStats();this.stats.mana+=e,this.stats.mana>t.maxMana&&(this.stats.mana=t.maxMana)}getEffectiveStats(){if(0===this.statisticEffects.length)return this.stats;let e=this.stats;return this.statisticEffects.forEach(t=>{e=t.modifyStats(e)}),e.maxHp<=0&&(e.maxHp=1),this.stats.hp>e.maxHp&&(this.stats.hp=e.maxHp,e.hp=e.maxHp),this.stats.mana>e.maxMana&&(this.stats.mana=e.maxMana,e.mana=e.maxMana),e}addStatusEffect(e){this.statusEffects.push(e)}getStatusEffects(){return Object(ue.cloneDeep)(this.statusEffects)}addStatisticEffect(e){this.statisticEffects.push(e)}getStatisticEffects(){return Object(ue.cloneDeep)(this.statisticEffects)}addSpellById(e){if(null===i.Game)throw new Error("Global Game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(!(e in an))throw new Error(e+" is not a valid spell id");return!this.knownSpells.has(e)&&(this.owner===i.Game.player&&(i.gameEventEmitter.emit("tutorial.spellMenu"),an[e].type===tn.WildDamage&&i.gameEventEmitter.emit("tutorial.wildSpells")),this.knownSpells.add(e),!0)}getKnownSpells(){return[...this.knownSpells].map(e=>({id:e,displayName:an[e].displayName,manaCost:an[e].manaCost,value:an[e].value,type:an[e].type}))}hasSpell(e){return this.knownSpells.has(e)}getSpeed(){return this.getEffectiveStats().speed}}!function(e){e[e.Burn=0]="Burn"}(Oe||(Oe={}));class st{constructor(e,t,n,r=null,i=null){this.owner=e,this.name=t,this.turns=n,this.actCallback=r,this.endCallback=i}act(){this.turns--,null!==this.actCallback&&this.actCallback(this.owner),0===this.turns&&null!==this.endCallback&&this.endCallback(this.owner)}}class ut{constructor(e,t,n,r){this.owner=e,this.name=t,this.turns=n,this.modifier=r}act(){this.turns--}modifyStats(e){const t=Object(ue.cloneDeep)(e);switch(this.modifier.type){case"add":t[this.modifier.stat]+=this.modifier.value;break;case"multiply":t[this.modifier.stat]*=this.modifier.value;break;default:throw new Error("Bad StatisticEffect type "+this.modifier.type)}return t}}function ct(e,t,n){return new st(e,"Burn",n,(function(e){if(null===i.Game)throw new Error("Global Game object is null");null!==e.fighter&&e.fighter.takeDamage(t,!1,Kt.Fire),e===i.Game.player?Ne(`You were hurt by the burn for ${t} damage`):Ne(`${e.name} was hurt by the burn for ${t} damage`)}))}class ht{constructor(e,t,n){this.damage=e,this.burnTurns=t,this.burnDamagePerTurn=n}trigger(e){if(null!==e.fighter){e.fighter.takeDamage(this.damage,!1,Kt.Fire);const t=ct(e,this.burnDamagePerTurn,this.burnTurns);e.fighter.addStatusEffect(t)}}}class ft{constructor(){this.owner=null,this.eventName=null}trigger(e){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");"player"===e.type&&null!==this.eventName&&i.gameEventEmitter.emit(this.eventName)}}class dt{constructor(e,t,n,r=null,i=!1,o=!1){this.type=e,this.x=t,this.y=n,this.name=r,this.blocks=i,this.blocksSight=o,this.graphics=null,this.lighting=null,this.fighter=null,this.ai=null,this.inputHandler=null,this.inventory=null,this.interactable=null,this.trigger=null}setGraphics(e){if(null===e&&null!==this.graphics)return this.graphics.owner=null,void(this.graphics=null);null!==e&&(e.owner=this,this.graphics=e)}setLighting(e){if(null===e&&null!==this.lighting)return this.lighting.owner=null,void(this.lighting=null);null!==e&&(e.owner=this,this.lighting=e)}setFighter(e){if(null===e&&null!==this.fighter)return this.fighter.owner=null,void(this.fighter=null);null!==e&&(e.owner=this,this.fighter=e)}setAI(e){if(null===e&&null!==this.ai)return this.ai.setOwner(null),void(this.ai=null);null!==e&&(e.setOwner(this),this.ai=e)}setInventory(e){if(null===e&&null!==this.inventory)return this.inventory.owner=null,void(this.inventory=null);null!==e&&(e.owner=this,this.inventory=e)}setInteractable(e){if(null===e&&null!==this.interactable)return this.interactable.owner=null,void(this.interactable=null);null!==e&&(e.owner=this,this.interactable=e)}setInputHandler(e){if(null===e&&null!==this.inputHandler)return this.inputHandler.owner=null,void(this.inputHandler=null);null!==e&&(e.owner=this,this.inputHandler=e)}setTrigger(e){if(null===e&&null!==this.trigger)return this.trigger.owner=null,void(this.trigger=null);null!==e&&(e.owner=this,this.trigger=e)}getSpeed(){return null!==this.fighter?this.fighter.getSpeed():Xt}act(e,t,n){return null!==this.fighter&&this.fighter.act(),null!==this.ai?this.ai.act(e,t,n):new ye(!0)}}function pt(e,t=0,n=0){if(!(e in rn))throw new Error(e+" is not valid object id");const r=rn[e],i=new dt(e,t,n,r.name,r.blocks,r.blocksSight);if(null!==r.ai)switch(r.ai){case"planning_ai":i.setAI(new Ue(r));break;case"chest_ai":i.setAI(new Ve(r));break;case"dropped_item_ai":i.setAI(new Xe);break;case"remove_after_n_turns":i.setAI(new qe(r));break;default:throw new Error("Unhandled AI type "+r.ai)}if(null!==r.graphics)switch(r.graphics){case"player_graphics":i.setGraphics(new nt(r));break;case"basic_graphics":i.setGraphics(new et(r));break;case"transparency_graphics":i.setGraphics(new tt(r));break;case"draw_after_seen":i.setGraphics(new rt(r));break;default:throw new Error("Unhandled Graphics type "+r.graphics)}if(null!==r.lighting){if(null===r.lightingColor||null===r.lightingRange)throw new Error("Cannot set lighting without lightingColor and lightingRange");switch(r.lighting){case"reflectivity":i.setLighting(new ot(r.lightingColor,r.lightingRange));break;case"player_lighting":i.setLighting(new at(r.lightingColor,r.lightingRange));break;default:throw new Error("Unhandled Lighting type "+r.lighting)}}if(null!==r.fighter){let e;switch(r.onDeath){case Qt.Default:e=gt;break;case Qt.RemoveFromWorld:e=mt;break;default:throw new Error("Unhandled onDeath type "+r.onDeath)}switch(r.fighter){case"basic_fighter":i.setFighter(new lt(r,e));break;default:throw new Error("Unhandled Fighter type "+r.fighter)}null!==r.spells&&r.spells.forEach(e=>i.fighter.addSpellById(e))}if(null!==r.inventory){switch(r.inventory){case"basic_inventory":i.setInventory(new Je);break;default:throw new Error("Unhandled Inventory type "+r.inventory)}if(null!==r.inventoryPool)for(let e=0;e<r.inventoryPool.length;e++)a.a.getUniform()<=r.inventoryPool[e].probability&&i.inventory.addItem(r.inventoryPool[e].itemID)}if(null!==r.interactable)switch(r.interactable){case"give_items_interactable":i.setInteractable(new Ye);break;case"give_spell_interactable":i.setInteractable(new Ke);break;case"load_level_interactable":i.setInteractable(new Qe);break;case"door_interactable":i.setInteractable(new Ze);break;default:throw new Error("Unhandled Interactable type "+r.interactable)}if(null!==r.input)switch(r.input){case"player_input":i.setInputHandler(new Fe);break;default:throw new Error("Unhandled Interactable type "+r.interactable)}if(null!==r.trigger)switch(r.trigger){case"fire":if(null===r.triggerValue)throw new Error("Cannot create fire trigger without damage");i.setTrigger(new ht(r.triggerValue,3,5));break;case"event":i.setTrigger(new ft);break;default:throw new Error("Unhandled trigger type "+r.trigger)}return i}function gt(e){if(null===i.Game)throw new Error("Global game object is null");if(Ne(e.name+" has been killed"),e.name="Remains of a "+e.name,e.blocks=!1,e.setGraphics(new et(rn.dead_body)),e.setFighter(null),e.setAI(null),e.setInteractable(null),null!==e.inventory&&e.inventory.getItems().length>0){const t=pt("dropped_item",e.x,e.y);t.inventory=e.inventory,i.Game.addObject(t)}e.inventory=null}function mt(e){if(null===i.Game)throw new Error("Global game object is null");if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter object is null");if(null!==e.inventory&&e.inventory.getItems().length>0){i.gameEventEmitter.emit("tutorial.pickUpItem");const t=pt("dropped_item",e.x,e.y);t.inventory=e.inventory,i.Game.addObject(t)}"crate"===e.type&&i.gameEventEmitter.emit("crate.break"),"barrel"===e.type&&i.gameEventEmitter.emit("barrel.break"),i.Game.removeObject(e)}class vt{constructor(e,t,n,r,i,o,a,l,s=!1,u=!1){this.name=e,this.char=t,this.fgColor=n,this.bgColor=r,this.fgColorExplored=i,this.bgColorExplored=o,this.blocks=a,this.blocksSight=l,this.visible=s,this.explored=u,this.reflectivity=.18,this.lightingColor=r}isVisibleAndLit(){return this.visible&&this.lightingColor!==$t}}class _t{constructor(e,t,n,r){this.pathName=e,this.x=t,this.y=n,this.next=r}}function yt(e,t){if(void 0===e.properties||0===e.properties.length)return null;const n=e.properties.filter(e=>e.name===t);return 0===n.length?null:n[0].value}function wt(e,t,n){return e.filter(e=>e.x===t&&e.y===n)}function bt(e,t,n,r){if(0===e.length)throw new Error("Bad map data");if(n<0||r<0||n>=e[0].length||r>=e.length||e[r][n].blocks)return{object:null,blocks:!0};const i=t.filter(e=>e.x===n&&e.y===r)[0];return void 0!==i?{object:i,blocks:i.blocks}:{object:null,blocks:!1}}function xt(e,t,n,r){if(n>Rt||n<0||r>Ht||r<0)return;let i="",o="";t.blocks?t.isVisibleAndLit()?(i=t.fgColor,o=t.bgColor):t.explored?t.explored&&!t.isVisibleAndLit()&&(i=t.fgColorExplored,o=t.bgColorExplored):(i=Bt,o=Bt):t.isVisibleAndLit()?(i=t.fgColor,o=Object(d.toRGB)(Object(d.multiply)(Object(d.fromString)(t.bgColor),Object(d.fromString)(t.lightingColor)))):t.explored?(i=Ut,o=Ut):(i=zt,o=zt),"black"===i&&"black"===o||e.draw(n,r,t.char,i,o)}function Et(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n**2+r**2)}function Tt(e,t,n,r){const i=t.filter(e=>!Object(ue.isNil)(e.fighter)).filter(e=>!Object(ue.isNil)(e.ai)).filter(e=>e!==n).filter(e=>Et(n,e)<=r);return i.length>0?a.a.getItem(i):null}function kt(e,t=!1,n=!1){for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i].explored=!0,t&&(e[r][i].visible=!0),n&&(e[r][i].lightingColor="white")}function At(e){return function(t){if(null===t.owner||null===t.owner.fighter)return!1;const n=an[e];return t.owner.fighter.getEffectiveStats().mana>=n.manaCost}}function St(e,t){if(null===i.Game)throw new Error("Global game object is null");return wt(i.Game.gameObjects,e,t).length>0?20:0}function Ct(e,t,n,r){const i=new W.AStar(t,n,Be(e),St,{topology:8}),o=[];return i.compute(e.x,e.y,(function(e,t){o.push([e,t])})),o.shift(),o.pop(),o.length>0?o.slice(0,r):null}function jt(e,t,n){if(null===e.owner)throw new Error("No owner on AI for chaseAction");if(null===e.target)throw new Error("Cannot perform chaseAction without a target");const r=rn[e.owner.type].maxTilesPerMove;if(null===r)throw new Error("Missing maxTilesPerMove for "+e.owner.type);const i=Ct(e.owner,e.target.x,e.target.y,r);return null===i||null===i?new ye(!0):new we(i,t,n)}function Mt(e){return function(t,n,r){if(null===t.owner)throw new Error("No owner on AI for castSpellAction");if(null===t.owner.fighter)throw new Error("No fighter on owner for AI for castSpellAction");if(-1===t.owner.fighter.getKnownSpells().map(e=>e.id).indexOf(e))throw new Error(`${t.owner.name} does not know spell ${e}`);return new ke(e,t.target,n,r)}}function It(e,t){if(null===i.Game)throw new Error("Global game object is null");if(null===e.value)throw new Error("Item does not have a healing value");if(null===t.fighter)throw new Error("Cannot heal a user without a fighter");const n=t.fighter.getEffectiveStats();return n.hp>=n.maxHp?(t===i.Game.player?Ne("You are already at full health."):Ne(t.name+" tries and fails to take a health potion"),!1):(t.fighter.heal(e.value),!0)}function Ot(e,t,n,r,i){if(null===e.value)throw new Error("Item does not have a value for castDamageSpell");if(null===n)throw new Error("Target cannot be null for castDamageSpell");if(null===r)throw new Error("Map cannot be null for castDamageSpell");if(null===i)throw new Error("Objects cannot be null for castDamageSpell");const o=Ge(n,r,i);if(null===o)return Ne("Canceled casting"),!1;if(null===o.fighter)return Ne(o.name+" isn't attackable"),!1;if(o.fighter.takeDamage(e.value,!1,e.damageType),null!==o.fighter&&void 0!==e.statusEffectFunc){const t=o.fighter.getEffectiveStats();if(a.a.getUniform()<=t.ailmentSusceptibility){const n=Math.round(.0625*t.maxHp),r=De(3,6);o.fighter.addStatusEffect(e.statusEffectFunc(o,n,r))}}return!0}function Pt(e,t,n,r,o){if(null===i.Game)throw new Error("Global game object is null");if(null===e.value)throw new Error("Item does not have a value");if(null===r)throw new Error("Map cannot be null for castDamageSpell");if(null===o)throw new Error("Objects cannot be null for castDamageSpell");let l;do{l=Tt(0,o,t,16)}while(l===t);if(null===l)return t===i.Game.player&&Ne("No target is close enough to use the scroll"),!1;if(l.fighter.takeDamage(e.value,!1,e.damageType),null!==l.fighter&&void 0!==e.statusEffectFunc){const t=l.fighter.getEffectiveStats();if(a.a.getUniform()<=t.ailmentSusceptibility){const r=Math.round(.0625*t.maxHp),i=De(3,6);l.fighter.addStatusEffect(e.statusEffectFunc(n,r,i))}}return!0}function Gt(e,t,n){if(null===e.value)throw new Error("Item does not have a value");if(null===n.ai)throw new Error("Cannot confuse an object without an AI");Ne(n.name+" is now confused");const r=n.ai;return n.ai=new $e(r,e.value),n.ai.owner=n,!0}function Ft(){if(null===i.Game)throw new Error("Global game object is null");return Ne("You have been granted Clairvoyance"),kt(i.Game.map),!0}function Dt(e,t){if(null===e.value)throw new Error("Item does not have a value");if(null===t.fighter)throw new Error("user of castHaste must have a fighter");return!(t.fighter.getStatisticEffects().filter(e=>"Haste"===e.name).length>0)&&(t.fighter.addStatisticEffect(function(e,t){if(null===e.fighter)throw new Error("user of createHasteEffect must have a fighter");return new ut(e,"Haste",t,{stat:"speed",type:"multiply",value:2})}(t,e.value)),!0)}function Lt(e,t,n){if(null===e.value)throw new Error("Item does not have a value");if(null===n.fighter)throw new Error("target of castSlow must have a fighter");return n.fighter.getStatusEffects().filter(e=>"Slow"===e.name).length>0?(Ne(n.name+" is already slowed"),!1):(Ne("Spell hits and slows "+n.name),n.fighter.addStatisticEffect(function(e,t){if(null===e.fighter)throw new Error("user of createHasteEffect must have a fighter");return new ut(e,"Slow",t,{stat:"speed",type:"multiply",value:.5})}(n,e.value)),!0)}function Nt(e,t,n,r,o,a,l){if(null===i.Game)throw new Error("Global game object is null");if(null===n)throw new Error("Target cannot be null for castWall");if(null===r)throw new Error("Map cannot be null for castWall");if(null===o)throw new Error("Objects cannot be null for castWall");if(null===a&&(a=0),null===e.areaOfEffect)throw new Error("areaOfEffect cannot be null for castWall");for(let t=0;t<e.areaOfEffect.width;t++)for(let s=0;s<e.areaOfEffect.height;s++){let e,u;switch(a){default:case 0:e=n.x+t,u=n.y+s;break;case 90:e=n.x+s,u=n.y+t;break;case 180:e=n.x+t,u=n.y-s;break;case 270:e=n.x-s,u=n.y+t}const{blocks:c,object:h}=bt(r,o,e,u);!0===c&&null===h||i.Game.addObject(pt(l,e,u))}return!0}const Rt=58,Ht=38,Wt=6,Bt="black",zt="black",Ut="rgb(50, 50, 50)",$t="rgb(50, 50, 50)",Vt="#",Xt=10,qt=50,Yt=150;var Kt,Zt,Qt,Jt,en,tn;!function(e){e[e.Physical=0]="Physical",e[e.Fire=1]="Fire",e[e.Electric=2]="Electric",e[e.Water=3]="Water",e[e.Nature=4]="Nature"}(Kt||(Kt={})),function(e){e[e.weak=2]="weak",e[e.normal=1]="normal",e[e.strong=.5]="strong",e[e.nullified=0]="nullified"}(Zt||(Zt={})),function(e){e[e.Default=0]="Default",e[e.RemoveFromWorld=1]="RemoveFromWorld"}(Qt||(Qt={})),function(e){e[e.Gameplay=0]="Gameplay",e[e.OpeningCinematic=1]="OpeningCinematic",e[e.WinCinematic=2]="WinCinematic",e[e.LoseCinematic=3]="LoseCinematic",e[e.PauseMenu=4]="PauseMenu",e[e.InventoryMenu=5]="InventoryMenu",e[e.SpellMenu=6]="SpellMenu"}(Jt||(Jt={})),function(e){e[e.HealSelf=0]="HealSelf",e[e.AddManaSelf=1]="AddManaSelf",e[e.DamageScroll=2]="DamageScroll",e[e.WildDamageScroll=3]="WildDamageScroll",e[e.ClairvoyanceScroll=4]="ClairvoyanceScroll",e[e.ConfuseScroll=5]="ConfuseScroll",e[e.HasteSelf=6]="HasteSelf",e[e.SlowOther=7]="SlowOther"}(en||(en={})),function(e){e[e.DamageOther=0]="DamageOther",e[e.WildDamage=1]="WildDamage",e[e.Effect=2]="Effect",e[e.Passive=3]="Passive",e[e.HealSelf=4]="HealSelf"}(tn||(tn={}));const nn={780:{name:"Gravestone",char:"ߡ",fgColor:"white",bgColor:"brown",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18},900:{name:"empty ground",char:"",fgColor:"white",bgColor:"white",fgColorExplored:Ut,bgColorExplored:Ut,blocks:!1,blocksSight:!1,reflectivity:.18},980:{name:"A stove",char:"⌻",fgColor:"black",bgColor:"brown",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18},1048:{name:"A wall",char:"",fgColor:"#352620",bgColor:"#352620",fgColorExplored:"rgb(20, 20, 20)",bgColorExplored:"rgb(20, 20, 20)",blocks:!0,blocksSight:!0,reflectivity:.18},1165:{name:"A tree",char:"ቸ",fgColor:"lightgreen",bgColor:"darkgreen",fgColorExplored:"grey",bgColorExplored:"black",blocks:!0,blocksSight:!0,reflectivity:.18},1543:{name:"bed",char:"▃",fgColor:"gold",bgColor:"white",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18},2710:{name:"A table",char:"Π",fgColor:"tan",bgColor:"brown",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18},2869:{name:"A chair",char:"п",fgColor:"black",bgColor:"brown",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18},2936:{name:"A cabinet",char:"⌹",fgColor:"black",bgColor:"brown",fgColorExplored:"white",bgColorExplored:"black",blocks:!0,blocksSight:!1,reflectivity:.18}};Object.freeze(nn);const rn={door:{name:"Door",blocks:!0,blocksSight:!0,char:"ᢂ",fgColor:"white",bgColor:"brown",graphics:"basic_graphics",ai:null,removeAfterNTurns:null,inventory:null,fighter:null,input:null,lighting:null,lightingColor:null,lightingRange:null,interactable:"door_interactable",emptyColor:null,trigger:null,triggerValue:null,level:null,experience:null,experienceGiven:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,actions:null,spells:null},load_door:{name:"Door to new area",blocks:!0,blocksSight:!0,char:"ᢂ",fgColor:"white",bgColor:"black",emptyColor:null,graphics:"draw_after_seen",ai:null,removeAfterNTurns:null,inventory:null,fighter:null,interactable:"load_level_interactable",input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,experience:null,experienceGiven:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,actions:null,spells:null},stairs:{name:"Stairs",char:"ᝐ",fgColor:"white",bgColor:"black",emptyColor:null,blocks:!0,blocksSight:!1,graphics:"draw_after_seen",ai:null,removeAfterNTurns:null,inventory:null,fighter:null,interactable:"load_level_interactable",input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,experience:null,experienceGiven:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,actions:null,spells:null},chest:{name:"Chest",char:"*",fgColor:"white",bgColor:"brown",emptyColor:"purple",blocks:!0,blocksSight:!1,graphics:"draw_after_seen",ai:"chest_ai",removeAfterNTurns:null,fighter:null,inventory:"basic_inventory",interactable:"give_items_interactable",input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,experience:null,experienceGiven:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,actions:null,spells:null},crate:{name:"Wooden Crate",char:"☒",fgColor:"white",bgColor:"brown",emptyColor:"purple",blocks:!0,blocksSight:!1,graphics:"basic_graphics",ai:null,removeAfterNTurns:null,fighter:"basic_fighter",speed:Xt,experience:0,experienceGiven:0,maxHp:5,strength:0,defense:0,onDeath:Qt.RemoveFromWorld,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.weak,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventory:"basic_inventory",input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,maxMana:null,inventoryPool:null,actions:null,spells:null,interactable:null},barrel:{name:"Wooden Barrel",blocks:!0,blocksSight:!1,char:"⌭",fgColor:"white",bgColor:"brown",emptyColor:"purple",graphics:"basic_graphics",ai:null,removeAfterNTurns:null,fighter:"basic_fighter",speed:Xt,inventory:"basic_inventory",interactable:null,experience:0,experienceGiven:0,maxHp:3,strength:0,defense:0,onDeath:Qt.RemoveFromWorld,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.weak,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,maxMana:null,inventoryPool:null,actions:null,spells:null},dead_body:{name:"Dead Body",char:"%",fgColor:"black",bgColor:"red",emptyColor:null,blocks:!1,blocksSight:!1,graphics:"basic_graphics",ai:null,removeAfterNTurns:null,fighter:null,inventory:null,interactable:null,input:null,lighting:null,lightingColor:null,lightingRange:null,trigger:null,triggerValue:null,level:null,experience:null,experienceGiven:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,actions:null,spells:null},lantern:{name:"Small Lantern",char:"ᛡ",fgColor:"black",bgColor:"yellow",emptyColor:null,blocks:!0,blocksSight:!1,graphics:"basic_graphics",lighting:"reflectivity",lightingColor:"yellow",lightingRange:4,ai:null,removeAfterNTurns:null,fighter:null,level:null,experience:null,experienceGiven:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,inventory:null,interactable:null,input:null,trigger:null,triggerValue:null,sightRange:null,maxTilesPerMove:null,loseTrackAfterNTurns:null,actions:null,spells:null},campfire:{name:"Small Fire",char:"ж",fgColor:"black",bgColor:"orange",emptyColor:null,blocks:!1,blocksSight:!1,graphics:"basic_graphics",lighting:"reflectivity",lightingColor:"orange",lightingRange:6,ai:null,removeAfterNTurns:null,loseTrackAfterNTurns:null,actions:null,spells:null,sightRange:null,maxTilesPerMove:null,fighter:null,level:null,experience:null,experienceGiven:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,inventory:null,interactable:null,input:null,trigger:"fire",triggerValue:10},fire_effect:{name:"Fire",char:"ж",fgColor:"black",bgColor:"orange",emptyColor:null,blocks:!1,blocksSight:!1,graphics:"basic_graphics",lighting:"reflectivity",lightingColor:"orange",lightingRange:4,ai:"remove_after_n_turns",removeAfterNTurns:5,loseTrackAfterNTurns:null,actions:null,spells:null,sightRange:null,maxTilesPerMove:null,fighter:null,level:null,experience:null,experienceGiven:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,inventory:null,interactable:null,input:null,trigger:"fire",triggerValue:10},ice_wall:{name:"Ice Wall",char:"⁂",fgColor:"black",bgColor:"lightblue",emptyColor:null,blocks:!0,blocksSight:!0,graphics:"basic_graphics",lighting:null,lightingColor:null,lightingRange:null,ai:null,removeAfterNTurns:null,loseTrackAfterNTurns:null,actions:null,spells:null,sightRange:null,maxTilesPerMove:null,fighter:"basic_fighter",level:1,experience:0,experienceGiven:0,speed:Xt,maxHp:10,maxMana:0,strength:null,defense:0,onDeath:Qt.RemoveFromWorld,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.weak,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.nullified,[Kt.Nature]:Zt.normal},inventoryPool:[],inventory:null,interactable:null,input:null,trigger:"fire",triggerValue:10},dropped_item:{name:"Dropped Item",char:"!",fgColor:"white",bgColor:"brown",emptyColor:null,blocks:!1,blocksSight:!1,graphics:"basic_graphics",input:null,ai:"dropped_item_ai",removeAfterNTurns:null,loseTrackAfterNTurns:null,actions:null,spells:null,sightRange:null,maxTilesPerMove:null,inventory:null,fighter:null,lighting:null,lightingColor:null,lightingRange:null,level:null,experience:null,experienceGiven:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,interactable:"give_items_interactable",trigger:null,triggerValue:null},magic_shrine:{name:"Magicka Shrine",char:"۞",fgColor:"black",bgColor:"gold",emptyColor:null,blocks:!0,blocksSight:!1,graphics:"basic_graphics",lighting:null,lightingColor:null,lightingRange:null,inventory:null,input:null,ai:null,removeAfterNTurns:null,loseTrackAfterNTurns:null,actions:null,spells:null,sightRange:null,maxTilesPerMove:null,fighter:null,level:null,experience:null,experienceGiven:null,speed:null,maxHp:null,maxMana:null,strength:null,defense:null,onDeath:null,damageAffinity:null,inventoryPool:null,interactable:"give_spell_interactable",trigger:null,triggerValue:null},event_trigger:{name:null,graphics:null,lighting:null,lightingColor:null,lightingRange:null,ai:null,removeAfterNTurns:null,sightRange:null,loseTrackAfterNTurns:null,spells:null,actions:null,input:null,inventory:null,fighter:null,speed:Xt,maxTilesPerMove:null,interactable:null,char:null,fgColor:null,bgColor:null,emptyColor:null,blocks:!1,blocksSight:!1,level:null,experience:null,experienceGiven:null,maxHp:null,maxMana:null,strength:null,defense:null,damageAffinity:null,onDeath:null,inventoryPool:null,trigger:"event",triggerValue:null},player:{name:"The Player",graphics:"player_graphics",lighting:"player_lighting",lightingColor:"white",lightingRange:7,ai:null,removeAfterNTurns:null,sightRange:null,loseTrackAfterNTurns:null,spells:null,actions:null,input:"player_input",inventory:"basic_inventory",fighter:"basic_fighter",speed:Xt,maxTilesPerMove:7,interactable:null,char:"@",fgColor:"blue",bgColor:null,emptyColor:null,blocks:!0,blocksSight:!1,level:1,experience:0,experienceGiven:0,maxHp:100,maxMana:100,strength:3,defense:1,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},onDeath:Qt.Default,inventoryPool:null,trigger:null,triggerValue:null},goblin:{name:"Goblin",char:"G",fgColor:"green",bgColor:null,emptyColor:null,graphics:"transparency_graphics",ai:"planning_ai",removeAfterNTurns:null,sightRange:10,loseTrackAfterNTurns:6,maxTilesPerMove:5,actions:["wander","chase","goToEnemy","meleeAttack"],spells:null,input:null,lighting:null,lightingColor:null,lightingRange:null,fighter:"basic_fighter",speed:Xt,inventory:"basic_inventory",interactable:null,blocks:!0,blocksSight:!1,level:3,experience:0,experienceGiven:50,maxHp:30,maxMana:0,strength:3,defense:1,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventoryPool:[{itemID:"health_potion_weak",probability:.25}],onDeath:Qt.Default,trigger:null,triggerValue:null},goblin_brute:{name:"Goblin Brute",blocks:!0,blocksSight:!1,char:"G",fgColor:"green",bgColor:"red",emptyColor:null,graphics:"basic_graphics",ai:"planning_ai",removeAfterNTurns:null,sightRange:10,maxTilesPerMove:5,loseTrackAfterNTurns:6,actions:["guard","chase","useHealingItem","goToEnemy","reposition","meleeAttack"],spells:null,input:null,fighter:"basic_fighter",level:10,experience:0,experienceGiven:500,maxHp:100,maxMana:0,strength:7,defense:4,speed:Xt,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventoryPool:[{itemID:"health_potion_weak",probability:.25},{itemID:"health_potion",probability:.1}],onDeath:Qt.Default,inventory:"basic_inventory",interactable:null,lighting:null,lightingRange:null,lightingColor:null,trigger:null,triggerValue:null},rat:{name:"Rat",graphics:"transparency_graphics",char:"r",fgColor:"brown",bgColor:null,emptyColor:null,input:null,ai:"planning_ai",removeAfterNTurns:null,sightRange:9,maxTilesPerMove:4,loseTrackAfterNTurns:6,actions:["wander","chase","goToEnemy","meleeAttack"],spells:null,fighter:"basic_fighter",level:1,experience:0,experienceGiven:10,maxHp:10,maxMana:0,strength:2,defense:1,speed:Xt,inventory:"basic_inventory",interactable:null,blocks:!0,blocksSight:!1,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventoryPool:[],onDeath:Qt.Default,lighting:null,lightingRange:null,lightingColor:null,trigger:null,triggerValue:null},water_sprite:{name:"Water Sprite",graphics:"basic_graphics",char:"s",fgColor:"white",bgColor:"blue",emptyColor:null,input:null,ai:"planning_ai",removeAfterNTurns:null,sightRange:9,maxTilesPerMove:7,loseTrackAfterNTurns:6,actions:["wander","chase","goToEnemy","meleeAttack"],spells:null,fighter:"basic_fighter",speed:Xt,inventory:"basic_inventory",interactable:null,blocks:!0,blocksSight:!1,level:1,experience:0,experienceGiven:10,maxHp:10,maxMana:0,strength:2,defense:1,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.strong,[Kt.Electric]:Zt.weak,[Kt.Water]:Zt.nullified,[Kt.Nature]:Zt.normal},inventoryPool:[],onDeath:Qt.Default,lighting:null,lightingRange:null,lightingColor:null,trigger:null,triggerValue:null},bandit:{name:"Bandit",blocks:!0,blocksSight:!1,graphics:"basic_graphics",char:"b",fgColor:"white",bgColor:"brown",emptyColor:null,input:null,ai:"planning_ai",removeAfterNTurns:null,sightRange:10,maxTilesPerMove:5,loseTrackAfterNTurns:6,actions:["guard","chase","useHealingItem","goToEnemy","reposition","runAway","cower","meleeAttack"],spells:null,fighter:"basic_fighter",speed:Xt,inventory:"basic_inventory",interactable:null,level:1,experience:0,experienceGiven:10,maxHp:30,maxMana:0,strength:2,defense:1,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventoryPool:[{itemID:"health_potion_weak",probability:.25}],onDeath:Qt.Default,lighting:null,lightingRange:null,lightingColor:null,trigger:null,triggerValue:null},bandit_mage:{name:"Bandit Mage",graphics:"basic_graphics",char:"b",fgColor:"white",bgColor:"blue",emptyColor:null,input:null,ai:"planning_ai",removeAfterNTurns:null,sightRange:8,maxTilesPerMove:5,loseTrackAfterNTurns:6,spells:["fireball","lesser_heal"],actions:["wander","chase","useHealingItem","useManaItem","goToEnemy","reposition","runAway","cower","meleeAttack"],fighter:"basic_fighter",level:5,experience:0,experienceGiven:100,maxHp:30,maxMana:100,strength:2,defense:1,speed:Xt,damageAffinity:{[Kt.Physical]:Zt.normal,[Kt.Fire]:Zt.normal,[Kt.Electric]:Zt.normal,[Kt.Water]:Zt.normal,[Kt.Nature]:Zt.normal},inventory:"basic_inventory",interactable:null,blocks:!0,blocksSight:!1,inventoryPool:[],onDeath:Qt.Default,lighting:null,lightingRange:null,lightingColor:null,trigger:null,triggerValue:null}},on={health_potion_weak:{displayName:"Weak Potion of Healing",value:25,type:en.HealSelf,damageType:null,areaOfEffect:null,useFunc:It,statusEffectFunc:null},health_potion:{displayName:"Potion of Healing",value:50,type:en.HealSelf,damageType:null,areaOfEffect:null,useFunc:It,statusEffectFunc:null},health_potion_strong:{displayName:"Strong Potion of Healing",value:100,type:en.HealSelf,damageType:null,areaOfEffect:null,useFunc:It,statusEffectFunc:null},mana_potion_weak:{displayName:"Weak Potion of Mana",value:25,type:en.AddManaSelf,damageType:null,areaOfEffect:null,useFunc:function(e,t){if(null===i.Game)throw new Error("Global game object is null");if(null===e.value)throw new Error("Item does not have a value");if(null===t.fighter)throw new Error("Cannot increase mana on a user without a fighter");const n=t.fighter.getEffectiveStats();return n.mana>=n.maxMana?(t===i.Game.player?Ne("You are already at full mana."):Ne(t.name+" tries and fails to take a mana potion"),!1):(t.fighter.addMana(e.value),!0)},statusEffectFunc:null},lightning_scroll_weak:{displayName:"Weak Scroll of Lightning",value:20,type:en.DamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Ot,statusEffectFunc:null},lightning_scroll:{displayName:"Scroll of Lightning",value:50,type:en.DamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Ot,statusEffectFunc:null},lightning_scroll_strong:{displayName:"Strong Scroll of Lightning",value:100,type:en.DamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Ot,statusEffectFunc:null},fireball_scroll_weak:{displayName:"Weak Scroll of Fire",value:20,type:en.DamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Ot,statusEffectFunc:ct},fireball_scroll:{displayName:"Scroll of Fire",value:50,type:en.DamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Ot,statusEffectFunc:ct},fireball_scroll_strong:{displayName:"Strong Scroll of Fire",value:100,type:en.DamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Ot,statusEffectFunc:ct},lightning_scroll_weak_wild:{displayName:"Weak Scroll of Wild Lightning",value:50,type:en.WildDamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Pt,statusEffectFunc:null},lightning_scroll_wild:{displayName:"Scroll of Wild Lightning",value:100,type:en.WildDamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Pt,statusEffectFunc:null},lightning_scroll_strong_wild:{displayName:"Strong Scroll of Wild Lightning",value:150,type:en.WildDamageScroll,damageType:Kt.Electric,areaOfEffect:null,useFunc:Pt,statusEffectFunc:null},fireball_scroll_weak_wild:{displayName:"Weak Scroll of Wild Fire",value:50,type:en.WildDamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Pt,statusEffectFunc:ct},fireball_scroll_wild:{displayName:"Scroll of Wild Fire",value:100,type:en.WildDamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Pt,statusEffectFunc:ct},fireball_scroll_strong_wild:{displayName:"Strong Scroll of Wild Fire",value:150,type:en.WildDamageScroll,damageType:Kt.Fire,areaOfEffect:null,useFunc:Pt,statusEffectFunc:ct},confuse_scroll:{displayName:"Scroll of Confuse Enemy",value:8,type:en.ConfuseScroll,damageType:null,areaOfEffect:null,useFunc:Gt,statusEffectFunc:null},clairvoyance_scroll:{displayName:"Scroll of Clairvoyance",value:null,type:en.ClairvoyanceScroll,damageType:null,areaOfEffect:null,useFunc:Ft,statusEffectFunc:null},haste_potion_weak:{displayName:"Weak Potion of Haste",value:5,type:en.HasteSelf,damageType:null,areaOfEffect:null,useFunc:Dt,statusEffectFunc:null},slow_poison_weak:{displayName:"Weak Poison of Slow",value:5,type:en.SlowOther,damageType:null,areaOfEffect:null,useFunc:Lt,statusEffectFunc:null}},an={lightning_bolt:{displayName:"Lightning Bolt",manaCost:10,value:20,type:tn.DamageOther,damageType:Kt.Electric,areaOfEffect:null,useFunc:Ot},wild_lightning_bolt:{displayName:"Wild Lightning Bolt",manaCost:10,value:30,type:tn.WildDamage,damageType:Kt.Electric,areaOfEffect:null,useFunc:Pt},fireball:{displayName:"Fireball",manaCost:50,value:20,type:tn.DamageOther,damageType:Kt.Fire,areaOfEffect:null,useFunc:Ot,statusEffectFunc:ct},wild_fireball:{displayName:"Wild Fireball",manaCost:10,value:30,type:tn.WildDamage,damageType:Kt.Fire,areaOfEffect:null,useFunc:Pt},confuse:{displayName:"Confuse",manaCost:20,value:8,type:tn.DamageOther,damageType:null,areaOfEffect:null,useFunc:Gt},clairvoyance:{displayName:"Clairvoyance",manaCost:20,value:null,type:tn.Passive,damageType:null,areaOfEffect:null,useFunc:Ft},lesser_heal:{displayName:"Lesser Heal",manaCost:10,value:25,type:tn.HealSelf,damageType:null,areaOfEffect:null,useFunc:It},heal:{displayName:"Heal",manaCost:30,value:50,type:tn.HealSelf,damageType:null,areaOfEffect:null,useFunc:It},greater_heal:{displayName:"Greater Heal",manaCost:50,value:100,type:tn.HealSelf,damageType:null,areaOfEffect:null,useFunc:It},lesser_haste:{displayName:"Lesser Haste",manaCost:30,value:10,type:tn.Effect,damageType:null,areaOfEffect:null,useFunc:Dt},lesser_slow:{displayName:"Lesser Slow",manaCost:30,value:10,type:tn.DamageOther,damageType:null,areaOfEffect:null,useFunc:Lt},fire_wall:{displayName:"Wall of Fire",manaCost:30,value:10,type:tn.DamageOther,damageType:Kt.Fire,areaOfEffect:{width:1,height:6},useFunc:function(e,t,n,r,i,o){return Nt(e,0,n,r,i,o,"fire_effect")}},ice_wall:{displayName:"Wall of Ice",manaCost:30,value:null,type:tn.DamageOther,damageType:null,areaOfEffect:{width:1,height:6},useFunc:function(e,t,n,r,i,o){return Nt(e,0,n,r,i,o,"ice_wall")}}},ln={targetPositionKnown:{resolver:function(e){return!0===e.knowsTargetPosition}},targetInLineOfSight:{resolver:function(e){return!0===e.hasTargetInSight}},nextToTarget:{resolver:function(e){return null!==e.owner&&null!==e.target&&Et(e.owner,e.target)<1.5}},lowMana:{resolver:function(e){if(null===e.owner||null===e.owner.fighter)return!1;const t=e.owner.fighter.getEffectiveStats();return t.mana/t.maxMana<=e.lowManaThreshold}},lowHealth:{resolver:function(e){if(null===e.owner||null===e.owner.fighter)return!1;const t=e.owner.fighter.getEffectiveStats();return t.hp/t.maxHp<=e.lowHealthThreshold}},hasArrows:{resolver:function(){return!1}},hasManaItem:{resolver:function(e){return null!==e.owner&&null!==e.owner.inventory&&e.owner.inventory.getItems().filter(e=>e.type===en.AddManaSelf).length>0}},hasHealingItem:{resolver:function(e){return null!==e.owner&&null!==e.owner.inventory&&e.owner.inventory.getItems().filter(e=>e.type===en.HealSelf).length>0}},inDangerousArea:{resolver:function(){return!1}},targetKilled:{resolver:function(e){return null!==e.target&&null===e.target.fighter}},afraid:{resolver:function(e){return e.fear>=e.fearThreshold}},cowering:{resolver:function(e){return!0===e.isCowering}},atFallbackPosition:{resolver:function(e){return!0===e.isAtFallbackPosition}}},sn={wander:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:function(e,t,n){var r,i;if(null===e.owner)throw new Error("No owner on AI for wanderAction");let o=!0,l=null,s=0,u=0,c=null!==(r=a.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==r?r:0;do{c=null!==(i=a.a.getItem([0,1,2,3,4,5,6,7]))&&void 0!==i?i:0,s=e.owner.x+j[8][c][0],u=e.owner.y+j[8][c][1],({blocks:o,object:l}=bt(t,n,s,u))}while(!0===o||null!==l);return new we([[s,u]],t,n)},weight:()=>1},guard:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:()=>new ye(!0),weight:()=>1},patrol:{preconditions:{targetPositionKnown:!1},postconditions:{targetPositionKnown:!0},updateFunction:function(e,t,n,r){var i;if(null===e.pathName)throw new Error("pathName not set for PatrollingMonsterAI");if(null===e.owner)throw new Error("No owner on AI for patrolAction");if(null===e.patrolTarget){const t=[...r.values()].filter(t=>t.pathName===e.pathName).map(t=>(t.distance=Et(t,e.owner),t)).sort((e,t)=>e.distance-t.distance);e.patrolTarget=Object(ue.get)(t,"[0]",null)}if(null===e.patrolTarget)return new ye(!0);let o=Ct(e.owner,e.patrolTarget.x,e.patrolTarget.y,2);if(null===o){if(e.patrolTarget=null!==(i=r.get(e.patrolTarget.next))&&void 0!==i?i:null,null===e.patrolTarget)return new ye(!0);o=Ct(e.owner,e.patrolTarget.x,e.patrolTarget.y,2)}return null===o?new ye(!0):new we(o,t,n)},weight:()=>1},chase:{preconditions:{targetPositionKnown:!0,targetInLineOfSight:!1},postconditions:{targetInLineOfSight:!0},updateFunction:jt,weight:()=>1},useManaItem:{preconditions:{lowMana:!0,hasManaItem:!0},postconditions:{lowMana:!1},updateFunction:function(e){if(null===e.owner)throw new Error("No owner on AI for useManaItemAction");if(null===e.owner.inventory)throw new Error("No inventory on owner for AI for useManaItemAction");const t=e.owner.inventory.getItems().filter(e=>e.type===en.AddManaSelf).sort((e,t)=>e.value-t.value)[0];return Ne(`${e.owner.name} used a ${t.displayName}`),new Te(t.id)},weight:()=>1},useHealingItem:{preconditions:{lowHealth:!0,hasHealingItem:!0},postconditions:{lowHealth:!1},updateFunction:function(e){if(null===e.owner)throw new Error("No owner on AI for useHealingItemAction");if(null===e.owner.inventory)throw new Error("No inventory on owner for AI for castSpellAction");const t=e.owner.inventory.getItems().filter(e=>e.type===en.HealSelf).sort((e,t)=>e.value-t.value)[0];return Ne(`${e.owner.name} used a ${t.displayName}`),new Te(t.id)},weight:()=>1},goToEnemy:{preconditions:{targetPositionKnown:!0,nextToTarget:!1},postconditions:{nextToTarget:!0},updateFunction:jt,weight:function(e){if(null===e.owner)throw new Error("No owner on AI for chaseWeight");if(null===e.target)throw new Error("Cannot find chaseWeight without a target");return Et(e.owner,e.target)}},meleeAttack:{preconditions:{nextToTarget:!0,targetKilled:!1},postconditions:{targetKilled:!0},updateFunction:function(e){if(null===e.owner)throw new Error("No owner on AI for meleeAttackAction");if(null===e.target)throw new Error("Cannot perform meleeAttackAction without a target");return new be(e.target)},weight:()=>1},reposition:{preconditions:{inDangerousArea:!0},postconditions:{inDangerousArea:!1},updateFunction:()=>new ye(!0),weight:()=>1},runAway:{preconditions:{afraid:!0},postconditions:{afraid:!1},updateFunction:()=>new ye(!0),weight:()=>1},cower:{preconditions:{afraid:!1,cowering:!1},postconditions:{cowering:!0},updateFunction:()=>new ye(!0),weight:()=>1},goToFallbackPosition:{preconditions:{atFallbackPosition:!1},postconditions:{atFallbackPosition:!0},updateFunction:()=>new ye(!0),weight:()=>1}};for(const e in an){const t=an[e],n="enoughManaFor_"+e,r="castSpell_"+e;t.type===tn.DamageOther?(ln[n]={resolver:At(e)},sn[r]={preconditions:{[n]:!0,targetInLineOfSight:!0,targetKilled:!1},postconditions:{targetKilled:!0},updateFunction:Mt(e),weight:()=>1}):t.type===tn.HealSelf&&(ln[n]={resolver:At(e)},sn[r]={preconditions:{lowHealth:!0,[n]:!0},postconditions:{lowHealth:!1},updateFunction:Mt(e),weight:()=>1})}for(const e in rn){const t=rn[e];if(null!==t.spells&&null!==t.actions)for(let e=0;e<t.spells.length;e++){const n=t.spells[e];t.actions.push("castSpell_"+n)}}const un={forrest_001:ae,durdwin_001:le,dev_room:se};class cn{constructor(){this.x=0,this.y=0,this.following=null}follow(e){this.following=e}update(e){null!==this.following&&(this.x=Math.floor(this.following.x-Rt/2),this.y=Math.floor(this.following.y-(Ht-Wt)/2),this.x=Math.max(0,Math.min(this.x,e.length)),this.y=Math.max(0,Math.min(this.y,e[0].length)))}worldToScreen(e,t){return{x:e-this.x,y:t-this.y}}screenToWorld(e,t){return{x:e+this.x,y:t+this.y}}}const hn={movement:!1,attack:!1,inventory:!1,pickUpItem:!1,spellMenu:!1,spellTargeting:!1,wildSpells:!1};function fn(){hn.movement||(Ne("Move by clicking where you want to go.",Ie.Tutorial),hn.movement=!0)}function dn(){hn.attack||(Ne("Click enemy's to attack",Ie.Tutorial),J(),hn.attack=!0)}function pn(){hn.inventory||(Ne("Use i to open your inventory",Ie.Tutorial),J(),hn.inventory=!0)}function gn(){hn.spellMenu||(Ne("Press m to open your spells",Ie.Tutorial),J(),hn.spellMenu=!0)}function mn(){hn.pickUpItem||(Ne("Click on a dropped item to pick it up",Ie.Tutorial),J(),hn.pickUpItem=!0)}function vn(){hn.spellTargeting||(Ne("Left click on an enemy to target it, click elsewhere to cancel",Ie.Tutorial),J(),hn.spellTargeting=!0)}function _n(){hn.wildSpells||(Ne("Wild spells will randomly target an enemy within range. Use them carefully.",Ie.Tutorial),J(),hn.wildSpells=!0)}i.gameEventEmitter=new o.EventEmitter;i.window=window,i.document=document,i.Game=new class{constructor(){if(null===i.document)throw new Error("Global document cannot be null");if(this.state=Jt.OpeningCinematic,this.canvas=null,this.display=null,this.player=pt("player",1,1),this.currentActor=null,this.currentCommand=null,this.scheduler=new D,this.gameObjects=[],this.map=[],this.pathNodes=new Map,this.totalTurns=1,this.processAI=!0,this.isLightingEnabled=!0,this.display=new O({width:Rt,height:Ht,fontSize:14,forceSquareRatio:!0}),this.canvas=this.display.getContainer(),null===this.canvas)throw new Error("this.canvas cannot be null");const e=i.document.getElementById("canvas");if(null===e)throw new Error("this.canvas cannot be null");e.prepend(this.canvas);const t=i.document.getElementById("loading");if(null===t||null===t.parentNode)throw new Error("this.canvas cannot be null");t.parentNode.removeChild(t),this.keyBindingMenu=new We,this.inventoryMenu=new Re,this.spellSelectionMenu=new He,this.gameCamera=new cn}reset(){if(null===i.document)throw new Error("Global document cannot be null");this.player=pt("player",1,1),this.map=[],this.gameObjects=[],this.totalTurns=1,this.scheduler.clear(),this.scheduler.add(this.player,!0),this.gameCamera.follow(this.player),this.loadLevel("forrest_001");const e=i.document.getElementById("log");null!==e&&(e.innerHTML="")}async startGameplay(){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");null!==this.display&&this.display.drawText(Rt-(Rt-28),22,"%c{white}Loading Sounds");try{await async function(){await Promise.all([new Promise((function(e,t){U.uiClick=new z.Howl({src:["bin/sounds/click.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.uiRollover=new z.Howl({src:["bin/sounds/rollover.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.bookFlip=new z.Howl({src:["bin/sounds/book_flip.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.bookFlip2=new z.Howl({src:["bin/sounds/book_flip2.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.handleLeather=new z.Howl({src:["bin/sounds/handle_small_leather1.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.handleLeather2=new z.Howl({src:["bin/sounds/handle_small_leather2.mp3"],onload:e,onloaderror:t})})),new Promise((function(e,t){U.ping=new z.Howl({src:["bin/sounds/ping.mp3"],onload:e,onloaderror:t,volume:.2})})),new Promise((function(e,t){U.doorOpening=new z.Howl({src:["bin/sounds/door_open.mp3"],onload:e,onloaderror:t,volume:.5})})),new Promise((function(e,t){U.chestOpening=new z.Howl({src:["bin/sounds/chest_open.mp3"],onload:e,onloaderror:t,volume:.5})})),new Promise((function(e,t){U.boxBreaking=new z.Howl({src:["bin/sounds/box_break.mp3"],onload:e,onloaderror:t,volume:.1})})),new Promise((function(e,t){U.forrestTheme=new z.Howl({src:["bin/sounds/water_prelude.mp3"],onload:e,onloaderror:t,volume:0,loop:!0})}))])}()}catch(e){return void(null!==this.display&&(this.display.clear(),this.display.drawText(Rt-(Rt-10),22,"%c{white}Error loading game files, please reload the page")))}U.caveTheme=new z.Howl({src:["bin/sounds/unpromised.mp3"],volume:0,loop:!0}),i.gameEventEmitter.on("ui.openInventory",Z),i.gameEventEmitter.on("ui.closeInventory",Q),i.gameEventEmitter.on("ui.openSpells",Y),i.gameEventEmitter.on("ui.closeSpells",K),i.gameEventEmitter.on("ui.openKeybinding",ie),i.gameEventEmitter.on("ui.openKeybinding",X),i.gameEventEmitter.on("ui.closeKeybinding",oe),i.gameEventEmitter.on("ui.closeKeybinding",X),i.gameEventEmitter.on("ui.select",X),i.gameEventEmitter.on("ui.cursorMove",q),i.gameEventEmitter.on("level.loaded",re),i.gameEventEmitter.on("door.open",ee),i.gameEventEmitter.on("chest.open",te),i.gameEventEmitter.on("crate.break",ne),i.gameEventEmitter.on("barrel.break",ne),i.gameEventEmitter.on("tutorial.start",fn),i.gameEventEmitter.on("tutorial.attacking",dn),i.gameEventEmitter.on("tutorial.inventory",pn),i.gameEventEmitter.on("tutorial.spellMenu",gn),i.gameEventEmitter.on("tutorial.pickUpItem",mn),i.gameEventEmitter.on("tutorial.spellTargeting",vn),i.gameEventEmitter.on("tutorial.wildSpells",_n),this.scheduler.add(this.player,!0),this.gameCamera.follow(this.player),Pe.init(),this.lastTimestamp=performance.now(),this.mainLoop(performance.now())}render(){if(null===this.display)throw new Error("Cannot render without a display");if(null===this.player)throw new Error("Cannot render without a player");switch(this.state){case Jt.Gameplay:if(this.display.clear(),this.gameCamera.update(this.map),this.isLightingEnabled){!function(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)e[t][n].visible=!1,e[t][n].lightingColor=$t}(this.map);for(let e=0;e<this.gameObjects.length;e++){const t=this.gameObjects[e];null!==t.lighting&&t.lighting.compute(this.map)}}else kt(this.map,!0,!0);!function(e,t,n){for(let r=0;r<n.length;r++)for(let i=0;i<n[r].length;i++){const{x:o,y:a}=t.worldToScreen(i,r);xt(e,n[r][i],o,a)}}(this.display,this.gameCamera,this.map),this.gameObjects.filter(e=>null!==e.graphics).sort((e,t)=>null===e.fighter&&null!==t.fighter||null===e.fighter&&null===t.fighter?-1:null!==e.fighter&&null===t.fighter?1:0).forEach(e=>e.graphics.draw(this.display,this.gameCamera,this.map,this.gameObjects)),function(e,t,n,r){if(null===t.fighter)throw new Error("Player must have a fighter");if(null===t.inputHandler)throw new Error("Player must have a inputHandler");for(let t=0;t<Rt;t++)for(let n=0;n<Wt;n++)e.draw(t,Ht-(Wt-n),Vt,"blue","blue");const i=t.fighter.getEffectiveStats();e.drawText(1,Ht-Wt,`%c{white}%b{blue}HP: ${i.hp}/${i.maxHp}`),e.drawText(14,Ht-Wt,`%c{white}%b{blue}Mana: ${i.mana}/${i.maxMana}`),e.drawText(30,Ht-Wt,"%c{white}%b{blue}STR: "+i.strength),e.drawText(38,Ht-Wt,"%c{white}%b{blue}DEF: "+i.defense),e.drawText(46,Ht-Wt,`%c{white}%b{blue}EXP: ${t.fighter.experience}/${qt+t.fighter.level*Yt}`),e.drawText(23,Ht-Wt+2,"%c{white}%b{blue}"+Me[t.inputHandler.state]);const o=Pe.getMousePosition();if(null===o)return;const{x:a,y:l}=o;if(a<0||l<0||a>=r[0].length||l>=r.length)return;const s=Object(ue.get)(wt(n,a,l),"[0]",null),u=r[l][a];if(null==u?void 0:u.isVisibleAndLit())if(null===s||null===s.name)e.drawText(1,Ht-Wt+4,"%c{white}%b{blue}"+u.name);else if(null!==s.ai&&null!==s.fighter){const t=s.fighter.getEffectiveStats();e.drawText(1,Ht-Wt+4,`%c{white}%b{blue}A ${s.name} (${t.hp}/${t.maxHp}) (${s.ai.getStateName()})`)}else e.drawText(1,Ht-Wt+4,"%c{white}%b{blue}A "+s.name)}(this.display,this.player,this.gameObjects,this.map);break;case Jt.PauseMenu:if(null===this.player.inputHandler)break;this.keyBindingMenu.draw(this.player.inputHandler.keyCommands);break;case Jt.InventoryMenu:if(null===this.player.inventory)break;this.inventoryMenu.draw(this.player.inventory.getItems());break;case Jt.SpellMenu:if(null===this.player.fighter)break;this.spellSelectionMenu.draw(this.player.fighter.getKnownSpells());break;case Jt.OpeningCinematic:this.display.clear(),this.display.drawText(Rt-(Rt-18),15,"%c{white}Press [enter] to start");break;case Jt.LoseCinematic:this.display.clear(),this.display.drawText(Rt-(Rt-23),12,"%c{white}You have died"),this.display.drawText(Rt-(Rt-18),15,"%c{white}Press [enter] to start");break;case Jt.WinCinematic:this.display.clear(),this.display.drawText(Rt-(Rt-18),15,"%c{white}Press [enter] to restart the game");break;default:Le(this.state)}this.display.drawWithCache()}loadLevel(e){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");const{map:t,playerLocation:n,objects:r,pathNodes:o}=function(e){if(!(e in un))throw new Error(e+" is not a valid level");const t=un[e],n=t.tileheight,r=[],i=[],o=new Map,a=new Map;let l=[0,0];const s=Object(ue.get)(t.layers.filter(e=>"Tile Layer"===e.name),"[0]"),u=Object(ue.get)(t.layers.filter(e=>"Object Layer"===e.name),"[0]"),c=Object(ue.get)(t.layers.filter(e=>"Node Layer"===e.name),"[0]");if(null===s)throw new Error("No tile layer in map "+e);if(null===u)throw new Error("No object layer in map "+e);if(null===c)throw new Error("No node layer in map "+e);const h=s.data.map(e=>{if(!(e in nn))throw new Error(e+" is not valid tile");const t=nn[e];return new vt(t.name,t.char,t.fgColor,t.bgColor,t.fgColorExplored,t.bgColorExplored,t.blocks,t.blocksSight)});for(let e=0;e<h.length;e+=t.width)r.push(h.slice(e,e+t.width));return u.objects.forEach(e=>{if(void 0!==e.point){if("object"!==e.type)throw new Error("Unrecognized object type "+e.type);{const t=yt(e,"objectType"),r=yt(e,"inventory"),o=yt(e,"levelName"),a=yt(e,"spellId"),s=yt(e,"pathName"),u=yt(e,"fallbackPosition"),c=yt(e,"event");if(null===t)throw new Error("No id for "+e.name);if("player"===t)l=[Math.floor(e.x/n),Math.floor(e.y/n)];else{const l=pt(t,Math.floor(e.x/n),Math.floor(e.y/n));if(null!==l.inventory&&null!==r&&""!==r&&r.split(",").forEach(e=>l.inventory.addItem(e)),null!==o&&null!==l.interactable&&void 0!==l.interactable.setLevel&&l.interactable.setLevel(o),null!==a&&null!==l.interactable&&void 0!==l.interactable.setSpell&&l.interactable.setSpell(a),null!==s&&null!==l.ai&&void 0!==l.ai.setPatrolPath&&l.ai.setPatrolPath(s),null!==u&&null!==l.ai&&void 0!==l.ai.setFallbackPosition&&l.ai.setFallbackPosition(u),"event_trigger"===t&&null!==c&&null!==l.trigger){l.trigger.eventName=c}i.push(l)}}}}),c.objects.forEach(e=>{const t=Math.floor(e.x/n),r=Math.floor(e.y/n);if("path_node"===e.type){const n=yt(e,"next"),i=yt(e,"pathName");o.set(e.id,new _t(i,t,r,n))}else{if("fallback_node"!==e.type)throw new Error("Unrecognized object type "+e.type);a.set(e.id,{x:t,y:r})}}),{map:r,playerLocation:l,objects:i,pathNodes:o,fallbackNodes:a}}(e);this.map=t,r.push(this.player),this.gameObjects=r,this.pathNodes=o,this.player.x=n[0],this.player.y=n[1],this.scheduler.clear(),this.gameObjects.forEach(e=>this.scheduler.add(e,!0)),i.gameEventEmitter.emit("level.loaded",e)}handleInput(){if(null===i.gameEventEmitter)throw new Error("Global gameEventEmitter cannot be null");if(null===this.player||null===this.player.inputHandler)throw new Error("Cannot handel input without a player or an input handler");if(this.state===Jt.Gameplay)return Pe.isDown("Escape")?(i.gameEventEmitter.emit("ui.openKeybinding"),void(this.state=Jt.PauseMenu)):void(this.currentCommand=this.player.inputHandler.handleInput(this.map,this.gameObjects));if(this.state===Jt.PauseMenu){if(Pe.isDown("Escape"))return i.gameEventEmitter.emit("ui.closeKeybinding"),this.state=Jt.Gameplay,void this.keyBindingMenu.resetState();if(null===this.player.inputHandler)return;this.keyBindingMenu.handleInput(this.player.inputHandler.keyCommands)}else if(this.state===Jt.InventoryMenu){if(Pe.isDown("Escape"))return i.gameEventEmitter.emit("ui.closeInventory"),this.state=Jt.Gameplay,void this.inventoryMenu.resetState();if(null===this.player.inventory)return;const e=this.inventoryMenu.handleInput(this.player.inventory.getItems());if(null!==e)switch(e.type){case en.HealSelf:case en.AddManaSelf:case en.ClairvoyanceScroll:case en.HasteSelf:case en.WildDamageScroll:this.state=Jt.Gameplay,this.currentCommand=new Te(e.id,null,this.map,this.gameObjects);break;case en.DamageScroll:case en.SlowOther:case en.ConfuseScroll:if(this.state=Jt.Gameplay,null===this.player.inputHandler)break;this.player.inputHandler.itemForTarget=e,this.player.inputHandler.state=Me.Target;break;default:Le(e.type)}}else if(this.state===Jt.SpellMenu){if(Pe.isDown("Escape"))return i.gameEventEmitter.emit("ui.closeSpells"),this.state=Jt.Gameplay,void this.spellSelectionMenu.resetState();if(null===this.player.fighter)return;const e=this.spellSelectionMenu.handleInput(this.player.fighter.getKnownSpells());if(null!==e)switch(e.type){case tn.Effect:case tn.HealSelf:case tn.Passive:case tn.WildDamage:this.state=Jt.Gameplay,this.currentCommand=new ke(e.id,null,this.map,this.gameObjects);break;case tn.DamageOther:if(this.state=Jt.Gameplay,null===this.player.inputHandler)break;this.player.inputHandler.spellForTarget=e,this.player.inputHandler.state=Me.Target;break;default:Le(e.type)}}else this.state===Jt.OpeningCinematic?Pe.isDown("Enter")&&(this.loadLevel("forrest_001"),this.state=Jt.Gameplay,i.gameEventEmitter.emit("tutorial.start")):this.state===Jt.WinCinematic?Pe.isDown("Enter")&&(this.reset(),this.state=Jt.Gameplay):this.state===Jt.LoseCinematic&&Pe.isDown("Enter")&&(this.reset(),this.state=Jt.Gameplay)}mainLoop(e){i.animationFrameID=window.requestAnimationFrame(this.mainLoop.bind(this)),this.deltaTime=e-this.lastTimestamp,this.lastTimestamp=e,null===this.currentActor&&(this.currentActor=this.scheduler.next()),null!==this.currentActor&&null===this.currentCommand&&(this.currentActor===this.player?(this.handleInput(),this.totalTurns++):this.processAI&&(this.currentCommand=this.currentActor.act(this.map,this.gameObjects,this.pathNodes))),null!==this.currentCommand&&null!==this.currentActor&&this.currentCommand.execute(this.deltaTime,this.currentActor),null!==this.currentCommand&&this.currentCommand.isFinished()&&(this.currentCommand.usedTurn()&&(this.currentActor=this.scheduler.next()),this.currentCommand=null),(null===this.player.fighter||this.player.fighter.getEffectiveStats().hp<=0)&&(this.state=Jt.LoseCinematic),this.render(),Pe.clearInputs()}addObject(e){this.gameObjects.push(e),this.scheduler.add(this.gameObjects[this.gameObjects.length-1],!0)}removeObject(e){this.gameObjects.splice(this.gameObjects.indexOf(e),1),this.scheduler.remove(e)}getTurnNumber(){return this.totalTurns}},i.window.Game=i.Game,i.window.giveAllItems=function(){if(null===i.Game)throw new Error("Global game object is null");if(null===i.Game.player.inventory)throw new Error("Global player inventory is null");for(const e in on)i.Game.player.inventory.addItem(e)},i.window.giveAllSpells=function(){if(null===i.Game)throw new Error("Global game object is null");if(null===i.Game.player.fighter)throw new Error("Global player inventory is null");for(const e in an)i.Game.player.fighter.addSpellById(e)},i.window.toggleAI=function(){if(null===i.Game)throw new Error("Global game object is null");i.Game.processAI=!i.Game.processAI},i.window.togglePlayerFOV=function(){if(null===i.Game)throw new Error("Global game object is null");i.Game.isLightingEnabled=!i.Game.isLightingEnabled},i.window.startGameLoop=function(){if(null===i.Game)throw new Error("Global game object is null");null===i.animationFrameID&&(i.animationFrameID=window.requestAnimationFrame(i.Game.mainLoop.bind(i.Game)))},i.window.stopGameLoop=function(){null!==i.animationFrameID&&(window.cancelAnimationFrame(i.animationFrameID),i.animationFrameID=null)},i.Game.startGameplay()}]);